<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-web/nodejs/nodejs-faq" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.1"><title data-rh=true>NodeJS FAQ | Wener Live & Life</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://wener.me/notes/web/nodejs/faq /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="NodeJS FAQ | Wener Live & Life"/><meta data-rh=true name=description content="- 持久化 DB 存储是 NodeJS 的弱项"/><meta data-rh=true property=og:description content="- 持久化 DB 存储是 NodeJS 的弱项"/><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://wener.me/notes/web/nodejs/faq /><link data-rh=true rel=alternate href=https://wener.me/notes/web/nodejs/faq hreflang=en /><link data-rh=true rel=alternate href=https://wener.me/notes/web/nodejs/faq hreflang=x-default /><link data-rh=true rel=preconnect href=https://37P8DMWBKF-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://wener.me/notes/web/","name":"Web","position":1},{"@type":"ListItem","item":"https://wener.me/notes/web/nodejs/","name":"NodeJS","position":2},{"@type":"ListItem","item":"https://wener.me/notes/web/nodejs/faq","name":"NodeJS FAQ","position":3}]}</script><link rel=alternate type=application/rss+xml href=/story/rss.xml title="Wener Live & Life RSS Feed"><link rel=alternate type=application/atom+xml href=/story/atom.xml title="Wener Live & Life Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script><link rel=search type=application/opensearchdescription+xml title="Wener Live & Life" href=/opensearch.xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css><script src=https://static.cloudflareinsights.com/beacon.min.js async data-cf-beacon='{"token": "e9a1b931103044f3940ee67b78c7df70"}' defer></script><link rel=stylesheet href=/assets/css/styles.fa221ee1.css /><script src=/assets/js/runtime~main.1c95f9ff.js defer></script><script src=/assets/js/main.8891074e.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_jKDA href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/wener-logo-head.svg alt="Wener Logo" class="themedComponent_j2y5 themedComponent--light_v877"/><img src=/img/wener-logo-head.svg alt="Wener Logo" class="themedComponent_j2y5 themedComponent--dark_PUQY"/></div><b class="navbar__title text--truncate">Wener</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/notes>笔记</a><a class="navbar__item navbar__link" href=/story>故事</a><a class="navbar__item navbar__link" href=/notes/howto/network/dns-prevent-spoofing>指南</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/wenerme/wener target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_kUGX><use href=#theme-svg-external-link /></svg></a><div class="toggle_N7Mq colorModeToggle_vh_y"><button class="clean-btn toggleButton_PaHe toggleButtonDisabled_RC4w" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 lightToggleIcon_M1mU"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 darkToggleIcon_sEdo"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 systemToggleIcon_cOyE"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_d_Bn><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_c22C"><div class=docsWrapper_oymo><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ZPA9" type=button></button><div class=docRoot_ng2Q><aside class="theme-doc-sidebar-container docSidebarContainer_nyHU"><div class=sidebarViewport_rLoj><div class=sidebar_TmDF><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jRin"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/notes><span title=笔记 class=linkLabel_JPPZ>笔记</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/adobe/photoshop><span title=adobe class=categoryLinkLabel_RkOu>adobe</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/ai><span title=AI class=categoryLinkLabel_RkOu>AI</span></a><button aria-label="Expand sidebar category 'AI'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/algorithm><span title=算法 class=categoryLinkLabel_RkOu>算法</span></a><button aria-label="Expand sidebar category '算法'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/blockchain><span title=区块链 class=categoryLinkLabel_RkOu>区块链</span></a><button aria-label="Expand sidebar category '区块链'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/cn><span title=CN class=categoryLinkLabel_RkOu>CN</span></a><button aria-label="Expand sidebar category 'CN'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/courses><span title=课程 class=categoryLinkLabel_RkOu>课程</span></a><button aria-label="Expand sidebar category '课程'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/culture><span title=文化 class=categoryLinkLabel_RkOu>文化</span></a><button aria-label="Expand sidebar category '文化'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/db><span title=数据库 class=categoryLinkLabel_RkOu>数据库</span></a><button aria-label="Expand sidebar category '数据库'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/dev><span title=开发 class=categoryLinkLabel_RkOu>开发</span></a><button aria-label="Expand sidebar category '开发'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/devops><span title=DevOps class=categoryLinkLabel_RkOu>DevOps</span></a><button aria-label="Expand sidebar category 'DevOps'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/economics><span title=经济学 class=categoryLinkLabel_RkOu>经济学</span></a><button aria-label="Expand sidebar category '经济学'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/electrical><span title=电学基础 class=categoryLinkLabel_RkOu>电学基础</span></a><button aria-label="Expand sidebar category '电学基础'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/embedded/arduino><span title=embedded class=categoryLinkLabel_RkOu>embedded</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/evolve><span title=自我成长 class=categoryLinkLabel_RkOu>自我成长</span></a><button aria-label="Expand sidebar category '自我成长'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/hardware><span title=硬件 class=categoryLinkLabel_RkOu>硬件</span></a><button aria-label="Expand sidebar category '硬件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/healthcare><span title=健康 class=categoryLinkLabel_RkOu>健康</span></a><button aria-label="Expand sidebar category '健康'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/howto/network/dns-prevent-spoofing><span title=howto class=categoryLinkLabel_RkOu>howto</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/java><span title=Java class=categoryLinkLabel_RkOu>Java</span></a><button aria-label="Expand sidebar category 'Java'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/languages><span title=语言 class=categoryLinkLabel_RkOu>语言</span></a><button aria-label="Expand sidebar category '语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/notes/linguistics><span title=Linguistics class=linkLabel_JPPZ>Linguistics</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/math><span title=数学 class=categoryLinkLabel_RkOu>数学</span></a><button aria-label="Expand sidebar category '数学'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/mgmt><span title=管理 class=categoryLinkLabel_RkOu>管理</span></a><button aria-label="Expand sidebar category '管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/network/application/dict><span title=network class=categoryLinkLabel_RkOu>network</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/ops><span title=运维 class=categoryLinkLabel_RkOu>运维</span></a><button aria-label="Expand sidebar category '运维'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/os><span title=操作系统 class=categoryLinkLabel_RkOu>操作系统</span></a><button aria-label="Expand sidebar category '操作系统'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/philosophy><span title=理念 class=categoryLinkLabel_RkOu>理念</span></a><button aria-label="Expand sidebar category '理念'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/photography><span title=摄影 class=categoryLinkLabel_RkOu>摄影</span></a><button aria-label="Expand sidebar category '摄影'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/platform><span title=平台 class=categoryLinkLabel_RkOu>平台</span></a><button aria-label="Expand sidebar category '平台'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/psychology/mbti><span title=psychology class=categoryLinkLabel_RkOu>psychology</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/queue><span title=Queue class=categoryLinkLabel_RkOu>Queue</span></a><button aria-label="Expand sidebar category 'Queue'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/security><span title=安全 class=categoryLinkLabel_RkOu>安全</span></a><button aria-label="Expand sidebar category '安全'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/service><span title=服务 class=categoryLinkLabel_RkOu>服务</span></a><button aria-label="Expand sidebar category '服务'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/software><span title=软件 class=categoryLinkLabel_RkOu>软件</span></a><button aria-label="Expand sidebar category '软件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/std><span title=标准数据 class=categoryLinkLabel_RkOu>标准数据</span></a><button aria-label="Expand sidebar category '标准数据'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/voip><span title=VoIP class=categoryLinkLabel_RkOu>VoIP</span></a><button aria-label="Expand sidebar category 'VoIP'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--active" href=/notes/web><span title=Web class=categoryLinkLabel_RkOu>Web</span></a><button aria-label="Collapse sidebar category 'Web'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/app><span title="Web APP" class=linkLabel_JPPZ>Web APP</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/browser><span title=浏览器 class=categoryLinkLabel_RkOu>浏览器</span></a><button aria-label="Expand sidebar category '浏览器'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/cdn><span title=CDN class=linkLabel_JPPZ>CDN</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/chart><span title="Web Charting" class=linkLabel_JPPZ>Web Charting</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/cookie><span title=Cookie class=linkLabel_JPPZ>Cookie</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/cors><span title=CORS class=linkLabel_JPPZ>CORS</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/deno><span title=deno class=categoryLinkLabel_RkOu>deno</span></a><button aria-label="Expand sidebar category 'deno'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/web/design/color><span title=design class=categoryLinkLabel_RkOu>design</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/dev><span title="Web (Frontend) Dev" class=categoryLinkLabel_RkOu>Web (Frontend) Dev</span></a><button aria-label="Expand sidebar category 'Web (Frontend) Dev'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/dom><span title=DOM class=categoryLinkLabel_RkOu>DOM</span></a><button aria-label="Expand sidebar category 'DOM'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/web/domain/datastore><span title=domain class=categoryLinkLabel_RkOu>domain</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/editor><span title=编辑器 class=categoryLinkLabel_RkOu>编辑器</span></a><button aria-label="Expand sidebar category '编辑器'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/fancy><span title="Fancy UI" class=linkLabel_JPPZ>Fancy UI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/favicon><span title=favicon class=linkLabel_JPPZ>favicon</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/web/framework/alpinejs><span title=framework class=categoryLinkLabel_RkOu>framework</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/graphics><span title=Graphical class=linkLabel_JPPZ>Graphical</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/html><span title=HTML class=categoryLinkLabel_RkOu>HTML</span></a><button aria-label="Expand sidebar category 'HTML'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/web/icon/fontawesome><span title=icon class=categoryLinkLabel_RkOu>icon</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/jsdelivr><span title=jsdelivr class=linkLabel_JPPZ>jsdelivr</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/jspm><span title=JSPM class=linkLabel_JPPZ>JSPM</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/web/media/player><span title=media class=categoryLinkLabel_RkOu>media</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--active" tabindex=0 href=/notes/web/nodejs><span title=NodeJS class=categoryLinkLabel_RkOu>NodeJS</span></a><button aria-label="Collapse sidebar category 'NodeJS'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/bundle><span title="Web Bundlers" class=linkLabel_JPPZ>Web Bundlers</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/corepack><span title=corepack class=linkLabel_JPPZ>corepack</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/drizzle><span title=drizzle class=linkLabel_JPPZ>drizzle</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/fastify><span title=fastify class=linkLabel_JPPZ>fastify</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/ffi-napi><span title=ffi-napi class=linkLabel_JPPZ>ffi-napi</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/graphile-worker><span title=graphile-worker class=linkLabel_JPPZ>graphile-worker</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/jsr><span title=JSR class=linkLabel_JPPZ>JSR</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/nodejs/mikro-orm><span title=mikro-orm class=categoryLinkLabel_RkOu>mikro-orm</span></a><button aria-label="Expand sidebar category 'mikro-orm'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/node-gyp><span title=node-gyp class=linkLabel_JPPZ>node-gyp</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/awesome><span title="Nodejs Awesome" class=linkLabel_JPPZ>Nodejs Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/cls><span title="NodeJS CLS" class=linkLabel_JPPZ>NodeJS CLS</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/debug><span title=Debug class=linkLabel_JPPZ>Debug</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/notes/web/nodejs/faq><span title="NodeJS FAQ" class=linkLabel_JPPZ>NodeJS FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/version><span title="NodeJS 版本" class=linkLabel_JPPZ>NodeJS 版本</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/nodemon><span title=nodemon class=linkLabel_JPPZ>nodemon</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/npm-faq><span title="NPM FAQ" class=linkLabel_JPPZ>NPM FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/npm-version><span title="NPM Version" class=linkLabel_JPPZ>NPM Version</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/npm><span title="NPM - Registry" class=linkLabel_JPPZ>NPM - Registry</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/npmrc><span title=npmrc class=linkLabel_JPPZ>npmrc</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/nvm><span title=nvm class=linkLabel_JPPZ>nvm</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/oidc-provider><span title=oidc-provider class=linkLabel_JPPZ>oidc-provider</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/package.json><span title=package.json class=linkLabel_JPPZ>package.json</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/pino><span title=pino class=linkLabel_JPPZ>pino</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/rush><span title=Rush class=linkLabel_JPPZ>Rush</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/sequelize><span title=sequelize class=linkLabel_JPPZ>sequelize</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/ts-node><span title=ts-node class=linkLabel_JPPZ>ts-node</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/tsx><span title=tsx class=linkLabel_JPPZ>tsx</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/typeorm><span title=typeorm class=linkLabel_JPPZ>typeorm</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/umzug><span title=umzug class=linkLabel_JPPZ>umzug</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/undici><span title=undici class=linkLabel_JPPZ>undici</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/ws><span title=ws class=linkLabel_JPPZ>ws</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/yarn-version><span title="yarn version" class=linkLabel_JPPZ>yarn version</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/nodejs/yarn><span title=Yarn class=linkLabel_JPPZ>Yarn</span></a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/open-graph><span title="Open Graph" class=linkLabel_JPPZ>Open Graph</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/react><span title=React class=categoryLinkLabel_RkOu>React</span></a><button aria-label="Expand sidebar category 'React'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/robots.txt><span title=robots.txt class=linkLabel_JPPZ>robots.txt</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/web/script/js><span title=script class=categoryLinkLabel_RkOu>script</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/spec><span title=规范 class=categoryLinkLabel_RkOu>规范</span></a><button aria-label="Expand sidebar category '规范'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/sse><span title="Server-Sent Events" class=linkLabel_JPPZ>Server-Sent Events</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/style><span title=Style class=categoryLinkLabel_RkOu>Style</span></a><button aria-label="Expand sidebar category 'Style'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/web/ui/font><span title=ui class=categoryLinkLabel_RkOu>ui</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/awesome><span title="Web Awesome" class=linkLabel_JPPZ>Web Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/faq><span title="Web FAQ" class=linkLabel_JPPZ>Web FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/vitals><span title=vitals class=linkLabel_JPPZ>vitals</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/webcomponent-awesome><span title="WebComponent Awesome" class=linkLabel_JPPZ>WebComponent Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/webcrypto><span title=WebCrypto class=linkLabel_JPPZ>WebCrypto</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/webpack><span title=Webpack class=linkLabel_JPPZ>Webpack</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/web/webrtc><span title=WebRTC class=categoryLinkLabel_RkOu>WebRTC</span></a><button aria-label="Expand sidebar category 'WebRTC'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/web/websocket><span title=WebSocket class=linkLabel_JPPZ>WebSocket</span></a></ul></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_NY7h"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_c8nQ><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_GAGP><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_YQ1L"><div class=docItemContainer_Wjg4><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_tiqF" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_WTWT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/notes/web><span>Web</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/notes/web/nodejs><span>NodeJS</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>NodeJS FAQ</span></ul></nav><div class="tocCollapsible_GvsH theme-doc-toc-mobile tocMobile_qJgM"><button type=button class="clean-btn tocCollapsibleButton_LnP0">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>NodeJS FAQ</h1></header>
<ul>
<li>持久化 DB 存储是 NodeJS 的弱项
<ul>
<li>官方 正在尝试支持集成 SQLite
<ul>
<li>v22.5.0+</li>
<li><code>node:sqlite</code></li>
<li>--experimental-sqlite</li>
<li><a href=https://nodejs.org/api/sqlite.html target=_blank rel="noopener noreferrer">Node.js SQLite API</a></li>
</ul>
</li>
<li>纯 JS 没有好的存储实现</li>
<li>SQLite 依赖 addon</li>
<li>SQLite over WASM 还不成熟</li>
<li><a href=https://github.com/knex/knex/issues/6162 target=_blank rel="noopener noreferrer">knex#6162</a></li>
</ul>
</li>
<li>FFI 是 NodeJS 的弱项
<ul>
<li>可以尝试 bun:ffi</li>
<li><a href=https://github.com/zhangyuang/node-ffi-rs target=_blank rel="noopener noreferrer">zhangyuang/node-ffi-rs</a>
<ul>
<li>MIT, Rust, JS</li>
</ul>
</li>
<li><a href=https://github.com/Koromix/koffi target=_blank rel="noopener noreferrer">Koromix/koffi</a>
<ul>
<li>source <a href=https://github.com/Koromix/rygel/tree/master/src/koffi target=_blank rel="noopener noreferrer">https://github.com/Koromix/rygel/tree/master/src/koffi</a></li>
</ul>
</li>
<li><a href=https://github.com/nodejs/node/pull/46905 target=_blank rel="noopener noreferrer">nodejs/node#46905</a> ffi implementation</li>
<li><a href=https://github.com/nodejs/node/issues/46233 target=_blank rel="noopener noreferrer">nodejs/node#46233 Reconsider adding FFI to the core</a>
<ul>
<li>tinycc does not support all of the platforms that node does</li>
</ul>
</li>
</ul>
</li>
<li><code>import.meta.main</code>
<ul>
<li><a href=https://github.com/nodejs/node/pull/32223 target=_blank rel="noopener noreferrer">nodejs/node#32223</a></li>
<li>以前 <code>require.main</code></li>
<li><code>module === process.mainModule</code></li>
</ul>
</li>
<li>NODE_COMPILE_CACHE</li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">npx envinfo --binaries --system</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># native 的 module</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">find node_modules -name '*.node'</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=typescript>typescript<a href=#typescript class=hash-link aria-label="Direct link to typescript" title="Direct link to typescript" translate=no>​</a></h2>
<ul>
<li>2024年4月 Node v22+ 支持直接运行 typescript
<ul>
<li><code>--experimental-strip-types</code></li>
<li>注意只是 strip types</li>
<li>不支持 enum, namespace, experimentalDecorators, emitDecoratorMetadata 等需要 transpile 的特性</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=env>env<a href=#env class=hash-link aria-label="Direct link to env" title="Direct link to env" translate=no>​</a></h2>
<ul>
<li>NODE_OPTIONS</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=tool-chain>Tool Chain<a href=#tool-chain class=hash-link aria-label="Direct link to Tool Chain" title="Direct link to Tool Chain" translate=no>​</a></h2>
<ul>
<li>静态项目 - ViteJS</li>
<li>前端项目 - NextJS+trpc+NestJS - 复杂项目
<ul>
<li>部分 NestJS 逻辑共用</li>
<li>输出 standalone 模式 - 直接拷贝到容器即可</li>
</ul>
</li>
<li>后端项目 - NestJS+fastify
<ul>
<li>开发: ts-node --swc --esm --transpileOnly --watch src/main.ts
<ul>
<li>tsx 不支持 decorator，不然可以用 tsx</li>
</ul>
</li>
<li>构建: esbuild --bundle --external=sharp src/main.ts
<ul>
<li>输出一个 js 放到容器即可</li>
<li>注意加 tsc 插件处理 decorator</li>
</ul>
</li>
</ul>
</li>
<li>基础依赖
<ul>
<li>zod</li>
<li>valtio, zustand</li>
<li>daisyui, styled-components</li>
<li>dayjs</li>
</ul>
</li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">pnpm node --loader ts-node/esm --watch ./src/apps/ve-contract-server/main.ts</span><br/></span></code></pre></div></div>
<div class="language-json codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_Lwh4>tsconfig.json</div><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-json codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"ts-node"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"transpileOnly"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"swc"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"esm"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"files"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"experimentalSpecifierResolution"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"node"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=node-dev>Node Dev<a href=#node-dev class=hash-link aria-label="Direct link to Node Dev" title="Direct link to Node Dev" translate=no>​</a></h2>
<ul>
<li>ts+watch - tsx, ts-node, swc-node
<ul>
<li>+decorator
<ul>
<li>ts-node+swc</li>
</ul>
</li>
<li>+tsconfig.paths
<ul>
<li>tsx, ts-node+tsconfig-paths</li>
<li>+esm
<ul>
<li>tsx</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>目前还没有 esm+tsconfig.paths+decorator 的</li>
</ul>
<hr/>
<ul>
<li>ts-node+swc 问题
<ul>
<li>不加载 swcrc 导致 paths 无效 <a href=https://github.com/TypeStrong/ts-node/issues/1856 target=_blank rel="noopener noreferrer">https://github.com/TypeStrong/ts-node/issues/1856</a></li>
<li>pnpm patch 临时解决</li>
</ul>
</li>
<li>esbuild decorator 问题
<ul>
<li><a href=https://github.com/evanw/esbuild/issues/104 target=_blank rel="noopener noreferrer">https://github.com/evanw/esbuild/issues/104</a></li>
<li><a href=https://github.com/nuxt/nuxt/issues/21756 target=_blank rel="noopener noreferrer">https://github.com/nuxt/nuxt/issues/21756</a></li>
<li><a href=https://github.com/unjs/nitro/issues/1345 target=_blank rel="noopener noreferrer">https://github.com/unjs/nitro/issues/1345</a></li>
</ul>
</li>
<li>swc-node 处理 .ts 问题
<ul>
<li><a href=https://github.com/swc-project/swc-node/pull/744 target=_blank rel="noopener noreferrer">https://github.com/swc-project/swc-node/pull/744</a></li>
<li><a href=https://github.com/swc-project/swc-node/issues/710 target=_blank rel="noopener noreferrer">https://github.com/swc-project/swc-node/issues/710</a></li>
</ul>
</li>
<li>tsconfig-paths esm 问题
<ul>
<li><a href=https://github.com/dividab/tsconfig-paths/issues/243 target=_blank rel="noopener noreferrer">https://github.com/dividab/tsconfig-paths/issues/243</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=choose-pm>选择包管理器<a href=#choose-pm class=hash-link aria-label="Direct link to 选择包管理器" title="Direct link to 选择包管理器" translate=no>​</a></h2>
<blockquote>
<p>选择 pnpm</p>
</blockquote>
<ul>
<li>pnpm
<ul>
<li>速度快</li>
<li>使用 hardlink - 节省空间，速度快
<ul>
<li>如果在 wsl 可能用不了 hardlink，回退为 softlink 或者 copy 方式</li>
</ul>
</li>
<li>意外情况比较少</li>
<li>workspace 支持完善</li>
</ul>
</li>
<li>npm
<ul>
<li>node_modules 太大</li>
<li>安装慢</li>
<li>如果 pnpm 不兼容的情况可以考虑 npm</li>
</ul>
</li>
<li>yarn v1
<ul>
<li>比 npm 好一点 - 区别越来越小</li>
<li>支持 workspace</li>
</ul>
</li>
<li>yarn berry
<ul>
<li>很多工具不支持</li>
<li>pnp 方式生态推进慢</li>
<li>不建议使用</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=shebang>shebang<a href=#shebang class=hash-link aria-label="Direct link to shebang" title="Direct link to shebang" translate=no>​</a></h2>
<p><strong>CJS</strong></p>
<div class="language-ts codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-ts codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token hashbang comment" style="color:rgb(105, 112, 152);font-style:italic">#!/usr/bin/env node</span><br/></span></code></pre></div></div>
<p><strong>ESM</strong></p>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">#!/usr/bin/env bash</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">":" //# comment</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exec /usr/bin/env node --input-type=module - "$@" &lt; "$0"</span><br/></span></code></pre></div></div>
<p><strong>NodeJS 20.10+</strong></p>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">node --experimental-default-type=module cli</span><br/></span></code></pre></div></div>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">node </span><span class="token operator" style="color:rgb(137, 221, 255)">--</span><span class="token plain">input</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">type</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">module </span><span class="token operator" style="color:rgb(137, 221, 255)">--</span><span class="token plain">eval </span><span class="token string" style="color:rgb(195, 232, 141)">'console.log("Hello, world!")'</span><br/></span></code></pre></div></div>
<ul>
<li>ESM
<ul>
<li>增加 mjs 文件后缀即可</li>
<li><a href=https://github.com/nodejs/node/issues/49444 target=_blank rel="noopener noreferrer">https://github.com/nodejs/node/issues/49444</a></li>
<li><a href=https://github.com/orgs/nodejs/discussions/37857 target=_blank rel="noopener noreferrer">https://github.com/orgs/nodejs/discussions/37857</a></li>
</ul>
</li>
<li>--experimental-default-type</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=performance>performance<a href=#performance class=hash-link aria-label="Direct link to performance" title="Direct link to performance" translate=no>​</a></h2>
<ul>
<li>UV_THREADPOOL_SIZE=4
<ul>
<li>最大 1024</li>
</ul>
</li>
<li>knex
<ul>
<li>pool min:2, max: 10</li>
</ul>
</li>
<li>fastify</li>
<li><a href=https://github.com/fastify/fast-json-stringify target=_blank rel="noopener noreferrer">fast-json-stringify</a></li>
<li>find-my-way</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=musl>musl<a href=#musl class=hash-link aria-label="Direct link to musl" title="Direct link to musl" translate=no>​</a></h2>
<ul>
<li>非官方构建 <a href=https://unofficial-builds.nodejs.org/download/release/v20.11.1/ target=_blank rel="noopener noreferrer">https://unofficial-builds.nodejs.org/download/release/v20.11.1/</a>
<ul>
<li>构建仓库 <a href=https://github.com/nodejs/unofficial-builds target=_blank rel="noopener noreferrer">nodejs/unofficial-builds</a></li>
<li>只有 x64-musl</li>
</ul>
</li>
<li>arm64/aarch64
<ul>
<li>暂无</li>
<li><a href=https://github.com/nodejs/node/pull/45756 target=_blank rel="noopener noreferrer">https://github.com/nodejs/node/pull/45756</a></li>
<li><a href=https://github.com/nodejs/unofficial-builds/pull/59 target=_blank rel="noopener noreferrer">https://github.com/nodejs/unofficial-builds/pull/59</a></li>
<li><a href=https://github.com/nodejs/unofficial-builds/issues/104 target=_blank rel="noopener noreferrer">nodejs/unofficial-builds#104</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=sqlite3>sqlite3<a href=#sqlite3 class=hash-link aria-label="Direct link to sqlite3" title="Direct link to sqlite3" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># ./node_modules/sqlite3/build/Release/node_sqlite3.node</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">find ./node_modules/sqlite3/ -iname '*.node'</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">npm install sqlite3 --build-from-source</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=source-map>source map<a href=#source-map class=hash-link aria-label="Direct link to source map" title="Direct link to source map" translate=no>​</a></h2>
<ul>
<li>sourcemap 大了过后非常慢</li>
<li>例如: main.mjs 10mb, main.mjs.map 20mb
<ul>
<li>--enable-source-maps 启动 40s</li>
<li>直接启动 2s</li>
<li><code>-r @cspotcode/source-map-support/register</code></li>
</ul>
</li>
<li>NodeJS 12.12.0 <a href=https://nodejs.org/docs/latest-v16.x/api/cli.html#--enable-source-maps target=_blank rel="noopener noreferrer">--enable-source-maps</a></li>
<li><a href=https://github.com/evanw/node-source-map-support target=_blank rel="noopener noreferrer">https://github.com/evanw/node-source-map-support</a></li>
<li><a href=https://github.com/cspotcode/source-map-performance-demo#example-output target=_blank rel="noopener noreferrer">https://github.com/cspotcode/source-map-performance-demo#example-output</a></li>
<li><a href=https://github.com/cspotcode/node-source-map-support target=_blank rel="noopener noreferrer">https://github.com/cspotcode/node-source-map-support</a>
<ul>
<li>性能更好</li>
</ul>
</li>
<li>esbuild
<ul>
<li>排除 node_modules <a href=https://github.com/evanw/esbuild/issues/1685#issuecomment-944916409 target=_blank rel="noopener noreferrer">https://github.com/evanw/esbuild/issues/1685#issuecomment-944916409</a></li>
<li>排除 sourcesContent
<ul>
<li>包含完整 source code - 如果只用于 stack trace 则不需要</li>
<li><a href=https://esbuild.github.io/api/#sources-content target=_blank rel="noopener noreferrer">https://esbuild.github.io/api/#sources-content</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="language-ts codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-ts codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token keyword" style=font-style:italic>import</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'@cspotcode/source-map-support/register'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=cjs-__dirname>cjs <code>__dirname</code><a href=#cjs-__dirname class=hash-link aria-label="Direct link to cjs-__dirname" title="Direct link to cjs-__dirname" translate=no>​</a></h2>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token keyword module" style=font-style:italic>import</span><span class="token plain"> </span><span class="token imports operator" style="color:rgb(137, 221, 255)">*</span><span class="token imports"> </span><span class="token imports keyword module" style=font-style:italic>as</span><span class="token imports"> url</span><span class="token plain"> </span><span class="token keyword module" style=font-style:italic>from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'url'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> __filename </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fileURLToPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword module" style=font-style:italic>import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> __dirname </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fileURLToPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style=font-style:italic>new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">URL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'.'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword module" style=font-style:italic>import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=直接执行-typescript-或-esnext>直接执行 typescript 或 esnext<a href=#直接执行-typescript-或-esnext class=hash-link aria-label="Direct link to 直接执行 typescript 或 esnext" title="Direct link to 直接执行 typescript 或 esnext" translate=no>​</a></h2>
<ul>
<li>tsx</li>
<li>ts-node</li>
<li>babel</li>
<li>tsm</li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># tsx</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># ==========</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">npx tsx app.ts</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node --loader tsx app.ts</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node --loader @esbuild-kit/esm-loader app.ts</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># ts-node</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># ==========</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node -r @ts-node/register app.ts</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># tsconfig 里的 path 能生效</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node -r @ts-node/register -r tsconfig-paths/register app.ts</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># babel</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># ==========</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node -r @babel/register app.js</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=package-openexr-required-by-vips-not-found>Package 'OpenEXR', required by 'vips', not found<a href=#package-openexr-required-by-vips-not-found class=hash-link aria-label="Direct link to Package 'OpenEXR', required by 'vips', not found" title="Direct link to Package 'OpenEXR', required by 'vips', not found" translate=no>​</a></h2>
<p>找不到 brew 安装的 pkgconfig</p>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">PKG_CONFIG_PATH=/usr/local/opt/vips/lib/pkgconfig:/usr/local/opt/glib/lib/pkgconfig:/usr/local/opt/openexr/lib/pkgconfig:/usr/local/opt/imath/lib/pkgconfig npm i</span><br/></span></code></pre></div></div>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">/usr/local/include/vips/vips8:35:10: fatal error: 'glib-object.h' file not found</span><br/></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># export CC</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">export CXX="$(which g++) -I/usr/local/opt/glib/include/glib-2.0/ -I/usr/local/opt/glib/lib/glib-2.0/include/"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">export CXX="$(which g++) $(pkg-config --cflags glib-2.0)"</span><br/></span></code></pre></div></div>
<ul>
<li>sharp -> libvips version 8.12.2+ is required</li>
<li>ubuntu 22.04 jammy
<ul>
<li><a href="https://packages.ubuntu.com/search?searchon=sourcenames&keywords=vips" target=_blank rel="noopener noreferrer">https://packages.ubuntu.com/search?searchon=sourcenames&keywords=vips</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=libtool-unrecognized-option--static-when-building>libtool: unrecognized option -static when building<a href=#libtool-unrecognized-option--static-when-building class=hash-link aria-label="Direct link to libtool: unrecognized option -static when building" title="Direct link to libtool: unrecognized option -static when building" translate=no>​</a></h2>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">libtool:   error: unrecognised option: '-static'</span><br/></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">brew unlink libtool</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">rm -rf /usr/local/bin/libtool</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">which libtool</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># 如果添加了 /usr/local/opt/libtool/libexec/gnubin</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">export PATH=$(echo $PATH | sed -r 's/:[^:]*?libtool[^:]*:/:/')</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=require-of-es-modules-is-not-supported>require() of ES modules is not supported<a href=#require-of-es-modules-is-not-supported class=hash-link aria-label="Direct link to require() of ES modules is not supported" title="Direct link to require() of ES modules is not supported" translate=no>​</a></h2>
<p>尝试降级依赖</p>
<ul>
<li>ts 可配置 "module": "esnext"</li>
<li>然后 package.json 修改 type: module
<ul>
<li>影响很大</li>
</ul>
</li>
<li>参考
<ul>
<li><a href=https://github.com/node-fetch/node-fetch/issues/1266 target=_blank rel="noopener noreferrer">node-fetch/node-fetch#1266</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=nodejs-v18-fetch-proxy>NodeJS v18 fetch proxy<a href=#nodejs-v18-fetch-proxy class=hash-link aria-label="Direct link to NodeJS v18 fetch proxy" title="Direct link to NodeJS v18 fetch proxy" translate=no>​</a></h2>
<ul>
<li>不支持 Agent</li>
<li>用 node-fetch 或者 undici</li>
</ul>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> </span><span class="token maybe-class-name">Undici</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">requuire</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'undici'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> </span><span class="token maybe-class-name">ProxyAgent</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Undici</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">ProxyAgent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> setGlobalDispatcher </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Undici</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">setGlobalDispatcher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setGlobalDispatcher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style=font-style:italic>new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ProxyAgent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">HTTP_PROXY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<ul>
<li><a href=https://github.com/nodejs/node/issues/43187 target=_blank rel="noopener noreferrer">node#43187</a></li>
<li><a href=https://github.com/gajus/global-agent/issues/52#issuecomment-1134525621 target=_blank rel="noopener noreferrer">gajus/global-agent#52</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=requestinit-duplex-option-is-required-when-sending-a-body>RequestInit: duplex option is required when sending a body<a href=#requestinit-duplex-option-is-required-when-sending-a-body class=hash-link aria-label="Direct link to RequestInit: duplex option is required when sending a body" title="Direct link to RequestInit: duplex option is required when sending a body" translate=no>​</a></h2>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">TypeError: Cannot set property duplex of #&lt;Request> which has only a getter</span><br/></span></code></pre></div></div>
<div class="language-ts codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-ts codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token keyword" style=font-style:italic>let</span><span class="token plain"> init</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> RequestInit </span><span class="token operator" style="color:rgb(137, 221, 255)">&</span><span class="token plain"> Record</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">any</span><span class="token operator" style="color:rgb(137, 221, 255)">></span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token keyword" style=font-style:italic>get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">duplex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token keyword" style=font-style:italic>return</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'half'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<ul>
<li><a href=https://github.com/nodejs/node/issues/46221 target=_blank rel="noopener noreferrer">https://github.com/nodejs/node/issues/46221</a></li>
<li><a href=https://github.com/whatwg/fetch/issues/1254 target=_blank rel="noopener noreferrer">https://github.com/whatwg/fetch/issues/1254</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=critical-dependency-require-function-is-used-in-a-way-in-which-dependencies-cannot-be-statically-extracted>Critical dependency: require function is used in a way in which dependencies cannot be statically extracted<a href=#critical-dependency-require-function-is-used-in-a-way-in-which-dependencies-cannot-be-statically-extracted class=hash-link aria-label="Direct link to Critical dependency: require function is used in a way in which dependencies cannot be statically extracted" title="Direct link to Critical dependency: require function is used in a way in which dependencies cannot be statically extracted" translate=no>​</a></h2>
<p>检查下是不是 import 路径错误，可能因为 IDE 自动导入，指向了错误路径。</p>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=undefined-variable-module_name-in-bindinggyp-while-trying-to-load-bindinggyp>Undefined variable module_name in binding.gyp while trying to load binding.gyp<a href=#undefined-variable-module_name-in-bindinggyp-while-trying-to-load-bindinggyp class=hash-link aria-label="Direct link to Undefined variable module_name in binding.gyp while trying to load binding.gyp" title="Direct link to Undefined variable module_name in binding.gyp while trying to load binding.gyp" translate=no>​</a></h2>
<p>可能 npm 问题，使用 pnpm 构建没问题</p>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=custom-esm-loaders-is-an-experimental-feature-this-feature-could-change-at-any-time>Custom ESM Loaders is an experimental feature. This feature could change at any time<a href=#custom-esm-loaders-is-an-experimental-feature-this-feature-could-change-at-any-time class=hash-link aria-label="Direct link to Custom ESM Loaders is an experimental feature. This feature could change at any time" title="Direct link to Custom ESM Loaders is an experimental feature. This feature could change at any time" translate=no>​</a></h2>
<p>目前无法 supress 警告, 只能通过 require 注入避免</p>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">node --require suppress-experimental.cjs --loader tsx app.ts</span><br/></span></code></pre></div></div>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockTitle_Lwh4>suppress-experimental.cjs</div><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token string" style="color:rgb(195, 232, 141)">'use strict'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// When using the ESM loader Node.js prints either of the following warnings</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// - ExperimentalWarning: --experimental-loader is an experimental feature. This feature could change at any time</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// - ExperimentalWarning: Custom ESM Loaders is an experimental feature. This feature could change at any time</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Having this warning show up once is "fine" but it's also printed</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// for each Worker that is created so it ends up spamming stderr.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Since that doesn't provide any value we suppress the warning.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> originalEmit </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">emit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// @ts-expect-error - TS complains about the return type of originalEmit.apply</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">emit</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">name</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> data</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> </span><span class="token parameter spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token parameter">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token keyword control-flow" style=font-style:italic>if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    name </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">warning</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&&</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token keyword" style=font-style:italic>typeof</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">object</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&&</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">ExperimentalWarning</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&&</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">includes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">--experimental-loader</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">      data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">includes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">Custom ESM Loaders is an experimental feature</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token keyword control-flow" style=font-style:italic>return</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// return originalEmit.apply(process, arguments as unknown as Parameters&lt;typeof process.emit>);</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token keyword control-flow" style=font-style:italic>return</span><span class="token plain"> originalEmit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">apply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<ul>
<li><a href=https://github.com/nodejs/node/issues/30810 target=_blank rel="noopener noreferrer">https://github.com/nodejs/node/issues/30810</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=reached-heap-limit-allocation-failed---javascript-heap-out-of-memory>Reached heap limit Allocation failed - JavaScript heap out of memory<a href=#reached-heap-limit-allocation-failed---javascript-heap-out-of-memory class=hash-link aria-label="Direct link to Reached heap limit Allocation failed - JavaScript heap out of memory" title="Direct link to Reached heap limit Allocation failed - JavaScript heap out of memory" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">NODE_OPTIONS="--max-old-space-size=8192" eslint --fix</span><br/></span></code></pre></div></div>
<ul>
<li><code>DEBUG=*</code></li>
<li><code>DEBUG=typescript-eslint</code></li>
<li><code>TIMING=1</code></li>
<li>max-old-space-size
<ul>
<li>默认 4144MB</li>
</ul>
</li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># 获取当前内存限制</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node -e 'console.log(v8.getHeapStatistics().heap_size_limit/(1024*1024))'</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=ineffective-mark-compacts-near-heap-limit-allocation-failed---javascript-heap-out-of-memory>Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory<a href=#ineffective-mark-compacts-near-heap-limit-allocation-failed---javascript-heap-out-of-memory class=hash-link aria-label="Direct link to Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory" title="Direct link to Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory" translate=no>​</a></h2>
<ul>
<li>可增加</li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">node -e 'console.log(v8.getHeapStatistics().heap_size_limit/(1024*1024))'</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">NODE_OPTIONS="--max-old-space-size=8192" node -e 'console.log(v8.getHeapStatistics().heap_size_limit/(1024*1024))'</span><br/></span></code></pre></div></div>
<ul>
<li>2048</li>
<li>4096</li>
<li>4144</li>
<li>5120</li>
<li>6144</li>
<li>7168</li>
<li>8192</li>
<li>16384</li>
<li><a href=https://nodejs.org/api/cli.html#--max-old-space-sizesize-in-megabytes target=_blank rel="noopener noreferrer">Node.js CLI: max-old-space-size</a></li>
<li><a href=https://chromium.googlesource.com/v8/v8.git/+/refs/tags/10.3.129/src/heap/heap.cc#314 target=_blank rel="noopener noreferrer">V8 Heap Implementation</a></li>
<li><a href=/notes/web/browser/v8.md>v8</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=cant-resolve-pg-native>Can't resolve 'pg-native'<a href=#cant-resolve-pg-native class=hash-link aria-label="Direct link to Can't resolve 'pg-native'" title="Direct link to Can't resolve 'pg-native'" translate=no>​</a></h2>
<ul>
<li>用个假的模块替代，避免编译</li>
<li><a href=https://github.com/brianc/node-postgres/issues/838 target=_blank rel="noopener noreferrer">https://github.com/brianc/node-postgres/issues/838</a>
when using babel, pg-native is always required</li>
</ul>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// webpack</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword module" style=font-style:italic>export</span><span class="token plain"> </span><span class="token keyword module" style=font-style:italic>default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token literal-property property">resolve</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token literal-property property">alias</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">      </span><span class="token string-property property">'pg-native'</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">join</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'pg-native'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<p><strong>pg-native</strong></p>
<div class="language-json codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-json codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"name"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"pg-native"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"private"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"main"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"index.js"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br/></span></code></pre></div></div>
<div class="language-json codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-json codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"name"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"your-module"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"private"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"dependencies"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"pg"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"^8.3.3"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"pg-native"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"file:./modules/pg-native"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br/></span></code></pre></div></div>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword null nil" style=font-style:italic>null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=repl-load>REPL load<a href=#repl-load class=hash-link aria-label="Direct link to REPL load" title="Direct link to REPL load" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">node -i -e "$(&lt; rc.js)"</span><br/></span></code></pre></div></div>
<ul>
<li><code>.load</code>
<ul>
<li><a href=https://nodejs.org/api/repl.html#repl_design_and_features target=_blank rel="noopener noreferrer">REPL Design and Features</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=error0308010c-envelope-routinesunsupported>error:0308010C:digital envelope routines::unsupported<a href=#error0308010c-envelope-routinesunsupported class=hash-link aria-label="Direct link to error:0308010C:digital envelope routines::unsupported" title="Direct link to error:0308010C:digital envelope routines::unsupported" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">export NODE_OPTIONS=--openssl-legacy-provider</span><br/></span></code></pre></div></div>
<ul>
<li><a href=https://stackoverflow.com/questions/69692842 target=_blank rel="noopener noreferrer">StackOverflow: error:0308010C:digital envelope routines::unsupported</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=snapshot--compile>snapshot / compile<a href=#snapshot--compile class=hash-link aria-label="Direct link to snapshot / compile" title="Direct link to snapshot / compile" translate=no>​</a></h2>
<ul>
<li>使用 snapshot 加速启动
<ul>
<li>例如: main.mjs 10mb, main.mjs.map 20mb
<ul>
<li>--enable-source-maps 启动 40s</li>
<li>无 <code>enable-source-maps</code> 启动 2s</li>
</ul>
</li>
</ul>
</li>
<li>NODE_COMPILE_CACHE
<ul>
<li>v22.1.0+</li>
<li>支持 cjs & esm</li>
<li>当文件非常多的时候，目前可能没有 cache 所有内容 <a href=https://github.com/nodejs/help/issues/4484 target=_blank rel="noopener noreferrer">https://github.com/nodejs/help/issues/4484</a></li>
</ul>
</li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">echo "globalThis.foo = 'I am from the snapshot'" > snapshot.js</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node --snapshot-blob snapshot.blob --build-snapshot snapshot.js</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">echo "console.log(globalThis.foo)" > index.js</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node --snapshot-blob snapshot.blob index.js</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">echo "require('v8').startupSnapshot.setDeserializeMainFunction(() => console.log('I am from the snapshot'))" > snapshot.js</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node --snapshot-blob snapshot.blob --build-snapshot snapshot.js</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">node --snapshot-blob snapshot.blob</span><br/></span></code></pre></div></div>
<ul>
<li>不支持 ESM <a href=https://github.com/nodejs/help/issues/3981 target=_blank rel="noopener noreferrer">https://github.com/nodejs/help/issues/3981</a></li>
<li>RFC: speeding up Node.js startup using V8 snapshot <a href=https://github.com/nodejs/node/issues/17058 target=_blank rel="noopener noreferrer">#17058</a></li>
<li>Ideas for faster cold compiler start-up <a href=https://github.com/microsoft/TypeScript/issues/25658 target=_blank rel="noopener noreferrer">microsoft/TypeScript#25658</a></li>
<li><a href=https://github.com/zertosh/v8-compile-cache target=_blank rel="noopener noreferrer">zertosh/v8-compile-cache</a></li>
<li><a href=https://github.com/bytenode/bytenode target=_blank rel="noopener noreferrer">bytenode/bytenode</a>
<ul>
<li>编译为 v8 字节码</li>
<li>移除源码
<ul>
<li>Function.prototype.toString 失效</li>
</ul>
</li>
</ul>
</li>
<li>Package
<ul>
<li>pkg</li>
<li>ncc</li>
<li>nexe</li>
<li>NodeJS SAE</li>
</ul>
</li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">bytenode --compile server.js</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">bytenode server.jsc</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=fastify-vs-express>fastify vs express<a href=#fastify-vs-express class=hash-link aria-label="Direct link to fastify vs express" title="Direct link to fastify vs express" translate=no>​</a></h2>
<ul>
<li>fastify
<ul>
<li>更快
<ul>
<li>fast-json-stringify</li>
</ul>
</li>
<li>模块化</li>
<li>更易用</li>
</ul>
</li>
<li>express
<ul>
<li>更成熟？</li>
<li>monolithic</li>
<li>生态更大 - 功能更多</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=import-npm-global>import npm global<a href=#import-npm-global class=hash-link aria-label="Direct link to import npm global" title="Direct link to import npm global" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">export NODE_PATH=$(npm root --quiet -g)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=err_ossl_evp_unsupported>ERR_OSSL_EVP_UNSUPPORTED<a href=#err_ossl_evp_unsupported class=hash-link aria-label="Direct link to ERR_OSSL_EVP_UNSUPPORTED" title="Direct link to ERR_OSSL_EVP_UNSUPPORTED" translate=no>​</a></h2>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">Error: error:0308010C:digital envelope routines::unsupported</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    at new Hash (node:internal/crypto/hash:71:19)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    at Object.createHash (node:crypto:133:10)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    at BulkUpdateDecorator.hashFactory (~/node_modules/.pnpm/webpack@5.39.0_webpack-cli@4.7.2/node_modules/webpack/lib/util/createHash.js:145:18)</span><br/></span></code></pre></div></div>
<ul>
<li>pnpm 安装有问题，换 npm 后好了</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=getaddrinfo-enotfound-undefined>getaddrinfo ENOTFOUND undefined<a href=#getaddrinfo-enotfound-undefined class=hash-link aria-label="Direct link to getaddrinfo ENOTFOUND undefined" title="Direct link to getaddrinfo ENOTFOUND undefined" translate=no>​</a></h2>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">http://example.com</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=命令行获取-package-所在目录>命令行获取 package 所在目录<a href=#命令行获取-package-所在目录 class=hash-link aria-label="Direct link to 命令行获取 package 所在目录" title="Direct link to 命令行获取 package 所在目录" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">pnpm pwd</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">pnpm node -e 'process.stdout.write(path.resolve(__dirname))'</span><br/></span></code></pre></div></div>
<div class="language-makefile codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-makefile codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">PKG_ROOT </span><span class="token operator" style="color:rgb(137, 221, 255)">?=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">shell</span><span class="token plain"> pnpm node -e </span><span class="token string" style="color:rgb(195, 232, 141)">'process.stdout.write(path.resolve(__dirname))'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=ioredis-vs-redis>ioredis vs redis<a href=#ioredis-vs-redis class=hash-link aria-label="Direct link to ioredis vs redis" title="Direct link to ioredis vs redis" translate=no>​</a></h2>
<blockquote>
<p>⚠️ ioredis 在被 redis 收编后不在怎么维护</p>
</blockquote>
<ul>
<li>@redis/client
<ul>
<li>官方主推</li>
<li>开发相对活跃</li>
</ul>
</li>
<li>ioredis
<ul>
<li>更好用</li>
<li>接口更友好</li>
<li>更快</li>
<li>Is this package still actively maintained? <a href=https://github.com/redis/ioredis/issues/1870 target=_blank rel="noopener noreferrer">redis/ioredis#1870</a></li>
</ul>
</li>
<li>iovalkey
<ul>
<li>fork ioredis</li>
<li>目前开发还不太活跃</li>
<li><a href=https://github.com/valkey-io/iovalkey target=_blank rel="noopener noreferrer">valkey-io/iovalkey</a></li>
</ul>
</li>
<li><a href=https://www.reddit.com/r/node/comments/uymb7w/redis_vs_ioredis/ target=_blank rel="noopener noreferrer">Reddit: Redis vs IORedis</a></li>
<li><a href=https://ably.com/blog/migrating-from-node-redis-to-ioredis target=_blank rel="noopener noreferrer">Ably: Migrating from node-redis to ioredis</a>
<ul>
<li>ably 从 node-redis 迁移为 ioredis</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=the-operation-failed-for-an-operation-specific-reason-cipher-job-failed>The operation failed for an operation-specific reason: Cipher job failed<a href=#the-operation-failed-for-an-operation-specific-reason-cipher-job-failed class=hash-link aria-label="Direct link to The operation failed for an operation-specific reason: Cipher job failed" title="Direct link to The operation failed for an operation-specific reason: Cipher job failed" translate=no>​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=failed-to-execute-digest-on-subtlecrypto-2nd-argument-is-not-instance-of-arraybuffer-buffer-typedarray-or-dataview>Failed to execute 'digest' on 'SubtleCrypto': 2nd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.<a href=#failed-to-execute-digest-on-subtlecrypto-2nd-argument-is-not-instance-of-arraybuffer-buffer-typedarray-or-dataview class=hash-link aria-label="Direct link to Failed to execute 'digest' on 'SubtleCrypto': 2nd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView." title="Direct link to Failed to execute 'digest' on 'SubtleCrypto': 2nd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView." translate=no>​</a></h2>
<p>多半是传入了 undefined</p>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=detect-runtime>detect runtime<a href=#detect-runtime class=hash-link aria-label="Direct link to detect runtime" title="Direct link to detect runtime" translate=no>​</a></h2>
<ul>
<li>bun 也会设置 process.versions.node</li>
</ul>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">release</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 总是 node</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// bun</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword control-flow" style=font-style:italic>if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">versions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bun</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword control-flow" style=font-style:italic>if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style=font-style:italic>typeof</span><span class="token plain"> </span><span class="token maybe-class-name">Bun</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'undefined'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=unhandled>unhandled<a href=#unhandled class=hash-link aria-label="Direct link to unhandled" title="Direct link to unhandled" translate=no>​</a></h2>
<ul>
<li>uncaughtException</li>
</ul>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">process</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'unhandledRejection'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">reason</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=></span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'Unhandled Rejection at Promise'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> reason</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'uncaughtException'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> origin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=></span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">writeSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">stderr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">Caught exception: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">err</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)">\n</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">Exception origin: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">origin</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)">\n</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">ERROR</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=the-windows-1252-encoding-is-not-supported>The "windows-1252" encoding is not supported<a href=#the-windows-1252-encoding-is-not-supported class=hash-link aria-label='Direct link to The "windows-1252" encoding is not supported' title='Direct link to The "windows-1252" encoding is not supported' translate=no>​</a></h2>
<p>Throug</p>
<div class="language-js codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-js codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token keyword" style=font-style:italic>new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TextDecoder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'latin1'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># icu-data-en 不够</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># 11.53 MB / 29.38 MB</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">apk add icu-data-full</span><br/></span></code></pre></div></div>
<ul>
<li>nodejs latin1/windows-1252
<ul>
<li>需要完整的 icu-data</li>
<li><a href=https://github.com/nodejs/node/issues/28190 target=_blank rel="noopener noreferrer">https://github.com/nodejs/node/issues/28190</a></li>
</ul>
</li>
<li>参考
<ul>
<li><a href=https://www.npmjs.com/package/windows-1252 target=_blank rel="noopener noreferrer">npm:windows-1252</a>
<ul>
<li>检测编码</li>
<li>ansi_x3.4-1968, ascii, cp1252, cp819, csisolatin1, ibm819, iso-8859-1, iso-ir-100, iso8859-1, iso88591, iso_8859-1, iso_8859-1:1987, l1, latin1, us-ascii, windows-1252, x-cp1252</li>
</ul>
</li>
<li><a href=https://encoding.spec.whatwg.org/#windows-1252 target=_blank rel="noopener noreferrer">https://encoding.spec.whatwg.org/#windows-1252</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=download>Download<a href=#download class=hash-link aria-label="Direct link to Download" title="Direct link to Download" translate=no>​</a></h2>
<ul>
<li><a href=https://nodejs.org/download/release/latest-v20.x/win-x64/ target=_blank rel="noopener noreferrer">https://nodejs.org/download/release/latest-v20.x/win-x64/</a>
<ul>
<li>node.exe - 用于运行
<ul>
<li>static</li>
</ul>
</li>
<li>node.lib - 用于编译</li>
<li>node_pdb.7z</li>
<li>node_pdb.zip - 用于调试</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=shell-scripting>shell scripting<a href=#shell-scripting class=hash-link aria-label="Direct link to shell scripting" title="Direct link to shell scripting" translate=no>​</a></h2>
<div class="language-ts codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-ts codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token hashbang comment" style="color:rgb(105, 112, 152);font-style:italic">#!/usr/bin/env -S npx tsx</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> Command </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'@commander-js/extra-typings'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> program </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Command</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'word-count'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'CLI to count words'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'1.0.0'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">argument</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">'&lt;file>'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=rsa_pkcs1_padding-is-no-longer-supported-for-private-decryption-at-privatedecrypt-native-at-decrypt>RSA_PKCS1_PADDING is no longer supported for private decryption at privateDecrypt (native) at decrypt<a href=#rsa_pkcs1_padding-is-no-longer-supported-for-private-decryption-at-privatedecrypt-native-at-decrypt class=hash-link aria-label="Direct link to RSA_PKCS1_PADDING is no longer supported for private decryption at privateDecrypt (native) at decrypt" title="Direct link to RSA_PKCS1_PADDING is no longer supported for private decryption at privateDecrypt (native) at decrypt" translate=no>​</a></h2>
<ul>
<li>node 22+ <code>--security-revert=CVE-2024-PEND</code></li>
<li>node &lt; 22 <code>--security-revert=CVE-2023-46809</code></li>
<li>Bun
<ul>
<li>最后可用版本 1.1.27</li>
<li>目前不支持 --security-revert <a href=https://github.com/oven-sh/bun/issues/14770 target=_blank rel="noopener noreferrer">https://github.com/oven-sh/bun/issues/14770</a></li>
</ul>
</li>
<li>参考
<ul>
<li><a href=https://nvd.nist.gov/vuln/detail/CVE-2023-46809 target=_blank rel="noopener noreferrer">https://nvd.nist.gov/vuln/detail/CVE-2023-46809</a></li>
<li>node <a href=https://nodejs.org/en/blog/vulnerability/february-2024-security-releases#nodejs-is-vulnerable-to-the-marvin-attack-timing-variant-of-the-bleichenbacher-attack-against-pkcs1-v15-padding-cve-2023-46809---medium target=_blank rel="noopener noreferrer">Wednesday February 14 2024 Security Releases</a></li>
<li><a href=https://github.com/nodejs/node/issues/52017#issuecomment-1987369610 target=_blank rel="noopener noreferrer">https://github.com/nodejs/node/issues/52017#issuecomment-1987369610</a></li>
</ul>
</li>
</ul>
<div class="language-ts codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-ts codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 触发错误</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">crypto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">privateDecrypt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    key</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> privateKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    padding</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">constants</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">RSA_PKCS1_PADDING</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<hr/>
<p>可以使用 node-rsa</p>
<ul>
<li>大约慢 10 倍</li>
</ul>
<div class="language-ts codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-ts codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token keyword" style=font-style:italic>import</span><span class="token plain"> NodeRSA </span><span class="token keyword" style=font-style:italic>from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'node-rsa'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> key </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">NodeRSA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setOptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> encryptionScheme</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'pkcs1'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>const</span><span class="token plain"> decrypted </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">decrypt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<ul>
<li><a href=https://github.com/rzcoder/node-rsa target=_blank rel="noopener noreferrer">rzcoder/node-rsa</a></li>
<li>node-forge</li>
<li>JSEncrypt</li>
<li><a href=https://github.com/orgs/vercel/discussions/6630 target=_blank rel="noopener noreferrer">https://github.com/orgs/vercel/discussions/6630</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=error-shelljsinternalerror-spawn-ebadf>Error ShellJSInternalError: spawn EBADF<a href=#error-shelljsinternalerror-spawn-ebadf class=hash-link aria-label="Direct link to Error ShellJSInternalError: spawn EBADF" title="Direct link to Error ShellJSInternalError: spawn EBADF" translate=no>​</a></h2>
<div class="language-json codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-json codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"errno"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">-9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"code"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"EBADF"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  </span><span class="token property">"syscall"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"spawn"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=the-requested-module-globby-does-not-provide-an-export-named-globby>The requested module 'globby' does not provide an export named 'globby'<a href=#the-requested-module-globby-does-not-provide-an-export-named-globby class=hash-link aria-label="Direct link to The requested module 'globby' does not provide an export named 'globby'" title="Direct link to The requested module 'globby' does not provide an export named 'globby'" translate=no>​</a></h2>
<ul>
<li>新旧版本 globby 区别</li>
<li>v12+ 使用 ESM</li>
<li>v11- 使用 CJS</li>
</ul>
<div class="language-ts codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-ts codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// v12+</span><span class="token plain"></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token keyword" style=font-style:italic>import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> globby </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style=font-style:italic>from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'globby'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br/></span></code></pre></div></div>
<ul>
<li><a href=https://github.com/sindresorhus/globby/issues/193 target=_blank rel="noopener noreferrer">https://github.com/sindresorhus/globby/issues/193</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class=col><b>Tags:</b><ul class="tags_noif padding--none margin-left--sm"><li class=tag_mzC7><a rel=tag class="tag_xI_x tagRegular_Q4uH" href=/notes/tags/faq>FAQ</a></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/wenerme/wener/edit/master/notes/../notes/web/nodejs/nodejs-faq.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_A7Jz aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_Hg3U"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2026-01-03T14:49:30.000Z itemprop=dateModified>Jan 3, 2026</time></b> by <b>wener</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/notes/web/nodejs/debug><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Debug</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/notes/web/nodejs/version><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>NodeJS 版本</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_wpyd thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#typescript class="table-of-contents__link toc-highlight">typescript</a><li><a href=#env class="table-of-contents__link toc-highlight">env</a><li><a href=#tool-chain class="table-of-contents__link toc-highlight">Tool Chain</a><li><a href=#node-dev class="table-of-contents__link toc-highlight">Node Dev</a><li><a href=#choose-pm class="table-of-contents__link toc-highlight">选择包管理器</a><li><a href=#shebang class="table-of-contents__link toc-highlight">shebang</a><li><a href=#performance class="table-of-contents__link toc-highlight">performance</a><li><a href=#musl class="table-of-contents__link toc-highlight">musl</a><li><a href=#sqlite3 class="table-of-contents__link toc-highlight">sqlite3</a><li><a href=#source-map class="table-of-contents__link toc-highlight">source map</a><li><a href=#cjs-__dirname class="table-of-contents__link toc-highlight">cjs <code>__dirname</code></a><li><a href=#直接执行-typescript-或-esnext class="table-of-contents__link toc-highlight">直接执行 typescript 或 esnext</a><li><a href=#package-openexr-required-by-vips-not-found class="table-of-contents__link toc-highlight">Package 'OpenEXR', required by 'vips', not found</a><li><a href=#libtool-unrecognized-option--static-when-building class="table-of-contents__link toc-highlight">libtool: unrecognized option -static when building</a><li><a href=#require-of-es-modules-is-not-supported class="table-of-contents__link toc-highlight">require() of ES modules is not supported</a><li><a href=#nodejs-v18-fetch-proxy class="table-of-contents__link toc-highlight">NodeJS v18 fetch proxy</a><li><a href=#requestinit-duplex-option-is-required-when-sending-a-body class="table-of-contents__link toc-highlight">RequestInit: duplex option is required when sending a body</a><li><a href=#critical-dependency-require-function-is-used-in-a-way-in-which-dependencies-cannot-be-statically-extracted class="table-of-contents__link toc-highlight">Critical dependency: require function is used in a way in which dependencies cannot be statically extracted</a><li><a href=#undefined-variable-module_name-in-bindinggyp-while-trying-to-load-bindinggyp class="table-of-contents__link toc-highlight">Undefined variable module_name in binding.gyp while trying to load binding.gyp</a><li><a href=#custom-esm-loaders-is-an-experimental-feature-this-feature-could-change-at-any-time class="table-of-contents__link toc-highlight">Custom ESM Loaders is an experimental feature. This feature could change at any time</a><li><a href=#reached-heap-limit-allocation-failed---javascript-heap-out-of-memory class="table-of-contents__link toc-highlight">Reached heap limit Allocation failed - JavaScript heap out of memory</a><li><a href=#ineffective-mark-compacts-near-heap-limit-allocation-failed---javascript-heap-out-of-memory class="table-of-contents__link toc-highlight">Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory</a><li><a href=#cant-resolve-pg-native class="table-of-contents__link toc-highlight">Can't resolve 'pg-native'</a><li><a href=#repl-load class="table-of-contents__link toc-highlight">REPL load</a><li><a href=#error0308010c-envelope-routinesunsupported class="table-of-contents__link toc-highlight">error:0308010C envelope routines::unsupported</a><li><a href=#snapshot--compile class="table-of-contents__link toc-highlight">snapshot / compile</a><li><a href=#fastify-vs-express class="table-of-contents__link toc-highlight">fastify vs express</a><li><a href=#import-npm-global class="table-of-contents__link toc-highlight">import npm global</a><li><a href=#err_ossl_evp_unsupported class="table-of-contents__link toc-highlight">ERR_OSSL_EVP_UNSUPPORTED</a><li><a href=#getaddrinfo-enotfound-undefined class="table-of-contents__link toc-highlight">getaddrinfo ENOTFOUND undefined</a><li><a href=#命令行获取-package-所在目录 class="table-of-contents__link toc-highlight">命令行获取 package 所在目录</a><li><a href=#ioredis-vs-redis class="table-of-contents__link toc-highlight">ioredis vs redis</a><li><a href=#the-operation-failed-for-an-operation-specific-reason-cipher-job-failed class="table-of-contents__link toc-highlight">The operation failed for an operation-specific reason: Cipher job failed</a><li><a href=#failed-to-execute-digest-on-subtlecrypto-2nd-argument-is-not-instance-of-arraybuffer-buffer-typedarray-or-dataview class="table-of-contents__link toc-highlight">Failed to execute 'digest' on 'SubtleCrypto': 2nd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.</a><li><a href=#detect-runtime class="table-of-contents__link toc-highlight">detect runtime</a><li><a href=#unhandled class="table-of-contents__link toc-highlight">unhandled</a><li><a href=#the-windows-1252-encoding-is-not-supported class="table-of-contents__link toc-highlight">The "windows-1252" encoding is not supported</a><li><a href=#download class="table-of-contents__link toc-highlight">Download</a><li><a href=#shell-scripting class="table-of-contents__link toc-highlight">shell scripting</a><li><a href=#rsa_pkcs1_padding-is-no-longer-supported-for-private-decryption-at-privatedecrypt-native-at-decrypt class="table-of-contents__link toc-highlight">RSA_PKCS1_PADDING is no longer supported for private decryption at privateDecrypt (native) at decrypt</a><li><a href=#error-shelljsinternalerror-spawn-ebadf class="table-of-contents__link toc-highlight">Error ShellJSInternalError: spawn EBADF</a><li><a href=#the-requested-module-globby-does-not-provide-an-export-named-globby class="table-of-contents__link toc-highlight">The requested module 'globby' does not provide an export named 'globby'</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>笔记</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/notes/java>Java</a><li class=footer__item><a class=footer__link-item href=/notes/os/alpine>AlpineLinux</a><li class=footer__item><a class=footer__link-item href=/notes/devops/kubernetes>Kubernates</a><li class=footer__item><a class=footer__link-item href=/notes/voip>VoIP</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Projects</div><ul class="footer__items clean-list"><li class=footer__item>
              <div>
              <a class=footer__link-item href=https://github.com/wenerme/wener>Wener</a>
              -
              <a class=footer__link-item href=https://github.com/wenerme/wener/actions title="wenerme/wener - ci">
              <img style="vertical-align: middle;opacity: .4;" src=https://github.com/wenerme/wener/workflows/Build/badge.svg />
              </a>
              </div>
              <li class=footer__item><a href=https://apis.wener.me target=_blank rel="noopener noreferrer" class=footer__link-item>Wener's Apis<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_kUGX><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Social</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/story>Blog</a><li class=footer__item><a href=https://github.com/wenerme target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub</a><li class=footer__item><a href=https://twitter.com/wenerme target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter</a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/wener-logo.svg alt="Wener Site" class="footer__logo themedComponent_j2y5 themedComponent--light_v877"/><img src=/img/wener-logo.svg alt="Wener Site" class="footer__logo themedComponent_j2y5 themedComponent--dark_PUQY"/></div><div class=footer__copyright>Copyright © 1992-2026 Wener - <img alt=cc-by-sa-4.0 src=https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg /> - Build @2026-03-02 13:32</div></div></div></footer></div></body>