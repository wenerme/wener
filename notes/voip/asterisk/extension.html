<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-voip/asterisk/asterisk-extension" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.1"><title data-rh=true>Asterisk Extensions | Wener Live & Life</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://wener.me/notes/voip/asterisk/extension /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Asterisk Extensions | Wener Live & Life"/><meta data-rh=true name=description content="静态拨号配置， pbx_config 会使用。通过 dialplan reload 和 reload 进行重载。"/><meta data-rh=true property=og:description content="静态拨号配置， pbx_config 会使用。通过 dialplan reload 和 reload 进行重载。"/><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://wener.me/notes/voip/asterisk/extension /><link data-rh=true rel=alternate href=https://wener.me/notes/voip/asterisk/extension hreflang=en /><link data-rh=true rel=alternate href=https://wener.me/notes/voip/asterisk/extension hreflang=x-default /><link data-rh=true rel=preconnect href=https://37P8DMWBKF-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://wener.me/notes/voip/","name":"VoIP","position":1},{"@type":"ListItem","item":"https://wener.me/notes/voip/asterisk/","name":"Asterisk","position":2},{"@type":"ListItem","item":"https://wener.me/notes/voip/asterisk/extension","name":"Asterisk Extensions","position":3}]}</script><link rel=alternate type=application/rss+xml href=/story/rss.xml title="Wener Live & Life RSS Feed"><link rel=alternate type=application/atom+xml href=/story/atom.xml title="Wener Live & Life Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script><link rel=search type=application/opensearchdescription+xml title="Wener Live & Life" href=/opensearch.xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css><script src=https://static.cloudflareinsights.com/beacon.min.js async data-cf-beacon='{"token": "e9a1b931103044f3940ee67b78c7df70"}' defer></script><link rel=stylesheet href=/assets/css/styles.fa221ee1.css /><script src=/assets/js/runtime~main.1c95f9ff.js defer></script><script src=/assets/js/main.8891074e.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_jKDA href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/wener-logo-head.svg alt="Wener Logo" class="themedComponent_j2y5 themedComponent--light_v877"/><img src=/img/wener-logo-head.svg alt="Wener Logo" class="themedComponent_j2y5 themedComponent--dark_PUQY"/></div><b class="navbar__title text--truncate">Wener</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/notes>笔记</a><a class="navbar__item navbar__link" href=/story>故事</a><a class="navbar__item navbar__link" href=/notes/howto/network/dns-prevent-spoofing>指南</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/wenerme/wener target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_kUGX><use href=#theme-svg-external-link /></svg></a><div class="toggle_N7Mq colorModeToggle_vh_y"><button class="clean-btn toggleButton_PaHe toggleButtonDisabled_RC4w" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 lightToggleIcon_M1mU"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 darkToggleIcon_sEdo"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 systemToggleIcon_cOyE"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_d_Bn><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_c22C"><div class=docsWrapper_oymo><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ZPA9" type=button></button><div class=docRoot_ng2Q><aside class="theme-doc-sidebar-container docSidebarContainer_nyHU"><div class=sidebarViewport_rLoj><div class=sidebar_TmDF><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jRin"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/notes><span title=笔记 class=linkLabel_JPPZ>笔记</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/adobe/photoshop><span title=adobe class=categoryLinkLabel_RkOu>adobe</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/ai><span title=AI class=categoryLinkLabel_RkOu>AI</span></a><button aria-label="Expand sidebar category 'AI'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/algorithm><span title=算法 class=categoryLinkLabel_RkOu>算法</span></a><button aria-label="Expand sidebar category '算法'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/blockchain><span title=区块链 class=categoryLinkLabel_RkOu>区块链</span></a><button aria-label="Expand sidebar category '区块链'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/cn><span title=CN class=categoryLinkLabel_RkOu>CN</span></a><button aria-label="Expand sidebar category 'CN'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/courses><span title=课程 class=categoryLinkLabel_RkOu>课程</span></a><button aria-label="Expand sidebar category '课程'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/culture><span title=文化 class=categoryLinkLabel_RkOu>文化</span></a><button aria-label="Expand sidebar category '文化'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/db><span title=数据库 class=categoryLinkLabel_RkOu>数据库</span></a><button aria-label="Expand sidebar category '数据库'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/dev><span title=开发 class=categoryLinkLabel_RkOu>开发</span></a><button aria-label="Expand sidebar category '开发'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/devops><span title=DevOps class=categoryLinkLabel_RkOu>DevOps</span></a><button aria-label="Expand sidebar category 'DevOps'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/economics><span title=经济学 class=categoryLinkLabel_RkOu>经济学</span></a><button aria-label="Expand sidebar category '经济学'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/electrical><span title=电学基础 class=categoryLinkLabel_RkOu>电学基础</span></a><button aria-label="Expand sidebar category '电学基础'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/embedded/arduino><span title=embedded class=categoryLinkLabel_RkOu>embedded</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/evolve><span title=自我成长 class=categoryLinkLabel_RkOu>自我成长</span></a><button aria-label="Expand sidebar category '自我成长'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/hardware><span title=硬件 class=categoryLinkLabel_RkOu>硬件</span></a><button aria-label="Expand sidebar category '硬件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/healthcare><span title=健康 class=categoryLinkLabel_RkOu>健康</span></a><button aria-label="Expand sidebar category '健康'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/howto/network/dns-prevent-spoofing><span title=howto class=categoryLinkLabel_RkOu>howto</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/java><span title=Java class=categoryLinkLabel_RkOu>Java</span></a><button aria-label="Expand sidebar category 'Java'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/languages><span title=语言 class=categoryLinkLabel_RkOu>语言</span></a><button aria-label="Expand sidebar category '语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/notes/linguistics><span title=Linguistics class=linkLabel_JPPZ>Linguistics</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/math><span title=数学 class=categoryLinkLabel_RkOu>数学</span></a><button aria-label="Expand sidebar category '数学'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/mgmt><span title=管理 class=categoryLinkLabel_RkOu>管理</span></a><button aria-label="Expand sidebar category '管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/network/application/dict><span title=network class=categoryLinkLabel_RkOu>network</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/ops><span title=运维 class=categoryLinkLabel_RkOu>运维</span></a><button aria-label="Expand sidebar category '运维'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/os><span title=操作系统 class=categoryLinkLabel_RkOu>操作系统</span></a><button aria-label="Expand sidebar category '操作系统'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/philosophy><span title=理念 class=categoryLinkLabel_RkOu>理念</span></a><button aria-label="Expand sidebar category '理念'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/photography><span title=摄影 class=categoryLinkLabel_RkOu>摄影</span></a><button aria-label="Expand sidebar category '摄影'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/platform><span title=平台 class=categoryLinkLabel_RkOu>平台</span></a><button aria-label="Expand sidebar category '平台'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/psychology/mbti><span title=psychology class=categoryLinkLabel_RkOu>psychology</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/queue><span title=Queue class=categoryLinkLabel_RkOu>Queue</span></a><button aria-label="Expand sidebar category 'Queue'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/security><span title=安全 class=categoryLinkLabel_RkOu>安全</span></a><button aria-label="Expand sidebar category '安全'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/service><span title=服务 class=categoryLinkLabel_RkOu>服务</span></a><button aria-label="Expand sidebar category '服务'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/software><span title=软件 class=categoryLinkLabel_RkOu>软件</span></a><button aria-label="Expand sidebar category '软件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/std><span title=标准数据 class=categoryLinkLabel_RkOu>标准数据</span></a><button aria-label="Expand sidebar category '标准数据'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--active" href=/notes/voip><span title=VoIP class=categoryLinkLabel_RkOu>VoIP</span></a><button aria-label="Collapse sidebar category 'VoIP'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--active" tabindex=0 href=/notes/voip/asterisk><span title=Asterisk class=categoryLinkLabel_RkOu>Asterisk</span></a><button aria-label="Collapse sidebar category 'Asterisk'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/agi><span title="Asterisk AGI" class=linkLabel_JPPZ>Asterisk AGI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/alsa><span title="Asterisk ALSA" class=linkLabel_JPPZ>Asterisk ALSA</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/ami><span title="Asterisk AMI" class=linkLabel_JPPZ>Asterisk AMI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/air><span title=ARI class=linkLabel_JPPZ>ARI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/awesome><span title="Asterisk Awesome" class=linkLabel_JPPZ>Asterisk Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/build><span title="Build Asterisk" class=linkLabel_JPPZ>Build Asterisk</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/cdr><span title="Asterisk CDR" class=linkLabel_JPPZ>Asterisk CDR</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/channel><span title="Asterisk 通道" class=linkLabel_JPPZ>Asterisk 通道</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/codec><span title="Asterisk 编码" class=linkLabel_JPPZ>Asterisk 编码</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/conf><span title="Asterisk 配置" class=linkLabel_JPPZ>Asterisk 配置</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/debian><span title="Asterisk Debian" class=linkLabel_JPPZ>Asterisk Debian</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/the-definitive-guide-4th><span title="Asterisk 权威指南,第四版" class=linkLabel_JPPZ>Asterisk 权威指南,第四版</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/dev><span title=开发 class=linkLabel_JPPZ>开发</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/dialplain><span title=拨号计划 class=linkLabel_JPPZ>拨号计划</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/notes/voip/asterisk/extension><span title="Asterisk Extensions" class=linkLabel_JPPZ>Asterisk Extensions</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/faq><span title=常见问题 class=linkLabel_JPPZ>常见问题</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/fax><span title="Asterisk Fax" class=linkLabel_JPPZ>Asterisk Fax</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/glossary><span title="Asterisk 词汇" class=linkLabel_JPPZ>Asterisk 词汇</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/inside><span title="Asterisk Inside" class=linkLabel_JPPZ>Asterisk Inside</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/ldap><span title="Asterisk LDAP" class=linkLabel_JPPZ>Asterisk LDAP</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/log><span title="Asterisk Log" class=linkLabel_JPPZ>Asterisk Log</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/modules><span title="Asterisk Modules" class=linkLabel_JPPZ>Asterisk Modules</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/moh><span title="Asterisk Music On Hold" class=linkLabel_JPPZ>Asterisk Music On Hold</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/monitor><span title="Asterisk Monitoring" class=linkLabel_JPPZ>Asterisk Monitoring</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/network><span title="Asterisk Network" class=linkLabel_JPPZ>Asterisk Network</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/qmi><span title="Asterisk QMI" class=linkLabel_JPPZ>Asterisk QMI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/reference><span title=参考 class=linkLabel_JPPZ>参考</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/tip><span title="Asterisk Tips" class=linkLabel_JPPZ>Asterisk Tips</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/troubleshoot><span title="Asterisk 故障排查" class=linkLabel_JPPZ>Asterisk 故障排查</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/version><span title="Asterisk 版本" class=linkLabel_JPPZ>Asterisk 版本</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/webrtc><span title="Asterisk WebRTC" class=linkLabel_JPPZ>Asterisk WebRTC</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/chan_dahdi><span title="DAHDi Channel" class=linkLabel_JPPZ>DAHDi Channel</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/chan_dongle><span title=chan_dongle class=linkLabel_JPPZ>chan_dongle</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/chan_extra><span title=chan_extra class=linkLabel_JPPZ>chan_extra</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/chan_iax><span title=chan_iax class=linkLabel_JPPZ>chan_iax</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/chan_pjsip><span title=chan_pjsip class=linkLabel_JPPZ>chan_pjsip</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/chan_sip><span title=chan_sip class=linkLabel_JPPZ>chan_sip</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/dahdi><span title=DAHDI class=linkLabel_JPPZ>DAHDI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/gsm><span title="Asterisk GSM" class=linkLabel_JPPZ>Asterisk GSM</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/iax><span title=IAX class=linkLabel_JPPZ>IAX</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_ari><span title="Asterisk REST Interface (ARI)" class=linkLabel_JPPZ>Asterisk REST Interface (ARI)</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_corosync><span title="Asterisk Corosync" class=linkLabel_JPPZ>Asterisk Corosync</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_http><span title=res_http class=linkLabel_JPPZ>res_http</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_phoneprov><span title=phoneprov class=linkLabel_JPPZ>phoneprov</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_pjsip><span title="Asterisk PJSIP" class=linkLabel_JPPZ>Asterisk PJSIP</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_resolver_unbound><span title=res_resolver_unbound class=linkLabel_JPPZ>res_resolver_unbound</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_sorcery><span title=res_sorcery class=linkLabel_JPPZ>res_sorcery</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/asterisk/res_stasis><span title="Asterisk Stasis" class=linkLabel_JPPZ>Asterisk Stasis</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/voip/dev/pjsip><span title=dev class=categoryLinkLabel_RkOu>dev</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/fonoster><span title=fonoster class=linkLabel_JPPZ>fonoster</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/freepbx><span title=FreePBX class=linkLabel_JPPZ>FreePBX</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/voip/freeswitch><span title=FreeSWITCH class=categoryLinkLabel_RkOu>FreeSWITCH</span></a><button aria-label="Expand sidebar category 'FreeSWITCH'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/hardware><span title=硬件设备 class=linkLabel_JPPZ>硬件设备</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/openvox-asterisk><span title="OpenVox Asterisk" class=linkLabel_JPPZ>OpenVox Asterisk</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/openvox><span title=OpenVox class=linkLabel_JPPZ>OpenVox</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/voip/sip/linphone><span title=sip class=categoryLinkLabel_RkOu>sip</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/awesome><span title="VoIP Awesome" class=linkLabel_JPPZ>VoIP Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/dev><span title="VoIP 开发" class=linkLabel_JPPZ>VoIP 开发</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/faq><span title="VoIP FAQ" class=linkLabel_JPPZ>VoIP FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/voip/glossary><span title=词汇表 class=linkLabel_JPPZ>词汇表</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/web><span title=Web class=categoryLinkLabel_RkOu>Web</span></a><button aria-label="Expand sidebar category 'Web'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_NY7h"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_c8nQ><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_GAGP><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_YQ1L"><div class=docItemContainer_Wjg4><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_tiqF" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_WTWT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/notes/voip><span>VoIP</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/notes/voip/asterisk><span>Asterisk</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Asterisk Extensions</span></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Asterisk Extensions</h1></header>
<p>静态拨号配置， <code>pbx_config</code> 会使用。通过 <code>dialplan reload</code> 和 <code>reload</code> 进行重载。</p>
<div class="language-conf codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-conf codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">[general]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 如果设置为 no 或没有，pbx_config 可能会重写该文件。</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">static=yes</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 如果 static=yes 且 writeprotect=no 则可通过 dialplan save 保存</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">writeprotect=no</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 自动进入下一个</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 如果设置了，在运行完后会通过 BUSY, CONGESTION 或 HANGUP 来终止。</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 如果没有设置在运行完后会继续等待新的指令输入。</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;autofallthrough=no</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; If extenpatternmatchnew is set (true, yes, etc), then a new algorithm that uses</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; a Trie to find the best matching pattern is used. In dialplans</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; with more than about 20-40 extensions in a single context, this</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; new algorithm can provide a noticeable speedup.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; With 50 extensions, the speedup is 1.32x</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; with 88 extensions, the speedup is 2.23x</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; with 138 extensions, the speedup is 3.44x</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; with 238 extensions, the speedup is 5.8x</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; with 438 extensions, the speedup is 10.4x</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; With 1000 extensions, the speedup is ~25x</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; with 10,000 extensions, the speedup is 374x</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Basically, the new algorithm provides a flat response</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; time, no matter the number of extensions.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; By default, the old pattern matcher is used.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ****This is a new feature! *********************</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; The new pattern matcher is for the brave, the bold, and</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; the desperate. If you have large dialplans (more than about 50 extensions</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; in a context), and/or high call volume, you might consider setting</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; this value to "yes" !!</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Please, if you try this out, and are forced to return to the</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; old pattern matcher, please report your reasons in a bug report</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; on https://issues.asterisk.org. We have made good progress in providing</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; something compatible with the old matcher; help us finish the job!</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; This value can be switched at runtime using the cli command "dialplan set extenpatternmatchnew true"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; or "dialplan set extenpatternmatchnew false", so you can experiment to your hearts content.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;extenpatternmatchnew=no</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 清除全局变量</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 全局变量会在 dialplan reload 或 reload 被清除</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ael 中的变量还是会被清除</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">clearglobalvars=no</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 通过 users.conf 注册进入的上下文</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;userscontext=default</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 全局变量 - 使用方式</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ${GLOBAL(VARIABLE)}</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ${${GLOBAL(VARIABLE)}}</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ${text${GLOBAL(VARIABLE)}}</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 使用环境变量</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ${ENV(VARIABLE)}</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[globals]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">TRUNK=DAHDI/G2					; Trunk interface</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Note the 'G2' in the TRUNK variable above. It specifies which group (defined</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; in chan_dahdi.conf) to dial, i.e. group 2, and how to choose a channel to use</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; in the specified group. The four possible options are:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; g: select the lowest-numbered non-busy DAHDI channel</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;    (aka. ascending sequential hunt group).</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; G: select the highest-numbered non-busy DAHDI channel</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;    (aka. descending sequential hunt group).</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; r: use a round-robin search, starting at the next highest channel than last</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;    time (aka. ascending rotary hunt group).</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; R: use a round-robin search, starting at the next lowest channel than last</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;    time (aka. descending rotary hunt group).</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">TRUNKMSD=1					; MSD digits to strip (usually 1 or 0)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;TRUNK=IAX2/user:pass@provider</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;FREENUMDOMAIN=mydomain.com                     ; domain to send on outbound</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">                                                ; freenum calls (uses outbound-freenum</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">                                                ; context)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; WARNING WARNING WARNING WARNING</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; If you load any other extension configuration engine, such as pbx_ael.so,</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; your global variables may be overridden by that file.  Please take care to</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; use only one location to set global variables, and you will likely save</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; yourself a ton of grief.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; WARNING WARNING WARNING WARNING</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Any category other than "General" and "Globals" represent</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; extension contexts, which are collections of extensions.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Extension names may be numbers, letters, or combinations</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; thereof. If an extension name is prefixed by a '_'</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; character, it is interpreted as a pattern rather than a</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; literal.  In patterns, some characters have special meanings:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   X - any digit from 0-9</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   Z - any digit from 1-9</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   N - any digit from 2-9</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   [1235-9] - any digit in the brackets (in this example, 1,2,3,5,6,7,8,9)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   . - wildcard, matches anything remaining (e.g. _9011. matches</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;	anything starting with 9011 excluding 9011 itself)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ! - wildcard, causes the matching process to complete as soon as</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;       it can unambiguously determine that no other matches are possible</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; For example, the extension _NXXXXXX would match normal 7 digit dialings,</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; while _1NXXNXXXXXX would represent an area code plus phone number</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; preceded by a one.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Each step of an extension is ordered by priority, which must always start</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; with 1 to be considered a valid extension.  The priority "next" or "n" means</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; the previous priority plus one, regardless of whether the previous priority</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; was associated with the current extension or not.  The priority "same" or "s"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; means the same as the previously specified priority, again regardless of</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; whether the previous entry was for the same extension.  Priorities may be</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; immediately followed by a plus sign and another integer to add that amount</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; (most useful with 's' or 'n').  Priorities may then also have an alias, or</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; label, in parentheses after their name which can be used in goto situations.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Contexts contain several lines, one for each step of each extension.  One may</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; include another context in the current one as well, optionally with a date</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; and time.  Included contexts are included in the order they are listed.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Switches may also be included within a context.  The order of matching within</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; a context is always exact extensions, pattern match extensions, includes, and</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; switches.  Includes are always processed depth-first.  So for example, if you</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; would like a switch "A" to match before context "B", simply put switch "A" in</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; an included context "C", where "C" is included in your original context</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; before "B".</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;[context]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;autohints = yes</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; If enabled for a context, a device state hint will be automatically created in</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; the context with the name of the device and updated with device state changes.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => someexten,{priority|label{+|-}offset}[(alias)],application(arg1,arg2,...)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Timing list for includes is</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   &lt;time range>,&lt;days of week>,&lt;days of month>,&lt;months>[,&lt;timezone>]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Note that ranges may be specified to wrap around the ends.  Also, minutes are</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; fine-grained only down to the closest even minute.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => daytime,9:00-17:00,mon-fri,*,*</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => weekend,*,sat-sun,*,*</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => weeknights,17:02-8:58,mon-fri,*,*</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ignorepat can be used to instruct drivers to not cancel dialtone upon receipt</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; of a particular pattern.  The most commonly used example is of course '9'</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; like this:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;ignorepat => 9</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; so that dialtone remains even after dialing a 9.  Please note that ignorepat</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; only works with channels which receive dialtone from the PBX, such as DAHDI,</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Phone, and VPB.  Other channels, such as SIP and MGCP, which generate their</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; own dialtone and converse with the PBX only after a number is complete, are</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; generally unaffected by ignorepat (unless DISA or another method is used to</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; generate a dialtone after answering the channel).</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Sample entries for extensions.conf</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[dundi-e164-canonical]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => stdexten</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; List canonical entries here</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 12564286000,1,Gosub(6000,stdexten(IAX2/foo))</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 12564286000,n,Goto(default,s,1)	; exited Voicemail</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => _125642860XX,1,Dial(IAX2/otherbox/${EXTEN:7})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[dundi-e164-customers]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; If you are an ITSP or Reseller, list your customers here.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => _12564286000,1,Dial(SIP/customer1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => _12564286001,1,Dial(IAX2/customer2)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[dundi-e164-via-pstn]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; If you are freely delivering calls to the PSTN, list them here</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => _1256428XXXX,1,Dial(DAHDI/G2/${EXTEN:7}) ; Expose all of 256-428</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => _1256325XXXX,1,Dial(DAHDI/G2/${EXTEN:7}) ; Ditto for 256-325</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[dundi-e164-local]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Context to put your dundi IAX2 or SIP user in for</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; full access</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => dundi-e164-canonical</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => dundi-e164-customers</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => dundi-e164-via-pstn</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[dundi-e164-switch]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Just a wrapper for the switch</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">switch => DUNDi/e164</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[dundi-e164-lookup]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Locally to lookup, try looking for a local E.164 solution</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; then try DUNDi if we don't have one.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => dundi-e164-local</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => dundi-e164-switch</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; DUNDi can also be implemented as a Macro instead of using</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; the Local channel driver.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[macro-dundi-e164]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ARG1 is the extension to Dial</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Extension "s" is not a wildcard extension that matches "anything".</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; In macros, it is the start extension. In most other cases,</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; you have to goto "s" to execute that extension.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Note: In old versions of Asterisk the PBX in some cases defaulted to</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; extension "s" when a given extension was wrong (like in AMI originate).</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; This is no longer the case.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; For wildcard matches, see above - all pattern matches start with</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; an underscore.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,1,Goto(${ARG1},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => dundi-e164-lookup</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Here are the entries you need to participate in the IAXTEL</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; call routing system.  Most IAXTEL numbers begin with 1-700, but</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; there are exceptions.  For more information, and to sign</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; up, please go to www.gnophone.com or www.iaxtel.com</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[iaxtel700]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _91700XXXXXXX,1,Dial(IAX2/${GLOBAL(IAXINFO)}@iaxtel.com/${EXTEN:1}@iaxtel)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; The SWITCH statement permits a server to share the dialplan with</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; another server. Use with care: Reciprocal switch statements are not</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; allowed (e.g. both A -> B and B -> A), and the switched server needs</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; to be on-line or else dialing can be severly delayed.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[iaxprovider]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;switch => IAX2/user:[key]@myserver/mycontext</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[trunkint]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; International long distance through trunk</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _9011.,1,Macro(dundi-e164,${EXTEN:4})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _9011.,n,Dial(${GLOBAL(TRUNK)}/${FILTER(0-9,${EXTEN:${GLOBAL(TRUNKMSD)}})})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[trunkld]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Long distance context accessed through trunk</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _91NXXNXXXXXX,1,Macro(dundi-e164,${EXTEN:1})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _91NXXNXXXXXX,n,Dial(${GLOBAL(TRUNK)}/${EXTEN:${GLOBAL(TRUNKMSD)}})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[trunklocal]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Local seven-digit dialing accessed through trunk interface</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _9NXXXXXX,1,Dial(${GLOBAL(TRUNK)}/${EXTEN:${GLOBAL(TRUNKMSD)}})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[trunktollfree]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Long distance context accessed through trunk interface</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _91800NXXXXXX,1,Dial(${GLOBAL(TRUNK)}/${EXTEN:${GLOBAL(TRUNKMSD)}})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _91888NXXXXXX,1,Dial(${GLOBAL(TRUNK)}/${EXTEN:${GLOBAL(TRUNKMSD)}})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _91877NXXXXXX,1,Dial(${GLOBAL(TRUNK)}/${EXTEN:${GLOBAL(TRUNKMSD)}})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _91866NXXXXXX,1,Dial(${GLOBAL(TRUNK)}/${EXTEN:${GLOBAL(TRUNKMSD)}})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[international]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Master context for international long distance</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">ignorepat => 9</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => longdistance</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => trunkint</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[longdistance]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Master context for long distance</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">ignorepat => 9</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => local</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => trunkld</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[local]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Master context for local, toll-free, and iaxtel calls only</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">ignorepat => 9</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => default</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => trunklocal</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => iaxtel700</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => trunktollfree</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => iaxprovider</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;Include parkedcalls (or the context you define in features conf)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;to enable call parking.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => parkedcalls</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; You can use an alternative switch type as well, to resolve</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; extensions that are not known here, for example with remote</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; IAX switching you transparently get access to the remote</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Asterisk PBX</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; switch => IAX2/user:password@bigserver/local</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; An "lswitch" is like a switch but is literal, in that</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; variable substitution is not performed at load time</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; but is passed to the switch directly (presumably to</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; be substituted in the switch routine itself)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; lswitch => Loopback/12${EXTEN}@othercontext</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; An "eswitch" is like a switch but the evaluation of</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; variable substitution is performed at runtime before</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; being passed to the switch routine.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; eswitch => IAX2/context@${CURSERVER}</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; The following two contexts are a template to enable the ability to dial</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ISN numbers. For more information about what an ISN number is, please see</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; http://www.freenum.org.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; This is the dialing hook.  use:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; include => outbound-freenum</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[outbound-freenum]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; We'll add more digits as needed. The purpose is to dial things</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; like extension numbers at domains (ITAD number) so we're matching</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; on lengths of 1 through 6 prior to the separator (the asterisk [*])</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X*X!,1,Goto(outbound-freenum2,${EXTEN},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _XX*X!,1,Goto(outbound-freenum2,${EXTEN},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _XXX*X!,1,Goto(outbound-freenum2,${EXTEN},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _XXXX*X!,1,Goto(outbound-freenum2,${EXTEN},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _XXXXX*X!,1,Goto(outbound-freenum2,${EXTEN},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _XXXXXX*X!,1,Goto(outbound-freenum2,${EXTEN},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[outbound-freenum2]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; This is the handler which performs the dialing logic. It is called</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; from the [outbound-freenum] context</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X!,1,Verbose(2,Performing ISN lookup for ${EXTEN})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Set(SUFFIX=${CUT(EXTEN,*,2-)})                                ; make sure the suffix is all digits as well</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,GotoIf($["${FILTER(0-9,${SUFFIX})}" != "${SUFFIX}"]?fn-CONGESTION,1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">                                                                        ; filter out bad characters per the README-SERIOUSLY.best-practices.txt document</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Set(TIMEOUT(absolute)=10800)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Set(isnresult=${ENUMLOOKUP(${EXTEN},sip,,1,freenum.org)})     ; perform our lookup with freenum.org</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,GotoIf($["${isnresult}" != ""]?from)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Set(DIALSTATUS=CONGESTION)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Goto(fn-CONGESTION,1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n(from),Set(__SIPFROMUSER=${CALLERID(num)})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,GotoIf($["${GLOBAL(FREENUMDOMAIN)}" = ""]?dial)               ; check if we set the FREENUMDOMAIN global variable in [global]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Set(__SIPFROMDOMAIN=${GLOBAL(FREENUMDOMAIN)})                 ;    if we did set it, then we'll use it for our outbound dialing domain</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n(dial),Dial(SIP/${isnresult},40)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Goto(fn-${DIALSTATUS},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => fn-BUSY,1,Busy()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _f[n]-.,1,NoOp(ISN: ${DIALSTATUS})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">same => n,Congestion()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[macro-trunkdial]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Standard trunk dial macro (hangs up on a dialstatus that should</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; terminate call)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG1} - What to dial</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,1,Dial(${ARG1})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,Goto(s-${DIALSTATUS},1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s-NOANSWER,1,Hangup()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s-BUSY,1,Hangup()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _s-.,1,NoOp</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[stdexten]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Standard extension subroutine:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${EXTEN} - Extension</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG1} - Device(s) to ring</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG2} - Optional context in Voicemail</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Note that the current version will drop through to the next priority in the</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; case of their pressing '#'.  This gives more flexibility in what do to next:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; you can prompt for a new extension, or drop the call, or send them to a</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; general delivery mailbox, or...</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; The use of the LOCAL() function is purely for convenience.  Any variable</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; initially declared as LOCAL() will disappear when the innermost Gosub context</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; in which it was declared returns.  Note also that you can declare a LOCAL()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; variable on top of an existing variable, and its value will revert to its</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; previous value (before being declared as LOCAL()) upon Return.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,50000(stdexten),NoOp(Start stdexten)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(ext)=${EXTEN})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(dev)=${ARG1})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(cntx)=${ARG2})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(mbx)=${ext}${IF($[!${ISNULL(${cntx})}]?@${cntx})})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Dial(${dev},20)				; Ring the interface, 20 seconds maximum</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Goto(stdexten-${DIALSTATUS},1)		; Jump based on status (NOANSWER,BUSY,CHANUNAVAIL,CONGESTION,ANSWER)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-NOANSWER,1,VoiceMail(${mbx},u)	; If unavailable, send to voicemail w/ unavail announce</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-NOANSWER,n,Return()			; If they press #, return to start</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-BUSY,1,VoiceMail(${mbx},b)		; If busy, send to voicemail w/ busy announce</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-BUSY,n,Return()			; If they press #, return to start</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _stde[x]te[n]-.,1,Goto(stdexten-NOANSWER,1)	; Treat anything else as no answer</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => a,1,VoiceMailMain(${mbx})			; If they press *, send the user into VoicemailMain</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => a,n,Return()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[stdPrivacyexten]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Standard extension subroutine:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG1} - Extension</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG2} - Device(s) to ring</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG3} - Optional DONTCALL context name to jump to (assumes the s,1 extension-priority)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG4} - Optional TORTURE context name to jump to (assumes the s,1 extension-priority)`</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG5} - Context in voicemail (if empty, then "default")</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; See above note in stdexten about priority handling on exit.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,60000(stdPrivacyexten),NoOp(Start stdPrivacyexten)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(ext)=${ARG1})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(dev)=${ARG2})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(dontcntx)=${ARG3})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(tortcntx)=${ARG4})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(cntx)=${ARG5})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(LOCAL(mbx)="${ext}"$["${cntx}" ? "@${cntx}" :: ""])</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Dial(${dev},20,p)			; Ring the interface, 20 seconds maximum, call screening</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">						; option (or use P for databased call _X.creening)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Goto(stdexten-${DIALSTATUS},1)		; Jump based on status (NOANSWER,BUSY,CHANUNAVAIL,CONGESTION,ANSWER)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-NOANSWER,1,VoiceMail(${mbx},u)	; If unavailable, send to voicemail w/ unavail announce</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-NOANSWER,n,NoOp(Finish stdPrivacyexten NOANSWER)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-NOANSWER,n,Return()			; If they press #, return to start</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-BUSY,1,VoiceMail(${mbx},b)		; If busy, send to voicemail w/ busy announce</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-BUSY,n,NoOp(Finish stdPrivacyexten BUSY)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-BUSY,n,Return()			; If they press #, return to start</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-DONTCALL,1,Goto(${dontcntx},s,1)	; Callee chose to send this call to a polite "Don't call again" script.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => stdexten-TORTURE,1,Goto(${tortcntx},s,1)	; Callee chose to send this call to a telemarketer torture script.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _stde[x]te[n]-.,1,Goto(stdexten-NOANSWER,1)	; Treat anything else as no answer</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => a,1,VoiceMailMain(${mbx})		; If they press *, send the user into VoicemailMain</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => a,n,Return()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[macro-page]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Paging macro:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;       Check to see if SIP device is in use and DO NOT PAGE if they are</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;   ${ARG1} - Device to page</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,1,ChanIsAvail(${ARG1},s)			; s is for ANY call</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,GotoIf($[${AVAILSTATUS} = "1"]?autoanswer:fail)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n(autoanswer),Set(_ALERT_INFO="RA")			; This is for the PolyComs</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,SIPAddHeader(Call-Info: Answer-After=0)	; This is for the Grandstream, Snoms, and Others</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,NoOp()					; Add others here and Post on the Wiki!!!!</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,Dial(${ARG1})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n(fail),Hangup()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[demo]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => stdexten</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; We start with what to do when a call first comes in.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,1,Wait(1)			; Wait a second, just for fun</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,Answer()			; Answer the line</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,Set(TIMEOUT(digit)=5)	; Set Digit Timeout to 5 seconds</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,Set(TIMEOUT(response)=10)	; Set Response Timeout to 10 seconds</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n(restart),BackGround(demo-congrats)	; Play a congratulatory message</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n(instruct),BackGround(demo-instruct)	; Play some instructions</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => s,n,WaitExten()		; Wait for an extension to be dialed.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 2,1,BackGround(demo-moreinfo)	; Give some more information.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 2,n,Goto(s,instruct)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 3,1,Set(CHANNEL(language)=fr)		; Set language to french</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 3,n,Goto(s,restart)		; Start with the congratulations</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 1000,1,Goto(default,s,1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; We also create an example user, 1234, who is on the console and has</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; voicemail, etc.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 1234,1,Playback(transfer,skip)		; "Please hold while..."</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">					; (but skip if channel is not up)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 1234,n,Gosub(${EXTEN},stdexten(${GLOBAL(CONSOLE)}))</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 1234,n,Goto(default,s,1)		; exited Voicemail</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 1235,1,VoiceMail(1234,u)		; Right to voicemail</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 1236,1,Dial(Console/dsp)		; Ring forever</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 1236,n,VoiceMail(1234,b)		; Unless busy</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; # for when they're done with the demo</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => #,1,Playback(demo-thanks)	; "Thanks for trying the demo"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => #,n,Hangup()			; Hang them up.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; A timeout and "invalid extension rule"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => t,1,Goto(#,1)			; If they take too long, give up</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => i,1,Playback(invalid)		; "That's not valid, try again"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Create an extension, 500, for dialing the</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Asterisk demo.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 500,1,Playback(demo-abouttotry)	; Let them know what's going on</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 500,n,Dial(IAX2/guest@pbx.digium.com/s@default)	; Call the Asterisk demo</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 500,n,Playback(demo-nogo)	; Couldn't connect to the demo site</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 500,n,Goto(s,6)		; Return to the start over message.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Create an extension, 600, for evaluating echo latency.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 600,1,Playback(demo-echotest)	; Let them know what's going on</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 600,n,Echo()			; Do the echo test</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 600,n,Playback(demo-echodone)	; Let them know it's over</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 600,n,Goto(s,6)		; Start over</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;	You can use the Macro Page to intercom a individual user</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 76245,1,Macro(page,SIP/Grandstream1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; or if your peernames are the same as extensions</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _7XXX,1,Macro(page,SIP/${EXTEN})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; System Wide Page at extension 7999</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 7999,1,Set(TIMEOUT(absolute)=60)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 7999,2,Page(Local/Grandstream1@page&Local/Xlite1@page&Local/1234@page/n,d)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Give voicemail at extension 8500</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 8500,1,VoiceMailMain()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => 8500,n,Goto(s,6)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Here's what a phone entry would look like (IXJ for example)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 1265,1,Dial(Phone/phone0,15)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 1265,n,Goto(s,5)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;	The page context calls up the page macro that sets variables needed for auto-answer</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;	It is in is own context to make calling it from the Page() application as simple as</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;	Local/{peername}@page</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[page]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,1,Macro(page,SIP/${EXTEN})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;[mainmenu]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Example "main menu" context with submenu</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,1,Answer</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,Background(thanks)		; "Thanks for calling press 1 for sales, 2 for support, ..."</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,WaitExten</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 1,1,Goto(submenu,s,1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 2,1,Hangup</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => default</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;[submenu]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,1,Ringing					; Make them comfortable with 2 seconds of ringback</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,Wait,2</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,Background(submenuopts)	; "Thanks for calling the sales department.  Press 1 for steve, 2 for..."</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,WaitExten</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 1,1,Goto(default,steve,1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 2,1,Goto(default,mark,2)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[public]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ATTENTION: If your Asterisk is connected to the internet and you do</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; not have allowguest=no in sip.conf, everybody out there may use your</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; public context without authentication.  In that case you want to</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; double check which services you offer to the world.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => demo</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[default]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; By default we include the demo.  In a production system, you</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; probably don't want to have the demo there.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">include => demo</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; An extension like the one below can be used for FWD, Nikotel, sipgate etc.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Note that you must have a [sipprovider] section in sip.conf</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => _41X.,1,Dial(SIP/${FILTER(0-9,${EXTEN:2})}@sipprovider,,r)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Real extensions would go here. Generally you want real extensions to be</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; 4 or 5 digits long (although there is no such requirement) and start with a</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; single digit that is fairly large (like 6 or 7) so that you have plenty of</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; room to overlap extensions and menu options without conflict.  You can alias</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; them with names, too, and use global variables</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6245,hint,SIP/Grandstream1&SIP/Xlite1(Joe Schmoe) ; Channel hints for presence</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6245,1,Dial(SIP/Grandstream1,20,rt)	; permit transfer</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6245,n(dial),Dial(${HINT},20,rtT)	; Use hint as listed</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6245,n,VoiceMail(6245,u)		; Voicemail (unavailable)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6245,s+1,Hangup			; s+1, same as n</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6245,dial+101,VoiceMail(6245,b)	; Voicemail (busy)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6361,1,Dial(IAX2/JaneDoe,,rm)		; ring without time limit</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6389,1,Dial(MGCP/aaln/1@192.168.0.14)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6390,1,Dial(JINGLE/caller/callee) ; Dial via jingle using labels</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6391,1,Dial(JINGLE/asterisk@digium.com/mogorman@astjab.org) ;Dial via jingle using asterisk as the transport and calling mogorman.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6394,1,Dial(Local/6275/n)		; this will dial ${MARK}</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6275,1,Gosub(${EXTEN},stdexten(${MARK}))</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">						; assuming ${MARK} is something like DAHDI/2</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6275,n,Goto(default,s,1)		; exited Voicemail</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => mark,1,Goto(6275,1)			; alias mark to 6275</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6536,1,Gosub(${EXTEN},stdexten(${WIL}))</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">						; Ditto for wil</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6536,n,Goto(default,s,1)		; exited Voicemail</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => wil,1,Goto(6236,1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;If you want to subscribe to the status of a parking space, this is</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;how you do it. Subscribe to extension 6600 in sip, and you will see</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;the status of the first parking lot with this extensions' help</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6600,hint,park:701@parkedcalls</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 6600,1,noop</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;To subscribe to the availability of a free member in the 'markq' queue.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;Note: '_avail' is added to the QueueName</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 8501,hint,Queue:markq_avail</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 8501,1,Queue(markq)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; You can also monitor the status of a queue by providing a hint for a</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; particular queue name.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 8502,hint,Queue:markq</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 8502,1,Queue(markq)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Some other handy things are an extension for checking voicemail via</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; voicemailmain</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 8500,1,VoicemailMain</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 8500,n,Hangup</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Or a conference room (you'll need to edit meetme.conf to enable this room)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 8600,1,Meetme(1234)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Or playing an announcement to the called party, as soon it answers</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten = 8700,1,Dial(${MARK},30,A(/path/to/my/announcemsg))</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; example of a compartmentalized company called "acme"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; this is the context that your incoming IAX/SIP trunk dumps you in...</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;[acme-incoming]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,1,Wait(1)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,Answer()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n(menu),Playback(acme/vm-brief-menu)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n(exten),Background(vm-enter-num-to-call)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,WaitExten(5)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n(goodbye),Playback(vm-goodbye)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n(end),Hangup()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include  => acme-extens</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => i,1,Playback(vm-invalid)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => i,n,Goto(s,exten)			; optionally, transfer to operator</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => t,1,Goto(s,goodbye)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; this is the context our internal SIP hardphones use (see sip.conf)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;[acme-internal]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,1,Answer()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n(exten),Background(vm-enter-num-to-call)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n,WaitExten(5)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n(goodbye),Playback(vm-goodbye)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => s,n(end),Hangup()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => trunkint</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => trunkld</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => trunklocal</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => acme-extens</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; you can test what your system sounds like to outside callers by dialing this</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 777,1,DISA(no-password,acme-incoming)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; grouping of acme's extensions... never used directly, always included.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;[acme-extens]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;include => stdexten</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 111,1,Gosub(111,stdexten(SIP/pete_1,acme))</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 111,n,Goto(s,exten)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 112,1,Gosub(112,stdexten(SIP/nancy_1,acme))</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;exten => 112,n,Goto(s,end)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; end of acme example</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Time context: you can patch this in via the following.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; [acme-internal]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ...</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; exten => 777,1,Gosub(time)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; exten => 777,n,Hangup()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ...</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; include => time</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; Note: if you're geographically spread out, you can have SIP extensions</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; specify their own local timezone in sip.conf as:</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; [boi]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; type=friend</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; context=acme-internal</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; callerid="Boise Ofc. &lt;2083451111>"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ...</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ; use system-wide default timezone of MST7MDT</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; [lws]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; type=friend</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; context=acme-internal</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; callerid="Lewiston Ofc. &lt;2087431111>"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ...</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; setvar=timezone=PST8PDT</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; "timezone" isn't a 'reserved' name in any way, and other places where</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; the timezone is significant (e.g. calls to "SayUnixTime()", etc) will</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; require modification as well.  Note that voicemail.conf already has</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; a mechanism for timezones.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[time]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,30000(time),NoOp(Time: ${EXTEN} ${timezone})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Wait(0.25)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Answer()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; the amount of delay is set for English; you may need to adjust this time</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; for other languages if there's no pause before the synchronizing beep.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Set(FUTURETIME=$[${EPOCH} + 12])</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,SayUnixTime(${FUTURETIME},Zulu,HNS)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,SayPhonetic(z)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; use the timezone associated with the extension (sip only), or system-wide</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; default if one hasn't been set.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,SayUnixTime(${FUTURETIME},${timezone},HNS)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Playback(spy-local)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,WaitUntil(${FUTURETIME})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Playback(beep)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Return()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; ANI context: use in the same way as "time" above</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">[ani]</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,40000(ani),NoOp(ANI: ${EXTEN})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Wait(0.25)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Answer()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Playback(vm-from)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,SayDigits(${CALLERID(ani)})</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Wait(1.25)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,SayDigits(${CALLERID(ani)})	; playback again in case of missed digit</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">exten => _X.,n,Return()</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; For more information on applications, just type "core show applications" at your</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; friendly Asterisk CLI prompt.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">;</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; "core show application &lt;command>" will show details of how you</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; use that particular application in this file, the dial plan.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; "core show functions" will list all dialplan functions</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; "core show function &lt;COMMAND>" will show you more information about</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">; one function. Remember that function names are UPPER CASE.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class=col><b>Tags:</b><ul class="tags_noif padding--none margin-left--sm"><li class=tag_mzC7><a rel=tag class="tag_xI_x tagRegular_Q4uH" href=/notes/tags/asterisk>Asterisk</a><li class=tag_mzC7><a rel=tag class="tag_xI_x tagRegular_Q4uH" href=/notes/tags/conf>Conf</a></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/wenerme/wener/edit/master/notes/../notes/voip/asterisk/asterisk-extension.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_A7Jz aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_Hg3U"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2026-01-03T14:49:30.000Z itemprop=dateModified>Jan 3, 2026</time></b> by <b>wener</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/notes/voip/asterisk/dialplain><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>拨号计划</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/notes/voip/asterisk/faq><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>常见问题</div></a></nav></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>笔记</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/notes/java>Java</a><li class=footer__item><a class=footer__link-item href=/notes/os/alpine>AlpineLinux</a><li class=footer__item><a class=footer__link-item href=/notes/devops/kubernetes>Kubernates</a><li class=footer__item><a class=footer__link-item href=/notes/voip>VoIP</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Projects</div><ul class="footer__items clean-list"><li class=footer__item>
              <div>
              <a class=footer__link-item href=https://github.com/wenerme/wener>Wener</a>
              -
              <a class=footer__link-item href=https://github.com/wenerme/wener/actions title="wenerme/wener - ci">
              <img style="vertical-align: middle;opacity: .4;" src=https://github.com/wenerme/wener/workflows/Build/badge.svg />
              </a>
              </div>
              <li class=footer__item><a href=https://apis.wener.me target=_blank rel="noopener noreferrer" class=footer__link-item>Wener's Apis<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_kUGX><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Social</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/story>Blog</a><li class=footer__item><a href=https://github.com/wenerme target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub</a><li class=footer__item><a href=https://twitter.com/wenerme target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter</a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/wener-logo.svg alt="Wener Site" class="footer__logo themedComponent_j2y5 themedComponent--light_v877"/><img src=/img/wener-logo.svg alt="Wener Site" class="footer__logo themedComponent_j2y5 themedComponent--dark_PUQY"/></div><div class=footer__copyright>Copyright © 1992-2026 Wener - <img alt=cc-by-sa-4.0 src=https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg /> - Build @2026-03-02 13:32</div></div></div></footer></div></body>