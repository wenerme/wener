<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ai/dev/ggml/llama.cpp" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.1"><title data-rh=true>llama.cpp | Wener Live & Life</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://wener.me/notes/ai/dev/ggml/llama.cpp /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="llama.cpp | Wener Live & Life"/><meta data-rh=true name=description content="- ggerganov/llama.cpp"/><meta data-rh=true property=og:description content="- ggerganov/llama.cpp"/><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://wener.me/notes/ai/dev/ggml/llama.cpp /><link data-rh=true rel=alternate href=https://wener.me/notes/ai/dev/ggml/llama.cpp hreflang=en /><link data-rh=true rel=alternate href=https://wener.me/notes/ai/dev/ggml/llama.cpp hreflang=x-default /><link data-rh=true rel=preconnect href=https://37P8DMWBKF-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://wener.me/notes/ai/","name":"AI","position":1},{"@type":"ListItem","item":"https://wener.me/notes/ai/dev/ggml/llama.cpp","name":"llama.cpp","position":2}]}</script><link rel=alternate type=application/rss+xml href=/story/rss.xml title="Wener Live & Life RSS Feed"><link rel=alternate type=application/atom+xml href=/story/atom.xml title="Wener Live & Life Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script><link rel=search type=application/opensearchdescription+xml title="Wener Live & Life" href=/opensearch.xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css><script src=https://static.cloudflareinsights.com/beacon.min.js async data-cf-beacon='{"token": "e9a1b931103044f3940ee67b78c7df70"}' defer></script><link rel=stylesheet href=/assets/css/styles.fa221ee1.css /><script src=/assets/js/runtime~main.1c95f9ff.js defer></script><script src=/assets/js/main.8891074e.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_jKDA href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/wener-logo-head.svg alt="Wener Logo" class="themedComponent_j2y5 themedComponent--light_v877"/><img src=/img/wener-logo-head.svg alt="Wener Logo" class="themedComponent_j2y5 themedComponent--dark_PUQY"/></div><b class="navbar__title text--truncate">Wener</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/notes>笔记</a><a class="navbar__item navbar__link" href=/story>故事</a><a class="navbar__item navbar__link" href=/notes/howto/network/dns-prevent-spoofing>指南</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/wenerme/wener target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_kUGX><use href=#theme-svg-external-link /></svg></a><div class="toggle_N7Mq colorModeToggle_vh_y"><button class="clean-btn toggleButton_PaHe toggleButtonDisabled_RC4w" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 lightToggleIcon_M1mU"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 darkToggleIcon_sEdo"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_Q188 systemToggleIcon_cOyE"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_d_Bn><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_c22C"><div class=docsWrapper_oymo><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ZPA9" type=button></button><div class=docRoot_ng2Q><aside class="theme-doc-sidebar-container docSidebarContainer_nyHU"><div class=sidebarViewport_rLoj><div class=sidebar_TmDF><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jRin"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/notes><span title=笔记 class=linkLabel_JPPZ>笔记</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/adobe/photoshop><span title=adobe class=categoryLinkLabel_RkOu>adobe</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--active" href=/notes/ai><span title=AI class=categoryLinkLabel_RkOu>AI</span></a><button aria-label="Collapse sidebar category 'AI'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/agent><span title=Agent class=categoryLinkLabel_RkOu>Agent</span></a><button aria-label="Expand sidebar category 'Agent'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/awesome><span title="AI Awesome" class=linkLabel_JPPZ>AI Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/faq><span title="AI FAQ" class=linkLabel_JPPZ>AI FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/glossary><span title="AI Glossary" class=linkLabel_JPPZ>AI Glossary</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/insight><span title="AI Insight" class=linkLabel_JPPZ>AI Insight</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/aigc><span title=AIGC class=linkLabel_JPPZ>AIGC</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/ai/coding/continue><span title=coding class=categoryLinkLabel_RkOu>coding</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dayflow><span title=Dayflow class=linkLabel_JPPZ>Dayflow</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/notes/ai/dev/awesome><span title=dev class=categoryLinkLabel_RkOu>dev</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/awesome><span title="AI Dev Awesome" class=linkLabel_JPPZ>AI Dev Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/faq><span title="AI Dev FAQ" class=linkLabel_JPPZ>AI Dev FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/aiops><span title=AIOps class=linkLabel_JPPZ>AIOps</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/archgw><span title=archgw class=linkLabel_JPPZ>archgw</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/bifrost><span title=bifrost class=linkLabel_JPPZ>bifrost</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/bricksllm><span title=BricksLLM class=linkLabel_JPPZ>BricksLLM</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/chatgpt-next-web><span title=ChatGPT-Next-Web class=linkLabel_JPPZ>ChatGPT-Next-Web</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/codex-cli><span title=Codex class=linkLabel_JPPZ>Codex</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/comfyui><span title=ComfyUI class=linkLabel_JPPZ>ComfyUI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/copilotkit><span title=CopilotKit class=linkLabel_JPPZ>CopilotKit</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/cuda><span title=FAQ class=linkLabel_JPPZ>FAQ</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/evalscope><span title=evalscope class=linkLabel_JPPZ>evalscope</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/genai><span title=genai class=linkLabel_JPPZ>genai</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/notes/ai/dev/ggml/llama.cpp><span title=ggml class=categoryLinkLabel_RkOu>ggml</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/notes/ai/dev/ggml/llama.cpp><span title=llama.cpp class=linkLabel_JPPZ>llama.cpp</span></a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/langchain><span title=langchain class=linkLabel_JPPZ>langchain</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/dev/litellm><span title=LiteLLM class=categoryLinkLabel_RkOu>LiteLLM</span></a><button aria-label="Expand sidebar category 'LiteLLM'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/llama-swap><span title=llama-swap class=linkLabel_JPPZ>llama-swap</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/localai><span title=LocalAI class=linkLabel_JPPZ>LocalAI</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/memory><span title=AGENTS.md class=linkLabel_JPPZ>AGENTS.md</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/ollama><span title=ollama class=linkLabel_JPPZ>ollama</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/portkey-ai-gateway><span title=Portkey-AI/gateway class=linkLabel_JPPZ>Portkey-AI/gateway</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/quantization><span title=Quantization class=linkLabel_JPPZ>Quantization</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/rag><span title=RAG class=linkLabel_JPPZ>RAG</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/repomix><span title=Repomix class=linkLabel_JPPZ>Repomix</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/sglang><span title=sglang class=linkLabel_JPPZ>sglang</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/stable-diffusion.cpp><span title=stable-diffusion.cpp class=linkLabel_JPPZ>stable-diffusion.cpp</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/tgi><span title="Text Generation Inference" class=linkLabel_JPPZ>Text Generation Inference</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/vercel-ai-sdk><span title="Vercel AI SDK" class=linkLabel_JPPZ>Vercel AI SDK</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dev/vllm><span title=vllm class=linkLabel_JPPZ>vllm</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/diffusion><span title=Diffusion class=categoryLinkLabel_RkOu>Diffusion</span></a><button aria-label="Expand sidebar category 'Diffusion'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/dify><span title=Dify class=linkLabel_JPPZ>Dify</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/embedding><span title=Embedding class=linkLabel_JPPZ>Embedding</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/gan><span title=GANs class=categoryLinkLabel_RkOu>GANs</span></a><button aria-label="Expand sidebar category 'GANs'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/gpt><span title=GPT class=categoryLinkLabel_RkOu>GPT</span></a><button aria-label="Expand sidebar category 'GPT'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/inference><span title=推理 class=categoryLinkLabel_RkOu>推理</span></a><button aria-label="Expand sidebar category '推理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/llm><span title=LLM class=categoryLinkLabel_RkOu>LLM</span></a><button aria-label="Expand sidebar category 'LLM'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/maas><span title=MaaS class=categoryLinkLabel_RkOu>MaaS</span></a><button aria-label="Expand sidebar category 'MaaS'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/ml><span title=机器学习 class=categoryLinkLabel_RkOu>机器学习</span></a><button aria-label="Expand sidebar category '机器学习'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/notes/ai/model/awesome><span title=model class=categoryLinkLabel_RkOu>model</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/ner><span title="Named Entity Recognition" class=linkLabel_JPPZ>Named Entity Recognition</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/nlp><span title=NLP class=categoryLinkLabel_RkOu>NLP</span></a><button aria-label="Expand sidebar category 'NLP'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/ocr><span title=OCR class=categoryLinkLabel_RkOu>OCR</span></a><button aria-label="Expand sidebar category 'OCR'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/precision><span title=精度 class=linkLabel_JPPZ>精度</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/projects><span title="AI Projects" class=linkLabel_JPPZ>AI Projects</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/prompt-awesome><span title="Prompt Awesome" class=linkLabel_JPPZ>Prompt Awesome</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/prompts><span title=Prompts class=linkLabel_JPPZ>Prompts</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/prompts-cookbook><span title="Prompts Cookbook" class=linkLabel_JPPZ>Prompts Cookbook</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/service><span title="AI Service" class=categoryLinkLabel_RkOu>AI Service</span></a><button aria-label="Expand sidebar category 'AI Service'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/training><span title=训练 class=categoryLinkLabel_RkOu>训练</span></a><button aria-label="Expand sidebar category '训练'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/notes/ai/vision><span title=视觉 class=linkLabel_JPPZ>视觉</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" tabindex=0 href=/notes/ai/voice><span title=Voice class=categoryLinkLabel_RkOu>Voice</span></a><button aria-label="Expand sidebar category 'Voice'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/algorithm><span title=算法 class=categoryLinkLabel_RkOu>算法</span></a><button aria-label="Expand sidebar category '算法'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/blockchain><span title=区块链 class=categoryLinkLabel_RkOu>区块链</span></a><button aria-label="Expand sidebar category '区块链'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/cn><span title=CN class=categoryLinkLabel_RkOu>CN</span></a><button aria-label="Expand sidebar category 'CN'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/courses><span title=课程 class=categoryLinkLabel_RkOu>课程</span></a><button aria-label="Expand sidebar category '课程'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/culture><span title=文化 class=categoryLinkLabel_RkOu>文化</span></a><button aria-label="Expand sidebar category '文化'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/db><span title=数据库 class=categoryLinkLabel_RkOu>数据库</span></a><button aria-label="Expand sidebar category '数据库'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/dev><span title=开发 class=categoryLinkLabel_RkOu>开发</span></a><button aria-label="Expand sidebar category '开发'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/devops><span title=DevOps class=categoryLinkLabel_RkOu>DevOps</span></a><button aria-label="Expand sidebar category 'DevOps'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/economics><span title=经济学 class=categoryLinkLabel_RkOu>经济学</span></a><button aria-label="Expand sidebar category '经济学'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/electrical><span title=电学基础 class=categoryLinkLabel_RkOu>电学基础</span></a><button aria-label="Expand sidebar category '电学基础'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/embedded/arduino><span title=embedded class=categoryLinkLabel_RkOu>embedded</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/evolve><span title=自我成长 class=categoryLinkLabel_RkOu>自我成长</span></a><button aria-label="Expand sidebar category '自我成长'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/hardware><span title=硬件 class=categoryLinkLabel_RkOu>硬件</span></a><button aria-label="Expand sidebar category '硬件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/healthcare><span title=健康 class=categoryLinkLabel_RkOu>健康</span></a><button aria-label="Expand sidebar category '健康'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/howto/network/dns-prevent-spoofing><span title=howto class=categoryLinkLabel_RkOu>howto</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/java><span title=Java class=categoryLinkLabel_RkOu>Java</span></a><button aria-label="Expand sidebar category 'Java'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/languages><span title=语言 class=categoryLinkLabel_RkOu>语言</span></a><button aria-label="Expand sidebar category '语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/notes/linguistics><span title=Linguistics class=linkLabel_JPPZ>Linguistics</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/math><span title=数学 class=categoryLinkLabel_RkOu>数学</span></a><button aria-label="Expand sidebar category '数学'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/mgmt><span title=管理 class=categoryLinkLabel_RkOu>管理</span></a><button aria-label="Expand sidebar category '管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/network/application/dict><span title=network class=categoryLinkLabel_RkOu>network</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/ops><span title=运维 class=categoryLinkLabel_RkOu>运维</span></a><button aria-label="Expand sidebar category '运维'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/os><span title=操作系统 class=categoryLinkLabel_RkOu>操作系统</span></a><button aria-label="Expand sidebar category '操作系统'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/philosophy><span title=理念 class=categoryLinkLabel_RkOu>理念</span></a><button aria-label="Expand sidebar category '理念'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/photography><span title=摄影 class=categoryLinkLabel_RkOu>摄影</span></a><button aria-label="Expand sidebar category '摄影'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/platform><span title=平台 class=categoryLinkLabel_RkOu>平台</span></a><button aria-label="Expand sidebar category '平台'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/notes/psychology/mbti><span title=psychology class=categoryLinkLabel_RkOu>psychology</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/queue><span title=Queue class=categoryLinkLabel_RkOu>Queue</span></a><button aria-label="Expand sidebar category 'Queue'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/security><span title=安全 class=categoryLinkLabel_RkOu>安全</span></a><button aria-label="Expand sidebar category '安全'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/service><span title=服务 class=categoryLinkLabel_RkOu>服务</span></a><button aria-label="Expand sidebar category '服务'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/software><span title=软件 class=categoryLinkLabel_RkOu>软件</span></a><button aria-label="Expand sidebar category '软件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/std><span title=标准数据 class=categoryLinkLabel_RkOu>标准数据</span></a><button aria-label="Expand sidebar category '标准数据'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/voip><span title=VoIP class=categoryLinkLabel_RkOu>VoIP</span></a><button aria-label="Expand sidebar category 'VoIP'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_irRK menu__link menu__link--sublist" href=/notes/web><span title=Web class=categoryLinkLabel_RkOu>Web</span></a><button aria-label="Expand sidebar category 'Web'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav><button type=button title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_NY7h"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_c8nQ><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_GAGP><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_YQ1L"><div class=docItemContainer_Wjg4><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_tiqF" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_WTWT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/notes/ai><span>AI</span></a><li class=breadcrumbs__item><span class=breadcrumbs__link>dev</span><li class=breadcrumbs__item><span class=breadcrumbs__link>ggml</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>llama.cpp</span></ul></nav><div class="tocCollapsible_GvsH theme-doc-toc-mobile tocMobile_qJgM"><button type=button class="clean-btn tocCollapsibleButton_LnP0">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>llama.cpp</h1></header>
<ul>
<li><a href=https://github.com/ggerganov/llama.cpp target=_blank rel="noopener noreferrer">ggerganov/llama.cpp</a>
<ul>
<li>MIT, C++</li>
<li>LLM inference in C/C++</li>
<li>BLAST</li>
</ul>
</li>
<li>参考
<ul>
<li><a href=https://github.com/withcatai/node-llama-cpp target=_blank rel="noopener noreferrer">withcatai/node-llama-cpp</a></li>
</ul>
</li>
<li>libllama</li>
<li>libggml
<ul>
<li>cpu, blas, metal, cuda</li>
</ul>
</li>
<li>libmtmd</li>
</ul>
<div><ul>
<li>推测解码不支持 vision</li>
</ul></div>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># AlpineLinux py for ML</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">apk add \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  gcc g++ python3 py3-pip musl-dev cmake make pkgconf build-base \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  git openssh-client binutils coreutils util-linux findutils sed grep tar wget curl neofetch \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  rust cargo python3-dev openssl-dev linux-headers</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># llama.cpp</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># =========</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">git clone https://github.com/ggerganov/llama.cpp.git</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">cd llama.cpp</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">make -j</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">./main -m ./models/7B/ggml-model-q4_0.bin -p "Building a website can be done in 10 simple steps:" -n 512</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">./main -m ./models/7B/ggml-model-q4_0.bin --file prompts/alpaca.txt --instruct --ctx_size 2048 --keep -1</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">./main -m ./models/ggml-alpaca-7b-q4.bin --color -f ./prompts/alpaca.txt -ins -b 256 --top_k 10000 --temp 0.2 --repeat_penalty 1 -t 7</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">brew install llama.cpp</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">mkdir models</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">curl -L -o models/qwen3-vl-4b-mmproj-F16.gguf "https://hf-mirror.com/unsloth/Qwen3-VL-4B-Instruct-GGUF/resolve/main/mmproj-F16.gguf"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">curl -L -o models/qwen3-vl-8b-mmproj-F16.gguf "https://hf-mirror.com/unsloth/Qwen3-VL-8B-Instruct-GGUF/resolve/main/mmproj-F16.gguf"</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># 进入 Shell</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># /app/llama-server --no-warmup -hf unsloth/Qwen3-VL-4B-Instruct-GGUF:Q4_K_M</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">docker run --rm -it \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -v $PWD/models:/root/.cache/llama.cpp \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -e HF_ENDPOINT=https://modelscope.cn \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  --entrypoint bash \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  ghcr.m.daocloud.io/ggml-org/llama.cpp:server-cuda</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># 下载 model</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">docker run --rm -it \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -v $PWD/models:/root/.cache/llama.cpp \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -e HF_ENDPOINT=https://modelscope.cn \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  ghcr.m.daocloud.io/ggml-org/llama.cpp:server-cuda \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -hf unsloth/Qwen3-VL-4B-Instruct-GGUF:Q4_K_M</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># -m /models/7B/ggml-model-q4_0.gguf --port 8000 --host 0.0.0.0 -n 512</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># --run -m /models/7B/ggml-model-q4_0.gguf -p "Building a website can be done in 10 simple steps:" -n 512 --n-gpu-layers 1</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">docker run --rm -it \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  --gpus all \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -p 8080:8080 \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -v $PWD/models:/models \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -v $PWD/models:/root/.cache/llama.cpp \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -e HF_ENDPOINT=https://modelscope.cn \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  --name llama.cpp ghcr.m.daocloud.io/ggml-org/llama.cpp:server-cuda \</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  -hf unsloth/Qwen3-VL-4B-Instruct-GGUF:Q4_K_M -np 8 -c 32000 -cb -n 8 --mmproj /models/qwen3-vl-mmproj-F16.gguf -ngl 99</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># https://modelscope.cn/models/unsloth/Qwen3-VL-4B-Instruct-GGUF</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># https://hf-mirror.com</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># ~/Library/Caches/llama.cpp</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># /root/.cache/llama.cpp</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">llama-server --jinja -fa auto -hf unsloth/Qwen3-VL-4B-Instruct-GGUF:Q4_K_M</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">HF_ENDPOINT=https://modelscope.cn llama-server -hf unsloth/Qwen3-VL-4B-Instruct-GGUF:Q4_K_M</span><br/></span></code></pre></div></div>
<ul>
<li>默认 Q4_K_M</li>
</ul>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">KV_size = n_ctx × n_layer × n_embd_k_gqa × sizeof(f16)</span><br/></span></code></pre></div></div>
<ul>
<li><a href=https://lmcache.ai/kv_cache_calculator.html target=_blank rel="noopener noreferrer">https://lmcache.ai/kv_cache_calculator.html</a></li>
<li><a href=https://huggingface.co/collections/ggml-org/ target=_blank rel="noopener noreferrer">https://huggingface.co/collections/ggml-org/</a></li>
<li><a href=https://huggingface.co/collections/unsloth/qwen3-vl target=_blank rel="noopener noreferrer">https://huggingface.co/collections/unsloth/qwen3-vl</a></li>
</ul>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># 查看 slot 分配情况</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">curl http://localhost:8080/slots</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># 输入 token 长度</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># slot update_slots: id  3 | task 2094 | new prompt, n_ctx_slot = 65536, n_keep = 0, task.n_tokens = 950</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">docker logs llama | grep task.n_tokens</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># 总长度</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">docker logs llama | grep 'stop processing: n_tokens'</span><br/></span></code></pre></div></div>










































































































































































































































































































































































































































































































<table><thead><tr><th style=text-align:left>Flag<th style=text-align:left>默认<th style=text-align:left>说明<tbody><tr><td style=text-align:left><strong>Server</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>--host HOST</code><td style=text-align:left>127.0.0.1<td style=text-align:left>监听地址<tr><td style=text-align:left><code>--port PORT</code><td style=text-align:left>8080<td style=text-align:left>监听端口<tr><td style=text-align:left><code>--path PATH</code><td style=text-align:left><td style=text-align:left>静态文件服务路径<tr><td style=text-align:left><code>--api-prefix PREFIX</code><td style=text-align:left><td style=text-align:left>API URL 前缀<tr><td style=text-align:left><code>--api-key KEY</code><td style=text-align:left><td style=text-align:left>API 密钥<tr><td style=text-align:left><code>-to, --timeout N</code><td style=text-align:left>600<td style=text-align:left>读写超时 (秒)<tr><td style=text-align:left><code>--threads-http N</code><td style=text-align:left>-1<td style=text-align:left>HTTP 处理线程数<tr><td style=text-align:left><code>--metrics</code><td style=text-align:left>false<td style=text-align:left>启用 Prometheus 指标<tr><td style=text-align:left><code>--slots</code><td style=text-align:left>true<td style=text-align:left>启用 slots 监控端点<tr><td style=text-align:left><code>--no-webui</code><td style=text-align:left>false<td style=text-align:left>禁用 Web UI<tr><td style=text-align:left><code>-a, --alias NAME</code><td style=text-align:left><td style=text-align:left>模型别名 (API使用)<tr><td style=text-align:left><strong>Model</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>-m, --model FNAME</code><td style=text-align:left><td style=text-align:left>模型路径<tr><td style=text-align:left><code>-mu, --model-url URL</code><td style=text-align:left><td style=text-align:left>模型下载 URL<tr><td style=text-align:left><code>-hf, --hf-repo &lt;repo></code><td style=text-align:left><td style=text-align:left>Hugging Face 模型仓库 <code>&lt;user>/&lt;model>[:quant]</code><tr><td style=text-align:left><code>-hff, --hf-file &lt;file></code><td style=text-align:left><td style=text-align:left>Hugging Face 模型文件 (覆盖 repo 中的 quant)<tr><td style=text-align:left><code>-hft, --hf-token TOKEN</code><td style=text-align:left><td style=text-align:left>Hugging Face Token<tr><td style=text-align:left><code>-c, --ctx-size N</code><td style=text-align:left>4096<td style=text-align:left>上下文大小, 0=模型定义<tr><td style=text-align:left><code>--mmproj FILE</code><td style=text-align:left><td style=text-align:left>Multimodal projector file (Vision)<tr><td style=text-align:left><code>-ctk, --cache-type-k TYPE</code><td style=text-align:left>f16<td style=text-align:left>K Cache 类型 (f16, q8_0, q4_0 等)<tr><td style=text-align:left><code>-ctv, --cache-type-v TYPE</code><td style=text-align:left>f16<td style=text-align:left>V Cache 类型<tr><td style=text-align:left><strong>Reasoning</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>--reasoning-format FORMAT</code><td style=text-align:left>deepseek<td style=text-align:left>推理格式: none, deepseek, deepseek-legacy<tr><td style=text-align:left><code>--reasoning-budget N</code><td style=text-align:left>-1<td style=text-align:left>推理预算 (thinking budget)<tr><td style=text-align:left><strong>Speculative Decoding (Draft)</strong><td style=text-align:left><td style=text-align:left>⚠️ <strong>注意</strong>: 开启推测解码（包括无模型）有时会导致严重掉速（例：80 t/s -> 30 t/s），强烈建议压测后再决定是否留在生产环境<tr><td style=text-align:left><code>-md, --model-draft FNAME</code><td style=text-align:left><td style=text-align:left>Draft model for speculative decoding<tr><td style=text-align:left><code>-hfd, --hf-repo-draft &lt;repo></code><td style=text-align:left><td style=text-align:left>Draft model Hugging Face repo<tr><td style=text-align:left><code>-ngld, --gpu-layers-draft N</code><td style=text-align:left><td style=text-align:left>GPU layers for draft model<tr><td style=text-align:left><code>--draft-max, --draft N</code><td style=text-align:left>16<td style=text-align:left>推测最大 Token 数 (代码可设 48-64; 聊天 16-32)<tr><td style=text-align:left><code>--draft-min N</code><td style=text-align:left>0<td style=text-align:left>最小推测长度。频繁校验太小耗时，太大太难。建议 (10-15)<tr><td style=text-align:left><code>--draft-p-min P</code><td style=text-align:left>0.8<td style=text-align:left>Minimum speculative decoding probability<tr><td style=text-align:left><code>--spec-type TYPE</code><td style=text-align:left><td style=text-align:left>自推测匹配算法，如 <code>ngram-mod</code>。无 draft 模型时使用该标志即开启无模型自验证推测<tr><td style=text-align:left><code>--spec-ngram-size-n N</code><td style=text-align:left>12<td style=text-align:left>匹配历史的窗口大小，结构复杂可尝试增至 16-24 提高匹配精度<tr><td style=text-align:left><code>-cd, --ctx-size-draft N</code><td style=text-align:left>0<td style=text-align:left>Draft model context size<tr><td style=text-align:left><code>-devd, --device-draft</code><td style=text-align:left><td style=text-align:left>Device for draft model<tr><td style=text-align:left><strong>LoRA / Adapter</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>--lora FNAME</code><td style=text-align:left><td style=text-align:left>Path to LoRA adapter<tr><td style=text-align:left><code>--lora-scaled FNAME SCALE</code><td style=text-align:left><td style=text-align:left>Path to LoRA adapter with user defined scaling<tr><td style=text-align:left><code>--lora-init-without-apply</code><td style=text-align:left>false<td style=text-align:left>Load LoRA adapters without applying them<tr><td style=text-align:left><code>--control-vector FNAME</code><td style=text-align:left><td style=text-align:left>Add a control vector<tr><td style=text-align:left><strong>Process / Hardware</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>-t, --threads N</code><td style=text-align:left>-1<td style=text-align:left>生成线程数<tr><td style=text-align:left><code>-tb, --threads-batch N</code><td style=text-align:left>same<td style=text-align:left>批处理和 prompt 处理线程数<tr><td style=text-align:left><code>-b, --batch-size N</code><td style=text-align:left>2048<td style=text-align:left>逻辑最大批处理大小 (Logical max batch size)<tr><td style=text-align:left><code>-ub, --ubatch-size N</code><td style=text-align:left>512<td style=text-align:left>物理最大批处理大小 (Physical max batch size)<tr><td style=text-align:left><code>-ngl, --gpu-layers N</code><td style=text-align:left><td style=text-align:left>GPU 层数 (VRAM offload)<tr><td style=text-align:left><code>-sm, --split-mode MODE</code><td style=text-align:left>layer<td style=text-align:left>GPU 分割模式: <code>layer</code> (按层分配给单卡) 或 <code>row</code> (横向切层，多卡合算单层，强吞吐吃带宽)<tr><td style=text-align:left><code>-ts, --tensor-split</code><td style=text-align:left><td style=text-align:left>多 GPU 分割比例 (如 3,1)<tr><td style=text-align:left><code>-mg, --main-gpu INDEX</code><td style=text-align:left>0<td style=text-align:left>主 GPU<tr><td style=text-align:left><code>-fit, --fit [on|off]</code><td style=text-align:left>on<td style=text-align:left>是否依据设备可用显存自动调整未设定的参数（如 ctx-size、gpu-layers），使之恰好能装入 VRAM。默认<strong>开启</strong><tr><td style=text-align:left><code>-fitt, --fit-target MiB0,...</code><td style=text-align:left>1024<td style=text-align:left>为设备预留的显存空余量 (Target margin)，避免 OOM。支持为不同卡分别设置逗号分隔<tr><td style=text-align:left><code>-fitc, --fit-ctx N</code><td style=text-align:left>4096<td style=text-align:left><code>--fit</code> 被允许自动下探调整出的最小上下文大小<tr><td style=text-align:left><code>-fa, --flash-attn</code><td style=text-align:left>false<td style=text-align:left>启用 Flash Attention<tr><td style=text-align:left><code>-dev, --device &lt;devs></code><td style=text-align:left><td style=text-align:left>指定使用设备<tr><td style=text-align:left><code>--numa TYPE</code><td style=text-align:left><td style=text-align:left>NUMA 优化: distribute, isolate, numactl<tr><td style=text-align:left><code>--mlock</code><td style=text-align:left>false<td style=text-align:left>锁定内存 (防止交换)<tr><td style=text-align:left><code>--no-mmap</code><td style=text-align:left>false<td style=text-align:left>禁用 mmap (慢加载但减少缺页)<tr><td style=text-align:left><code>--no-kv-offload</code><td style=text-align:left>false<td style=text-align:left>禁用 KV Offload<tr><td style=text-align:left><strong>Sampling</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>--samplers</code><td style=text-align:left>...<td style=text-align:left>采样器顺序 (默认: penalties;dry;top_n_sigma;top_k;typ_p;top_p;min_p;xtc;temperature)<tr><td style=text-align:left><code>-s, --seed SEED</code><td style=text-align:left>-1<td style=text-align:left>随机种子 (-1=随机)<tr><td style=text-align:left><code>--temp N</code><td style=text-align:left>0.8<td style=text-align:left>温度<tr><td style=text-align:left><code>--dynatemp-range N</code><td style=text-align:left>0.0<td style=text-align:left>动态温度范围<tr><td style=text-align:left><code>--top-k N</code><td style=text-align:left>40<td style=text-align:left>Top-K 采样<tr><td style=text-align:left><code>--top-p N</code><td style=text-align:left>0.9<td style=text-align:left>Top-P 采样<tr><td style=text-align:left><code>--min-p N</code><td style=text-align:left>0.1<td style=text-align:left>Min-P 采样<tr><td style=text-align:left><code>--xtc-probability N</code><td style=text-align:left>0.0<td style=text-align:left>XTC 概率<tr><td style=text-align:left><code>--xtc-threshold N</code><td style=text-align:left>0.1<td style=text-align:left>XTC 阈值<tr><td style=text-align:left><code>--typical N</code><td style=text-align:left>1.0<td style=text-align:left>Locally typical sampling<tr><td style=text-align:left><code>--repeat-last-n N</code><td style=text-align:left>64<td style=text-align:left>重复惩罚的最后 n 个 token (0=disabled, -1=ctx_size)<tr><td style=text-align:left><code>--repeat-penalty N</code><td style=text-align:left>1.0<td style=text-align:left>重复惩罚<tr><td style=text-align:left><code>--presence-penalty N</code><td style=text-align:left>0.0<td style=text-align:left>出现惩罚<tr><td style=text-align:left><code>--frequency-penalty N</code><td style=text-align:left>0.0<td style=text-align:left>频率惩罚<tr><td style=text-align:left><code>--dry-multiplier N</code><td style=text-align:left>0.0<td style=text-align:left>DRY 采样倍率<tr><td style=text-align:left><code>--mirostat N</code><td style=text-align:left>0<td style=text-align:left>Mirostat 采样 (0=disabled, 1=v1, 2=v2)<tr><td style=text-align:left><code>--grammar GRAMMAR</code><td style=text-align:left><td style=text-align:left>BNF 语法约束<tr><td style=text-align:left><code>-j, --json-schema</code><td style=text-align:left><td style=text-align:left>JSON Schema 约束<tr><td style=text-align:left><code>-l, --logit-bias</code><td style=text-align:left><td style=text-align:left>Logit 偏差 <code>TOKEN_ID(+/-)BIAS</code><tr><td style=text-align:left><code>--ignore-eos</code><td style=text-align:left>false<td style=text-align:left>忽略 EOS Token<tr><td style=text-align:left><strong>Context & RoPE</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>-cb, --cont-batching</code><td style=text-align:left>true<td style=text-align:left>连续批处理 (Continuous batching)<tr><td style=text-align:left><code>-nocb, --no-cont-batching</code><td style=text-align:left><td style=text-align:left>禁用连续批处理<tr><td style=text-align:left><code>-np, --parallel N</code><td style=text-align:left>1<td style=text-align:left>并行解码序列数 (Slots)<tr><td style=text-align:left><code>-n, --predict N</code><td style=text-align:left>-1<td style=text-align:left>预测 token 数量, -1=无限<tr><td style=text-align:left><code>--keep N</code><td style=text-align:left>0<td style=text-align:left>保留初始 Prompt Token 数 (-1=all)<tr><td style=text-align:left><code>--cache-reuse N</code><td style=text-align:left>0<td style=text-align:left>最小 Cache 重用 Chunk 大小<tr><td style=text-align:left><code>--no-context-shift</code><td style=text-align:left>false<td style=text-align:left>禁用上下文移动 (无限生成时)<tr><td style=text-align:left><code>--rope-scaling TYPE</code><td style=text-align:left><td style=text-align:left>RoPE 缩放类型: none, linear, yarn<tr><td style=text-align:left><code>--rope-freq-base N</code><td style=text-align:left><td style=text-align:left>RoPE 基频<tr><td style=text-align:left><code>--rope-freq-scale N</code><td style=text-align:left><td style=text-align:left>RoPE 频率缩放因子<tr><td style=text-align:left><strong>Other</strong><td style=text-align:left><td style=text-align:left><tr><td style=text-align:left><code>--embedding</code><td style=text-align:left>false<td style=text-align:left>仅嵌入模式<tr><td style=text-align:left><code>--reranking</code><td style=text-align:left>false<td style=text-align:left>启用重排序端点<tr><td style=text-align:left><code>--jinja</code><td style=text-align:left>false<td style=text-align:left>使用 Jinja 模板<tr><td style=text-align:left><code>--chat-template NAME</code><td style=text-align:left><td style=text-align:left>指定聊天模板</table>
<ul>
<li>图片预处理: 图片解码、resize、normalize 在 CPU 上
<ul>
<li>clip_image_preprocess</li>
<li>支持批处理</li>
</ul>
</li>
</ul>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">logits -> logit-bias -> penalties -> dry -> top-n-sigma -> top-k -> typical -> top-p -> min-p -> xtc -> temp-ext -> dist</span><br/></span></code></pre></div></div>





























































<table><thead><tr><th>sample<th>params/flags<tbody><tr><td>logit-bias<td><code>--logit-bias &lt;id> &lt;bias></code><tr><td>penalties (repeat/presence/freq)<td><code>--repeat-penalty</code>, <code>--repeat-last-n</code>, <code>--presence-penalty</code>, <code>--frequency-penalty</code><tr><td>dry<td><code>--dry-multiplier</code>, <code>--dry-base</code>, <code>--dry-allowed-length</code>, <code>--dry-penalty-last-n</code>, <code>--dry-sequence-breakers</code><tr><td>top-n-sigma<td><code>--top-n-sigma</code><tr><td>top-k<td><code>--top-k</code>, <code>--min-keep</code><tr><td>typical<td><code>--typical-p</code>, <code>--min-keep</code><tr><td>top-p<td><code>--top-p</code>, <code>--min-keep</code><tr><td>min-p<td><code>--min-p</code>, <code>--min-keep</code><tr><td>xtc<td><code>--xtc-probability</code>, <code>--xtc-threshold</code>, <code>--min-keep</code>, <code>--seed</code><tr><td>temp-ext (temperature / 动态温度)<td><code>--temp</code>, <code>--dynatemp-range</code>, <code>--dynatemp-exp</code><tr><td>dist (最终采样)<td><code>--seed</code><tr><td>mirostat (替代链，启用后跳过上面大部分)<td><code>--mirostat {1|2}</code>, <code>--temp</code>, <code>--mirostat-tau</code>, <code>--mirostat-eta</code><tr><td>grammar（非 sampler，但会前/后置约束）<td><code>--grammar</code>, <code>--grammar-lazy</code>, <code>--grammar-trigger-*</code></table>
<p>说明：</p>
<ul>
<li>默认 sampler 顺序：penalties → dry → top-n-sigma → top-k → typical → top-p → min-p → xtc → temperature → dist，前面固定有 logit-bias，末尾固定 dist。</li>
<li><code>--min-keep</code> 影响 top-k/top-p/min-p/typical/xtc 的保留下限。</li>
</ul>
<p>mirostat 是一种自适应采样算法，通过调节温度让输出熵稳定在目标值，以减少跑偏/重复。
启用后会替换默认的 top-k/p/typical 链，仅保留 temp + mirostat 组合。</p>

























<table><thead><tr><th>param<th>flag<tbody><tr><td>mirostat（0=关，1=v1，2=v2）<td>--mirostat {0|1|2}<tr><td>mirostat_tau（目标熵，常用 5.0）<td>--mirostat-tau <float></float><tr><td>mirostat_eta（学习率，常用 0.1）<td>--mirostat-eta <float></float><tr><td>temperature（mirostat 也需要基础温度）<td>--temp <float></float></table>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">原始 Logits (模型输出)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">1. logit-bias      → 手动调整特定 token 的 logit 值</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">2. penalties       → 应用重复惩罚（repeat/presence/frequency penalty）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">3. dry             → DRY 重复惩罚（更智能的重复检测）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">4. top-n-sigma     → Top-N-Sigma 采样（基于统计分布）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">5. top-k           → Top-K 采样（保留前 K 个 token）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">6. typical         → Typical P 采样（保留典型概率的 token）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">7. top-p           → Top-P (Nucleus) 采样（累积概率阈值）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">8. min-p           → Min-P 采样（相对最小概率阈值）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">9. xtc             → XTC 采样（移除低概率 token）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">10. temp-ext        → 动态温度缩放（根据熵调整温度）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">11. dist            → 最终概率分布采样（softmax + 随机选择）</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">    ↓</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">选中的 Token</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=nodejs>nodejs<a href=#nodejs class=hash-link aria-label="Direct link to nodejs" title="Direct link to nodejs" translate=no>​</a></h2>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">NODE_LLAMA_CPP_SKIP_DOWNLOAD=1 pnpm add node-llama-cpp</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=多卡与硬件调优探查>多卡与硬件调优探查<a href=#多卡与硬件调优探查 class=hash-link aria-label="Direct link to 多卡与硬件调优探查" title="Direct link to 多卡与硬件调优探查" translate=no>​</a></h2>
<p>当拥有多张显卡时可以通过配置切分模式等达到极高的并行度，但也要注意硬件总线带宽。</p>
<ul>
<li><strong><code>-sm, --split-mode</code> (拆分模式)</strong>: 决定多张显卡时模型权重矩阵的切分方式。
<ul>
<li><code>layer</code> (默认): 按层划分。如卡 1 负责 1-20 层，卡 2 负责 21-40层。数据处理完前 20 层后才移交给下一张卡。计算带宽要求低。</li>
<li><code>row</code>: 按行拆分权重矩阵。每一层计算横向切开，所有显卡同时处理<strong>同一层</strong>的不同部分再汇总结果。这是最硬核、最吃显存带宽和总线的模式。
<ul>
<li>可能性能降低</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>检查多卡拓扑与 NVLink</strong>：</p>
<div class="language-bash codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-bash codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain"># 查看显卡在 PCIe 还是 NVLink 等总线拓扑</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">nvidia-smi topo -m</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain"># 查看 NVLink 的活跃链路和报错状态</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">nvidia-smi nvlink -s</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=quantization>quantization<a href=#quantization class=hash-link aria-label="Direct link to quantization" title="Direct link to quantization" translate=no>​</a></h2>
<ul>
<li><code>Q4_K_M</code>
<ul>
<li>Q - Quantization</li>
<li><code>4</code> - 4 bits</li>
<li><code>K</code> - K-Quants</li>
<li><code>M</code> - Medium
<ul>
<li>XXS</li>
<li>S - 比 Q4_0 好</li>
<li>M</li>
<li>L - 接近 Q5</li>
<li>XL</li>
</ul>
</li>
</ul>
</li>
<li>gguf</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=server>server<a href=#server class=hash-link aria-label="Direct link to server" title="Direct link to server" translate=no>​</a></h2>
<ul>
<li><a href=https://github.com/ggml-org/llama.cpp/tree/master/tools/server target=_blank rel="noopener noreferrer">https://github.com/ggml-org/llama.cpp/tree/master/tools/server</a></li>
<li>KV cache
<ul>
<li>-ctk, --cache-type-k TYPE</li>
<li>-ctv, --cache-type-v TYPE</li>
<li>默认 f16</li>
<li>支持 f32, f16, bf16, q8_0, q4_0, q4_1, iq4_nl, q5_0, q5_1</li>
</ul>
</li>
<li>Pooling - 多个向量 -> 单个向量
<ul>
<li>none</li>
<li>mean</li>
<li>cls - <code>[CLS]</code> Token</li>
<li>last - 最后一个 Token</li>
<li>rank</li>
</ul>
</li>
<li>normalize
<ul>
<li>Euclidean/L2</li>
<li>Taxicab/L1 - 曼哈顿距离</li>
<li>Max absolute - <code>[-1, 1]</code></li>
<li>P-Norm</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=lib>lib<a href=#lib class=hash-link aria-label="Direct link to lib" title="Direct link to lib" translate=no>​</a></h2>





















<table><thead><tr><th>库文件<th>说明<tbody><tr><td>libllama<td>主要的 llama 库<tr><td>libggml<td>GGML 核心库: 后端 Metal, CPU, BLAS, CUDA<tr><td>libmtmd<td>多模态支持</table>
<ul>
<li>libmtmd -> libllama -> libggml</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=api>API<a href=#api class=hash-link aria-label="Direct link to API" title="Direct link to API" translate=no>​</a></h2>
<ul>
<li><code>chat_template_kwargs</code>
<ul>
<li>可以用于关闭思考模式等额外宏标记。</li>
<li>启动参数配置：<code>--chat-template-kwargs "{\"enable_thinking\": false}"</code></li>
<li><strong>JSON Body 控制</strong>：在 <code>/v1/chat/completions</code> API 请求 Body 中也能直接传入该参数，例如 <code>{"chat_template_kwargs": {"enable_thinking": false}}</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=speculative-decoding>speculative decoding<a href=#speculative-decoding class=hash-link aria-label="Direct link to speculative decoding" title="Direct link to speculative decoding" translate=no>​</a></h2>
<ul>
<li>speculative decoding - 推测编码 / 投机采样
<ul>
<li>使用小模型 draft 大模型验证，提升推理速度</li>
</ul>
</li>
<li>self speculative decoding - 自投机采样
<ul>
<li>利用已经生成的历史 Token 来预测未来</li>
<li>模型内自带这样的推测编码逻辑</li>
</ul>
</li>
<li>基于历史输出匹配直接猜测输出
<ul>
<li>缓存匹配输出</li>
</ul>
</li>
<li>适用场景
<ul>
<li>CoT</li>
<li>代码补全/重构</li>
<li>重复输出 - coding agent
<ul>
<li>e.g. 50t/s -> 150t/s</li>
<li>降低 --temp ， 因为这样输出更稳定</li>
<li>没有重复输出的时候 80t/s -> 50t/s - 存在性能下降问题</li>
</ul>
</li>
</ul>
</li>
<li>参考
<ul>
<li>spec : add ngram-mod <a href=https://github.com/ggml-org/llama.cpp/pull/19164 target=_blank rel="noopener noreferrer">https://github.com/ggml-org/llama.cpp/pull/19164</a>
<ul>
<li>内存维护 Hash 表, 16MB</li>
</ul>
</li>
<li>Add self‑speculative decoding (no draft model required) <a href=https://github.com/ggml-org/llama.cpp/pull/18471 target=_blank rel="noopener noreferrer">https://github.com/ggml-org/llama.cpp/pull/18471</a></li>
</ul>
</li>
<li>测试案例
<ul>
<li>Write a quicksort sort algorithm in C, no comments, no main</li>
<li>add main, read n from stdin</li>
</ul>
</li>
</ul>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">--spec-type ngram-mod --spec-ngram-size-n 16 --draft-max 48 --draft-min 10</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=llama-fit-params>llama-fit-params<a href=#llama-fit-params class=hash-link aria-label="Direct link to llama-fit-params" title="Direct link to llama-fit-params" translate=no>​</a></h2>
<p>输出检测合适的参数</p>
<ul>
<li>llama 默认开启了 --fit</li>
<li>mmproj 可能推测会有问题</li>
</ul>
<h1>FAQ</h1>
<h2 class="anchor anchorWithStickyNavbar_EG6R" id=speculative-decoding-is-not-supported-by-multimodal-it-will-be-disabled>speculative decoding is not supported by multimodal, it will be disabled<a href=#speculative-decoding-is-not-supported-by-multimodal-it-will-be-disabled class=hash-link aria-label="Direct link to speculative decoding is not supported by multimodal, it will be disabled" title="Direct link to speculative decoding is not supported by multimodal, it will be disabled" translate=no>​</a></h2>
<p>多模态模型不支持 spec</p>
<div class="language-text codeBlockContainer_ljD1 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_rhaG><pre tabindex=0 class="prism-code language-text codeBlock_mx9Q thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_NG8l><span class=token-line style=color:#bfc7d5><span class="token plain">srv    load_model: speculative decoding is not supported by multimodal, it will be disabled</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">srv    load_model: initializing slots, n_slots = 2</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">common_speculative_is_compat: the target context does not support partial sequence removal</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">srv    load_model: speculative decoding not supported by this context</span><br/></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class=col><b>Tags:</b><ul class="tags_noif padding--none margin-left--sm"><li class=tag_mzC7><a rel=tag class="tag_xI_x tagRegular_Q4uH" href=/notes/tags/engine>Engine</a></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/wenerme/wener/edit/master/notes/../notes/ai/dev/ggml/llama.cpp.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_A7Jz aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_Hg3U"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2026-03-02T05:29:28.000Z itemprop=dateModified>Mar 2, 2026</time></b> by <b>wener</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/notes/ai/dev/genai><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>genai</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/notes/ai/dev/langchain><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>langchain</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_wpyd thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#nodejs class="table-of-contents__link toc-highlight">nodejs</a><li><a href=#多卡与硬件调优探查 class="table-of-contents__link toc-highlight">多卡与硬件调优探查</a><li><a href=#quantization class="table-of-contents__link toc-highlight">quantization</a><li><a href=#server class="table-of-contents__link toc-highlight">server</a><li><a href=#lib class="table-of-contents__link toc-highlight">lib</a><li><a href=#api class="table-of-contents__link toc-highlight">API</a><li><a href=#speculative-decoding class="table-of-contents__link toc-highlight">speculative decoding</a><li><a href=#llama-fit-params class="table-of-contents__link toc-highlight">llama-fit-params</a><li><a href=#speculative-decoding-is-not-supported-by-multimodal-it-will-be-disabled class="table-of-contents__link toc-highlight">speculative decoding is not supported by multimodal, it will be disabled</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>笔记</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/notes/java>Java</a><li class=footer__item><a class=footer__link-item href=/notes/os/alpine>AlpineLinux</a><li class=footer__item><a class=footer__link-item href=/notes/devops/kubernetes>Kubernates</a><li class=footer__item><a class=footer__link-item href=/notes/voip>VoIP</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Projects</div><ul class="footer__items clean-list"><li class=footer__item>
              <div>
              <a class=footer__link-item href=https://github.com/wenerme/wener>Wener</a>
              -
              <a class=footer__link-item href=https://github.com/wenerme/wener/actions title="wenerme/wener - ci">
              <img style="vertical-align: middle;opacity: .4;" src=https://github.com/wenerme/wener/workflows/Build/badge.svg />
              </a>
              </div>
              <li class=footer__item><a href=https://apis.wener.me target=_blank rel="noopener noreferrer" class=footer__link-item>Wener's Apis<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_kUGX><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Social</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/story>Blog</a><li class=footer__item><a href=https://github.com/wenerme target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub</a><li class=footer__item><a href=https://twitter.com/wenerme target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter</a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/wener-logo.svg alt="Wener Site" class="footer__logo themedComponent_j2y5 themedComponent--light_v877"/><img src=/img/wener-logo.svg alt="Wener Site" class="footer__logo themedComponent_j2y5 themedComponent--dark_PUQY"/></div><div class=footer__copyright>Copyright © 1992-2026 Wener - <img alt=cc-by-sa-4.0 src=https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg /> - Build @2026-03-02 13:32</div></div></div></footer></div></body>