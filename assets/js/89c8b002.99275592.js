"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["45088"],{99513:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>r,toc:()=>d,default:()=>h,metadata:()=>l,assets:()=>c,contentTitle:()=>o});var l=JSON.parse('{"id":"web/react/jotai","title":"Jotai","description":"- pmndrs/jotai \u662F\u4EC0\u4E48\uFF1F","source":"@site/../notes/web/react/jotai.md","sourceDirName":"web/react","slug":"/web/react/jotai","permalink":"/notes/web/react/jotai","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/react/jotai.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1713335755000,"frontMatter":{"title":"Jotai"},"sidebar":"docs","previous":{"title":"immer","permalink":"/notes/web/react/immer"},"next":{"title":"million","permalink":"/notes/web/react/million"}}'),s=i(86106),t=i(17776);let r={title:"Jotai"},o="Jotai",c={},d=[{value:"utils",id:"utils",level:2},{value:"\u96C6\u6210",id:"\u96C6\u6210",level:2}];function a(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"jotai",children:"Jotai"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/pmndrs/jotai",children:"pmndrs/jotai"})," \u662F\u4EC0\u4E48\uFF1F\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"7.1kB/2.7kB"}),"\n",(0,s.jsx)(e.li,{children:"\u5927\u72B6\u6001\u62C6\u5206\u5C0F(\u539F\u5B50/atom)\u72B6\u6001 - \u539F\u5B50\u72B6\u6001\u66F4\u5229\u4E8E\u590D\u7528\u548C\u51CF\u5C0F\u53D8\u5316\u5F71\u54CD\u8303\u56F4"}),"\n",(0,s.jsxs)(e.li,{children:["\u6838\u5FC3\u63A5\u53E3 atom, Provider, useAtom, Store\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"jotai/utils \u5305\u542B\u5176\u4ED6\u5DE5\u5177 atom"}),"\n",(0,s.jsx)(e.li,{children:"jotai/\u96C6\u6210 \u5305\u542B\u4E0E\u5176\u4ED6\u5E93\u96C6\u6210\u7684\u903B\u8F91 - zustand, xstate, react-query, redux, immer, valtio"}),"\n",(0,s.jsxs)(e.li,{children:["jotai/devtools - Redux devtool \u96C6\u6210 - ",(0,s.jsx)(e.code,{children:"useAtomDevtools(tasksAtom)"})," - \u4F9D\u8D56 debugLabel"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u7C7B\u4F3C Recoli \u4F46\u4F7F\u7528\u4E0A\u66F4\u7B80\u5355"}),"\n",(0,s.jsxs)(e.li,{children:["\u66FF\u4EE3 ",(0,s.jsx)(e.code,{children:"useState"}),"+",(0,s.jsx)(e.code,{children:"useContext"})]}),"\n",(0,s.jsx)(e.li,{children:"Suspense"}),"\n",(0,s.jsxs)(e.li,{children:["vs Recoil\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["jotai: \u6700\u5C0F\u5316\u63A5\u53E3, \u4E0D\u4F7F\u7528\u5B57\u7B26\u4E32\u6807\u8BC6, TypeScript\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Jotai advantages over Recoil ",(0,s.jsx)(e.a,{href:"https://github.com/pmndrs/jotai/issues/420",children:"#420"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"recoil: string key, \u5E8F\u5217\u5316\u652F\u6301\u66F4\u597D"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/pmndrs/jotai/blob/master/docs/introduction/comparison.md",children:"vs zustand"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://blog.axlight.com/posts/jotai-tips/",children:"https://blog.axlight.com/posts/jotai-tips/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \u63A8\u8350 focusAtom\nnpm install jotai optics-ts jotai-optics\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["jotai \u63D0\u4F9B\u539F\u5B50\u80FD\u529B\uFF0C\u53EF\u4EE5\u4E0E\u73B0\u6709\u72B6\u6001\u7BA1\u7406\u96C6\u6210\u4F7F\u7528 - ",(0,s.jsx)(e.a,{href:"/notes/web/react/zustand",children:"zustand"}),", ",(0,s.jsx)(e.a,{href:"/notes/web/react/valtio",children:"valtio"}),", xstate, redux, ",(0,s.jsx)(e.a,{href:"../../service/api/urql.md",children:"urql"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u72B6\u6001\u62C6\u5206 splitAtom, selectAtom, focusAtom ",(0,s.jsx)(e.a,{href:"https://github.com/akheron/optics-ts",children:"optics-ts"})," 9kB/3kB"]}),"\n",(0,s.jsxs)(e.li,{children:["atom \u548C async/await \u4E00\u6837\u6709\u4F20\u67D3\u6027\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u56E0\u6B64 jotai \u63D0\u4F9B\u975E\u5E38\u591A\u7684\u96C6\u6210\u548C\u8F85\u52A9"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["atom vs ",(0,s.jsx)(e.a,{href:"/notes/web/react/valtio",children:"valtio"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["valtio\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u57FA\u4E8E\u4EE3\u7406\uFF0C\u4E0D\u80FD\u968F\u4FBF\u4F20\u9012 - \u63A5\u6536\u65B9\u660E\u786E\u77E5\u9053\u662F \u4EE3\u7406"}),"\n",(0,s.jsx)(e.li,{children:"\u66F4\u5BB9\u6613 select \u90E8\u5206\u72B6\u6001"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["atom\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6709\u4E13\u95E8\u7684 wrapper \u7C7B\u578B - \u7C7B\u4F3C Promise\uFF0C\u63A5\u6536\u65B9\u80AF\u5B9A\u77E5\u9053\u662F atom"}),"\n",(0,s.jsx)(e.li,{children:"\u4FB5\u5165\u6027\u66F4\u5927\uFF0C\u4F46\u66F4\u4E0D\u5BB9\u6613\u51FA\u9519\uFF0C\u53EF\u4EE5\u76F4\u63A5\u4F20\u9012\u4F7F\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u4F9D\u8D56 focusAtom\u3001splitAtom\u3001selectAtom \u6765\u62C6\u5206\u72B6\u6001"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Store \u4E3A\u4E0A\u4E0B\u6587\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53EF\u4EE5\u5728\u975E react \u73AF\u5883\u4F7F\u7528"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:".get"}),",",(0,s.jsx)(e.code,{children:".set"}),",",(0,s.jsx)(e.code,{children:".sub"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"utils",children:"utils"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["storage - ",(0,s.jsx)(e.code,{children:"import { atomWithStorage, RESET } from 'jotai/utils'"})]}),"\n",(0,s.jsxs)(e.li,{children:["SSR - ",(0,s.jsx)(e.code,{children:"import { useHydrateAtoms } from 'jotai/utils'"})]}),"\n",(0,s.jsxs)(e.li,{children:["Async - ",(0,s.jsx)(e.code,{children:'import { loadable, atomWithObservable, unwrap } from "jotai/utils"'}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"loadable"})," - \u907F\u514D Suspense"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["reset - ",(0,s.jsx)(e.code,{children:"import { atomWithReset, useResetAtom, RESET } from 'jotai/utils'"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u91CD\u7F6E\u4E3A\u4E4B\u524D\u72B6\u6001"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["Family - ",(0,s.jsx)(e.code,{children:"import { atomFamily } from 'jotai/utils'"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u521B\u5EFA factory"}),"\n",(0,s.jsx)(e.li,{children:"\u652F\u6301\u81EA\u5B9A\u4E49 equal"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["callback - ",(0,s.jsx)(e.code,{children:"import { useAtomCallback } from 'jotai/utils'"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u52A8\u6001\u548C atom \u4EA4\u4E92\uFF0C\u800C\u4E0D\u662F\u9884\u5B9A\u4E49\u7684 atom"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["reducer - ",(0,s.jsx)(e.code,{children:"import { atomWithReducer } from 'jotai/utils'"})]}),"\n",(0,s.jsxs)(e.li,{children:["selectAtom\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u83B7\u53D6\u90E8\u5206\u72B6\u6001"}),"\n",(0,s.jsx)(e.li,{children:"\u76D1\u542C\u90E8\u5206\u53D8\u5316"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["splitAtom\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"array -> item"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"function selectAtom<Value, Slice>(\n  anAtom: Atom<Value>,\n  selector: (v: Value, prevSlice?: Slice) => Slice,\n  equalityFn: (a: Slice, b: Slice) => boolean = Object.is\n): Atom<Slice>\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u96C6\u6210",children:"\u96C6\u6210"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["jotai-trpc - \u4F7F\u7528 Vanilla \u5BA2\u6237\u7AEF\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"atomWithQuery"}),"\n",(0,s.jsx)(e.li,{children:"atomWithMutation"}),"\n",(0,s.jsx)(e.li,{children:"atomWithSubscription"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["jotai-tanstack-query\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"atomsWithQuery"}),"\n",(0,s.jsx)(e.li,{children:"atomsWithInfiniteQuery"}),"\n",(0,s.jsx)(e.li,{children:"atomsWithMutation"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["jotai-urql\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"atomWithQuery"}),"\n",(0,s.jsx)(e.li,{children:"atomWithMutation"}),"\n",(0,s.jsx)(e.li,{children:"atomWithSubscription"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"jotai-immer"}),"\n",(0,s.jsx)(e.li,{children:"jotai-xstate"}),"\n",(0,s.jsxs)(e.li,{children:["jotai-location\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"window.location"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["jotai-cache\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"read-only atom with cache"}),"\n",(0,s.jsx)(e.li,{children:"\u57FA\u4E8E\u72B6\u6001 memo"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["jotai-molecules\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Molecule pattern"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://jotai.org/docs/guides/atoms-in-atom",children:"https://jotai.org/docs/guides/atoms-in-atom"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["jotai-optics\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u83B7\u53D6\u90E8\u5206 state"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"jotai-redux"}),"\n",(0,s.jsx)(e.li,{children:"jotai-relay"}),"\n",(0,s.jsxs)(e.li,{children:["jotai-valtio\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["atomWithProxy\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"valtio -> atom"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["jotai-zustand\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"atomWithStore"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"@swc-jotai/react-refresh"}),"\n",(0,s.jsx)(e.li,{children:"@swc-jotai/debug-label"}),"\n",(0,s.jsx)(e.li,{children:"jotai/babel/plugin-react-refresh"}),"\n",(0,s.jsx)(e.li,{children:"jotai/babel/plugin-debug-label"}),"\n",(0,s.jsx)(e.li,{children:"jotai/babel/preset"}),"\n",(0,s.jsxs)(e.li,{children:["jotai-devtools\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"useAtomsDebugValue"}),"\n",(0,s.jsx)(e.li,{children:"useAtomDevtools"}),"\n",(0,s.jsx)(e.li,{children:"useAtomsDevtools"}),"\n",(0,s.jsx)(e.li,{children:"useAtomsSnapshot"}),"\n",(0,s.jsx)(e.li,{children:"useGotoAtomsSnapshot"}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},17776:function(n,e,i){i.d(e,{R:()=>r,x:()=>o});var l=i(7378);let s={},t=l.createContext(s);function r(n){let e=l.useContext(t);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),l.createElement(t.Provider,{value:e},n.children)}}}]);