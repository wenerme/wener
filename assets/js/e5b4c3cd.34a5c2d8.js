"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["621985"],{243102:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>c,toc:()=>a,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>t});var s=JSON.parse('{"id":"web/framework/electron/README","title":"Electron","description":"- electron/electron","source":"@site/../notes/web/framework/electron/README.md","sourceDirName":"web/framework/electron","slug":"/web/framework/electron/","permalink":"/notes/web/framework/electron/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/framework/electron/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1702882608000,"frontMatter":{"title":"Electron"},"sidebar":"docs","previous":{"title":"capacitor","permalink":"/notes/web/framework/capacitor"},"next":{"title":"Electron Awesome","permalink":"/notes/web/framework/electron/awesome"}}'),r=i(486106),l=i(917776);let c={title:"Electron"},t="Electron",o={},a=[{value:"vs NW.js vs Neutralinojs",id:"vs-nwjs-vs-neutralinojs",level:2},{value:"Mac \u6253\u5305\u540E\u975E\u5E38\u5927",id:"mac-\u6253\u5305\u540E\u975E\u5E38\u5927",level:2}];function d(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"electron",children:"Electron"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/electron/electron",children:"electron/electron"})}),"\n",(0,r.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://slack.engineering/308d6fe94ae4",children:"When a rewrite isn\u2019t: rebuilding Slack on the desktop"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Slack \u8D44\u6E90\u5360\u7528\u964D\u4F4E\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"2G -> 300M"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u95EE\u9898\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E HTML \u6A21\u677F\u7684\u624B\u52A8 DOM \u66F4\u65B0 - \u91CD\u6784\u4E3A\u4F7F\u7528 React - \u54CD\u5E94\u5F0F\u66F4\u65B0"}),"\n",(0,r.jsx)(e.li,{children:"\u8FC7\u65E9\u7684\u6570\u636E\u52A0\u8F7D - \u6570\u636E\u7F13\u5B58\u3001\u6240\u6709\u6570\u636E\u90FD\u5047\u8BBE\u4E3A\u61D2\u52A0\u8F7D"}),"\n",(0,r.jsx)(e.li,{children:"\u6BCF\u4E2A\u5DE5\u4F5C\u7A7A\u95F4\u662F\u4E00\u4E2A\u72EC\u7ACB\u8FDB\u7A0B - \u91CD\u6784\u4E3A\u5355\u8FDB\u7A0B\u3001\u7EC4\u4EF6\u611F\u77E5\u5DE5\u4F5C\u7A7A\u95F4 - \u5B8C\u5168\u91CD\u5199"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://www.electronjs.org/docs/tutorial/electron-timelines",children:"\u53D1\u5E03\u65F6\u95F4\u7EBF\u548C\u7248\u672C\u5173\u7CFB"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Electron \u7248\u672C, Chrome \u7248\u672C, Node \u7248\u672C\u5173\u7CFB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://nodejs.org/en/download/releases/",children:"nodejs release"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Node \u7248\u672C <-> \u6A21\u5757\u7248\u672C"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/electron/chromedriver",children:"chromedriver"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4E0B\u8F7D ",(0,r.jsx)(e.a,{href:"https://sites.google.com/chromium.org/driver/",children:"ChromeDriver"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/electron/mksnapshot",children:"mksnapshot"}),"\nJS -> \u4E8C\u8FDB\u5236"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Tray \u4F7F\u7528 16x16 \u7684 ICON"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://electronjs.org/docs/api/native-image",children:"https://electronjs.org/docs/api/native-image"})}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["tray\n",(0,r.jsx)(e.a,{href:"https://medium.com/@nahoc/lets-build-a-system-tray-cryptocurrency-tracker-for-mac-using-electron-part-1-7888747891b",children:"https://medium.com/@nahoc/lets-build-a-system-tray-cryptocurrency-tracker-for-mac-using-electron-part-1-7888747891b"})]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"electron \u4E3B\u8981\u662F\u63D0\u4F9B\u73AF\u5883"}),"\n",(0,r.jsxs)(e.li,{children:["\u53EF\u4EE5\u533A\u5206\u5F00\u53D1\u5E94\u7528\u548C\u6253\u5305\u5E94\u7528\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5F00\u53D1\u4F7F\u7528\u81EA\u5DF1\u719F\u6089\u7684\u5DE5\u5177\u5373\u53EF"}),"\n",(0,r.jsx)(e.li,{children:"\u6253\u5305\u4F7F\u7528 electron-builder"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["electron \u533A\u5206 render \u548C main \u8FDB\u7A0B\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"main \u8FD0\u884C\u5728 node \u73AF\u5883"}),"\n",(0,r.jsx)(e.li,{children:"render \u8FD0\u884C\u5728 web \u73AF\u5883"}),"\n",(0,r.jsx)(e.li,{children:"Web \u548C \u540E\u7AEF/main \u901A\u8FC7 ipc \u4EA4\u4E92"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u63A8\u8350\u4F7F\u7528 preload+contextBridge \u8FDB\u884C\u5EFA\u7ACB ipc \u901A\u8BAF"}),"\n"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u751F\u6210 tray \u56FE\u6807\nconvert logo.png -resize 16x16 tray.png\n\necho -n 1 1.5 2 3 4 | xargs -d ' ' -n 1 -I {} sh -c 'convert logo.png -resize $(node -pe \"16*{}\") tray@{}x.png'\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5B89\u88C5\n# https://electronjs.org/docs/tutorial/installation\n# \u6DD8\u5B9D\u6E90\u5F00\u53D1\u4F9D\u8D56\u5B89\u88C5\nELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/ npm install electron --save-dev\n\n# \u6DD8\u5B9D\u6E90\u5168\u5C40\u5B89\u88C5\nELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/ npm install electron -g\n# \u6216\u8005\nELECTRON_MIRROR=http://npm.taobao.org/mirrors/electron/ yarn global add electron\n\n# Node ABI \u7248\u672C\nyarn run -- electron -a\n\n# -i,--interactive \u4EA4\u4E92\u5F0F\u547D\u4EE4\u884C\n# -r,--require \u9884\u52A0\u8F7D\u6A21\u5757\n# -a,--abi \u663E\u793A Node ABI\n# \u5E94\u7528\u5165\u53E3 index.js, folder/package.json, folder/index.js, .html/.htm, http://,https://,file://\nelectron --inspect=5858 -r ./.erb/scripts/babel-register ./src/main/main.dev.ts\n\n# Mac \u4E0B\u9700\u8981 icns \u4F5C\u4E3A\u56FE\u6807, \u5982\u679C\u5B89\u88C5\u4E86 libicns \u53EF\u4EE5\u4F7F\u7528\u547D\u4EE4\u8F6C\u6362\npng2icns app-icon.icns favicon-16x16.png favicon-32x32.png\n\n# \u4F7F\u7528 app-icon-1024.png \u751F\u6210\u4E2A\u4E2A\u5C3A\u5BF8\u7684\u56FE\u6807, \u5E76\u751F\u6210 icns\nmkdir app-icon.iconset\nsips -z 16 16     app-icon-1024.png --out app-icon.iconset/icon_16x16.png\nsips -z 32 32     app-icon-1024.png --out app-icon.iconset/icon_16x16@2x.png\nsips -z 32 32     app-icon-1024.png --out app-icon.iconset/icon_32x32.png\nsips -z 64 64     app-icon-1024.png --out app-icon.iconset/icon_32x32@2x.png\nsips -z 128 128   app-icon-1024.png --out app-icon.iconset/icon_128x128.png\nsips -z 256 256   app-icon-1024.png --out app-icon.iconset/icon_128x128@2x.png\nsips -z 256 256   app-icon-1024.png --out app-icon.iconset/icon_256x256.png\nsips -z 512 512   app-icon-1024.png --out app-icon.iconset/icon_256x256@2x.png\nsips -z 512 512   app-icon-1024.png --out app-icon.iconset/icon_512x512.png\ncp app-icon-1024.png app-icon.iconset/icon_512x512@2x.png\niconutil -c icns app-icon.iconset\nrm -R app-icon.iconset\n"})}),"\n",(0,r.jsx)(e.h1,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4E0A\u4E0B\u6587\u9694\u79BB - Electron 12+ \u9ED8\u8BA4\u5F00\u542F\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5F00\u542F\u540E preload \u8BBF\u95EE\u7684 window \u4E0D\u662F\u5B9E\u9645\u7684 window"}),"\n",(0,r.jsx)(e.li,{children:"\u901A\u8FC7 contextBridge \u4EA4\u4E92"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Fuses - Package time feature toggles"}),"\n",(0,r.jsxs)(e.li,{children:["MessagePort - \u7C7B\u4F3C window.postMessage\uFF0C\u4F46\u6307\u5B9A MessageChannel\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6D4F\u89C8\u5668\u81EA\u6709\u63A5\u53E3"}),"\n",(0,r.jsx)(e.li,{children:"\u4F7F\u7528 ipcRenderer.postMessage \u548C WebContents.postMessage \u8FDB\u884C\u4EA4\u4E92"}),"\n",(0,r.jsx)(e.li,{children:"electron \u5728\u4E3B\u8FDB\u7A0B\u652F\u6301 MessagePortMain, MessageChannelMain \u5B9E\u73B0\u7C7B\u4F3C\u8BED\u610F"}),"\n",(0,r.jsx)(e.li,{children:"\u65B0\u589E close"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u9ED8\u8BA4 userAgent \u5305\u542B\u4E86 electron \u7248\u672C\u4FE1\u606F\uFF0C\u53EF\u81EA\u5B9A\u4E49"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"function createWindow() {\n  win = new BrowserWindow({ width: 800, height: 600 });\n  // fixme\n  // win.loadURL('http://www.whoishostingthis.com/tools/user-agent/', { userAgent: 'Chrome' });\n\n  win.on('closed', () => {\n    win = null;\n  });\n}\n"})}),"\n",(0,r.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(e.h2,{id:"vs-nwjs-vs-neutralinojs",children:"vs NW.js vs Neutralinojs"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/neutralinojs/evaluation",children:"neutralinojs/evaluation"})," - Neutralinojs vs Electron vs Nw.js"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://electronjs.org/docs/development/atom-shell-vs-node-webkit",children:"Electron vs NW"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://hackernoon.com/e60b7289752",children:"Why I prefer NW.js over Electron? "}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u652F\u6301 chrome.* \u63A5\u53E3"}),"\n",(0,r.jsx)(e.li,{children:"\u652F\u6301 chrome \u6269\u5C55"}),"\n",(0,r.jsxs)(e.li,{children:["\u652F\u6301 bytecode\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"electron \u53EF\u4EE5\u81EA\u5DF1\u624B\u52A8\u6DFB\u52A0"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u652F\u6301\u79FB\u9664 dev \u5DE5\u5177"}),"\n",(0,r.jsx)(e.li,{children:"\u652F\u6301\u65E7\u7CFB\u7EDF"}),"\n",(0,r.jsx)(e.li,{children:"\u5165\u53E3\u53EF\u4EE5\u662F js \u6216 html"}),"\n",(0,r.jsx)(e.li,{children:"\u539F\u751F PDF \u63D2\u4EF6"}),"\n",(0,r.jsx)(e.li,{children:"\u6700\u65B0\u7248 Chromium"}),"\n",(0,r.jsx)(e.li,{children:"NW.js \u652F\u6301\u76F4\u63A5\u4F7F\u7528 --url \u6253\u5F00\u4E00\u4E2A\u9875\u9762"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Electron\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5185\u5EFA\u81EA\u52A8\u66F4\u65B0"}),"\n",(0,r.jsx)(e.li,{children:"\u66F4\u5927\u7684\u793E\u533A"}),"\n",(0,r.jsxs)(e.li,{children:["\u5BF9 gyp \u6A21\u5757\u652F\u6301\u7684\u66F4\u597D\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"electron-rebuild"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"mac-\u6253\u5305\u540E\u975E\u5E38\u5927",children:"Mac \u6253\u5305\u540E\u975E\u5E38\u5927"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/electron/electron/issues/2003",children:"electron/electron#2003"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"osx       - 117.3 mb\nlinux32   -  60.3 mb\nlinux64   -  55.2 mb\nwin ia32  -  47.8 mb\nwin x64   -  66.2 mb\n"})})]})}function h(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},917776:function(n,e,i){i.d(e,{R:()=>c,x:()=>t});var s=i(7378);let r={},l=s.createContext(r);function c(n){let e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);