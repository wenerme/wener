"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["17584"],{448319:function(n,i,e){e.r(i),e.d(i,{frontMatter:()=>t,toc:()=>h,default:()=>a,metadata:()=>r,assets:()=>c,contentTitle:()=>d});var r=JSON.parse('{"id":"service/data/nifi/README","title":"Apache NiFi","description":"- apache/nifi","source":"@site/../notes/service/data/nifi/README.md","sourceDirName":"service/data/nifi","slug":"/service/data/nifi/","permalink":"/notes/service/data/nifi/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/data/nifi/README.md","tags":[{"inline":true,"label":"Apache","permalink":"/notes/tags/apache"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1726657654000,"frontMatter":{"title":"Apache NiFi","tags":["Apache"]},"sidebar":"docs","previous":{"title":"IMDB","permalink":"/notes/service/data/imdb"},"next":{"title":"NiFi Registry","permalink":"/notes/service/data/nifi/registry"}}'),s=e(486106),l=e(917776);let t={title:"Apache NiFi",tags:["Apache"]},d="Apache NiFi",c={},h=[{value:"Notes",id:"notes",level:2},{value:"Glossary",id:"glossary",level:2},{value:"Driver",id:"driver",level:2},{value:"Processor",id:"processor",level:2},{value:"FlowFile",id:"flowfile",level:2},{value:"EL",id:"el",level:2},{value:"JOLT",id:"jolt",level:2},{value:"Kubernetes",id:"kubernetes",level:2},{value:"Upgrade",id:"upgrade",level:2},{value:"Illegal initial character: ?column?",id:"illegal-initial-character-column",level:2},{value:"Record does not have a value for the UpdateKey column",id:"record-does-not-have-a-value-for-the-updatekey-column",level:2},{value:"\u591A\u503C\u53C2\u6570",id:"\u591A\u503C\u53C2\u6570",level:2},{value:"\u589E\u91CF\u5199\u5165\u5230\u6587\u4EF6",id:"\u589E\u91CF\u5199\u5165\u5230\u6587\u4EF6",level:2},{value:"h2 java.lang.IllegalStateException: The file is locked",id:"h2-javalangillegalstateexception-the-file-is-locked",level:2},{value:"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup",id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup",level:2}];function o(n){let i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"apache-nifi",children:"Apache NiFi"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://github.com/apache/nifi",children:"apache/nifi"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Cloudera Dataflow Pipeline"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"nifi-stateless"}),"\n",(0,s.jsxs)(i.li,{children:["nifi-registry\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"NiFi Process Group \u7248\u672C\u7BA1\u7406 - Flow \u4ED3\u5E93"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["minifi\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u8F7B\u91CF\u7EA7\u7684 NiFi - \u652F\u6301\u90E8\u5206\u529F\u80FD"}),"\n",(0,s.jsx)(i.li,{children:"\u9002\u7528\u4E8E Edge \u90E8\u7F72"}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://github.com/apache/nifi-minifi-cpp",children:"apache/nifi-minifi-cpp"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"C++"}),"\n",(0,s.jsx)(i.li,{children:"\u9002\u7528\u4E8E Ingest \u548C\u6700\u7EC8\u8F93\u51FA"}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://github.com/apache/nifi-minifi-cpp/blob/main/PROCESSORS.md",children:"processors"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://github.com/apache/nifi/tree/main/minifi",children:"minifi"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Java"}),"\n",(0,s.jsx)(i.li,{children:"minifi-bin.zip 271M vs nifi-bin.zip 1.5G"}),"\n",(0,s.jsx)(i.li,{children:"\u529F\u80FD\u6309\u9700\u6253\u5305 - NAR"}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://github.com/apache/nifi/tree/main/minifi/minifi-docker",children:"minifi/minifi-docker"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"apache/nifi-minifi"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://github.com/apache/nifi-fds",children:"apache/nifi-fds"})," - Flow Design System\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Angular, \u524D\u7AEF\u7EC4\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/user-guide.html",children:"User Guide"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html",children:"Administration Guide"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/nifi-in-depth.html",children:"NiFi In Depth"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://dev.to/tspannhw/simple-change-data-capture-cdc-with-sql-selects-via-apache-nifi-flank-19m4",children:"Simple Change Data Capture (CDC) with SQL Selects via Apache NiFi (FLaNK)"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/rest-api/index.html",children:"REST API"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.admonition,{type:"caution",children:(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\u4E00\u4E2A NiFi \u5B9E\u4F8B\u53EA\u6709\u4E00\u4E2A flow\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u901A\u8FC7 Process Group \u7BA1\u7406\u591A\u7EC4\u903B\u8F91"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\u9ED8\u8BA4 bootstrap.conf \u4E3A -Xmx512m\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u6B63\u5E38\u4F7F\u7528\u591A\u534A\u4E0D\u591F"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(i.admonition,{type:"tip",children:(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\u5904\u7406\u8FC7\u7A0B\u5C3D\u91CF\u4F7F\u7528 Avro\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u9762\u5411\u884C"}),"\n",(0,s.jsx)(i.li,{children:"\u5305\u542B schema \u4FE1\u606F"}),"\n",(0,s.jsx)(i.li,{children:"\u6BD4 JSON \u652F\u6301\u66F4\u591A\u7C7B\u578B - \u4F8B\u5982: DB \u63D2\u5165\u7684 Date \u5217\u7684\u65F6\u5019\uFF0CJSON \u53EF\u80FD\u5931\u8D25\u3002"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# Docker \u542F\u52A8\n# ===========\n# https://hub.docker.com/r/apache/nifi\n# NIFI_HOME /opt/nifi/nifi-current\n# NIFI_TOOLKIT_HOME /opt/nifi/nifi-toolkit-current\n# -v $PWD/data:/opt/nifi/nifi-current\n# \u5BC6\u7801\u81F3\u5C11 12 \u4F4D\n# \u811A\u672C\u91CC\u5217\u4E3E\u4E86\u652F\u6301\u7684\u53D8\u91CF\n# https://github.com/apache/nifi/blob/main/nifi-docker/dockerhub/sh/start.sh\ndocker run --rm -it \\\n  -p 8443:8443 \\\n  -e SINGLE_USER_CREDENTIALS_USERNAME=admin \\\n  -e SINGLE_USER_CREDENTIALS_PASSWORD=000000000000 \\\n  --name nifi apache/nifi\n\n# \u542F\u52A8\u540E\ndocker exec -it nifi bash\n./bin/nifi.sh status\n\n# \u672C\u5730 \u542F\u52A8\n# ===========\n./bin/nifi.sh set-single-user-credentials admin 000000000000\n./bin/nifi.sh start   # \u542F\u52A8\n./bin/nifi.sh status  # \u67E5\u770B\u72B6\u6001\n# \u65E5\u5FD7\ntail -F logs/nifi-app.log\n"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",metastring:'title="\u63A8\u8350\u751F\u4EA7\u4F7F\u7528\u65B9\u5F0F"',children:"# \u72B6\u6001\u7559\u5728 Host\ncurl -O https://mirror.sjtu.edu.cn/apache/nifi/1.15.3/nifi-1.15.3-bin.zip\nunzip nifi-1.15.3-bin.zip\ncat > .nifi-env <<CONF\nCONF\n# \u51C6\u5907 volume - \u56E0\u4E3A dockerfile \u5B9A\u4E49\u4E86 volume - \u4E0D\u8986\u76D6\u5BB9\u5668\u5185\u4F1A\u65E0\u6CD5\u8BBF\u95EE\u5230\u5916\u90E8\nmkdir -p nifi-1.15.3/{logs,conf,database_repository,flowfile_repository,content_repository,provenance_repository,state}\nchown 1000 nifi-1.15.3/{logs,conf,database_repository,flowfile_repository,content_repository,provenance_repository,state}\n\n# https://github.com/apache/nifi/blob/main/nifi-docker/dockerhub/Dockerfile#L77-L83\n# Docker \u5185\u542F\u52A8 - \u73AF\u5883\u9694\u79BB\uFF0C\u7B80\u5316\u914D\u7F6E\ndocker run --rm -it \\\n  -p 8443:8443 \\\n  -v $PWD/nifi-1.15.3:/opt/nifi/nifi-current \\\n  -v $PWD/nifi-1.15.3/logs:/opt/nifi/nifi-current/logs \\\n  -v $PWD/nifi-1.15.3/conf:/opt/nifi/nifi-current/conf \\\n  -v $PWD/nifi-1.15.3/state:/opt/nifi/nifi-current/state \\\n  -v $PWD/nifi-1.15.3/database_repository:/opt/nifi/nifi-current/database_repository \\\n  -v $PWD/nifi-1.15.3/flowfile_repository:/opt/nifi/nifi-current/flowfile_repository \\\n  -v $PWD/nifi-1.15.3/content_repository:/opt/nifi/nifi-current/content_repository \\\n  -v $PWD/nifi-1.15.3/provenance_repository:/opt/nifi/nifi-current/provenance_repository \\\n  -e SINGLE_USER_CREDENTIALS_USERNAME=admin \\\n  -e SINGLE_USER_CREDENTIALS_PASSWORD=000000000000 \\\n  --name nifi apache/nifi:1.15.3\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"property"}),(0,s.jsx)(i.th,{children:"default"}),(0,s.jsx)(i.th,{children:"env"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.https.host"}),(0,s.jsx)(i.td,{children:"$HOSTNAME"}),(0,s.jsx)(i.td,{children:"NIFI_WEB_HTTPS_HOST"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.https.port"}),(0,s.jsx)(i.td,{children:"8443"}),(0,s.jsx)(i.td,{children:"NIFI_WEB_HTTPS_PORT"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.proxy.host"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_WEB_PROXY_HOST"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.proxy.context.path"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_WEB_PROXY_CONTEXT_PATH"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.http.host"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_WEB_HTTP_HOST"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.http.port"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_WEB_HTTP_PORT"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.remote.input.host"}),(0,s.jsx)(i.td,{children:"$HOSTNAME"}),(0,s.jsx)(i.td,{children:"NIFI_REMOTE_INPUT_HOST"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.remote.input.secure"}),(0,s.jsx)(i.td,{children:"true"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.remote.input.socket.port"}),(0,s.jsx)(i.td,{children:"10000"}),(0,s.jsx)(i.td,{children:"NIFI_REMOTE_INPUT_SOCKET_PORT"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.variable.registry.properties"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_VARIABLE_REGISTRY_PROPERTIES"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.flow.election.max.candidates"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_ELECTION_MAX_CANDIDATES"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.flow.election.max.wait.time"}),(0,s.jsx)(i.td,{children:"5 mins"}),(0,s.jsx)(i.td,{children:"NIFI_ELECTION_MAX_WAIT"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.is.node"}),(0,s.jsx)(i.td,{children:"false"}),(0,s.jsx)(i.td,{children:"NIFI_CLUSTER_IS_NODE"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.node.address"}),(0,s.jsx)(i.td,{children:"$HOSTNAME"}),(0,s.jsx)(i.td,{children:"NIFI_CLUSTER_ADDRESS"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.node.protocol.max.threads"}),(0,s.jsx)(i.td,{children:"50"}),(0,s.jsx)(i.td,{children:"NIFI_CLUSTER_NODE_PROTOCOL_MAX_THREADS"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.node.protocol.port"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_CLUSTER_NODE_PROTOCOL_PORT"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.protocol.is.secure"}),(0,s.jsx)(i.td,{children:"true"}),(0,s.jsx)(i.td,{children:"$NIFI_CLUSTER_IS_NODE"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.zookeeper.connect.string"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_ZK_CONNECT_STRING"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.zookeeper.root.node"}),(0,s.jsx)(i.td,{children:"/nifi"}),(0,s.jsx)(i.td,{children:"NIFI_ZK_ROOT_NODE"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.analytics.predict.enabled"}),(0,s.jsx)(i.td,{children:"false"}),(0,s.jsx)(i.td,{children:"NIFI_ANALYTICS_PREDICT_ENABLED"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.analytics.predict.interval"}),(0,s.jsx)(i.td,{children:"3 mins"}),(0,s.jsx)(i.td,{children:"NIFI_ANALYTICS_PREDICT_INTERVAL"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.analytics.query.interval"}),(0,s.jsx)(i.td,{children:"5 mins"}),(0,s.jsx)(i.td,{children:"NIFI_ANALYTICS_QUERY_INTERVAL"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.analytics.connection.model.implementation"}),(0,s.jsx)(i.td,{children:"\u2935\uFE0E"}),(0,s.jsx)(i.td,{children:"NIFI_ANALYTICS_MODEL_IMPLEMENTATION"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.analytics.connection.model.score.name"}),(0,s.jsx)(i.td,{children:"rSquared"}),(0,s.jsx)(i.td,{children:"NIFI_ANALYTICS_MODEL_SCORE_NAME"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.analytics.connection.model.score.threshold"}),(0,s.jsx)(i.td,{children:".90"}),(0,s.jsx)(i.td,{children:"NIFI_ANALYTICS_MODEL_SCORE_THRESHOLD"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.sensitive.props.key"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_SENSITIVE_PROPS_KEY"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.keystore"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"KEYSTORE_PATH"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.keystoreType"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"KEYSTORE_TYPE"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.keystorePasswd"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"KEYSTORE_PASSWORD"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.keyPasswd"}),(0,s.jsx)(i.td,{children:"$KEYSTORE_PASSWORD"}),(0,s.jsx)(i.td,{children:"KEY_PASSWORD"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.truststore"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"TRUSTSTORE_PATH"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.truststoreType"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"TRUSTSTORE_TYPE"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.truststorePasswd"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"TRUSTSTORE_PASSWORD"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.user.authorizer"}),(0,s.jsx)(i.td,{children:"managed-authorizer"}),(0,s.jsx)(i.td,{children:"NIFI_SECURITY_USER_AUTHORIZER"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.user.login.identity.provider"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.autoreload.enabled"}),(0,s.jsx)(i.td,{children:"false"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.security.autoreload.interval"}),(0,s.jsx)(i.td,{children:"10 secs"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"NODE_IDENTITY"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"INITIAL_ADMIN_IDENTITY"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"SINGLE_USER_CREDENTIALS_USERNAME"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"SINGLE_USER_CREDENTIALS_PASSWORD"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{children:"AUTH"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.ui.banner.text"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.ui.autorefresh.interval"}),(0,s.jsx)(i.td,{children:"30 sec"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.flow.configuration.file"}),(0,s.jsx)(i.td,{children:"./conf/flow.xml.gz"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.authorizer.configuration.file"}),(0,s.jsx)(i.td,{children:"./conf/authorizers.xml"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.database.directory"}),(0,s.jsx)(i.td,{children:"./database_repository"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.documentation.working.directory"}),(0,s.jsx)(i.td,{children:"./work/docs/components"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.login.identity.provider.configuration.file"}),(0,s.jsx)(i.td,{children:"./conf/login-identity-providers.xml"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.nar.library.autoload.directory"}),(0,s.jsx)(i.td,{children:"./extensions"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.nar.library.directory"}),(0,s.jsx)(i.td,{children:"./lib"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.nar.working.directory"}),(0,s.jsx)(i.td,{children:"./work/nar/"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.templates.directory"}),(0,s.jsx)(i.td,{children:"./conf/templates"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.state.management.embedded.zookeeper.properties"}),(0,s.jsx)(i.td,{children:"./conf/zookeeper.properties"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.flowfile.repository.directory"}),(0,s.jsx)(i.td,{children:"./flowfile_repository"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.content.repository.directory.default"}),(0,s.jsx)(i.td,{children:"./content_repository"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.provenance.repository.directory.default"}),(0,s.jsx)(i.td,{children:"./provenance_repository"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.status.repository.questdb.persist.location"}),(0,s.jsx)(i.td,{children:"./status_repository"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.jetty.working.directory"}),(0,s.jsx)(i.td,{children:"./work/jetty"}),(0,s.jsx)(i.td,{})]})]})]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u8BBE\u7F6E\u4E86 NIFI_WEB_HTTP_PORT \u5219\u4F1A\u53D6\u6D88 https"}),"\n",(0,s.jsxs)(i.li,{children:["nifi.analytics.connection.model.implementation\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u9ED8\u8BA4 org.apache.nifi.controller.status.analytics.models.OrdinaryLeastSquares"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"AUTH - tls,ldap"}),"\n",(0,s.jsx)(i.li,{children:"NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER - ldap-provider"}),"\n",(0,s.jsxs)(i.li,{children:["nifi.variable.registry.properties\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u63D0\u4F9B\u53D8\u91CF\u7684\u6587\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["nifi.sensitive.props.key\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u7528\u4E8E\u52A0\u5BC6\u654F\u611F\u4FE1\u606F\u7684 Key"}),"\n",(0,s.jsx)(i.li,{children:"\u8FC1\u79FB\u65F6\u786E\u4FDD Key \u76F8\u540C"}),"\n",(0,s.jsx)(i.li,{children:"./nifi-toolkit/bin/encrypt-config.sh \u53EF\u79BB\u7EBF\u4FEE\u6539\u6216\u6062\u590D"}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"./bin/nifi.sh set-sensitive-properties-key <sensitivePropertiesKey>"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u53EF\u542F\u52A8\u540E\u4FEE\u6539"}),"\n",(0,s.jsx)(i.li,{children:"\u81F3\u5C11 12 \u4F4D"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"# \u4FEE\u6539\u5BC6\u7801\n./nifi-toolkit/bin/encrypt-config.sh \\\n  -f nifi-old/conf/flow.xml.gz -g nifi-new/conf/flow.xml.gz \\\n  -n nifi-old/conf/nifi.properties -o nifi-new/conf/nifi.properties \\\n  -x \\\n  -s new_password\n"})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"JVM \u914D\u7F6E"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"env"}),(0,s.jsx)(i.th,{children:"bootstrap.conf"}),(0,s.jsx)(i.th,{children:"default"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"NIFI_JVM_HEAP_INIT"}),(0,s.jsx)(i.td,{children:"java.arg.2"}),(0,s.jsx)(i.td,{children:"512m"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"NIFI_JVM_HEAP_MAX"}),(0,s.jsx)(i.td,{children:"java.arg.3"}),(0,s.jsx)(i.td,{children:"512m"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"NIFI_JVM_DEBUGGER"}),(0,s.jsx)(i.td,{children:"java.arg.debug"}),(0,s.jsx)(i.td,{})]})]})]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"\u7AEF\u53E3"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"props"}),(0,s.jsx)(i.th,{children:"port"}),(0,s.jsx)(i.th,{children:"note"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.web.https.port"}),(0,s.jsx)(i.td,{children:"8443"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.remote.input.socket.port"}),(0,s.jsx)(i.td,{children:"10443"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.node.protocol.port"}),(0,s.jsx)(i.td,{children:"11443"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"nifi.cluster.node.load.balance.port"}),(0,s.jsx)(i.td,{children:"6342"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"clientPort"}),(0,s.jsx)(i.td,{children:"2181"}),(0,s.jsx)(i.td,{children:"zookeeper.properties"})]})]})]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"conf/flow.xml.gz"}),"\n",(0,s.jsxs)(i.li,{children:["conf/bootstrap.conf\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u63D0\u4F9B JVM \u76F8\u5173\u53C2\u6570"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["conf/nifi.properties\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u6838\u5FC3 NiFi \u914D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["conf/login-identity-providers.xml\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u767B\u9646\u8BA4\u8BC1\u8BBE\u7F6E"}),"\n",(0,s.jsx)(i.li,{children:"single-user-provider"}),"\n",(0,s.jsx)(i.li,{children:"ldap-provider"}),"\n",(0,s.jsx)(i.li,{children:"kerberos-provider"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["conf/authorizers.xml\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u63D0\u4F9B\u8BA4\u8BC1\u4FE1\u606F"}),"\n",(0,s.jsxs)(i.li,{children:["file-user-group-provider\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"conf/users.xml"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"ldap-user-group-provider"}),"\n",(0,s.jsx)(i.li,{children:"shell-user-group-provider"}),"\n",(0,s.jsx)(i.li,{children:"azure-graph-user-group-provider"}),"\n",(0,s.jsx)(i.li,{children:"composite-user-group-provider"}),"\n",(0,s.jsx)(i.li,{children:"composite-configurable-user-group-provider"}),"\n",(0,s.jsx)(i.li,{children:"file-access-policy-provider"}),"\n",(0,s.jsx)(i.li,{children:"managed-authorizer - org.apache.nifi.authorization.StandardManagedAuthorizer"}),"\n",(0,s.jsx)(i.li,{children:"file-provider - \u88AB managed-authorizer \u66FF\u4EE3"}),"\n",(0,s.jsx)(i.li,{children:"single-user-authorizer - org.apache.nifi.authorization.single.user.SingleUserAuthorizer"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["conf/state-management.xml\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["local-provider\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"./state/local"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"zk-provider"}),"\n",(0,s.jsx)(i.li,{children:"redis-provider - org.apache.nifi.redis.state.RedisStateProvider"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"conf/stateless.properties"}),"\n",(0,s.jsxs)(i.li,{children:["conf/zookeeper.properties\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u5185\u7F6E Zookeeper \u7684\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"content_repository/"}),"\n",(0,s.jsxs)(i.li,{children:["database_repository/ - H2\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"nifi-flow-audit.mv.db"}),"\n",(0,s.jsx)(i.li,{children:"nifi-identity-providers.mv.db"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"flowfile_repository/"}),"\n",(0,s.jsx)(i.li,{children:"provenance_repository/ - \u5185\u7F6E Lucene"}),"\n",(0,s.jsx)(i.li,{children:"state/"}),"\n",(0,s.jsxs)(i.li,{children:["extensions/\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u4F1A\u88AB nar \u81EA\u52A8\u52A0\u8F7D\u7684\u6269\u5C55\u76EE\u5F55"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["work/\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["nar/\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["extensions/\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"*.nar-unpacked"}),"/"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["framework/\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"nifi-framework-nar-1.15.2.nar-unpacked/"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["jetty/\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"*.war"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"logs/"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"curl -O https://jdbc.postgresql.org/download/postgresql-42.3.3.jar\ndocker exec -it nifi mkdir -p /opt/nifi/lib\ndocker cp postgresql-42.3.3.jar nifi:/opt/nifi/lib\n"})}),"\n",(0,s.jsx)(i.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u96C6\u7FA4\u4F7F\u7528 zookeeper \u7BA1\u7406\u72B6\u6001"}),"\n",(0,s.jsx)(i.li,{children:"\u652F\u6301\u4F7F\u7528\u5185\u7F6E\u7684 zookeeper"}),"\n",(0,s.jsx)(i.li,{children:"\u5F03\u7528 Variable \uFF0C\u4F7F\u7528 Parameter"}),"\n",(0,s.jsxs)(i.li,{children:["record-oriented\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u5728 record \u4E4B\u524D\uFF0C\u5185\u90E8\u7ED3\u6784\u90FD\u4EE5 avro \u4E3A\u4E3B"}),"\n",(0,s.jsx)(i.li,{children:"\u5F15\u5165 record \u62BD\u79BB reader, writer"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"glossary",children:"Glossary"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["NAR - NiFi Archive\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u63D0\u4F9B Java ClassLoader isolation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"driver",children:"Driver"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["postgresql\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"org.postgresql.Driver"}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://jdbc.postgresql.org/download.html",children:"https://jdbc.postgresql.org/download.html"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar",children:"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"processor",children:"Processor"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["PutFile\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u5199\u5165\u5230\u76EE\u5F55\uFF0C\u6587\u4EF6\u540D\u4E3A UUID\uFF0C\u6BCF\u6B21\u4EA7\u751F\u4E00\u4E2A\u6587\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"PutS3, PutFTP, PutSSH"}),"\n",(0,s.jsxs)(i.li,{children:["PutRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Put \u5230 RecordSinkServices"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"PutDatabaseRecord"}),"\n",(0,s.jsxs)(i.li,{children:["QueryDatabaseTableRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u589E\u91CF\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["MergeRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u5408\u5E76\u90E8\u5206 Record"}),"\n",(0,s.jsx)(i.li,{children:"\u4F8B\u5982 \u7528\u4E8E\u5C0F\u6279\u91CF\u63D2\u5165"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["ValidateRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u57FA\u4E8E schema \u68C0\u67E5"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\u8F6C\u6362\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["ConvertRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Avro, JSON, CSV \u7B49"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["JoltTransformRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"JOLT - JsOn Language for Transform"}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://github.com/bazaarvoice/jolt",children:"bazaarvoice/jolt"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Apache-2.0, Java"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://jolt-demo.appspot.com/",children:"https://jolt-demo.appspot.com/"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["QueryRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u4F7F\u7528\u5185\u7F6E Calcite SQL \u5F15\u64CE\u5904\u7406 Flow \u6587\u4EF6"}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"SELECT * FROM FLOWFILE"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["LookupRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u67E5\u8BE2\u5916\u90E8 - \u4F8B\u5982 Redis"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"UpdateRecord"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\u805A\u5408\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["PartitionRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u5206\u7EC4"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["SplitRecord\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u5206\u7EC4\u53D8\u5355\u884C"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"flowfile",children:"FlowFile"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["FlowFile\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["org.apache.nifi.flowfile.attributes.CoreAttributes\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"filename"}),"\n",(0,s.jsx)(i.li,{children:"uuid"}),"\n",(0,s.jsx)(i.li,{children:"path"}),"\n",(0,s.jsx)(i.li,{children:"absolute.path"}),"\n",(0,s.jsx)(i.li,{children:"priority"}),"\n",(0,s.jsxs)(i.li,{children:["mime.type\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"application/avro-binary"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"alternate.identifier"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["Standard FlowFile Attributes\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"fileSize"}),"\n",(0,s.jsx)(i.li,{children:"entryDate"}),"\n",(0,s.jsx)(i.li,{children:"lineageStartDate"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\u5E38\u89C1\u5C5E\u6027\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"tablename"}),"\n",(0,s.jsx)(i.li,{children:"querydbtable.row.count"}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"maxvalue.<column>"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/developer-guide.html",children:"Developer Guide"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/expression-language-guide.html",children:"Expression Language Guide"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"el",children:"EL"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"${filename:equals(${uuid})}"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"${\u5C5E\u6027:\u51FD\u6570(\u53C2\u6570)}"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\u5C5E\u6027\u7EA7\u8054\u5173\u7CFB\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"FlowFile"}),"\n",(0,s.jsx)(i.li,{children:"Process Group Variable"}),"\n",(0,s.jsx)(i.li,{children:"File Registry"}),"\n",(0,s.jsx)(i.li,{children:"NiFi JVM Properties"}),"\n",(0,s.jsx)(i.li,{children:"System Environment"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\u51FD\u6570\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Bool\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"isNull, notNull, isEmpty, equals, equalsIgnoreCase, gt, ge, lt, le, and, or, not"}),"\n",(0,s.jsxs)(i.li,{children:["ifElse\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"${literal(true):ifElse('a','b')}"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["String\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"toUpper, toLower, trim, substring, substringBefore, substringBeforeLast, substringAfter, substringAfterLast"}),"\n",(0,s.jsx)(i.li,{children:"getDelimitedField, append, prepend, replace, replaceFirst, replaceAll, padLeft, padRight"}),"\n",(0,s.jsx)(i.li,{children:"replaceNull, replaceEmpty, length, evaluateELString, repeat"}),"\n",(0,s.jsx)(i.li,{children:"startsWith, endsWith, contains, in, find, matches, indexOf, lastIndexOf"}),"\n",(0,s.jsx)(i.li,{children:"jsonPath, jsonPathDelete, jsonPathAdd, jsonPathSet, jsonPathPut"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["Codec\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"{escape,unescape}{Json,Xml,Csv,Html3,Html4}"}),"\n",(0,s.jsx)(i.li,{children:"urlEncode, urlDecode, base64Encode, base64Decode"}),"\n",(0,s.jsx)(i.li,{children:"UUID3, UUID5"}),"\n",(0,s.jsxs)(i.li,{children:["hash\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"hex"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["Math\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"plus, minus, multiply, divide, mod, toRadix, fromRadix, random, math"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"Date - format, toDate, now"}),"\n",(0,s.jsx)(i.li,{children:"Typing - toString, toNumber, toDecimal"}),"\n",(0,s.jsx)(i.li,{children:"ip, hostname, UUID, nextInt, literal"}),"\n",(0,s.jsx)(i.li,{children:"getStateValue, thread"}),"\n",(0,s.jsx)(i.li,{children:"anyAttribute, allAttributes, anyMatchingAttribute, allMatchingAttributes, anyDelineatedValue, allDelineatedValues"}),"\n",(0,s.jsx)(i.li,{children:"join, count"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"jolt",children:"JOLT"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n  {\n    "operation": "default",\n    "spec": {}\n  }\n]\n'})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["operation\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"shift"}),"\n",(0,s.jsx)(i.li,{children:"default"}),"\n",(0,s.jsx)(i.li,{children:"remove"}),"\n",(0,s.jsx)(i.li,{children:"sort"}),"\n",(0,s.jsx)(i.li,{children:"java"}),"\n",(0,s.jsx)(i.li,{children:"cardinality"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'[\n  // \u79FB\u9664\u6570\u7EC4\u91CC\u6BCF\u4E2A\u5143\u7D20\u7684 id,raw \u5B57\u6BB5\n  {\n    "operation": "remove",\n    "spec": {\n      "*": {\n        "id": "",\n        "raw": ""\n      }\n    }\n  }\n]\n'})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://community.cloudera.com/t5/Community-Articles/Jolt-quick-reference-for-Nifi-Jolt-Processors/ta-p/244350",children:"Jolt quick reference for Nifi Jolt Processors "})}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"kubernetes",children:"Kubernetes"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://github.com/cetic/helm-nifi",children:"https://github.com/cetic/helm-nifi"})}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"upgrade",children:"Upgrade"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://cwiki.apache.org/confluence/display/NIFI/Migration+Guidance",children:"Migration Guidance"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html#upgrading_nifi",children:"Upgrading NiFi"})}),"\n"]}),"\n",(0,s.jsx)(i.h1,{id:"faq",children:"FAQ"}),"\n",(0,s.jsx)(i.h2,{id:"illegal-initial-character-column",children:"Illegal initial character: ?column?"}),"\n",(0,s.jsx)(i.p,{children:"ExecuteSQL \u6DFB\u52A0 alias"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"-- \u6709\u95EE\u9898\nselect 1;\n-- \u53EF\u4EE5\nselect 1 as val;\n"})}),"\n",(0,s.jsx)(i.h2,{id:"record-does-not-have-a-value-for-the-updatekey-column",children:"Record does not have a value for the UpdateKey column"}),"\n",(0,s.jsx)(i.p,{children:"\u914D\u7F6E\u7684 update key \u6CA1\u6709\u6570\u636E\uFF0C\u68C0\u67E5\u6570\u636E\u5185\u5BB9\u3002"}),"\n",(0,s.jsx)(i.h2,{id:"\u591A\u503C\u53C2\u6570",children:"\u591A\u503C\u53C2\u6570"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u4F7F\u7528\u9017\u53F7\u5206\u9694\uFF0C\u4F7F\u7528\u65F6\u91CD\u65B0\u62FC\u63A5"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-pre",metastring:'title="owner_ids \u4E0D\u53EF\u4EE5\u5305\u542B\u7A7A\u683C"',children:"owner_id in ('${#{owner_ids}:replaceAll(',', \"','\")}')\n"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-pre",metastring:'title="owner_ids \u53EF\u4EE5\u5305\u542B\u7A7A\u683C"',children:'owner_id in (\'${allDelineatedValues("${#{owner_ids}}", ","):trim():join("\',\'")}\')\n'})}),"\n",(0,s.jsx)(i.h2,{id:"\u589E\u91CF\u5199\u5165\u5230\u6587\u4EF6",children:"\u589E\u91CF\u5199\u5165\u5230\u6587\u4EF6"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-js",children:"var flowFile = session.get();\nvar File = Java.type('java.io.RandomAccessFile');\nif (flowFile != null) {\n  var filename = flowFile.getAttribute('filename');\n  /// \u5199\u5165\u6587\u4EF6\n  var filePath = '/tmp/nifi/test.log';\n  flowFile = session.putAttribute(flowFile, 'filePath', filePath);\n  var file = new File(filePath, 'rws');\n  file.seek(file.length());\n  // \u5199\u5165\u5185\u5BB9\n  file.write(filename.getBytes());\n  file.write('\\n'.getBytes());\n  file.close();\n  // Finish by transferring the FlowFile to an output relationship\n  session.transfer(flowFile, REL_SUCCESS);\n}\n"})}),"\n",(0,s.jsx)(i.h2,{id:"h2-javalangillegalstateexception-the-file-is-locked",children:"h2 java.lang.IllegalStateException: The file is locked"}),"\n",(0,s.jsx)(i.p,{children:"\u68C0\u67E5\u662F\u5426\u5DF2\u7ECF\u542F\u52A8\u8FC7 NiFi \u4E86"}),"\n",(0,s.jsx)(i.h2,{id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup",children:"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-properties",children:"nifi.content.repository.implementation=org.apache.nifi.controller.repository.FileSystemRepository\nnifi.content.claim.max.appendable.size=1 MB\nnifi.content.repository.directory.default=./content_repository\nnifi.content.repository.archive.max.retention.period=7 days\n# \u9650\u5B9A\u4E86\u6700\u5927\u53EF\u7528\u7A7A\u95F4\nnifi.content.repository.archive.max.usage.percentage=50%\nnifi.content.repository.archive.enabled=true\nnifi.content.repository.always.sync=false\nnifi.content.viewer.url=../nifi-content-viewer/\n"})})]})}function a(n={}){let{wrapper:i}={...(0,l.R)(),...n.components};return i?(0,s.jsx)(i,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},917776:function(n,i,e){e.d(i,{R:()=>t,x:()=>d});var r=e(7378);let s={},l=r.createContext(s);function t(n){let i=r.useContext(l);return r.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function d(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),r.createElement(l.Provider,{value:i},n.children)}}}]);