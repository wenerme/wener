"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["29663"],{11595:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>l,toc:()=>h,default:()=>j,metadata:()=>r,assets:()=>c,contentTitle:()=>i});var r=JSON.parse('{"id":"web/browser/browserless","title":"browserless","description":"- browserless","source":"@site/../notes/web/browser/browserless.md","sourceDirName":"web/browser","slug":"/web/browser/browserless","permalink":"/notes/web/browser/browserless","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/browser/browserless.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1714210316000,"frontMatter":{"title":"browserless"},"sidebar":"docs","previous":{"title":"Browser FAQ","permalink":"/notes/web/browser/faq"},"next":{"title":"browserslist","permalink":"/notes/web/browser/browserslist"}}'),t=s(86106),d=s(17776);let l={title:"browserless"},i="browserless",c={},h=[{value:"API",id:"api",level:2}];function x(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"browserless",children:"browserless"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/browserless/browserless",children:"browserless"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"SSPLv1, TS"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'# https://docs.browserless.io/docker/docker-quickstart/\nTOKEN=$(openssl rand -hex 16)\necho TOKEN=$TOKEN\ndocker run -p 3000:3000 \\\n  -e "CONCURRENT=10" \\\n  -e DATA_DIR=/data/browser \\\n  -e DOWNLOAD_DIR=/data/download \\\n  -e "TOKEN=$TOKEN" \\\n  --name browserless ghcr.io/browserless/chromium\n'})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"env"}),(0,t.jsx)(e.th,{children:"default"}),(0,t.jsx)(e.th,{children:"note"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"TIMEOUT"}),(0,t.jsx)(e.td,{children:"30000"}),(0,t.jsx)(e.td,{children:"\u9ED8\u8BA4 30s"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"CONCURRENT"}),(0,t.jsx)(e.td,{children:"10"}),(0,t.jsx)(e.td,{children:"\u5E76\u53D1\u6570"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"QUEUED"}),(0,t.jsx)(e.td,{children:"5"}),(0,t.jsx)(e.td,{children:"\u8D85\u8FC7\u5219\u8FD4\u56DE 429"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"HOST"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"DEBUG"}),(0,t.jsx)(e.td,{}),(0,t.jsxs)(e.td,{children:["\u5173\u95ED\u6240\u6709",(0,t.jsx)(e.code,{children:"-*"})]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"CORS"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"CORS_ALLOW_METHODS"}),(0,t.jsx)(e.td,{children:"GET,POST,OPTIONS"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"CORS_ALLOW_ORIGIN"}),(0,t.jsx)(e.td,{children:"*"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"CORS_MAX_AGES"}),(0,t.jsx)(e.td,{children:"2592000"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"METRICS_JSON_PATH"}),(0,t.jsx)(e.td,{children:"/metrics"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"DATA_DIR"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"DOWNLOAD_DIR"}),(0,t.jsx)(e.td,{children:"/data/browserless-download-dirs"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ALLOW_GET"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PROXY_HOST"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PROXY_PORT"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PROXY_SSL"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ALLOW_FILE_PROTOCOL"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"HEALTH"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{children:"\u5982\u679C\u8D44\u6E90\u7D27\u5F20\uFF0C\u4F1A\u8FD4\u56DE 503"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"MAX_MEMORY_PERCENT"}),(0,t.jsx)(e.td,{children:"99"}),(0,t.jsx)(e.td,{children:"\u5065\u5EB7\u5185\u5B58\u9600\u503C"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"MAX_CPU_PERCENT"}),(0,t.jsx)(e.td,{children:"99"}),(0,t.jsx)(e.td,{children:"\u5065\u5EB7CPU\u9600\u503C"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"QUEUE_ALERT_URL"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"REJECT_ALERT_URL"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"TIMEOUT_ALERT_URL"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"FAILED_HEALTH_URL"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]})]})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import puppeteer from 'puppeteer-core';\n\nconst browser = await puppeteer.connect({\n  browserWSEndpoint: 'ws://localhost:3000?token=6R0W53R135510',\n});\nconst page = await browser.newPage();\n\nawait page.goto('https://wener.me');\nconst data = await page.screenshot();\nbrowser.close();\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"param"}),(0,t.jsx)(e.th,{children:"for"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"token"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"proxy"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"proxyCountry"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"blockAds"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"launch"}),(0,t.jsx)(e.td,{children:"\u81EA\u5B9A\u4E49\u542F\u52A8\u53C2\u6570\uFF0CJSON, \u53EF\u4EE5\u8BBE\u7F6E user-data-dir"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"api",children:"API"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://docs.browserless.io/HTTP-APIs/apis",children:"https://docs.browserless.io/HTTP-APIs/apis"})}),"\n"]})]})}function j(n={}){let{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(x,{...n})}):x(n)}},17776:function(n,e,s){s.d(e,{R:()=>l,x:()=>i});var r=s(7378);let t={},d=r.createContext(t);function l(n){let e=r.useContext(d);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),r.createElement(d.Provider,{value:e},n.children)}}}]);