"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["536060"],{880848:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>c,default:()=>h,metadata:()=>s,assets:()=>d,contentTitle:()=>a});var s=JSON.parse('{"id":"devops/kubernetes/k8s-faq","title":"K8S \u5E38\u89C1\u95EE\u9898","description":"headless service","source":"@site/../notes/devops/kubernetes/k8s-faq.md","sourceDirName":"devops/kubernetes","slug":"/devops/kubernetes/faq","permalink":"/notes/devops/kubernetes/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/kubernetes/k8s-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"},{"inline":true,"label":"Limits","permalink":"/notes/tags/limits"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1742185178000,"frontMatter":{"title":"K8S \u5E38\u89C1\u95EE\u9898","tags":["FAQ","Limits"]},"sidebar":"docs","previous":{"title":"Event","permalink":"/notes/devops/kubernetes/event"},"next":{"title":"MountPropagation","permalink":"/notes/devops/kubernetes/feature"}}'),r=i(486106),l=i(917776);let t={title:"K8S \u5E38\u89C1\u95EE\u9898",tags:["FAQ","Limits"]},a="K8S \u5E38\u89C1\u95EE\u9898",d={},c=[{value:"headless service",id:"headless-service",level:2},{value:"\u63A5\u53E3 CURL",id:"\u63A5\u53E3-curl",level:2},{value:"\u6CE8\u5165\u73AF\u5883\u53D8\u91CF",id:"\u6CE8\u5165\u73AF\u5883\u53D8\u91CF",level:2},{value:"limits",id:"limits",level:2},{value:"QoS",id:"qos",level:2},{value:"operator vs controller",id:"operator-vs-controller",level:2},{value:"cni-plugins \u4E0D\u518D\u5305\u542B flannel",id:"cni-plugins-\u4E0D\u518D\u5305\u542B-flannel",level:2},{value:"\u8D44\u6E90\u9650\u5236",id:"\u8D44\u6E90\u9650\u5236",level:2},{value:"K3S \u5E38\u89C1\u95EE\u9898",id:"k3s-\u5E38\u89C1\u95EE\u9898",level:2},{value:"Pod \u65F6\u533A",id:"pod-\u65F6\u533A",level:2},{value:"taint",id:"taint",level:2},{value:"\u96C6\u7FA4\u9650\u5236",id:"\u96C6\u7FA4\u9650\u5236",level:2},{value:"\u64CD\u4F5C\u7CFB\u7EDF\u8981\u6C42 / Linux Kernel Requirement",id:"\u64CD\u4F5C\u7CFB\u7EDF\u8981\u6C42--linux-kernel-requirement",level:2},{value:"invalid capacity 0 on image filesystem",id:"invalid-capacity-0-on-image-filesystem",level:2},{value:"\u5BFC\u51FA\u8D44\u6E90\u5FFD\u7565\u72B6\u6001\u5B57\u6BB5",id:"\u5BFC\u51FA\u8D44\u6E90\u5FFD\u7565\u72B6\u6001\u5B57\u6BB5",level:2},{value:"\u5220\u9664\u5361\u5728 Terminating \u72B6\u6001\u7684\u8D44\u6E90",id:"\u5220\u9664\u5361\u5728-terminating-\u72B6\u6001\u7684\u8D44\u6E90",level:2},{value:"\u5220\u9664 rancher \u9879\u76EE\u7A7A\u95F4",id:"\u5220\u9664-rancher-\u9879\u76EE\u7A7A\u95F4",level:2},{value:"Unable to connect to the server: x509: certificate is valid for 10.10.1.2, 10.43.0.1, 127.0.0.1, 192.168.1.10, not 123.123.123.123",id:"unable-to-connect-to-the-server-x509-certificate-is-valid-for-101012-104301-127001-192168110-not-123123123123",level:2},{value:"Failed to create pod sandbox: rpc error: code = Unknown desc = failed to create a sandbox for pod &quot;cron-1594372200-lmkcb&quot;: operation timeout: context deadline exceeded",id:"failed-to-create-pod-sandbox-rpc-error-code--unknown-desc--failed-to-create-a-sandbox-for-pod-cron-1594372200-lmkcb-operation-timeout-context-deadline-exceeded",level:2},{value:"error: specifying a root certificates file with the insecure flag is not allowed",id:"error-specifying-a-root-certificates-file-with-the-insecure-flag-is-not-allowed",level:2},{value:"node_lifecycle_controller.go:1433 Initializing eviction metric for zone",id:"node_lifecycle_controllergo1433-initializing-eviction-metric-for-zone",level:2},{value:"running &quot;VolumeBinding&quot; filter plugin for pod &quot;web-0&quot;: pod has unbound immediate PersistentVolumeClaims",id:"running-volumebinding-filter-plugin-for-pod-web-0-pod-has-unbound-immediate-persistentvolumeclaims",level:2},{value:"error: unable to retrieve the complete list of server APIs: write: broken pipe",id:"error-unable-to-retrieve-the-complete-list-of-server-apis-write-broken-pipe",level:2},{value:"dns \u4E0D\u901A",id:"dns-\u4E0D\u901A",level:2},{value:"MountVolume.SetUp failed for volume &quot;config-volume&quot; : failed to sync secret cache: timed out waiting for the condition",id:"mountvolumesetup-failed-for-volume-config-volume--failed-to-sync-secret-cache-timed-out-waiting-for-the-condition",level:2},{value:"kubernetes swap",id:"kubernetes-swap",level:2},{value:"didn&#39;t have free ports for the requested pod ports",id:"didnt-have-free-ports-for-the-requested-pod-ports",level:2},{value:"scale to zero",id:"scale-to-zero",level:2},{value:"The StorageClass is invalid: provisioner: Forbidden: updates to provisioner are forbidden.",id:"the-storageclass-is-invalid-provisioner-forbidden-updates-to-provisioner-are-forbidden",level:2},{value:"\u9884\u7559\u8D44\u6E90",id:"\u9884\u7559\u8D44\u6E90",level:2},{value:"node(s) had volume node affinity conflict",id:"nodes-had-volume-node-affinity-conflict",level:2},{value:"\u5982\u4F55\u4FDD\u6301\u8D1F\u8F7D\u5747\u8861",id:"\u5982\u4F55\u4FDD\u6301\u8D1F\u8F7D\u5747\u8861",level:2},{value:"pause \u662F\u4EC0\u4E48\u8FDB\u7A0B",id:"pause-\u662F\u4EC0\u4E48\u8FDB\u7A0B",level:2},{value:"1 node(s) had volume node affinity conflict",id:"1-nodes-had-volume-node-affinity-conflict",level:2},{value:"failed to run Kubelet: mountpoint for cpu not found",id:"failed-to-run-kubelet-mountpoint-for-cpu-not-found",level:2},{value:"orphaned pod found, but error not a directory occurred when trying to remove the volumes dir",id:"orphaned-pod-found-but-error-not-a-directory-occurred-when-trying-to-remove-the-volumes-dir",level:2},{value:"1 node(s) didn&#39;t have free ports for the requested pod ports.",id:"1-nodes-didnt-have-free-ports-for-the-requested-pod-ports",level:2},{value:"\u8D44\u6E90",id:"\u8D44\u6E90",level:2},{value:"failed to reserve container name &quot;&quot;: name &quot;&quot; is reserved for",id:"failed-to-reserve-container-name--name--is-reserved-for",level:2},{value:"unable to find data in memory cache",id:"unable-to-find-data-in-memory-cache",level:2},{value:"parent snapshot does not exist: not found",id:"parent-snapshot-does-not-exist-not-found",level:2},{value:"invalid bearer token, Token has been invalidated",id:"invalid-bearer-token-token-has-been-invalidated",level:2},{value:"Node Shell",id:"node-shell",level:2},{value:"\u8BC1\u4E66\u8F6E\u6362",id:"\u8BC1\u4E66\u8F6E\u6362",level:2},{value:"eStargz",id:"estargz",level:2},{value:"could not load server certificate file : Permission denied",id:"could-not-load-server-certificate-file--permission-denied",level:2},{value:"Usage of EmptyDir volume exceeds the limit 1m",id:"usage-of-emptydir-volume-exceeds-the-limit-1m",level:2},{value:"\u5E38\u7528 fieldRef",id:"pod-fieldref",level:2},{value:"\u955C\u50CF\u5730\u5740",id:"\u955C\u50CF\u5730\u5740",level:2},{value:"failed to execute portforward in network namespace",id:"failed-to-execute-portforward-in-network-namespace",level:2},{value:"\u9AD8\u53EF\u7528\u548C\u590D\u6742\u5747\u8861",id:"\u9AD8\u53EF\u7528\u548C\u590D\u6742\u5747\u8861",level:2},{value:"\u5220\u9664\u6240\u6709\u88AB\u9A71\u9010\u7684 Pod",id:"\u5220\u9664\u6240\u6709\u88AB\u9A71\u9010\u7684-pod",level:2}];function o(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"k8s-\u5E38\u89C1\u95EE\u9898",children:"K8S \u5E38\u89C1\u95EE\u9898"})}),"\n",(0,r.jsx)(n.h2,{id:"headless-service",children:"headless service"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4E0D\u9700\u8981 clusterIP \u7684 service"}),"\n",(0,r.jsx)(n.li,{children:"\u4E0D\u7528\u4E8E\u8DEF\u7531\uFF0C\u800C\u662F\u7528\u4E8E dns \u67E5\u8BE2 - \u8FD4\u56DE endpoint \u5730\u5740"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spec:\n  clusterIP: None\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u63A5\u53E3-curl",children:"\u63A5\u53E3 CURL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl --cacert /var/run/secrets/kubernetes.io/serviceaccount/ca.crt --header "Authorization: Bearer $(cat /var/run/secrets/kubernetes.io/serviceaccount/token)" -X GET https://kubernetes.default.svc/api\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Point to the internal API server hostname\nAPISERVER=https://kubernetes.default.svc\n\n# Path to ServiceAccount token\nSERVICEACCOUNT=/var/run/secrets/kubernetes.io/serviceaccount\n\n# Read this Pod\'s namespace\nNAMESPACE=$(cat ${SERVICEACCOUNT}/namespace)\n\n# Read the ServiceAccount bearer token\nTOKEN=$(cat ${SERVICEACCOUNT}/token)\n\n# Reference the internal certificate authority (CA)\nCACERT=${SERVICEACCOUNT}/ca.crt\n\n# Explore the API with TOKEN\ncurl --cacert ${CACERT} --header "Authorization: Bearer ${TOKEN}" -X GET ${APISERVER}/api\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/run-application/access-api-from-pod/#without-using-a-proxy",children:"https://kubernetes.io/docs/tasks/run-application/access-api-from-pod/#without-using-a-proxy"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6CE8\u5165\u73AF\u5883\u53D8\u91CF",children:"\u6CE8\u5165\u73AF\u5883\u53D8\u91CF"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"env:\n  - name: POD_IP\n    valueFrom:\n      fieldRef:\n        fieldPath: status.podIP\n# command \u548C args \u4F1A\u5C55\u5F00\u73AF\u5883\u53D8\u91CF\ncommand: ['/bin/echo']\nargs: ['$(POD_IP)']\n"})}),"\n",(0,r.jsx)(n.h2,{id:"limits",children:"limits"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"110 pods/node"}),"\n",(0,r.jsxs)(n.li,{children:["1 MB/object - etcd \u9650\u5236 - ",(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/issues/19781",children:"#19781"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5927\u578B CRD \u5B9A\u4E49\u53EF\u80FD\u8FBE\u5230\u8FD9\u4E2A\u9650\u5236 - embed \u5916\u90E8\u5B9A\u4E49 - ",(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/issues/82292",children:"#82292"})]}),"\n",(0,r.jsx)(n.li,{children:"ConfigMap \u5982\u679C\u8FC7\u5927\uFF0C\u5EFA\u8BAE\u62C6\u5206"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6240\u6709 annotation KV \u52A0\u8D77\u6765\u4E0D\u8D85\u8FC7 ",(0,r.jsx)(n.strong,{children:"256Kb"})," - ",(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/blob/fa16bf8e121e9a9ce0a8b92d96a39c986152c484/staging/src/k8s.io/apimachinery/pkg/api/validation/objectmeta.go#L36",children:"TotalAnnotationSizeLimitB"})]}),"\n",(0,r.jsxs)(n.li,{children:["RFC-1123 - DNS LabelName \u6700\u957F ",(0,r.jsx)(n.strong,{children:"63"})," \u5B57\u7B26 - K8S \u4E2D\u5F88\u591A\u5730\u65B9\u4F7F\u7528\u8BE5\u9A8C\u8BC1\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u6240\u6709\u652F\u6301 DNS \u7684\u5BF9\u8C61\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"pod,service,namespace"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["label - ",(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/pull/1830",children:"#1830"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"gRPC \u901A\u5E38\u9650\u5236\u4E3A 4MB"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://stackoverflow.com/a/32294443/1870054",children:"https://stackoverflow.com/a/32294443/1870054"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://etcd.io/docs/v3.3/dev-guide/limit/",children:"https://etcd.io/docs/v3.3/dev-guide/limit/"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"handle small key value pairs typical for metadata."}),"\n",(0,r.jsx)(n.li,{children:"--max-request-bytes=1.5MiB"}),"\n",(0,r.jsx)(n.li,{children:"--quota-backend-bytes=2GB - \u5EFA\u8BAE\u4E0D\u8D85\u8FC7 8GB"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"qos",children:"QoS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"status:\n  qosClass: Guaranteed\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"resources"}),"\n",(0,r.jsx)(n.li,{children:"Guaranteed"}),"\n",(0,r.jsx)(n.li,{children:"Burstable"}),"\n",(0,r.jsx)(n.li,{children:"BestEffort"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/",children:"https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"operator-vs-controller",children:"operator vs controller"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"operator \u5305\u542B\u4E00\u4E2A\u6216\u591A\u4E2A controller"}),"\n",(0,r.jsx)(n.li,{children:"controller \u8D1F\u8D23 CRD \u5904\u7406"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cni-plugins-\u4E0D\u518D\u5305\u542B-flannel",children:"cni-plugins \u4E0D\u518D\u5305\u542B flannel"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["flannel \u72EC\u7ACB\u51FA\u5355\u72EC\u7684 repo ",(0,r.jsx)(n.a,{href:"https://github.com/flannel-io/cni-plugin",children:"flannel-io/cni-plugin"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/containernetworking/plugins/issues/655",children:"https://github.com/containernetworking/plugins/issues/655"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u8D44\u6E90\u9650\u5236",children:"\u8D44\u6E90\u9650\u5236"}),"\n",(0,r.jsx)(n.h2,{id:"k3s-\u5E38\u89C1\u95EE\u9898",children:"K3S \u5E38\u89C1\u95EE\u9898"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/rancher/k3s/issues/396",children:"#396"})," - Initializing eviction metric for zone"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pod-\u65F6\u533A",children:"Pod \u65F6\u533A"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"TZ \u73AF\u5883\u53D8\u91CF"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8981\u6C42 \u8BED\u8A00/runtime \u652F\u6301"}),"\n",(0,r.jsx)(n.li,{children:"\u9700\u8981 tzdata"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u6620\u5C04 tz \u4FE1\u606F"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u53EF\u4EE5\u4E0E host \u4FDD\u6301\u4E00\u81F4"}),"\n",(0,r.jsx)(n.li,{children:"\u53EF\u4EE5\u4E0D\u9700\u8981\u5B89\u88C5 tzdata"}),"\n",(0,r.jsx)(n.li,{children:"\u8981\u6C42 host \u5B89\u88C5\u4E86 tzdata"}),"\n",(0,r.jsx)(n.li,{children:"\u8981\u6C42\u8C03\u6574 Pod"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u4EE3\u7801\u5185\u63A7\u5236"}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"bundle tzdata\uFF0C\u8FD0\u884C\u65F6\u52A0\u8F7D"}),"\n",(0,r.jsxs)(n.li,{children:["golang ",(0,r.jsx)(n.code,{children:'import _ "time/tzdata"'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u589E\u52A0\u7EA6 450 KB"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: busybox-sleep\nspec:\n  containers:\n    - name: busybox\n      image: busybox\n      args:\n        - sleep\n        - '1000000'\n      env:\n        - name: TZ\n          value: Asia/Shanghai\n      volumeMounts:\n        - name: tz-config\n          mountPath: /etc/localtime\n  volumes:\n    - name: tz-config\n      hostPath:\n        path: /usr/share/zoneinfo/Asia/Shanghai\n        type: File\n"})}),"\n",(0,r.jsx)(n.h2,{id:"taint",children:"taint"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"node.kubernetes.io/disk-pressure:NoSchedule"}),"\n",(0,r.jsxs)(n.li,{children:["\u4E3A pod \u8BBE\u7F6E priorityClassName \u786E\u4FDD\u8C03\u5EA6\uFF0C\u907F\u514D\u9A71\u9010\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"system-node-critical,system-cluster-critical"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"df -h\ndf -Hi\n\n# remove DiskPressure\nkubectl taint nodes < nodename > node.kubernetes.io/disk-pressure-\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u76D1\u63A7\u6765\u81EA\u4E8E cadvisor"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/architecture/garbage-collection/#container-image-lifecycle",children:"https://kubernetes.io/docs/concepts/architecture/garbage-collection/#container-image-lifecycle"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"HighThresholdPercent"}),"\n",(0,r.jsx)(n.li,{children:"LowThresholdPercent"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u96C6\u7FA4\u9650\u5236",children:"\u96C6\u7FA4\u9650\u5236"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"5000 \u8282\u70B9"}),"\n",(0,r.jsx)(n.li,{children:"150000 \u603B Pod"}),"\n",(0,r.jsx)(n.li,{children:"300000 \u603B\u5BB9\u5668"}),"\n",(0,r.jsx)(n.li,{children:"100 \u8282\u70B9 Pod"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/setup/best-practices/cluster-large/",children:"Building large clusters"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://cloud.google.com/compute/docs/machine-types",children:"GCE Type"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u96C6\u7FA4 Master \u6027\u80FD\u63A8\u8350"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nodes"}),(0,r.jsx)(n.th,{children:"GCE Type"}),(0,r.jsx)(n.th,{children:"Spec"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1-5"}),(0,r.jsx)(n.td,{children:"n1-standard-1"}),(0,r.jsx)(n.td,{children:"1 \u6838 4G"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"6-10"}),(0,r.jsx)(n.td,{children:"n1-standard-2"}),(0,r.jsx)(n.td,{children:"2 \u6838 8G"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"11-100"}),(0,r.jsx)(n.td,{children:"n1-standard-4"}),(0,r.jsx)(n.td,{children:"4 \u6838 16G"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"101-250"}),(0,r.jsx)(n.td,{children:"n1-standard-8"}),(0,r.jsx)(n.td,{children:"8 \u6838 32G"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"251-500"}),(0,r.jsx)(n.td,{children:"n1-standard-16"}),(0,r.jsx)(n.td,{children:"16 \u6838 64G"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"500+"}),(0,r.jsx)(n.td,{children:"n1-standard-32"}),(0,r.jsx)(n.td,{children:"32 \u6838 128G"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u64CD\u4F5C\u7CFB\u7EDF\u8981\u6C42--linux-kernel-requirement",children:"\u64CD\u4F5C\u7CFB\u7EDF\u8981\u6C42 / Linux Kernel Requirement"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Linux Kernel 3.10+"}),"\n",(0,r.jsxs)(n.li,{children:["moby ",(0,r.jsx)(n.a,{href:"https://github.com/moby/moby/blob/master/contrib/check-config.sh",children:"contrib/check-config.sh"})]}),"\n",(0,r.jsxs)(n.li,{children:["Calico ",(0,r.jsx)(n.a,{href:"https://docs.projectcalico.org/getting-started/kubernetes/requirements",children:"System requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Linux Kernel 3.10+"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./check-config.sh kernel.config\n"})}),"\n",(0,r.jsx)(n.h2,{id:"invalid-capacity-0-on-image-filesystem",children:"invalid capacity 0 on image filesystem"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u786E\u4FDD\u5B58\u5728\u5185\u6838\u53C2\u6570 ",(0,r.jsx)(n.code,{children:"cgroup_enable=cpuset cgroup_memory=1 cgroup_enable=memory"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["syslinux\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"/etc/update-extlinux.conf"}),"\n",(0,r.jsx)(n.li,{children:"update-extlinux && reboot"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["grub\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"/etc/default/grub"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cat /proc/cmdline | grep cgroup_enable\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/issues/51798#issuecomment-481366041",children:"kubernetes/kubernetes#51798"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/k3s-io/k3s/issues/1857#issuecomment-637852959",children:"k3s-io/k3s#1857"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/canonical/microk8s/issues/912",children:"canonical/microk8s#912"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5BFC\u51FA\u8D44\u6E90\u5FFD\u7565\u72B6\u6001\u5B57\u6BB5",children:"\u5BFC\u51FA\u8D44\u6E90\u5FFD\u7565\u72B6\u6001\u5B57\u6BB5"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5E38\u89C1\u5B57\u6BB5\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"status"}),"\n",(0,r.jsx)(n.li,{children:"metadata.managedFields"}),"\n",(0,r.jsxs)(n.li,{children:["metadata\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["annotations\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"kubectl.kubernetes.io/last-applied-configuration"}),"\n",(0,r.jsx)(n.li,{children:"deployment.kubernetes.io/revision"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"resourceVersion"}),"\n",(0,r.jsx)(n.li,{children:"selfLink"}),"\n",(0,r.jsx)(n.li,{children:"uid"}),"\n",(0,r.jsx)(n.li,{children:"creationTimestamp"}),"\n",(0,r.jsx)(n.li,{children:"generation"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get -o=yaml deploy whoami | yq d - status | yq d - 'metadata.managedFields'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5220\u9664\u5361\u5728-terminating-\u72B6\u6001\u7684\u8D44\u6E90",children:"\u5220\u9664\u5361\u5728 Terminating \u72B6\u6001\u7684\u8D44\u6E90"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5220\u9664 Pod \u53EF\u5C1D\u8BD5\u5F3A\u5236"}),"\n",(0,r.jsx)(n.li,{children:"\u8D44\u6E90\u5220\u4E0D\u6389\u5C1D\u8BD5\u79FB\u9664 finalizers\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u5F3A\u5236\u5220\u9664 Pod\nkubectl delete pods --force < pod > --grace-period=0\n# \u5C1D\u8BD5\u79FB\u9664 Pod \u7684 finalizers\nkubectl patch pod \'{"metadata":{"finalizers":null}}\' < pod > -p\n\n# \u67E5\u770B\u6240\u6709\u7684 Terminating Namespace\nkubectl get ns --field-selector status.phase=Terminating\n\n# \u6240\u6709 NS\nkubectl get ns --field-selector status.phase=Terminating -o jsonpath=\'{..metadata.name}\'\n\n# \u6279\u91CF\n# kubectl patch ns -p \'{"metadata":{"finalizers": null}}\' $NS\n# kubectl patch ns -p \'{"metadata":{"finalizers":[]}}\' --type=merge $NS\nkubectl patch ns -p \'{"metadata":{"finalizers":[]}}\' --type=merge $(kubectl get ns --field-selector status.phase=Terminating -o jsonpath=\'{..metadata.name}\')\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5220\u9664-rancher-\u9879\u76EE\u7A7A\u95F4",children:"\u5220\u9664 rancher \u9879\u76EE\u7A7A\u95F4"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u4E3B\u8981\u96BE\u70B9\u5728\u4E8E get all \u4E0D\u4F1A\u8FD4\u56DE\u6240\u6709\u8D44\u6E90\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u53EF\u5C1D\u8BD5 ",(0,r.jsx)(n.a,{href:"https://github.com/corneliusweig/ketall#via-krew",children:"ketall"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\u90E8\u5206\u8D44\u6E90\u9700\u8981\u5148 patch \u624D\u80FD\u5220\u9664"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'for ns in local p-66lfd; do\n  for error in app.project.cattle.io/cluster-alerting app.project.cattle.io/cluster-monitoring app.project.cattle.io/monitoring-operator app.project.cattle.io/project-monitoring clusteralertgroup.management.cattle.io/cluster-scan-alert clusteralertgroup.management.cattle.io/etcd-alert clusteralertgroup.management.cattle.io/event-alert clusteralertgroup.management.cattle.io/kube-components-alert clusteralertgroup.management.cattle.io/node-alert clusterroletemplatebinding.management.cattle.io/creator-cluster-owner clusterroletemplatebinding.management.cattle.io/u-b4qkhsnliz-admin node.management.cattle.io/machine-9sssc node.management.cattle.io/machine-ks6z6 node.management.cattle.io/machine-v4v89 project.management.cattle.io/p-cnj28 project.management.cattle.io/p-mbvfd projectalertgroup.management.cattle.io/projectalert-workload-alert projectalertrule.management.cattle.io/less-than-half-workload-available projectalertrule.management.cattle.io/memory-close-to-resource-limited projectroletemplatebinding.management.cattle.io/app-jdnmz projectroletemplatebinding.management.cattle.io/creator-project-owner projectroletemplatebinding.management.cattle.io/prtb-s6fhc projectroletemplatebinding.management.cattle.io/u-2gacgc4nfu-member projectroletemplatebinding.management.cattle.io/u-efxo6n6ndd-member; do\n    for resource in $(kubectl get -n $ns $error -o name); do\n      kubectl patch -n $ns $resource -p \'{"metadata": {"finalizers": []}}\' --type=\'merge\'\n    done\n  done\ndone\n\n# \u5168\u5C40\u8D44\u6E90\nfor res in $(kubectl api-resources --namespaced=false --api-group management.cattle.io | cut -d \' \' -f 1); do\n  echo "=== $res.management.cattle.io ==="\n  kubectl get $res.management.cattle.io\ndone\n\n# namespaced\ngroups="management.cattle.io catalog.cattle.io project.cattle.io"\nfor grp in $groups; do\n  for res in $(kubectl api-resources --namespaced=true --api-group $grp -o name); do\n    echo "=== $res ==="\n    kubectl get --all-namespaces $res\n  done\ndone\n\n# \u6E05\u9664\u8D44\u6E90\ncleargroup() {\n  kubectl patch $1 -p \'{"metadata":{"finalizers":[]}}\' --type=merge $(kubectl get $1 -o jsonpath=\'{..metadata.name}\')\n  kubectl delete --all $1\n}\n\ncleargroup globalroles.management.cattle.io\n'})}),"\n",(0,r.jsx)(n.h2,{id:"unable-to-connect-to-the-server-x509-certificate-is-valid-for-101012-104301-127001-192168110-not-123123123123",children:"Unable to connect to the server: x509: certificate is valid for 10.10.1.2, 10.43.0.1, 127.0.0.1, 192.168.1.10, not 123.123.123.123"}),"\n",(0,r.jsx)(n.p,{children:"\u7B7E\u53D1\u7684\u8BC1\u4E66\u4E0D\u5305\u542B IP\uFF0C\u521D\u59CB\u5316\u7684\u65F6\u5019\u53EF\u4EE5\u6DFB\u52A0\uFF0C\u5EFA\u8BAE\u65B0\u5EFA\u5B50\u8D26\u53F7\u7BA1\u7406\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u539F\u5148\u7684\u4F4D\u4E8E\n# /etc/kubernetes/pki/apiserver.*\nkubeadm init --apiserver-cert-extra-sans=123.123.123.123\n"})}),"\n",(0,r.jsx)(n.h2,{id:"failed-to-create-pod-sandbox-rpc-error-code--unknown-desc--failed-to-create-a-sandbox-for-pod-cron-1594372200-lmkcb-operation-timeout-context-deadline-exceeded",children:'Failed to create pod sandbox: rpc error: code = Unknown desc = failed to create a sandbox for pod "cron-1594372200-lmkcb": operation timeout: context deadline exceeded'}),"\n",(0,r.jsx)(n.p,{children:"\u6D4B\u8BD5\u662F\u5426\u6B63\u5E38"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: alpine-pwd\nspec:\n  template:\n    spec:\n      containers:\n        - name: alpine\n          image: wener/base\n          command: ['pwd']\n      restartPolicy: Never\n  backoffLimit: 4\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4E00\u4E2A\u4E3B\u8282\u70B9\u5F02\u5E38\uFF0C\u91CD\u542F\u89E3\u51B3\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"error-specifying-a-root-certificates-file-with-the-insecure-flag-is-not-allowed",children:"error: specifying a root certificates file with the insecure flag is not allowed"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"insecure-skip-tls-verify"})," \u4E0D\u80FD\u7528\u4E8E\u6839\u8BC1\u4E66\uFF0C\u65B0\u5EFA\u5B50\u8D26\u53F7\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"node_lifecycle_controllergo1433-initializing-eviction-metric-for-zone",children:"node_lifecycle_controller.go:1433 Initializing eviction metric for zone"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5F53\u6709\u65B0\u7684 zone \u65F6\u4F1A\u521D\u59CB\u5316 metric"}),"\n",(0,r.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/blob/d01cc01ab4455d1c0db84d2cc79d963a1b15d292/pkg/controller/nodelifecycle/node_lifecycle_controller.go#L1429",children:"node_lifecycle_controller.go:1433"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/setup/best-practices/multiple-zones/",children:"\u591A\u53EF\u7528\u533A\u5B9E\u8DF5"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"running-volumebinding-filter-plugin-for-pod-web-0-pod-has-unbound-immediate-persistentvolumeclaims",children:'running "VolumeBinding" filter plugin for pod "web-0": pod has unbound immediate PersistentVolumeClaims'}),"\n",(0,r.jsx)(n.h2,{id:"error-unable-to-retrieve-the-complete-list-of-server-apis-write-broken-pipe",children:"error: unable to retrieve the complete list of server APIs: write: broken pipe"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7F51\u7EDC\u4E0D\u7A33\u5B9A\u4E5F\u53EF\u80FD\u5BFC\u81F4\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4F8B\u5982 \u5728\u4F7F\u7528 sshuttle \u7684\u65F6\u5019\u5076\u5C14\u5C31\u4F1A\u51FA\u73B0"}),"\n",(0,r.jsxs)(n.li,{children:["\u53EF\u4EE5\u8003\u8651\u4F7F\u7528 ssh \u8F6C\u53D1 - ",(0,r.jsx)(n.code,{children:"ssh -vNL 6443:10.10.1.1:6443 admin@192.168.1.2 -o ExitOnForwardFailure=yes"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:'an error on the server ("") has prevented the request from succeeding'}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u6982\u7387\u5931\u8D25\nkubectl api-resources\n\n# \u786E\u4FDD metric \u6B63\u5E38\nkubectl get apiservices\n# \u786E\u4FDD \u7CFB\u7EDF\u670D\u52A1 \u6B63\u5E38\nkubectl get pods -n kube-system\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/prometheus-operator/kube-prometheus/issues/275",children:"https://github.com/prometheus-operator/kube-prometheus/issues/275"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dns-\u4E0D\u901A",children:"dns \u4E0D\u901A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u73B0\u8C61 - \u6240\u6709 \u670D\u52A1 504\uFF0C\u7F51\u5173\u8D85\u65F6"}),"\n",(0,r.jsxs)(n.li,{children:["\u6392\u67E5\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9A8C\u8BC1 kube-dns 53 \u80FD\u5426\u89E3\u6790"}),"\n",(0,r.jsxs)(n.li,{children:["\u6240\u6709\u8282\u70B9\u90FD\u6709\u95EE\u9898\u8FD8\u662F\u5355\u4E2A\u8282\u70B9\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6240\u6709\u8282\u70B9\u90FD\u6709\u95EE\u9898\u5219\u53EF\u80FD\u662F\u670D\u52A1\u7684\u95EE\u9898"}),"\n",(0,r.jsx)(n.li,{children:"\u5355\u4E2A\u8282\u70B9\u5219\u53EF\u80FD\u662F\u73AF\u5883\u95EE\u9898"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"ping \u540E\u7AEF endpoint"}),"\n",(0,r.jsx)(n.li,{children:"ping \u4E0D\u901A\u5219\u8BF4\u660E\u53EF\u80FD\u662F flannel \u63D2\u4EF6\u4E4B\u7C7B\u5F02\u5E38\u6216\u8005\u4F7F\u7528\u7684\u5E95\u5C42 interface \u5F02\u5E38"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u89E3\u51B3\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5C1D\u8BD5\u91CD\u542F k3s"}),"\n",(0,r.jsx)(n.li,{children:"\u5C1D\u8BD5\u91CD\u542F \u7F51\u7EDC"}),"\n",(0,r.jsx)(n.li,{children:"\u5C1D\u8BD5\u91CD\u542F \u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u9A8C\u8BC1 DNS \u80FD\u5426\u89E3\u6790\n# k3s \u9ED8\u8BA4\u4F7F\u7528 10.43.0.10\n# kube-dns.kube-system.svc\nnslookup wener.me 10.43.0.10\n# \u6216\ndig @10.43.0.10 wener.me\n"})}),"\n",(0,r.jsx)(n.h2,{id:"mountvolumesetup-failed-for-volume-config-volume--failed-to-sync-secret-cache-timed-out-waiting-for-the-condition",children:'MountVolume.SetUp failed for volume "config-volume" : failed to sync secret cache: timed out waiting for the condition'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6761\u4EF6\u672A\u6EE1\u8DB3\uFF0C\u65E0\u6CD5\u7EE7\u7EED\u6267\u884C\uFF0C\u4E14\u7B49\u5F85\u8D85\u65F6"}),"\n",(0,r.jsxs)(n.li,{children:["\u89E3\u51B3\u529E\u6CD5\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7B49\u5F85 \u6216 \u5220\u9664 Pod"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u67E5\u770B\u6761\u4EF6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"status:\n  phase: Pending\n  conditions:\n    - type: Initialized\n      status: 'True'\n      lastProbeTime: null\n      lastTransitionTime: '2020-09-04T10:09:51Z'\n    - type: Ready\n      status: 'False'\n      lastProbeTime: null\n      lastTransitionTime: '2020-09-04T10:09:51Z'\n      reason: ContainersNotReady\n      message: 'containers with unready status: [alertmanager config-reloader]'\n    # \u8FD9\u4E00\u6B65\u672A\u80FD\u6210\u529F\n    - type: ContainersReady\n      status: 'False'\n      lastProbeTime: null\n      lastTransitionTime: '2020-09-04T10:09:51Z'\n      reason: ContainersNotReady\n      message: 'containers with unready status: [alertmanager config-reloader]'\n    - type: PodScheduled\n      status: 'True'\n      lastProbeTime: null\n      lastTransitionTime: '2020-09-04T10:09:51Z'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"kubernetes-swap",children:"kubernetes swap"}),"\n",(0,r.jsx)(n.p,{children:"\u4E0D\u5EFA\u8BAE\u4F7F\u7528 swap"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/issues/53533",children:"kubernetes/kubernetes#3533"})," - Kubelet/Kubernetes should work with Swap Enabled"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"didnt-have-free-ports-for-the-requested-pod-ports",children:"didn't have free ports for the requested pod ports"}),"\n",(0,r.jsx)(n.p,{children:"deploy \u5982\u679C\u53EA\u6709\u4E00\u4E2A\u8282\u70B9\uFF0C\u4F7F\u7528 Recreate\uFF0C RollingUpdate \u4F1A\u5931\u8D25\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"scale-to-zero",children:"scale to zero"}),"\n",(0,r.jsx)(n.p,{children:"\u4F7F\u7528 keda \u6216\u8005 knative"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"keda \u7B80\u5355 - \u8D1F\u8D23 autoscaler"}),"\n",(0,r.jsx)(n.li,{children:"knative \u590D\u6742 - \u6574\u5957\u5F00\u53D1\u903B\u8F91"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-storageclass-is-invalid-provisioner-forbidden-updates-to-provisioner-are-forbidden",children:"The StorageClass is invalid: provisioner: Forbidden: updates to provisioner are forbidden."}),"\n",(0,r.jsx)(n.p,{children:"provisioner \u540D\u5B57\u4E0D\u5339\u914D\uFF0C\u8FD8 sc \u540D\u5B57\u6216\u5220\u4E86\u91CD\u5EFA\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u9884\u7559\u8D44\u6E90",children:"\u9884\u7559\u8D44\u6E90"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/administer-cluster/reserve-compute-resources/",children:"Reserve Compute Resources for System Daemons"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--kube-reserved=[cpu=100m][,][memory=100Mi][,][ephemeral-storage=1Gi][,][pid=1000]\n--system-reserved=[cpu=100m][,][memory=100Mi][,][ephemeral-storage=1Gi][,][pid=1000]\n--reserved-cpus=0-3\n# \u5F00\u59CB\u9A71\u9010\u7684\u9600\u503C\n--eviction-hard=[memory.available<500Mi]\n--enforce-node-allocatable=pods[,][system-reserved][,][kube-reserved]\n\n# \u6307\u5411\u73B0\u6709\u7684 cgroup\n--kube-reserved-cgroup=\n--system-reserved-cgroup=\n"})}),"\n",(0,r.jsx)(n.h2,{id:"nodes-had-volume-node-affinity-conflict",children:"node(s) had volume node affinity conflict"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5982\u679C\u662F pv \u65E0\u6CD5\u8FC1\u79FB\uFF0C\u5207\u5F71\u54CD\u4E0D\u5927\uFF0C\u53EF\u4EE5\u8003\u8651\u5220\u9664\u4E86\u4ECE\u5EFA"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u53EF\u80FD pvc \u548C pod zone \u51B2\u7A81\uFF0C\u53EF\u4EE5\u9488\u5BF9 zone \u521B\u5EFA sc"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"kind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: region1storageclass\nprovisioner: kubernetes.io/aws-ebs\nvolumeBindingMode: WaitForFirstConsumer\nallowedTopologies:\n  - matchLabelExpressions:\n      - key: failure-domain.beta.kubernetes.io/zone\n        values:\n          - eu-west-2b\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5982\u4F55\u4FDD\u6301\u8D1F\u8F7D\u5747\u8861",children:"\u5982\u4F55\u4FDD\u6301\u8D1F\u8F7D\u5747\u8861"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u914D\u7F6E\u53CD\u4EB2\u548C"}),"\n",(0,r.jsx)(n.li,{children:"kill pod \u89E6\u53D1\u91CD\u65B0\u8C03\u5EA6"}),"\n",(0,r.jsx)(n.li,{children:"\u5C1D\u8BD5 rollout \u4ECE\u65B0\u8C03\u5EA6"}),"\n",(0,r.jsxs)(n.li,{children:["\u4F7F\u7528\u7C7B\u4F3C ",(0,r.jsx)(n.a,{href:"https://github.com/kubernetes-sigs/descheduler",children:"kubernetes-sigs/descheduler"})," \u8FD9\u6837\u7684\u5DE5\u5177\u81EA\u52A8\u7EF4\u62A4\u5747\u8861"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pause-\u662F\u4EC0\u4E48\u8FDB\u7A0B",children:"pause \u662F\u4EC0\u4E48\u8FDB\u7A0B"}),"\n",(0,r.jsx)(n.h2,{id:"1-nodes-had-volume-node-affinity-conflict",children:"1 node(s) had volume node affinity conflict"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u68C0\u67E5 StorageClass \u7684\u4EB2\u548C\u7B56\u7565"}),"\n",(0,r.jsxs)(n.li,{children:["\u68C0\u67E5 PersistentVolume \u7684\u4EB2\u548C\u7B56\u7565\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pod \u9700\u8981\u5339\u914D PV \u7684\u4EB2\u548C\u7B56\u7565"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"failed-to-run-kubelet-mountpoint-for-cpu-not-found",children:"failed to run Kubelet: mountpoint for cpu not found"}),"\n",(0,r.jsx)(n.p,{children:"\u5E94\u8BE5\u662F\u6CA1\u6709\u6302\u8F7D cgroups"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"service cgroups start\n"})}),"\n",(0,r.jsx)(n.h2,{id:"orphaned-pod-found-but-error-not-a-directory-occurred-when-trying-to-remove-the-volumes-dir",children:"orphaned pod found, but error not a directory occurred when trying to remove the volumes dir"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'pods=$(tail -n 1000 /var/log/k0s.log | grep \'orphaned pod\' | sed -r \'s/.*pod[^"]+"([^\\\\"]+).*/\\1/\' | uniq)\nfor i in $pods; do\n  echo "Deleting Orphaned pod id: $i"\n  rm -rf /var/lib/kubelet/pods/$i\ndone\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/issues/105536",children:"kubernetes#105536"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://quemingfei.com/archives/kubernetes-wen-ti-pai-cha-orphanedpodfound-butvolumepathsarestillpresentondisk",children:"scripts"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"1-nodes-didnt-have-free-ports-for-the-requested-pod-ports",children:"1 node(s) didn't have free ports for the requested pod ports."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u68C0\u67E5 hostPort"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u8D44\u6E90",children:"\u8D44\u6E90"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["cpu\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1.0 -> 1vcpu -> 1000m"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["memory\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"base 1000 - E,T,P,G,M,k"}),"\n",(0,r.jsx)(n.li,{children:"2^n - Ei,Pi,Ti,Gi,Mi,Ki"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"hugepages-<size>"})}),"\n",(0,r.jsx)(n.li,{children:"ephemeral-storage"}),"\n",(0,r.jsx)(n.li,{children:"storage"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"failed-to-reserve-container-name--name--is-reserved-for",children:'failed to reserve container name "": name "" is reserved for'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u53EF\u80FD\u78C1\u76D8\u6162\u5BFC\u81F4\uFF0C\u53EA\u80FD\u7B49"}),"\n",(0,r.jsxs)(n.li,{children:["\u53EF\u80FD\u662F\u7528\u4E86 zfs snapshotter\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"zfs list"})," \u975E\u5E38\u6162"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ps aux | grep zfs"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"iostat -d -x 1"})," \u770B ",(0,r.jsx)(n.code,{children:"%utils"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pidstat -d 1"})," \u6392\u67E5\u8FDB\u7A0B"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/containerd/containerd/issues/4604#issuecomment-1027293621",children:"https://github.com/containerd/containerd/issues/4604#issuecomment-1027293621"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# reserved containerd\nctr -n k8s.io c ls\n"})}),"\n",(0,r.jsx)(n.h2,{id:"unable-to-find-data-in-memory-cache",children:"unable to find data in memory cache"}),"\n",(0,r.jsx)(n.h2,{id:"parent-snapshot-does-not-exist-not-found",children:"parent snapshot does not exist: not found"}),"\n",(0,r.jsx)(n.h2,{id:"invalid-bearer-token-token-has-been-invalidated",children:"invalid bearer token, Token has been invalidated"}),"\n",(0,r.jsx)(n.h2,{id:"node-shell",children:"Node Shell"}),"\n",(0,r.jsx)(n.p,{children:"\u53EF\u901A\u8FC7\u4E00\u4E2A Pod \u8FDB\u5165"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: node-shell\n  namespace: kube-system\nspec:\n  containers:\n    - name: shell\n      image: docker.io/alpine:3.13\n      command:\n        - nsenter\n      args:\n        - '-t'\n        - '1'\n        - '-m'\n        - '-u'\n        - '-i'\n        - '-n'\n        - sleep\n        - '14000'\n      resources: {}\n      volumeMounts:\n        - name: kube-api-access\n          readOnly: true\n          mountPath: /var/run/secrets/kubernetes.io/serviceaccount\n      terminationMessagePath: /dev/termination-log\n      terminationMessagePolicy: File\n      imagePullPolicy: IfNotPresent\n      securityContext:\n        privileged: true\n  volumes:\n    - name: kube-api-access\n      projected:\n        sources:\n          - serviceAccountToken:\n              expirationSeconds: 3607\n              path: token\n          - configMap:\n              name: kube-root-ca.crt\n              items:\n                - key: ca.crt\n                  path: ca.crt\n          - downwardAPI:\n              items:\n                - path: namespace\n                  fieldRef:\n                    apiVersion: v1\n                    fieldPath: metadata.namespace\n        defaultMode: 420\n  restartPolicy: Never\n  terminationGracePeriodSeconds: 0\n  dnsPolicy: ClusterFirst\n  serviceAccountName: default\n  serviceAccount: default\n  # \u5E0C\u671B\u8FDB\u5165\u7684 Node\n  nodeName: master-1\n  hostNetwork: true\n  hostPID: true\n  hostIPC: true\n  securityContext: {}\n  schedulerName: default-scheduler\n  tolerations:\n    - operator: Exists\n  priorityClassName: system-node-critical\n  priority: 2000001000\n  enableServiceLinks: true\n  preemptionPolicy: PreemptLowerPriority\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u8BC1\u4E66\u8F6E\u6362",children:"\u8BC1\u4E66\u8F6E\u6362"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["k3s\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"12 \u4E2A\u6708\u6709\u6548\uFF0C90 \u5929\u5185\u8F6E\u6362"}),"\n",(0,r.jsxs)(n.li,{children:["\u8BC1\u4E66\u8F6E\u6362\u9700\u8981\u91CD\u542F - ",(0,r.jsx)(n.code,{children:"service k3s restart"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u6B63\u5728\u5F00\u59CB\u652F\u6301\u7684\u4E0D\u91CD\u542F\u8BC1\u4E66\u8F6E\u6362 ",(0,r.jsx)(n.a,{href:"https://github.com/k3s-io/k3s/wiki/K3s-Cert-Rotation",children:"k3s certificate"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://rancher.com/docs/k3s/latest/en/advanced/#certificate-rotation",children:"Certificate Rotation"})}),"\n",(0,r.jsxs)(n.li,{children:["Improved and Manual Cert Rotation ",(0,r.jsx)(n.a,{href:"https://github.com/k3s-io/k3s/issues/2636",children:"k3s-io/k3s#2636"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["k0s\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u540C k3s \u5728\u91CD\u542F\u65F6\u8F6E\u6362 ",(0,r.jsx)(n.a,{href:"https://github.com/k0sproject/k0s/pull/952",children:"k0sproject/k0s#952"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["RKE2\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/rancher/rke2/issues/570",children:"rancher/rke2#570"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["k8s\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://devopstales.github.io/kubernetes/k8s-cert/",children:"Kubernetes Certificate Rotation"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u8BC1\u4E66\u7C7B\u578B\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["server ca\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"kubeapi-server cert"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["client ca\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"kube-controller cert"}),"\n",(0,r.jsx)(n.li,{children:"kube-scheduler cert"}),"\n",(0,r.jsx)(n.li,{children:"kube-proxy cert"}),"\n",(0,r.jsx)(n.li,{children:"kube-api client cert"}),"\n",(0,r.jsx)(n.li,{children:"CCM cert"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["etcd ca cert\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"etcd server cert"}),"\n",(0,r.jsx)(n.li,{children:"etcd peer cert"}),"\n",(0,r.jsx)(n.li,{children:"etcd client cert"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["request header ca cert\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"client auth proxy cert"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"estargz",children:"eStargz"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"k3s/k0s \u4F7F\u7528 containerd \u7684\u80FD\u529B\u652F\u6301 stargz"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"k3s server --snapshotter=stargz\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",metastring:'title="/etc/containerd/config.toml"',children:'# Plug stargz snapshotter into containerd\n# Containerd recognizes stargz snapshotter through specified socket address.\n# The specified address below is the default which stargz snapshotter listen to.\n[proxy_plugins]\n\n[proxy_plugins.stargz]\ntype = "snapshot"\naddress = "/run/containerd-stargz-grpc/containerd-stargz-grpc.sock"\n\n# Use stargz snapshotter through CRI\n[plugins."io.containerd.grpc.v1.cri".containerd]\nsnapshotter = "stargz"\n\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/containerd/stargz-snapshotter",children:"containerd/stargz-snapshotter"})}),"\n",(0,r.jsxs)(n.li,{children:["\u521D\u59CB proposal ",(0,r.jsx)(n.a,{href:"https://github.com/google/crfs",children:"google/crfs"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://medium.com/nttlabs/243d94522361",children:"Startup Containers in Lightning Speed with Lazy Image Distribution on Containerd"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"could-not-load-server-certificate-file--permission-denied",children:"could not load server certificate file : Permission denied"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/issues/81089",children:"kubernetes#81089"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4E0D\u652F\u6301\u4FEE\u6539 owner"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/docker-library/postgres/issues/777",children:"https://github.com/docker-library/postgres/issues/777"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage-of-emptydir-volume-exceeds-the-limit-1m",children:"Usage of EmptyDir volume exceeds the limit 1m"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["emptyDir \u4F7F\u7528 tmpfs \u6302\u8F7D\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"medium: Memory"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pod-fieldref",children:"\u5E38\u7528 fieldRef"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"fieldRef"}),"\n",(0,r.jsx)(n.li,{children:"resourceFieldRef"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"env:\n  - name: POD_NAME\n    valueFrom:\n      fieldRef:\n        fieldPath: metadata.name\n  - name: POD_NAMESPACE\n    valueFrom:\n      fieldRef:\n        fieldPath: metadata.namespace\n  - name: POD_IP\n    valueFrom:\n      fieldRef:\n        fieldPath: status.podIP\n  - name: NODE_NAME\n    valueFrom:\n      fieldRef:\n        fieldPath: spec.nodeName\n  - name: POD_SERVICE_ACCOUNT\n    valueFrom:\n      fieldRef:\n        fieldPath: spec.serviceAccountName\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u955C\u50CF\u5730\u5740",children:"\u955C\u50CF\u5730\u5740"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"k8s.gcr.io - \u65E7\u7684"}),"\n",(0,r.jsx)(n.li,{children:"registry.k8s.io - \u65B0\u7684"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"failed-to-execute-portforward-in-network-namespace",children:"failed to execute portforward in network namespace"}),"\n",(0,r.jsx)(n.h2,{id:"\u9AD8\u53EF\u7528\u548C\u590D\u6742\u5747\u8861",children:"\u9AD8\u53EF\u7528\u548C\u590D\u6742\u5747\u8861"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["HA\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u96C6\u7FA4\u5916 Kubelet API \u590D\u6742\u5747\u8861"}),"\n",(0,r.jsx)(n.li,{children:"\u7528\u5916\u90E8\u7684 HAProxy/Nginx/VIP/Tinc \u5B9E\u73B0"}),"\n",(0,r.jsx)(n.li,{children:"\u6700\u7EC8\u7684\u76EE\u7684\u662F\u7528\u4E00\u4E2A\u4E0D\u53D8\u7684\u5730\u5740\u8BBF\u95EE Kubelet API"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["LLB\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u96C6\u7FA4\u5185 LoadBalance \u670D\u52A1"}),"\n",(0,r.jsx)(n.li,{children:"\u5206\u914D ClutserIP"}),"\n",(0,r.jsxs)(n.li,{children:["\u4E0D\u4F7F\u7528\u4E91\u670D\u52A1\u53EF\u4EE5\u7528 MetalLB \u8FD9\u7C7B\u7684\u7EC4\u4EF6+Overlay/LAN \u5B9E\u73B0 ClusterIP \u80FD\u529B\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4F8B\u5982: flannel+host+tinc switch"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\u4F7F\u7528\u4E91\u670D\u52A1\u53EF\u4EE5\u7528\u4E91\u670D\u52A1\u7684 LB \u7EC4\u4EF6 - \u53EF\u76F4\u63A5\u63D0\u4F9B\u5916\u7F51 IP"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5220\u9664\u6240\u6709\u88AB\u9A71\u9010\u7684-pod",children:"\u5220\u9664\u6240\u6709\u88AB\u9A71\u9010\u7684 Pod"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u6240\u6709\u88AB\u9A71\u9010\u7684 pod\nkubectl get pods --all-namespaces | grep Evicted\n\nkubectl get pods --all-namespaces | grep Evicted | awk '{print $2, \"-n\", $1}' | xargs -n3 kubectl delete pod\n"})})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},917776:function(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(7378);let r={},l=s.createContext(r);function t(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);