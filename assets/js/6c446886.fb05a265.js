"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["26291"],{28918:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>d,toc:()=>h,default:()=>x,metadata:()=>i,assets:()=>c,contentTitle:()=>l});var i=JSON.parse('{"id":"service/media/ffmpeg/README","title":"ffmpeg","description":"- FFmpeg/FFmpeg","source":"@site/../notes/service/media/ffmpeg/README.md","sourceDirName":"service/media/ffmpeg","slug":"/service/media/ffmpeg/","permalink":"/notes/service/media/ffmpeg/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/media/ffmpeg/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1723961178000,"frontMatter":{"title":"ffmpeg"},"sidebar":"docs","previous":{"title":"exif","permalink":"/notes/service/media/exif"},"next":{"title":"FFMpeg FAQ","permalink":"/notes/service/media/ffmpeg/faq"}}'),r=s(86106),t=s(17776);let d={title:"ffmpeg"},l="FFMpeg",c={},h=[{value:"Flags",id:"flags",level:2},{value:"\u7F16\u7801",id:"\u7F16\u7801",level:3},{value:"\u89C6\u9891\u5F55\u5236",id:"\u89C6\u9891\u5F55\u5236",level:3},{value:"VP9 Live",id:"vp9-live",level:3},{value:"RTSP",id:"rtsp",level:3},{value:"ff* \u901A\u7528\u9009\u9879",id:"ff-\u901A\u7528\u9009\u9879",level:3},{value:"\u89C6\u9891\u5C3A\u5BF8\u548C\u7F29\u5199",id:"\u89C6\u9891\u5C3A\u5BF8\u548C\u7F29\u5199",level:3},{value:"\u89C6\u9891\u901F\u7387\u548C\u7F29\u5199",id:"\u89C6\u9891\u901F\u7387\u548C\u7F29\u5199",level:3},{value:"ffserver",id:"ffserver",level:2},{value:"farm",id:"farm",level:2},{value:"FAQ",id:"faq",level:2},{value:"video:23799kB audio:1406kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown",id:"video23799kb-audio1406kb-subtitle0kb-other-streams0kb-global-headers0kb-muxing-overhead-unknown",level:3},{value:"Invalid frame dimensions 0x0",id:"invalid-frame-dimensions-0x0",level:3},{value:"tbr tbn tbc",id:"tbr-tbn-tbc",level:3},{value:"Reference",id:"reference",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ffmpeg",children:"FFMpeg"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/FFmpeg/FFmpeg",children:"FFmpeg/FFmpeg"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"FF -> Fast Forward"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5E93\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"libavcodec \u63D0\u4F9B\u5927\u91CF\u7684\u7F16\u7801\u5B9E\u73B0"}),"\n",(0,r.jsx)(n.li,{children:"libavformat \u5B9E\u73B0\u6D41\u4F53\u534F\u8BAE,\u5BB9\u5668\u683C\u5F0F\u548C\u57FA\u672C\u7684 IO \u8BBF\u95EE"}),"\n",(0,r.jsx)(n.li,{children:"libavutil \u63D0\u4F9B\u54C8\u5E0C, \u89E3\u538B\u7B49\u5176\u4ED6\u8F85\u52A9\u5DE5\u5177"}),"\n",(0,r.jsx)(n.li,{children:"libavfilter \u63D0\u4F9B\u4E00\u7CFB\u5217\u8FC7\u6EE4\u5668\u7528\u4E8E\u4FEE\u6539\u7F16\u7801\u7684\u89C6\u9891\u97F3\u9891"}),"\n",(0,r.jsx)(n.li,{children:"libavdevice \u63D0\u4F9B\u8BBE\u5907\u6355\u6349\u548C\u91CD\u64AD\u7684\u8BBF\u95EE\u62BD\u8C61"}),"\n",(0,r.jsx)(n.li,{children:"libswresample \u5B9E\u73B0\u97F3\u9891\u6DF7\u5408\u548C\u91CD\u65B0\u53D6\u6837"}),"\n",(0,r.jsx)(n.li,{children:"libswscale \u5B9E\u73B0\u989C\u8272\u8F6C\u6362\u548C\u7F29\u653E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5DE5\u5177\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ffmpeg \u547D\u4EE4\u884C\u5DE5\u5177\u7528\u4E8E\u64CD\u4F5C\u8F6C\u6362\u548C\u6D41\u5A92\u5185\u5BB9"}),"\n",(0,r.jsx)(n.li,{children:"ffplay \u591A\u5A92\u4F53\u64AD\u653E\u5668"}),"\n",(0,r.jsx)(n.li,{children:"ffprobe \u591A\u5A92\u4F53\u5185\u5BB9\u5206\u6790\u5DE5\u5177"}),"\n",(0,r.jsx)(n.li,{children:"ffserver \u591A\u5A92\u4F53\u6D41\u4F53\u670D\u52A1\u5668\u7528\u4E8E\u5B9E\u65F6\u5E7F\u64AD"}),"\n",(0,r.jsx)(n.li,{children:"\u5176\u4ED6\u7684\u4E00\u4E9B\u5C0F\u5DE5\u5177\u4F8B\u5982 aviocat, ismindex \u548C qt-faststart \u7B49"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://evermeet.cx/ffmpeg/",children:"static FFmpeg binaries for macOS 64-bit"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"flags",children:"Flags"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"-vf -> -filter:v"}),"\n",(0,r.jsx)(n.li,{children:"-af -> -filter:a"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"-filter[:stream_specifier] filtergraph (output,per-stream)"})}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Flag"}),(0,r.jsx)(n.th,{children:"For"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-hide_banner"})}),(0,r.jsx)(n.td,{children:"\u9690\u85CF Banner"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-i INPUT"})}),(0,r.jsx)(n.td,{children:"\u6307\u5B9A\u8F93\u5165\u6587\u4EF6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-o OUTPUT"})}),(0,r.jsx)(n.td,{children:"\u6307\u5B9A\u8F93\u51FA\u6587\u4EF6"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-f FORMAT"})}),(0,r.jsx)(n.td,{children:"\u6307\u5B9A\u8F93\u5165/\u8F93\u51FA\u6587\u4EF6\u683C\u5F0F"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-start_number START_NUMBER"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u8D77\u59CB\u5E27/\u7D22\u5F15\u53F7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-c CODEC"})}),(0,r.jsx)(n.td,{children:"\u6307\u5B9A\u7F16\u89E3\u7801\u5668"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-b:a BITRATE"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u97F3\u9891\u7801\u7387"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-b:v BITRATE"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u89C6\u9891\u7801\u7387"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-r FPS"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u5E27\u7387"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-s WIDTHxHEIGHT"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u5206\u8FA8\u7387"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-vf FILTER"})}),(0,r.jsx)(n.td,{children:"\u5E94\u7528\u89C6\u9891\u6EE4\u955C"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-af FILTER"})}),(0,r.jsx)(n.td,{children:"\u5E94\u7528\u97F3\u9891\u6EE4\u955C"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-ss START_TIME"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u5F00\u59CB\u65F6\u95F4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-to END_TIME"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u7ED3\u675F\u65F6\u95F4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-t DURATION"})}),(0,r.jsx)(n.td,{children:"\u8BBE\u7F6E\u6301\u7EED\u65F6\u95F4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-metadata KEY=VALUE"})}),(0,r.jsx)(n.td,{children:"\u6DFB\u52A0\u5143\u6570\u636E"})]})]})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffmpeg.html",children:"https://ffmpeg.org/ffmpeg.html"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u5E38\u7528\u53C2\u6570"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-r 17"})," \u4FEE\u6539\u5E27\u7387"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-an"})," \u79FB\u9664\u6240\u6709\u97F3\u9891, ",(0,r.jsx)(n.code,{children:"-vn"})," \u540C\u7406"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-acodec copy"})," \u76F4\u63A5\u590D\u5236\u5185\u5BB9,\u7528\u6237\u4FEE\u6539\u5BB9\u5668\u683C\u5F0F\u65F6, ",(0,r.jsx)(n.code,{children:"-acodec copy"})," \u540C\u7406"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-s 324x576"})," \u4FEE\u6539\u5927\u5C0F"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-vcodec h264 -profile:v high -level 4.2"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["iOS iPhone 5s \u540E\u517C\u5BB9\u7684\u6700\u9AD8 h264 \u538B\u7F29 ",(0,r.jsx)(n.a,{href:"https://trac.ffmpeg.org/wiki/Encode/H.264#iOS",children:"\u6765\u6E90"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u67E5\u770B h264 \u76F8\u5173\u4FE1\u606F ",(0,r.jsx)(n.code,{children:"ffmpeg -h encoder=libx264"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-movflags +faststart"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5C06\u90E8\u5206\u4FE1\u606F\u6DFB\u52A0\u5230\u5F00\u5934,\u4EE5\u4FDD\u8BC1\u5728 web \u4E2D\u672A\u4E0B\u8F7D\u5B8C\u6210\u65F6\u4E5F\u80FD\u64AD\u653E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-c:v libx265 -preset medium"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"h265 \u538B\u7F29\u66F4\u597D,\u4F46\u662F\u76EE\u524D\u8BBE\u5907\u652F\u6301\u6709\u9650"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-x265-params"})," \u67E5\u770B\u53EF\u884C\u53C2\u6570"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-threads"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0"})," \u4F18\u5316\u9009\u62E9"]}),"\n",(0,r.jsx)(n.li,{children:"\u7EBF\u7A0B\u6570"}),"\n",(0,r.jsx)(n.li,{children:"\u591A\u7EBF\u7A0B\u9700\u8981\u53D6\u51B3\u4E8E\u7F16\u7801\u5668\u662F\u5426\u652F\u6301"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u53C2\u8003"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffmpeg-filters.html",children:"ffmpeg-filters"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://stackoverflow.com/a/41384506/1870054",children:"VP9 encoding limited to 4 threads?"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://gist.github.com/Vestride/278e13915894821e1d6f",children:"Encoding Video"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.muvi.com/help/video-encoding-multiple-resolutions.html",children:"Video Encoding: Multiple Resolutions"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://wiki.debian.org/Debate/libav-provider/ffmpeg",children:"Debate libav-provider ffmpeg"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4E3A\u4EC0\u4E48\u5E94\u8BE5\u9009\u62E9 FFmpeg"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["scale - by libswscale - ",(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffmpeg-scaler.html#scaler_005foptions",children:"Scaler Options"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["size,s - ",(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffmpeg-utils.html#video-size-syntax",children:"Video size"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u5B89\u88C5\n# macOS\nbrew install ffmpeg\n\n# \u663E\u793A\u8FDB\u5EA6\npv input.avi | ffmpeg -i pipe:0 -v warning {arguments}\n\n# \u67E5\u770B\u652F\u6301\u7684\u50CF\u7D20\u683C\u5F0F\nffmpeg -pix_fmts\n# \u67E5\u770B\u7F16\u7801\u9009\u9879\nffmpeg -h encoder=libvpx\n\n# \u6240\u6709\u5E2E\u52A9\u5185\u5BB9\nffmpeg -h full\n\n# \u7F29\u653E\n# ========\n# https://trac.ffmpeg.org/wiki/Scaling\nffmpeg -i input.jpg -vf scale=iw*.5:ih*.5 input_half.png\n# \u4FDD\u6301\u6BD4\u4F8B\nffmpeg -i input.jpg -vf scale=w=320:h=240:force_original_aspect_ratio=decrease output_320.png\n# \u53EF\u4EE5\u4F7F\u7528 ffplay \u9884\u89C8\nffplay -i input.mp4 -vf scale=iw*.2:ih*.2\n\n# \u526A\u5207\n# ========\n# -ss \u5F00\u59CB\u65F6\u95F4 -t \u6301\u7EED\u65F6\u95F4 -to \u5230\u8FBE\u65F6\u95F4\nffmpeg -i input.wmv -ss 00:00:30.0 -c copy -t 00:00:10.0 output.wmv\nffmpeg -i input.wmv -ss 30 -c copy -t 10 output.wmv\n# -ss 30 -t 10 \u7B49\u540C\u4E8E -ss 30 -to 40\nffmpeg -i input.wmv -ss 30 -c copy -to 40 output.wmv\n\n# \u88C1\u526A\n# ========\n# https://ffmpeg.org/ffmpeg-filters.html#crop\nffmpeg -i in.mp4 -filter:v "crop=out_w:out_h:x:y" out.mp4\n# \u4F7F\u7528 ffplay \u9884\u89C8\nffplay -i input.mp4 -vf "crop=in_w:in_h-40"\n\n# \u5408\u5E76\u62C6\u5206\n# \u5C06\u97F3\u9891\u91CD\u65B0\u7F16\u7801\u4E3A aac\nffmpeg -i video.mp4 -i audio.wav -c:v copy -c:a aac -strict experimental output.mp4\n# \u4E0D\u5BF9\u5176\u8FDB\u884C\u7F16\u7801\nffmpeg -i video.mp4 -i audio.wav -c copy output.mkv\n# \u66FF\u6362\u97F3\u9891\u6D41\nffmpeg -i video.mp4 -i audio.wav -c:v copy -c:a aac -strict experimental -map 0:v:0 -map 1:a:0 output.mp4\n# \u5206\u79BB\nffmpeg -i input.mkv -vn -c:a copy marryme.ogg\n\n# \u5143\u6570\u636E\n# ========\n# \u79FB\u9664\n# -empty_hdlr_name 1 \u5C06 handler_name \u8BBE\u7F6E\u4E3A\u7A7A\u5B57\u7B26\u4E32\nffmpeg -i in.mov -map_metadata -1 -c:v copy -c:a copy out.mov\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7F16\u7801",children:"\u7F16\u7801"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# x264\n# ==========\n# https://trac.ffmpeg.org/wiki/Encode/H.264\n# how to generate dashif compatible mpd files using mp4box https://github.com/Dash-Industry-Forum/dash.js/issues/127\n# http://ffmpeg.org/ffmpeg-codecs.html#libx264_002c-libx264rgb\n# Note: -strict experimental (or -strict -2) was previously required for this encoder, but it is \u200Bno longer experimental and these options are unnecessary since 5 December 2015.\nffmpeg -h encoder=libx264\npv in.mp4 | ffmpeg -v warning -y -i pipe:0 -vcodec h264 -vf scale=hd480 -acodec aac 480.mp4\n\n# x265\n# ==========\n# https://trac.ffmpeg.org/wiki/Encode/H.265\n# http://x265.readthedocs.io/en/default/\n# preset: ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow, placebo\nffmpeg -i input -c:v libx265 -preset medium -crf 28 -c:a aac -b:a 128k output.mp4\n\n# HLS - HTTP Live Streaming\n# ==========\n# https://github.com/video-dev/hls.js/\n# https://www.vidbeo.com/blog/hls-vs-dash\n# https://ffmpeg.org/ffmpeg-formats.html#segment_002c-stream_005fsegment_002c-ssegment\n# \u5982\u679C ts \u4E0D\u652F\u6301\u7684\u683C\u5F0F\nffmpeg -i input.mp4 \\\n  -c:v mpeg2video -qscale:v 2 \\\n  -c:a mp2 -b:a 192k \\\n  output.ts\n\n# \u5982\u679C ts \u683C\u5F0F\u652F\u6301\nffmpeg -re -i input.mp4 \\\n  -codec copy -map 0 \\\n  -f segment -segment_list playlist.m3u8 \\\n  -segment_list_flags +live -segment_time 10 \\\n  out%03d.ts\n\n# HLS\n# http://ffmpeg.org/ffmpeg-all.html#hls-2\nffmpeg -i input.mp4 -profile:v baseline -level 3.0 -s 640x360 -start_number 0 -hls_time 10 -hls_list_size 0 -f hls index.m3u8\n\n# https://docs.peer5.com/guides/production-ready-hls-vod/\n# \u5355\u4E2A\u7801\u7387\n# \u6587\u4EF6\u7ED3\u6784\n# raw.mp4 480.m3u8 480/*.ts\n# mkdir 360 480 720 1080\nffmpeg -hide_banner -y -i raw.mp4 \\\n  -vf scale=w=842:h=480:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 1400k -maxrate 1498k -bufsize 2100k -b:a 128k -hls_base_url 480/ -hls_segment_filename 480/%03d.ts 480.m3u8\n\nffmpeg -hide_banner -y -i raw.mp4 \\\n  -vf scale=w=1280:h=720:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 2800k -maxrate 2996k -bufsize 4200k -b:a 128k -hls_base_url 720/ -hls_segment_filename 720/%03d.ts 720.m3u8\n\nffmpeg -hide_banner -y -i raw.mp4 \\\n  -vf scale=w=1920:h=1080:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 5000k -maxrate 5350k -bufsize 7500k -b:a 192k -hls_base_url 1080/ -hls_segment_filename 1080/%03d.ts 1080.m3u8\n\nffmpeg -hide_banner -y -i raw.mp4 \\\n  -vf scale=w=1920:h=1080:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -b:v 5000k -maxrate 5350k -bufsize 7500k -b:a 192k 1080.mp4\n\n# \u591A\u7801\u7387\nffmpeg -hide_banner -y -i beach.mkv \\\n  -vf scale=w=640:h=360:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 800k -maxrate 856k -bufsize 1200k -b:a 96k -hls_base_url 360/ -hls_segment_filename 360/%03d.ts 360.m3u8 \\\n  -vf scale=w=842:h=480:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 1400k -maxrate 1498k -bufsize 2100k -b:a 128k -hls_base_url 480/ -hls_segment_filename 480/%03d.ts 480.m3u8 \\\n  -vf scale=w=1280:h=720:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 2800k -maxrate 2996k -bufsize 4200k -b:a 128k -hls_base_url 720/ -hls_segment_filename 720/%03d.ts 720.m3u8 \\\n  -vf scale=w=1920:h=1080:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 5000k -maxrate 5350k -bufsize 7500k -b:a 192k -hls_base_url 1080/ -hls_segment_filename 1080/%03d.ts 1080.m3u8\n\n# \u9488\u5BF9\u4E0D\u540C\u5206\u8FA8\u7387\u505A\u4E0D\u540C\u7684\u7247\u6BB5\n# http://ffmpeg.org/ffmpeg-all.html#segment_002c-stream_005fsegment_002c-ssegment\nmkdir -p 1080 720 480\nffmpeg -re -i 1080.mp4 \\\n  -codec copy -map 0 \\\n  -f segment -segment_list 1080.m3u8 \\\n  -segment_list_flags +live -segment_time 10 \\\n  -segment_list_entry_prefix 1080/ \\\n  1080/%03d.ts\n\nffmpeg -re -i 720.mp4 \\\n  -codec copy -map 0 \\\n  -f segment -segment_list 720.m3u8 \\\n  -segment_list_flags +live -segment_time 10 \\\n  -segment_list_entry_prefix 720/ \\\n  720/%03d.ts\n\nffmpeg -re -i 480.mp4 \\\n  -codec copy -map 0 \\\n  -f segment -segment_list 480.m3u8 \\\n  -segment_list_flags +live -segment_time 10 \\\n  -segment_list_entry_prefix 480/ \\\n  480/%03d.ts\n\n# m3u8 \u6DFB\u52A0\u524D\u7F00\nsed -re 's$^[0-9]$1080/\\0$' -i 1080.m3u8\nsed -re 's$^[0-9]$720/\\0$' -i 720.m3u8\nsed -re 's$^[0-9]$480/\\0$' -i 480.m3u8\n\n# DASH\n# ==========\n# dash-avc264 command lines https://gist.github.com/ddennedy/16b7d0c15843829b4dc4\n# https://en.wikipedia.org/wiki/Dynamic_Adaptive_Streaming_over_HTTP\n# Video dash js multiple resolutions https://github.com/Dash-Industry-Forum/dash.js/issues/1647\npv in.mp4 | ffmpeg -v warning -y -i pipe:0 -vcodec libx264 -profile:v baseline -level 13 -b:v 2000k -vf scale=hd480 -acodec aac -ar 44100 -ac 1 480.mp4\n\nffmpeg -codec:a libvo_aacenc -ar 44100 -ac 1 -codec:v libx264 -profile:v baseline -level 13 -b:v 2000k output.mp4 -i test.mp4\n\nMP4Box -dash 10000 -dash-profile live -segment-name output-seg output.mp4\nMP4Box -dash 10000 -dash-profile live -segment-name 480/seg 480.mp4\nMP4Box -h dash\n# Streaming\n# ==========\n# http://trac.ffmpeg.org/wiki/StreamingGuide\n\n# Gif\n# ==========\nffmpeg -i in.mov -s 600x400 -pix_fmt rgb24 -r 10 -f gif - | gifsicle --optimize=3 --delay=3 > out.gif\n\n# keep scale\nffmpeg -i in.mov -pix_fmt rgb24 -r 18 -f gif - | gifsicle --optimize=3 --delay=3 > out.gif\n\n# Web Media\n# ========\npv in.mp4 | ffmpeg -v warning -y -i pipe:0 -vcodec h264 -vf scale=576:-1 -acodec aac output3.mp4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u89C6\u9891\u5F55\u5236",children:"\u89C6\u9891\u5F55\u5236"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u89C6\u9891\u6355\u6349\n#   https://trac.ffmpeg.org/wiki/Capture/Webcam\n#   https://trac.ffmpeg.org/wiki/Capture/Desktop\n# \u67E5\u770B\u53EF\u4F7F\u7528\u8BBE\u5907\u548C\u6355\u6349\n# Windows\n# vfwcap \u5DF2\u7ECF\u88AB\u66FF\u6362\u4E3A dshow\nffmpeg -y -f dshow -i list\nffmpeg -y -f dshow -r 25 -i 0 out.mp4\nffmpeg -f dshow -list_devices true -i dummy\nffmpeg -f dshow -list_optione true -i dummy\n\n# Linux\n# video4linux2 \u53EF\u7B80\u5199\u4E3A v4l2\n# \u53EF\u4F7F\u7528 x11grab \u6293\u53D6\u684C\u9762\nffmpeg -f v4l2 -list_formats all -i /dev/video0\nffmpeg -f v4l2 -framerate 25 -video_size 640x480 -i /dev/video0 output.mkv\n# \u4E5F\u53EF\u4EE5\u4F7F\u7528 v4l2 \u6765\u67E5\u770B\nv4l2-ctl --list-devices\n# \u67E5\u770B\u53EF\u63A7\u5236\u7684\u53C2\u6570, \u5BF9\u6BD4\u5EA6,\u7126\u70B9,\u7F29\u653E\u7B49\nv4l2-ctl -L\n# \u4FEE\u6539\u53C2\u6570\nv4l2-ctl -c <option>=<value>\n\n# OS X\n# \u4E3B\u8981\u4F7F\u7528 avfoundation \u6765\u64CD\u4F5C\nffmpeg -f avfoundation -list_devices true -i ""\nffmpeg -f avfoundation -i "" out.mpg\n# \u8F93\u5165\u8BBE\u5907\u4E5F\u53EF\u4EE5\u6307\u5B9A default,\u6216\u540D\u5B57\u4F8B\u5982 "Integrated" \u6216\u8005\u8BBE\u5907\u7D22\u5F15\u4F8B\u5982 0\nffmpeg -f avfoundation -i "default" out.mpg\nffmpeg -f avfoundation -i "Integrated" out.mpg\nffmpeg -f avfoundation -i "2" out.mpg\nffmpeg -f avfoundation -video_device_index 2 -i "default" out.mpg\n# ffmpeg -f avfoundation -i "<screen device index>:<audio device index>" out.mov\n# \u5728 OS X \u4E2D\u53EF\u67E5\u770B\u5C4F\u5E55\u5C3A\u5BF8 system_profiler SPDisplaysDataType |grep Resolution\n# \u4F7F\u7528\u7A7A\u767D\u7684\u97F3\u9891,\u4FEE\u6539\u50CF\u7D20\u683C\u5F0F\nffmpeg -f avfoundation -pixel_format bgr0 -s 640x480 -r 30 -i "default:none" out.avi\n# \u65E0\u635F\u6355\u6349\n#   -qp 0 \u4F7F\u7528 x264 \u65E0\u635F\u6A21\u5F0F\n#   -preset ultrafast \u4F7F\u7528\u5FEB\u901F\u6A21\u5F0F\nffmpeg -video_size 1920x1080 -framerate 30 -f avfoundation -video_device_index 1 -i "default" -c:v libx264 -qp 0 -preset ultrafast capture.mkv\n# \u4E0A\u8FF0\u5FEB\u901F\u65E0\u635F\u6355\u6349\u540E,\u53EF\u5BF9\u5176\u8FDB\u884C\u6162\u901F\u7684\u65E0\u635F\u538B\u7F29,\u51CF\u5C11\u89C6\u9891\u6587\u4EF6\u5C3A\u5BF8\nffmpeg -i capture.mkv -c:v libx264 -qp 0 -preset veryslow capture_smaller.mkv\n# \u540C\u65F6\u4E5F\u5F55\u5236\u9EA6\u514B\u98CE\u7684\u58F0\u97F3\nffmpeg -video_size 1280x720 -framerate 30 -f avfoundation -i "0:0" -c:v libx264 -qp 0 -preset ultrafast -c:a aac  capture.mkv\n'})}),"\n",(0,r.jsx)(n.h3,{id:"vp9-live",children:"VP9 Live"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"http://wiki.webmproject.org/adaptive-streaming/instructions-to-do-webm-live-streaming-via-dash",children:"http://wiki.webmproject.org/adaptive-streaming/instructions-to-do-webm-live-streaming-via-dash"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u521B\u5EFA\u76F4\u64AD\u5185\u5BB9\n\nVP9_LIVE_PARAMS="-speed 6 -tile-columns 4 -frame-parallel 1 -threads 8 -static-thresh 0 -max-intra-rate 300 -deadline realtime -lag-in-frames 0 -error-resilient 1"\n\n# Linux\nffmpeg \\\n  -f v4l2 -input_format mjpeg -r 30 -s 1280x720 -i /dev/video0 \\\n  -f alsa -ar 44100 -ac 2 -i hw:2 \\\n  -map 0:0 \\\n  -pix_fmt yuv420p \\\n  -c:v libvpx-vp9 \\\n  -s 1280x720 -keyint_min 60 -g 60 ${VP9_LIVE_PARAMS} \\\n  -b:v 3000k \\\n  -f webm_chunk \\\n  -header "./glass_360.hdr" \\\n  -chunk_start_index 1 \\\n  ./glass_360_%d.chk \\\n  -map 1:0 \\\n  -c:a libvorbis \\\n  -b:a 128k -ar 44100 \\\n  -f webm_chunk \\\n  -audio_chunk_duration 2000 \\\n  -header ./glass_171.hdr \\\n  -chunk_start_index 1 \\\n  ./glass_171_%d.chk\n\n# OS X\nffmpeg \\\n  -r 30 -s 1280x720 -ar 44100 -ac 2 -f avfoundation -i "2:0" -c:v mjpeg \\\n  -map 0:0 \\\n  -pix_fmt yuv420p \\\n  -c:v libvpx-vp9 \\\n  -s 1280x720 -keyint_min 60 -g 60 ${VP9_LIVE_PARAMS} \\\n  -b:v 3000k \\\n  -f webm_chunk \\\n  -header "./glass_360.hdr" \\\n  -chunk_start_index 1 \\\n  ./glass_360_%d.chk \\\n  -map 1:0 \\\n  -c:a libvorbis \\\n  -b:a 128k -ar 44100 \\\n  -f webm_chunk \\\n  -audio_chunk_duration 2000 \\\n  -header ./glass_171.hdr \\\n  -chunk_start_index 1 \\\n  ./glass_171_%d.chk\n\n# \u521B\u5EFA DASH\nffmpeg \\\n  -f webm_dash_manifest -live 1 \\\n  -i ./glass_360.hdr \\\n  -f webm_dash_manifest -live 1 \\\n  -i ./glass_171.hdr \\\n  -c copy \\\n  -map 0 -map 1 \\\n  -f webm_dash_manifest -live 1 \\\n  -adaptation_sets "id=0,streams=0 id=1,streams=1" \\\n  -chunk_start_index 1 \\\n  -chunk_duration_ms 2000 \\\n  -time_shift_buffer_depth 7200 \\\n  -minimum_update_period 7200 \\\n  ./glass_live_manifest.mpd\n'})}),"\n",(0,r.jsx)(n.h3,{id:"rtsp",children:"RTSP"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ffmpeg -i space.mp4 -vcodec libx264 -tune zerolatency -crf 18 http://localhost:1234/feed1.ff\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"ffserver.conf"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"HTTPPort 1234\nRTSPPort 1235\n\n<Feed feed1.ffm>\n        File /tmp/feed1.ffm\n        FileMaxSize 2M\n        ACL allow 127.0.0.1\n</Feed>\n\n<Stream test1.sdp>\n    Feed feed1.ffm\n    Format rtp\n    Noaudio\n    VideoCodec libx264\n    AVOptionVideo flags +global_header\n    AVOptionVideo me_range 16\n    AVOptionVideo qdiff 4\n    AVOptionVideo qmin 10\n    AVOptionVideo qmax 51\n    ACL allow 192.168.0.0 192.168.255.255\n</Stream>\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mpv rtsp://192.168.0.xxx:1235/test1.sdp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ff-\u901A\u7528\u9009\u9879",children:"ff* \u901A\u7528\u9009\u9879"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"-L Show license.\n-h, -?, -help, --help [long|full] [decoder|encoder|demuxer|muxer|filter]=name\n  long \u663E\u793A\u9AD8\u7EA7\u9009\u9879\n  full \u663E\u793A\u5B8C\u6574\u7684\u9009\u9879\u5217\u8868\u5305\u62EC\u516C\u5171\u7684\u548C\u79C1\u6709\u7684\n-version Show version.\n\n-formats,-devices,-codecs,-protocols,-filters,-pix_fmts,-sample_fmts,-layouts,-colors,-decoders,-encoders,-bsfs\n  \u663E\u793A\u6240\u6709\u652F\u6301\u7684\u683C\u5F0F,\u8BBE\u5907,\u7F16\u7801,\u534F\u8BAE,\u8FC7\u6EE4\u5668,\u9999\u8272\u683C\u5F0F,\u989C\u8272\u540D\u5B57\u7B49...\n  bsfs Show available bitstream filters.\n  codes \u66F4\u660E\u786E\u5730\u8BF4\u662F media bitstream format\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u89C6\u9891\u5C3A\u5BF8\u548C\u7F29\u5199",children:"\u89C6\u9891\u5C3A\u5BF8\u548C\u7F29\u5199"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u7F29\u5199"}),(0,r.jsx)(n.th,{children:"\u5C3A\u5BF8"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ntsc"}),(0,r.jsx)(n.td,{children:"720x480"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"pal"}),(0,r.jsx)(n.td,{children:"720x576"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qntsc"}),(0,r.jsx)(n.td,{children:"352x240"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qpal"}),(0,r.jsx)(n.td,{children:"352x288"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sntsc"}),(0,r.jsx)(n.td,{children:"640x480"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"spal"}),(0,r.jsx)(n.td,{children:"768x576"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"film"}),(0,r.jsx)(n.td,{children:"352x240"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ntsc-film"}),(0,r.jsx)(n.td,{children:"352x240"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sqcif"}),(0,r.jsx)(n.td,{children:"128x96"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qcif"}),(0,r.jsx)(n.td,{children:"176x144"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"cif"}),(0,r.jsx)(n.td,{children:"352x288"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4cif"}),(0,r.jsx)(n.td,{children:"704x576"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"16cif"}),(0,r.jsx)(n.td,{children:"1408x1152"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qqvga"}),(0,r.jsx)(n.td,{children:"160x120"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qvga"}),(0,r.jsx)(n.td,{children:"320x240"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"vga"}),(0,r.jsx)(n.td,{children:"640x480"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"svga"}),(0,r.jsx)(n.td,{children:"800x600"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"xga"}),(0,r.jsx)(n.td,{children:"1024x768"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"uxga"}),(0,r.jsx)(n.td,{children:"1600x1200"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qxga"}),(0,r.jsx)(n.td,{children:"2048x1536"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sxga"}),(0,r.jsx)(n.td,{children:"1280x1024"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qsxga"}),(0,r.jsx)(n.td,{children:"2560x2048"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hsxga"}),(0,r.jsx)(n.td,{children:"5120x4096"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wvga"}),(0,r.jsx)(n.td,{children:"852x480"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wxga"}),(0,r.jsx)(n.td,{children:"1366x768"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wsxga"}),(0,r.jsx)(n.td,{children:"1600x1024"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wuxga"}),(0,r.jsx)(n.td,{children:"1920x1200"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"woxga"}),(0,r.jsx)(n.td,{children:"2560x1600"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wqsxga"}),(0,r.jsx)(n.td,{children:"3200x2048"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wquxga"}),(0,r.jsx)(n.td,{children:"3840x2400"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"whsxga"}),(0,r.jsx)(n.td,{children:"6400x4096"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"whuxga"}),(0,r.jsx)(n.td,{children:"7680x4800"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"cga"}),(0,r.jsx)(n.td,{children:"320x200"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ega"}),(0,r.jsx)(n.td,{children:"640x350"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hd480"}),(0,r.jsx)(n.td,{children:"852x480"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hd720"}),(0,r.jsx)(n.td,{children:"1280x720"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hd1080"}),(0,r.jsx)(n.td,{children:"1920x1080"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2k"}),(0,r.jsx)(n.td,{children:"2048x1080"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2kflat"}),(0,r.jsx)(n.td,{children:"1998x1080"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2kscope"}),(0,r.jsx)(n.td,{children:"2048x858"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4k"}),(0,r.jsx)(n.td,{children:"4096x2160"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4kflat"}),(0,r.jsx)(n.td,{children:"3996x2160"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4kscope"}),(0,r.jsx)(n.td,{children:"4096x1716"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"nhd"}),(0,r.jsx)(n.td,{children:"640x360"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hqvga"}),(0,r.jsx)(n.td,{children:"240x160"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wqvga"}),(0,r.jsx)(n.td,{children:"400x240"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"fwqvga"}),(0,r.jsx)(n.td,{children:"432x240"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hvga"}),(0,r.jsx)(n.td,{children:"480x320"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qhd"}),(0,r.jsx)(n.td,{children:"960x540"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2kdci"}),(0,r.jsx)(n.td,{children:"2048x1080"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4kdci"}),(0,r.jsx)(n.td,{children:"4096x2160"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"uhd2160"}),(0,r.jsx)(n.td,{children:"3840x2160"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"uhd4320"}),(0,r.jsx)(n.td,{children:"7680x4320"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u89C6\u9891\u901F\u7387\u548C\u7F29\u5199",children:"\u89C6\u9891\u901F\u7387\u548C\u7F29\u5199"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u7F29\u5199"}),(0,r.jsx)(n.th,{children:"\u901F\u7387"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ntsc"}),(0,r.jsx)(n.td,{children:"30000/1001"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"pal"}),(0,r.jsx)(n.td,{children:"25/1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qntsc"}),(0,r.jsx)(n.td,{children:"30000/1001"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"qpal"}),(0,r.jsx)(n.td,{children:"25/1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sntsc"}),(0,r.jsx)(n.td,{children:"30000/1001"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"spal"}),(0,r.jsx)(n.td,{children:"25/1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"film"}),(0,r.jsx)(n.td,{children:"24/1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ntsc-film"}),(0,r.jsx)(n.td,{children:"24000/1001"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"ffserver",children:"ffserver"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffserver.html",children:"ffserver"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ffmpeg.org/ffserver-all.html",children:"ffserver-all"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u542F\u52A8\u6D41\u5A92\u670D\u52A1\u5668\nffserver -f ffserver.conf\n"})}),"\n",(0,r.jsx)(n.h2,{id:"farm",children:"farm"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://www.ffmpeg.org/ffmpeg-devices.html",children:"https://www.ffmpeg.org/ffmpeg-devices.html"}),"\n",(0,r.jsx)(n.a,{href:"http://www.squidnetsoftware.com/",children:"http://www.squidnetsoftware.com/"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://trac.ffmpeg.org/wiki/Encode/PremierePro",children:"https://trac.ffmpeg.org/wiki/Encode/PremierePro"}),"\n",(0,r.jsx)(n.a,{href:"https://video.stackexchange.com/a/15799",children:"https://video.stackexchange.com/a/15799"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Server\nffmpeg -i tcp://[your server IP]:[The same port you entered in step 2]?listen -c:v libx264 -preset medium -crf 23 -pix_fmt yuv420p -c:a libfdk_aac -vbr 4 output2.mp4\n# Client\nffmpeg -i frameserver.avs -f mpegts tcp://[IP address of your server]:[open port on your server]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(n.h3,{id:"video23799kb-audio1406kb-subtitle0kb-other-streams0kb-global-headers0kb-muxing-overhead-unknown",children:"video:23799kB audio:1406kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown"}),"\n",(0,r.jsx)(n.h3,{id:"invalid-frame-dimensions-0x0",children:"Invalid frame dimensions 0x0"}),"\n",(0,r.jsx)(n.p,{children:"\u51FA\u73B0\u8FD9\u6837\u7684\u9519\u8BEF\u65F6,\u4E0D\u5FC5\u5173\u5FC3,\u4E00\u4F1A\u513F\u8FC7\u540E\u5C31\u80FD\u6B63\u5E38\u64AD\u653E\u4E86."}),"\n",(0,r.jsx)(n.h3,{id:"tbr-tbn-tbc",children:"tbr tbn tbc"}),"\n",(0,r.jsx)(n.p,{children:"FFMpeg \u4F1A\u4F7F\u7528\u4E09\u79CD\u4E0D\u540C\u7684\u65F6\u95F4\u6233\u6765\u505A\u4E0D\u540C\u7684\u5DE5\u4F5C."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["tbr\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"tbr is guessed from the video stream and is the value users want to see when they look for the video frame rate"}),"\n",(0,r.jsx)(n.li,{children:"\u4EE3\u8868\u5E27\u7387,\u548C demuxer \u76F8\u5173"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["tbn\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"the time base in AVStream that has come from the container"}),"\n",(0,r.jsx)(n.li,{children:"\u4EE3\u8868\u6587\u4EF6\u5C42(st)\u7684\u65F6\u95F4\u7CBE\u5EA6\uFF0C\u5373 1S=1200k\uFF0C\u548C duration \u76F8\u5173\uFF1B"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["tbc\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"the time base in AVCodecContext for the codec used for a particular stream"}),"\n",(0,r.jsx)(n.li,{children:"tbc \u4EE3\u8868\u89C6\u9891\u5C42(st->codec)\u7684\u65F6\u95F4\u7CBE\u5EA6\uFF0C\u5373 1S=50\uFF0C\u548C strem->duration \u548C\u65F6\u95F4\u6233\u76F8\u5173\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4F8B\u5982: ",(0,r.jsx)(n.code,{children:"25 tbr 90k tbn 50 tbc"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u5F53\u8FD9\u51E0\u4E2A\u503C\u65E0\u6CD5\u68C0\u6D4B\u5230\u65F6,\u5176\u503C\u53EF\u80FD\u4E3A ",(0,r.jsx)(n.code,{children:"1000k tbr, 1000k tbn, 1000k tbc"})]}),"\n",(0,r.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://trac.ffmpeg.org/wiki/EncodingForStreamingSites",children:"https://trac.ffmpeg.org/wiki/EncodingForStreamingSites"}),"\n",(0,r.jsx)(n.a,{href:"https://trac.ffmpeg.org/wiki/Encode/AAC",children:"https://trac.ffmpeg.org/wiki/Encode/AAC"})]})]})}function x(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},17776:function(e,n,s){s.d(n,{R:()=>d,x:()=>l});var i=s(7378);let r={},t=i.createContext(r);function d(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);