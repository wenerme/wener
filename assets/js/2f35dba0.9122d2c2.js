"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["55583"],{87702:function(n,e,t){t.r(e),t.d(e,{frontMatter:()=>i,toc:()=>d,default:()=>p,metadata:()=>o,assets:()=>l,contentTitle:()=>c});var o=JSON.parse('{"id":"service/network/proxy/dante","title":"Dante","description":"- dante","source":"@site/../notes/service/network/proxy/dante.md","sourceDirName":"service/network/proxy","slug":"/service/network/proxy/dante","permalink":"/notes/service/network/proxy/dante","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/proxy/dante.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1680070123000,"frontMatter":{"title":"Dante"},"sidebar":"docs","previous":{"title":"Clash FAQ","permalink":"/notes/service/network/proxy/clash/faq"},"next":{"title":"FRP","permalink":"/notes/service/network/proxy/frp/"}}'),r=t(86106),s=t(17776);let i={title:"Dante"},c="Dante",l={},d=[{value:"\u57FA\u7840\u914D\u7F6E",id:"\u57FA\u7840\u914D\u7F6E",level:2}];function a(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"dante",children:"Dante"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"http://www.inet.no/dante/",children:"dante"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"consists of a SOCKS server and a SOCKS client"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.inet.no/dante/doc/1.4.x/index.html",children:"\u6587\u6863"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"sockd - \u670D\u52A1\u7AEF"}),"\n",(0,r.jsx)(e.li,{children:"socks - \u5BA2\u6237\u7AEF"}),"\n",(0,r.jsx)(e.li,{children:"socksify - \u57FA\u4E8E LD_PRELOAD \u7684\u4EE3\u7406"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://lvii.gitbooks.io/outman/content/dante.html",children:"https://lvii.gitbooks.io/outman/content/dante.html"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.inet.no/dante/doc/1.4.x/sockd.conf.5.html",children:"sockd.conf.5"})}),"\n"]}),"\n",(0,r.jsxs)(e.admonition,{type:"tip",children:[(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u914D\u7F6E\u4E86 ipsec\uFF0C\u5219 external \u9700\u8981\u914D\u7F6E ipsec \u7684 left \u5730\u5740 - \u5426\u5219\u4E0D\u4F1A\u7ECF\u8FC7 ipsec"}),"\n"]}),(0,r.jsx)(e.p,{children:"::"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# macOS \u5B89\u88C5\nbrew install dante\n\n# \u670D\u52A1\u7AEF\u5B89\u88C5\napk add dante{,-server}\n\n# \u6821\u9A8C\u914D\u7F6E\u6587\u4EF6\nsockd -V -f /etc/sockd.conf\n\n# Docker \u542F\u52A8\n# \u901A\u8FC7 ip \u9650\u5236\u8BBF\u95EE\ndocker run -d --restart always -v /etc/localtime:/etc/localtime:ro \\\n  -p 127.0.0.1:8888:8888 \\\n  --name dante wener/dante\n"})}),(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"sockd.conf"})}),(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u89C4\u5219\u6761\u4EF6 clientcompatibility, clientmethod, command, from, group, socksmethod, protocol, proxyprotocol, to, user"}),"\n",(0,r.jsx)(e.li,{children:"\u89C4\u5219\u52A8\u4F5C bandwidth, libwrap, log, session, redirect, timeout.connect, timeout.negotiate, timeout.io, timeout.tcp_fin_wait, udp.portrange"}),"\n"]}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-conf",children:"# \u65E5\u5FD7\u8F93\u51FA\nlogoutput: stdout\n# \u76D1\u542C\u5730\u5740\n# \u53EF\u4EE5\u662F\u5730\u5740\u6216 interface\ninternal: 0.0.0.0 port = 8888\n# \u51FA\u53E3\u7F51\u5361\u6216\u5730\u5740 - macOS \u4F7F\u7528 en0\nexternal: eth0\n# \u5BA2\u6237\u7AEF\u6388\u6743\u65B9\u5F0F - \u652F\u6301 pam.address pam.any none rfc931\nclientmethod: none\n# \u670D\u52A1\u7AEF\u9009\u62E9\u7684\u6388\u6743\u65B9\u5F0F\nsocksmethod: none\nuser.privileged: root\nuser.unprivileged: nobody\n# \u5BA2\u6237\u7AEF\u89C4\u5219 - \u57FA\u4E8E\u5BA2\u6237\u7AEF\u4FE1\u606F\u8FDB\u884C\u7684\u89C4\u5219\u6821\u9A8C\n# --------\n# \u63A5\u6536\u8BBF\u95EE\nclient pass {\n  from: 0.0.0.0/0 to: 0.0.0.0/0\n  log: error\n}\n# \u7981\u6B62\u8BBF\u95EE 127/8\nclient block {\n  from: 0.0.0.0/0 to: 127.0.0.0/8\n  log: error\n}\n# socks \u89C4\u5219 - \u57FA\u4E8E socks \u534F\u8BAE\u5C42\u4FE1\u606F\u8FDB\u884C\u7684\u89C4\u5219\u6821\u9A8C\n# --------\nsocks pass {\n  from: 0.0.0.0/0 to: 0.0.0.0/0\n  # \u5E94\u7528\u89C4\u5219\u7684\u6307\u4EE4 bind, bindreply, connect, udpassociate, udpreply\n  command: bind connect udpassociate\n}\nsocks pass {\n  from: 0.0.0.0/0 to: 0.0.0.0/0\n  command: bindreply udpreply\n  log: error\n}\nsocks block {\n  from: 0.0.0.0/0 to: 127.0.0.0/8\n  command: bind connect udpassociate\n  log: connect error\n}\n"})}),(0,r.jsx)(e.h2,{id:"\u57FA\u7840\u914D\u7F6E",children:"\u57FA\u7840\u914D\u7F6E"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-pre",metastring:'title="sockd.conf"',children:"logoutput: stderr\ninternal: 0.0.0.0 port = 8888\n# External address or interface\nexternal: eth0\nclientmethod: none\nsocksmethod: none\nuser.privileged: root\nuser.unprivileged: nobody\nclient pass {\n        from: 0.0.0.0/0 to: 0.0.0.0/0\n        log: error\n}\nclient block {\n        from: 0.0.0.0/0 to: 127.0.0.0/8\n        log: error\n}\nsocks pass {\n        from: 0.0.0.0/0 to: 0.0.0.0/0\n        command: bind connect udpassociate\n}\nsocks pass {\n        from: 0.0.0.0/0 to: 0.0.0.0/0\n        command: bindreply udpreply\n        log: error\n}\nsocks block {\n        from: 0.0.0.0/0 to: 127.0.0.0/8\n        command: bind connect udpassociate\n        log: connect error\n}\n"})})]})]})}function p(n={}){let{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},17776:function(n,e,t){t.d(e,{R:()=>i,x:()=>c});var o=t(7378);let r={},s=o.createContext(r);function i(n){let e=o.useContext(s);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);