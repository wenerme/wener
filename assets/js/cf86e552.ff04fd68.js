"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["238426"],{726582:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>c,toc:()=>d,default:()=>x,metadata:()=>r,assets:()=>o,contentTitle:()=>t});var r=JSON.parse('{"id":"service/observability/opentelemetry/opentelemetry-collector","title":"OpenTelemetry Collector","description":"- open-telemetry/opentelemetry-collector","source":"@site/../notes/service/observability/opentelemetry/opentelemetry-collector.md","sourceDirName":"service/observability/opentelemetry","slug":"/service/observability/opentelemetry/collector","permalink":"/notes/service/observability/opentelemetry/collector","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/observability/opentelemetry/opentelemetry-collector.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1760320024000,"frontMatter":{"title":"OpenTelemetry Collector"},"sidebar":"docs","previous":{"title":"OpenTelemetry","permalink":"/notes/service/observability/opentelemetry/"},"next":{"title":"\u94FE\u8DEF\u8DDF\u8E2A","permalink":"/notes/service/observability/tracing/"}}'),s=l(486106),i=l(917776);let c={title:"OpenTelemetry Collector"},t="OpenTelemetry Collector",o={},d=[{value:"\u7EC4\u4EF6\u7C7B\u578B",id:"\u7EC4\u4EF6\u7C7B\u578B",level:2},{value:"Receivers",id:"receivers",level:3},{value:"Processors",id:"processors",level:3},{value:"Exporters",id:"exporters",level:3},{value:"Extensions",id:"extensions",level:3}];function h(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"opentelemetry-collector",children:"OpenTelemetry Collector"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/open-telemetry/opentelemetry-collector",children:"open-telemetry/opentelemetry-collector"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Apache-2.0, Go"}),"\n",(0,s.jsx)(n.li,{children:"by CNCF"}),"\n",(0,s.jsx)(n.li,{children:"vendor-agnostic \u7684\u9065\u6D4B\u6570\u636E\u63A5\u6536\u3001\u5904\u7406\u548C\u5BFC\u51FA"}),"\n",(0,s.jsx)(n.li,{children:"\u652F\u6301 traces, metrics, logs"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://opentelemetry.io",children:"opentelemetry.io"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/open-telemetry/opentelemetry-collector-releases",children:"opentelemetry-collector-releases"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"otelcol-contrib"})," - \u6700\u5E38\u7528\u7684\u53D1\u884C\u7248"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Vendor-agnostic"})," - \u4E0D\u7ED1\u5B9A\u7279\u5B9A\u5382\u5546"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7EDF\u4E00\u683C\u5F0F"})," - OTLP (OpenTelemetry Protocol)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u53EF\u6269\u5C55"})," - \u63D2\u4EF6\u5316\u67B6\u6784"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9AD8\u6027\u80FD"})," - Go \u5B9E\u73B0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CNCF \u6807\u51C6"})," - \u4E91\u539F\u751F\u6807\u51C6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Core Collector"})," - \u6838\u5FC3\u7EC4\u4EF6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Contrib Collector"})," - \u5305\u542B\u793E\u533A\u8D21\u732E\u7684 receivers/processors/exporters"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          OpenTelemetry Collector                \u2502\n\u2502                                                 \u2502\n\u2502  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502 Receivers\u2502\u2500\u2500>\u2502Processors\u2502\u2500\u2500>\u2502 Exporters\u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502       ^              \u2502               \u2502          \u2502\n\u2502       \u2502              \u2502               v          \u2502\n\u2502  \u250C\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2510   \u250C\u2500\u2500\u2500-\u2534\u2500\u2500\u2500\u2510    \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502Extensions\u2502   \u2502Pipeline\u2502    \u2502  Backend \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# https://opentelemetry.io/docs/collector/installation/\n\nOTEL_VERSION="0.137.0"\n\n# Linux AMD64\ncurl -LO https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v${OTEL_VERSION}/otelcol-contrib_${OTEL_VERSION}_linux_amd64.tar.gz\ntar -xzf otelcol-contrib_${OTEL_VERSION}_linux_amd64.tar.gz\nsudo mv otelcol-contrib /usr/local/bin/\n\n# macOS ARM64\ncurl -LO https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v${OTEL_VERSION}/otelcol-contrib_${OTEL_VERSION}_darwin_arm64.tar.gz\ntar -xzf otelcol-contrib_${OTEL_VERSION}_darwin_arm64.tar.gz\nmv otelcol-contrib ~/bin/\n\n# Docker\n# otel/opentelemetry-collector-contrib:0.137.0\n# otel/opentelemetry-collector:1.43.0\n\notelcol-contrib --config otel.config.yaml validate\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["OpenObserve Agent \u9ED8\u8BA4\u63A8\u8350 OpenTelemetry Collector\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/openobserve/agents/",children:"https://github.com/openobserve/agents/"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://raw.githubusercontent.com/openobserve/agents/main/linux/install.sh",children:"https://raw.githubusercontent.com/openobserve/agents/main/linux/install.sh"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7EC4\u4EF6\u7C7B\u578B",children:"\u7EC4\u4EF6\u7C7B\u578B"}),"\n",(0,s.jsx)(n.h3,{id:"receivers",children:"Receivers"}),"\n",(0,s.jsx)(n.p,{children:"\u63A5\u6536\u9065\u6D4B\u6570\u636E\u7684\u7EC4\u4EF6"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Protocols"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"otlp"})," - OpenTelemetry Protocol (gRPC/HTTP)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"jaeger"})," - Jaeger traces"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"zipkin"})," - Zipkin traces"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prometheus"})," - Prometheus metrics"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"System"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hostmetrics"})," - \u4E3B\u673A\u6307\u6807 (CPU, \u5185\u5B58, \u78C1\u76D8, \u7F51\u7EDC)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"filelog"})," - \u6587\u4EF6\u65E5\u5FD7"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"journald"})," - systemd journal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"syslog"})," - Syslog \u534F\u8BAE"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Application"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"kafka"})," - Kafka \u6D88\u606F"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fluentforward"})," - Fluentd/Fluent Bit"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"statsd"})," - StatsD metrics"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"processors",children:"Processors"}),"\n",(0,s.jsx)(n.p,{children:"\u5904\u7406\u548C\u8F6C\u6362\u9065\u6D4B\u6570\u636E"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Core Processors"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"batch"})," - \u6279\u91CF\u5904\u7406\uFF0C\u51CF\u5C11\u8BF7\u6C42\u6570"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"memory_limiter"})," - \u5185\u5B58\u9650\u5236\u4FDD\u62A4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"resourcedetection"})," - \u81EA\u52A8\u68C0\u6D4B\u8D44\u6E90\u5C5E\u6027"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"attributes"})," - \u6DFB\u52A0/\u5220\u9664/\u66F4\u65B0\u5C5E\u6027"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"filter"})," - \u8FC7\u6EE4\u6570\u636E"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"transform"})," - \u6570\u636E\u8F6C\u6362"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Advanced"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tail_sampling"})," - \u5C3E\u90E8\u91C7\u6837"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"span"})," - Span \u5904\u7406"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"metricstransform"})," - Metrics \u8F6C\u6362"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"resource"})," - Resource \u5904\u7406"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"exporters",children:"Exporters"}),"\n",(0,s.jsx)(n.p,{children:"\u53D1\u9001\u9065\u6D4B\u6570\u636E\u5230\u540E\u7AEF\u7CFB\u7EDF"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"OpenTelemetry"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"otlp"})," - OTLP gRPC"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"otlphttp"})," - OTLP HTTP"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tracing"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"jaeger"})," - Jaeger"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"zipkin"})," - Zipkin"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"datadog"})," - Datadog APM"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Metrics"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prometheus"})," - Prometheus"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prometheusremotewrite"})," - Prometheus Remote Write"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"influxdb"})," - InfluxDB"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Logging"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"loki"})," - Grafana Loki"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"elasticsearch"})," - Elasticsearch"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"splunk_hec"})," - Splunk HEC"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Storage"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"kafka"})," - Kafka"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"file"})," - \u6587\u4EF6\u7CFB\u7EDF"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cloud"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"awsxray"})," - AWS X-Ray"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"awsemf"})," - AWS CloudWatch EMF"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"googlecloud"})," - Google Cloud"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"azuremonitor"})," - Azure Monitor"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"extensions",children:"Extensions"}),"\n",(0,s.jsx)(n.p,{children:"\u63D0\u4F9B\u989D\u5916\u529F\u80FD\u7684\u7EC4\u4EF6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"health_check"})," - \u5065\u5EB7\u68C0\u67E5 ",(0,s.jsx)(n.code,{children:"/health"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pprof"})," - Go profiling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"zpages"})," - \u8C03\u8BD5\u9875\u9762"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"basicauth"})," - \u57FA\u7840\u8BA4\u8BC1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"bearertokenauth"})," - Bearer Token \u8BA4\u8BC1"]}),"\n"]})]})}function x(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},917776:function(e,n,l){l.d(n,{R:()=>c,x:()=>t});var r=l(7378);let s={},i=r.createContext(s);function c(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);