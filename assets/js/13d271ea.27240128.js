"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["89788"],{87074:function(n,e,r){r.r(e),r.d(e,{frontMatter:()=>l,toc:()=>u,default:()=>d,metadata:()=>i,assets:()=>c,contentTitle:()=>s});var i=JSON.parse('{"id":"os/network/unifi-controller","title":"unifi-controller","description":"- Java, mongo","source":"@site/../notes/os/network/unifi-controller.md","sourceDirName":"os/network","slug":"/os/network/unifi-controller","permalink":"/notes/os/network/unifi-controller","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/network/unifi-controller.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1688206885000,"frontMatter":{"title":"unifi-controller"},"sidebar":"docs","previous":{"title":"Tomato","permalink":"/notes/os/network/tomato"},"next":{"title":"VyOS","permalink":"/notes/os/network/vyos"}}'),o=r(86106),t=r(17776);let l={title:"unifi-controller"},s="unifi-controller",c={},u=[{value:"Docker",id:"docker",level:2},{value:"LinuxServer unifi-controller",id:"linuxserver-unifi-controller",level:2},{value:"reset",id:"reset",level:2}];function a(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"unifi-controller",children:"unifi-controller"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Java, mongo"}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://help.ubnt.com/hc/en-us/articles/218506997-UniFi-Ports-Used",children:"UniFi Network - Required Ports Reference"})}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# ssh ubnt ubnt\nmca-cli\nset-inform http://xxx:8080/inform\n# \u53D1\u73B0\nsudo nmap -sU -p 10001 --script ubiquiti-discovery.nse 192.169.1.0/24\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"PORT      STATE SERVICE\n10001/udp open  ubiquiti-discovery\n| ubiquiti-discovery:\n|   protocol: v1\n|   uptime_seconds: 8175390\n|   uptime: 94 days 14:56:30\n|   hostname: ubnt\n|   product: ER-X\n|   firmware: EdgeRouter.ER-e50.v2.0.8-hotfix.1.5278088.200305.1641\n|   version: v2.0.8\n|   interface_to_ip:\n|     18:00:00:00:00:00:\n|       192.168.1.2\n|     18:00:00:00:00:00:\n|       192.168.66.1\n|   mac_addresses:\n|     18:00:00:00:00:00\n|_    18:00:00:00:00:00\nMAC Address: 18:00:00:00:00:00 (Ubiquiti Networks)\nService Info: OS: Linux\n"})}),"\n",(0,o.jsx)(e.h2,{id:"docker",children:"Docker"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"docker run -d --init \\\n  --restart=unless-stopped \\\n  -p 8080:8080 -p 8443:8443 -p 3478:3478/udp \\\n  -e TZ=Asia/Shanghai \\\n  -v $PWD/unifi:/unifi \\\n  --user unifi \\\n  --name unifi \\\n  jacobalberty/unifi\n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/jacobalberty/unifi-docker",children:"jacobalberty/unifi-docker"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/jacobalberty/unifi-docker#environment-variables",children:"https://github.com/jacobalberty/unifi-docker#environment-variables"})}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"linuxserver-unifi-controller",children:"LinuxServer unifi-controller"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/linuxserver/docker-unifi-controller",children:"linuxserver/docker-unifi-controller"})}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"| port      |\n| --------- | -------------------------------------------- |\n| 1900/udp  | controller discoverable on L2 network option |\n| 3478/udp  | Unifi STUN                                   |\n| 5514/udp  | Remote syslog port                           |\n| 6789      | mobile throughput test                       |\n| 8080      | device communication                         |\n| 8443      | web admin+API                                |\n| 8843      | Unifi guest portal HTTPS redirect port       |\n| 8880      | Unifi guest portal HTTP redirect port        |\n| 10001/udp | AP discovery                                 |"}),"\n",(0,o.jsx)(e.p,{children:"| env         |\n| ----------- | ------- |\n| PUID        | UserID  |\n| PGID        | GroupID |\n| MEM_LIMIT   | Java    |\n| MEM_STARTUP | Java    |"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"docker run -it --rm \\\n  -e PUID=1000 -e PGID=1000 \\\n  -e MEM_LIMIT=1024M \\\n  -p 3478:3478/udp \\\n  -p 10001:10001/udp \\\n  -p 8080:8080 \\\n  -p 8081:8081 \\\n  -p 8443:8443 \\\n  -p 8843:8843 \\\n  -p 8880:8880 \\\n  -p 6789:6789 \\\n  -v $PWD/data/unifi:/config \\\n  --name=unifi-controller linuxserver/unifi-controller\n\n# \u6761\u4EF6\u5141\u8BB8 \u53EF\u4EE5 host \u7F51\u7EDC\ndocker run -it --rm \\\n  -e PUID=1000 -e PGID=1000 \\\n  -e MEM_LIMIT=1024M \\\n  --network host \\\n  -v $PWD/data/unifi:/config \\\n  --name=unifi-controller registry.cn-hongkong.aliyuncs.com/cmi/linuxserver_unifi-controller:7.1.66\n--name=unifi-controller linuxserver/unifi-controller\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"version: '2.1'\nservices:\n  unifi-controller:\n    #image: lscr.io/linuxserver/unifi-controller:latest\n    image: linuxserver/unifi-controller:7.1.66\n    container_name: unifi-controller\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - MEM_LIMIT=1024 #optional\n      - MEM_STARTUP=1024 #optional\n    volumes:\n      - <path to data>:/config\n    ports:\n      - 8443:8443\n      - 3478:3478/udp\n      - 10001:10001/udp\n      - 8080:8080\n      - 1900:1900/udp #optional\n      - 8843:8843 #optional\n      - 8880:8880 #optional\n      - 6789:6789 #optional\n      - 5514:5514/udp #optional\n    restart: unless-stopped\n"})}),"\n",(0,o.jsx)(e.h1,{id:"version",children:"Version"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://community.ui.com/releases/UniFi-Network-Application-7-1-66/cf1208d2-3898-418c-b841-699e7b773fd4",children:"7.1.66"})}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"reset",children:"reset"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"syswrapper.sh restore-default\n"})}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"push reset 10s"}),"\n"]})]})}function d(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(a,{...n})}):a(n)}},17776:function(n,e,r){r.d(e,{R:()=>l,x:()=>s});var i=r(7378);let o={},t=i.createContext(o);function l(n){let e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);