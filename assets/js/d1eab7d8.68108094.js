"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["35822"],{8574:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>i,toc:()=>a,default:()=>x,metadata:()=>d,assets:()=>c,contentTitle:()=>t});var d=JSON.parse('{"id":"service/auth/ldap/apacheds-ops","title":"ApacheDS \u8FD0\u7EF4","description":"ApacheDS \u76EE\u5F55\u8BBE\u8BA1","source":"@site/../notes/service/auth/ldap/apacheds-ops.md","sourceDirName":"service/auth/ldap","slug":"/service/auth/ldap/apacheds-ops","permalink":"/notes/service/auth/ldap/apacheds-ops","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/ldap/apacheds-ops.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1660664456000,"frontMatter":{"title":"ApacheDS \u8FD0\u7EF4"},"sidebar":"docs","previous":{"title":"ApacheDS Kerberos","permalink":"/notes/service/auth/ldap/apacheds-kerberos"},"next":{"title":"Apache Directory","permalink":"/notes/service/auth/ldap/apacheds"}}'),r=s(86106),l=s(17776);let i={title:"ApacheDS \u8FD0\u7EF4"},t="ApacheDS \u8FD0\u7EF4",c={},a=[{value:"ApacheDS \u76EE\u5F55\u8BBE\u8BA1",id:"apacheds-\u76EE\u5F55\u8BBE\u8BA1",level:2},{value:"\u5220\u9664\u9ED8\u8BA4\u5206\u533A",id:"\u5220\u9664\u9ED8\u8BA4\u5206\u533A",level:2},{value:"\u4FEE\u6539\u9ED8\u8BA4\u5BC6\u7801",id:"\u4FEE\u6539\u9ED8\u8BA4\u5BC6\u7801",level:2},{value:"Nextcloud LDAP",id:"nextcloud-ldap",level:2},{value:"\u5206\u533A",id:"\u5206\u533A",level:2}];function h(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"apacheds-\u8FD0\u7EF4",children:"ApacheDS \u8FD0\u7EF4"})}),"\n",(0,r.jsx)(e.h2,{id:"apacheds-\u76EE\u5F55\u8BBE\u8BA1",children:"ApacheDS \u76EE\u5F55\u8BBE\u8BA1"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["DN\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["ou=users - \u7528\u6237\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"uid=test.cs"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ou=groups - \u5206\u7EC4\u3001\u7EC4\u7EC7\u67B6\u6784\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["uid=company\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"objectclass: groupOfNames"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ou=roles - \u89D2\u8272\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["uid=admin\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"objectclass: groupOfNames"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ou=services - \u670D\u52A1\u8D26\u53F7\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"uid=keycloak"}),"\n",(0,r.jsx)(e.li,{children:"uid=nextcloud"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["dc=security - \u5B89\u5168\u76F8\u5173\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["ou=services - \u5B89\u5168\u670D\u52A1\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["uid=krbtgt\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["krb5PrincipalName: krbtgt/EXAMPLE.",(0,r.jsx)(e.a,{href:"mailto:COM@EXAMPLE.COM",children:"COM@EXAMPLE.COM"})]}),"\n",(0,r.jsx)(e.li,{children:"userPassword: randomKey"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["uid=kpasswd\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"krb5PrincipalName: kadmin/changepw@EXAMPLE.COM"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["uid=ldap\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["krb5PrincipalName: ldap/example.",(0,r.jsx)(e.a,{href:"mailto:net@EXAMPLE.COM",children:"net@EXAMPLE.COM"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u7C7B\u9009\u62E9\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u4F53 inetOrgPerson\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u53C2\u7167 ",(0,r.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc2798",children:"rfc2798"})," \u9009\u7528\u5C5E\u6027"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u5206\u7EC4 groupOfNames"}),"\n",(0,r.jsx)(e.li,{children:"\u89D2\u8272 groupOfNames"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5C5E\u6027\u9009\u62E9\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["uid \u7528\u4E8E\u552F\u4E00\u6807\u793A\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"uid \u4E0D\u662F inetOrgPerson \u5F3A\u5236\u5C5E\u6027"}),"\n",(0,r.jsx)(e.li,{children:"cn \u548C sn \u662F\u5F3A\u5236\u5C5E\u6027"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ldif",children:"# \u521B\u5EFA\u57FA\u7840\u7ED3\u6784 - \u53EF\u66FF\u6362 basedn dc=example,dc=com\ndn: ou=users,dc=example,dc=com\nobjectclass: organizationalUnit\nou: users\n\ndn: ou=groups,dc=example,dc=com\nobjectclass: organizationalUnit\nou: groups\n\ndn: ou=roles,dc=example,dc=com\nobjectclass: organizationalUnit\nou: roles\n\ndn: ou=services,dc=example,dc=com\nobjectclass: organizationalUnit\nou: services\n\ndn: dc=security,dc=example,dc=com\nobjectclass: domain\ndc: security\n\ndn: ou=services,dc=security,dc=example,dc=com\nobjectclass: organizationalUnit\nou: services\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5220\u9664\u9ED8\u8BA4\u5206\u533A",children:"\u5220\u9664\u9ED8\u8BA4\u5206\u533A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u9012\u5F52\u5220\u9664\u914D\u7F6E\nldapdelete -r -H ldap://localhost:10389 -D uid=admin,ou=system -w secret ads-partitionId=example,ou=partitions,ads-directoryServiceId=default,ou=config\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u4FEE\u6539\u9ED8\u8BA4\u5BC6\u7801",children:"\u4FEE\u6539\u9ED8\u8BA4\u5BC6\u7801"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ldif",children:"# \u4FEE\u6539\u9ED8\u8BA4 admin \u5BC6\u7801\ndn:uid=admin,ou=system\nchangetype: modify\nreplace: userPassword\n# \u65B0\u7684\u5BC6\u7801\nuserPassword: secret\n"})}),"\n",(0,r.jsx)(e.h2,{id:"nextcloud-ldap",children:"Nextcloud LDAP"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"./occ ldap:show-config s01\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Configuration"}),(0,r.jsx)(e.th,{children:"s01"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasMemberOfFilterSupport"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"homeFolderNamingRule"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"lastJpegPhotoLookup"}),(0,r.jsx)(e.td,{children:"0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapAgentName"}),(0,r.jsx)(e.td,{children:"uid=admin,ou=system"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapAgentPassword"}),(0,r.jsx)(e.td,{children:"secret"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapAttributesForGroupSearch"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapAttributesForUserSearch"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapBackupHost"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapBackupPort"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapBase"}),(0,r.jsx)(e.td,{children:"dc=example,dc=com"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapBaseGroups"}),(0,r.jsx)(e.td,{children:"ou=groups,dc=example,dc=com"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapBaseUsers"}),(0,r.jsx)(e.td,{children:"ou=users,dc=example,dc=com"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapCacheTTL"}),(0,r.jsx)(e.td,{children:"600"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapConfigurationActive"}),(0,r.jsx)(e.td,{children:"1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapDefaultPPolicyDN"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapDynamicGroupMemberURL"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapEmailAttribute"}),(0,r.jsx)(e.td,{children:"mail"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapExperiencedAdmin"}),(0,r.jsx)(e.td,{children:"0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapExpertUUIDGroupAttr"}),(0,r.jsx)(e.td,{children:"enrtyUUID"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapExpertUUIDUserAttr"}),(0,r.jsx)(e.td,{children:"enrtyUUID"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapExpertUsernameAttr"}),(0,r.jsx)(e.td,{children:"uid"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapExtStorageHomeAttribute"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapGidNumber"}),(0,r.jsx)(e.td,{children:"gidNumber"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapGroupDisplayName"}),(0,r.jsx)(e.td,{children:"cn"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapGroupFilter"}),(0,r.jsx)(e.td,{children:"(objectclass=groupOfNames)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapGroupFilterGroups"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapGroupFilterMode"}),(0,r.jsx)(e.td,{children:"1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapGroupFilterObjectclass"}),(0,r.jsx)(e.td,{children:"inetOrgPerson"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapGroupMemberAssocAttr"}),(0,r.jsx)(e.td,{children:"member"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapHost"}),(0,r.jsx)(e.td,{children:"ldap://192.168.1.1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapIgnoreNamingRules"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapLoginFilter"}),(0,r.jsx)(e.td,{children:"`(&("})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapLoginFilterAttributes"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapLoginFilterEmail"}),(0,r.jsx)(e.td,{children:"1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapLoginFilterMode"}),(0,r.jsx)(e.td,{children:"0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapLoginFilterUsername"}),(0,r.jsx)(e.td,{children:"1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapNestedGroups"}),(0,r.jsx)(e.td,{children:"1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapOverrideMainServer"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapPagingSize"}),(0,r.jsx)(e.td,{children:"500"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapPort"}),(0,r.jsx)(e.td,{children:"10389"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapQuotaAttribute"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapQuotaDefault"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapTLS"}),(0,r.jsx)(e.td,{children:"0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUserAvatarRule"}),(0,r.jsx)(e.td,{children:"default"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUserDisplayName"}),(0,r.jsx)(e.td,{children:"cn"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUserDisplayName2"}),(0,r.jsx)(e.td,{children:"displayname"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUserFilter"}),(0,r.jsx)(e.td,{children:"(objectclass=inetOrgPerson)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUserFilterGroups"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUserFilterMode"}),(0,r.jsx)(e.td,{children:"1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUserFilterObjectclass"}),(0,r.jsx)(e.td,{children:"inetOrgPerson"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUuidGroupAttribute"}),(0,r.jsx)(e.td,{children:"auto"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ldapUuidUserAttribute"}),(0,r.jsx)(e.td,{children:"auto"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"turnOffCertCheck"}),(0,r.jsx)(e.td,{children:"0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"turnOnPasswordChange"}),(0,r.jsx)(e.td,{children:"0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"useMemberOfToDetectMembership"}),(0,r.jsx)(e.td,{children:"1"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u5206\u533A",children:"\u5206\u533A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ldif"})})]})}function x(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(h,{...n})}):h(n)}},17776:function(n,e,s){s.d(e,{R:()=>i,x:()=>t});var d=s(7378);let r={},l=d.createContext(r);function i(n){let e=d.useContext(l);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),d.createElement(l.Provider,{value:e},n.children)}}}]);