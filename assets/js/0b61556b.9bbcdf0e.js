"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["77429"],{98840:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>a,toc:()=>o,default:()=>h,metadata:()=>i,assets:()=>c,contentTitle:()=>l});var i=JSON.parse('{"id":"devops/kubernetes/network/apisix-ingress","title":"Apisix Ingress","description":"- \u4E0D\u5EFA\u8BAE\u4F7F\u7528","source":"@site/../notes/devops/kubernetes/network/apisix-ingress.md","sourceDirName":"devops/kubernetes/network","slug":"/devops/kubernetes/network/apisix-ingress","permalink":"/notes/devops/kubernetes/network/apisix-ingress","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/kubernetes/network/apisix-ingress.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1712053653000,"frontMatter":{"title":"Apisix Ingress"},"sidebar":"docs","previous":{"title":"Kubernates \u7F51\u7EDC","permalink":"/notes/devops/kubernetes/network/"},"next":{"title":"Calico","permalink":"/notes/devops/kubernetes/network/calico"}}'),r=n(86106),t=n(17776);let a={title:"Apisix Ingress"},l="Apisix Ingress",c={},o=[{value:"IngressController",id:"ingresscontroller",level:2}];function p(e){let s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"apisix-ingress",children:"Apisix Ingress"})}),"\n",(0,r.jsx)(s.admonition,{type:"caution",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0D\u5EFA\u8BAE\u4F7F\u7528"}),"\n",(0,r.jsxs)(s.li,{children:["\u4F9D\u8D56 etcd\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"etcd \u96BE\u7EF4\u62A4"}),"\n",(0,r.jsx)(s.li,{children:"helm \u76F4\u63A5\u542F\u52A8\u7684 etcd \u53EF\u80FD\u4F1A\u6709\u5404\u79CD\u95EE\u9898 - \u53EF\u80FD\u5BFC\u81F4\u65E0\u6CD5\u542F\u52A8"}),"\n",(0,r.jsx)(s.li,{children:"\u6CA1\u5FC5\u8981\u4E3A\u4E86 apisix \u4E13\u95E8\u53BB\u7EF4\u62A4 etcd"}),"\n",(0,r.jsx)(s.li,{children:"etcd \u975E\u5E38\u5403 IO - IO \u6162\u7684\u65F6\u5019 CPU \u975E\u5E38\u9AD8"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"\u5EFA\u8BAE\u5C1D\u8BD5 kong - \u4F7F\u7528\u73B0\u6709\u7684 DB \u4F5C\u4E3A backend"}),"\n"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Helm\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://charts.apiseven.com",children:"https://charts.apiseven.com"})," apisix\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"apisix \u4F9D\u8D56 apisix-dashboard, apisix-ingress-controller, etcd"}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://apache.github.io/apisix-helm-chart/",children:"https://apache.github.io/apisix-helm-chart/"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/apache/apisix-helm-chart",children:"apache/apisix-helm-chart"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://charts.bitnami.com/bitnami",children:"https://charts.bitnami.com/bitnami"})," etcd"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://apisix.apache.org/docs/ingress-controller/getting-started/",children:"https://apisix.apache.org/docs/ingress-controller/getting-started/"})}),"\n",(0,r.jsxs)(s.li,{children:["v2\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://apisix.apache.org/docs/ingress-controller/next/references/v2/",children:"https://apisix.apache.org/docs/ingress-controller/next/references/v2/"})}),"\n",(0,r.jsxs)(s.li,{children:["ApisixGlobalRule\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/apache/apisix-ingress-controller/issues/1104",children:"https://github.com/apache/apisix-ingress-controller/issues/1104"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"ingresscontroller",children:"IngressController"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"ApisixRoute"}),"\n",(0,r.jsxs)(s.li,{children:["ApisixUpstream\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u540D\u5B57\u4E0E service \u540D\u5B57\u76F8\u540C\u4F1A\u81EA\u52A8\u5339\u914D"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"ApisixTls"}),"\n",(0,r.jsxs)(s.li,{children:["ApisixClusterConfig\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u914D\u7F6E prometheus\u3001skywalking"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"ApisixConsumer"}),"\n",(0,r.jsxs)(s.li,{children:["ApisixPluginConfig\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["ingress \u901A\u8FC7 annotation \u5F15\u7528 ",(0,r.jsx)(s.code,{children:'k8s.apisix.apache.org/plugin-config-name: "echo-and-cors-apc"'})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"apiVersion: apisix.apache.org/v2beta3\nkind: ApisixRoute\nmetadata:\n  name: httpbin-route\nspec:\n  http:\n    - name: rule1\n      match:\n        hosts:\n          - httpbin.com\n        paths:\n          - /ip\n      backends:\n        - serviceName: httpbin-service-e2e-test\n          servicePort: 80\n"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"annotations:\n  k8s.apisix.apache.org/enable-cors: 'true'\n  k8s.apisix.apache.org/cors-allow-origin: 'https://foo.com,http://bar.com:8080'\n  k8s.apisix.apache.org/cors-allow-headers: 'Host: https://bar.com:8080'\n  k8s.apisix.apache.org/cors-allow-methods: 'GET,POST'\n  k8s.apisix.apache.org/allowlist-source-range: '10.0.5.0/16,127.0.0.1,192.168.3.98'\n  k8s.apisix.apache.org/blocklist-source-range: '127.0.0.1,172.17.0.0/16'\n  k8s.apisix.apache.org/http-allow-methods: 'GET,POST'\n  k8s.apisix.apache.org/http-block-method: 'PUT,DELETE'\n  k8s.apisix.apache.org/rewrite-target-regex: '/app/(.*)'\n  k8s.apisix.apache.org/rewrite-target-regex-template: '/$1'\n  k8s.apisix.apache.org/http-to-https: 'true'\n  k8s.apisix.apache.org/use-regex: 'true'\n  k8s.apisix.apache.org/enable-websocket: 'true'\n  k8s.apisix.apache.org/enable-response-rewrite: 'true'\n  k8s.apisix.apache.org/response-rewrite-status-code: '404'\n  k8s.apisix.apache.org/response-rewrite-body: 'bar-body'\n  k8s.apisix.apache.org/response-rewrite-body-base64: 'true'\n  # \u53EF\u4EE5\u901A\u8FC7 Prefix \u8DEF\u7531\n  # path: /helloworld.Greeter/SayHello\n  k8s.apisix.apache.org/upstream-scheme: grpcs\n  # \u8DE8 namespace \u5F15\u7528\n  k8s.apisix.apache.org/svc-namespace: test\n"})})]})}function h(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},17776:function(e,s,n){n.d(s,{R:()=>a,x:()=>l});var i=n(7378);let r={},t=i.createContext(r);function a(e){let s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);