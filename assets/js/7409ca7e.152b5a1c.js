"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["5096"],{26668:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>c,toc:()=>o,default:()=>a,metadata:()=>s,assets:()=>h,contentTitle:()=>i});var s=JSON.parse('{"id":"security/tls/ech","title":"ECH","description":"- \u52A0\u5BC6 SNI - ESNI -> ECH - Encrypted Client Hello - \u52A0\u5BC6 Client Hello","source":"@site/../notes/security/tls/ech.md","sourceDirName":"security/tls","slug":"/security/tls/ech","permalink":"/notes/security/tls/ech","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/security/tls/ech.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1740927882000,"frontMatter":{"title":"ECH"},"sidebar":"docs","previous":{"title":"TLS","permalink":"/notes/security/tls/"},"next":{"title":"TLS","permalink":"/notes/security/tls"}}'),l=n(86106),r=n(17776);let c={title:"ECH"},i="ECH",h={},o=[];function d(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"ech",children:"ECH"})}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"\u52A0\u5BC6 SNI - ESNI -> ECH - Encrypted Client Hello - \u52A0\u5BC6 Client Hello"}),"\n",(0,l.jsx)(t.li,{children:"\u4F9D\u8D56 HTTPS DNS \u8BB0\u5F55"}),"\n"]}),"\n",(0,l.jsx)(t.admonition,{type:"caution",children:(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["HAProxy - ",(0,l.jsx)(t.a,{href:"https://github.com/haproxy/haproxy/issues/1924",children:"#1924"})]}),"\n",(0,l.jsxs)(t.li,{children:["OpenSSL ",(0,l.jsx)(t.a,{href:"https://github.com/openssl/openssl/issues/7482",children:"#7482"})]}),"\n",(0,l.jsxs)(t.li,{children:["WolfSSL v5.6.0 --enable-hpke\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://www.wolfssl.com/encrypted-client-hello-ech-now-supported-wolfssl/",children:"https://www.wolfssl.com/encrypted-client-hello-ech-now-supported-wolfssl/"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["Nginx ",(0,l.jsx)(t.a,{href:"https://trac.nginx.org/nginx/ticket/2275",children:"#2275"})]}),"\n",(0,l.jsx)(t.li,{children:"curl \u4F9D\u8D56 OpenSSL - \u9700\u8981\u901A\u8FC7 fork \u7684 OpenSSL \u624D\u80FD\u652F\u6301"}),"\n"]})}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://blog.cloudflare.com/encrypted-client-hello/",children:"https://blog.cloudflare.com/encrypted-client-hello/"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://www.cloudflare.com/zh-cn/ssl/encrypted-sni/",children:"https://www.cloudflare.com/zh-cn/ssl/encrypted-sni/"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/draft-ietf-tls-esni",children:"https://datatracker.ietf.org/doc/html/draft-ietf-tls-esni"})}),"\n",(0,l.jsxs)(t.li,{children:["Chrome 117 - ",(0,l.jsx)(t.a,{href:"https://chromestatus.com/feature/6196703843581952",children:"https://chromestatus.com/feature/6196703843581952"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"chrome://flags/#encrypted-client-hello"}),"\n",(0,l.jsx)(t.li,{children:"2023-09"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://tls-ech.dev",children:"https://tls-ech.dev"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://defo.ie/ech-check.php",children:"https://defo.ie/ech-check.php"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"http://cloudflare-ech.com/",children:"http://cloudflare-ech.com/"})}),"\n"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:"# \u56FD\u5185\u88AB\u62E6\u622A\ndig tls-ech.dev HTTPS +short\n\n# \u901A\u8FC7 sni \u5224\u65AD\u662F\u5426\u8D70\u7684 ECH\ncurl https://wener.me/cdn-cgi/trace\n\n# https://github.com/curl/curl/blob/master/docs/ECH.md\ncurl --ech true --doh-url https://cloudflare-dns.com/dns-query https://wener.me/cdn-cgi/trace\n\n# \u9700\u8981\u4EE3\u7406\ncurl -s -H 'accept: application/dns+json' 'https://dns.google.com/resolve?name=tls-ech.dev&type=HTTPS' | jq '.Answer[].data' -r\n"})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{children:"1 . ech=AEn+DQBFKwAgACABWIHUGj4u+PIggYXcR5JF0gYk3dCRioBW8uJq9H4mKAAIAAEAAQABAANAEnB1YmxpYy50bHMtZWNoLmRldgAA\n"})})]})}function a(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},17776:function(e,t,n){n.d(t,{R:()=>c,x:()=>i});var s=n(7378);let l={},r=s.createContext(l);function c(e){let t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);