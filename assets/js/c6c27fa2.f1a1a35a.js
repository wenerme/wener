"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["10154"],{23725:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>a,toc:()=>c,default:()=>p,metadata:()=>r,assets:()=>i,contentTitle:()=>l});var r=JSON.parse('{"id":"db/relational/postgresql/pg_cron","title":"pg_cron","description":"- citusdata/pgcron","source":"@site/../notes/db/relational/postgresql/pg_cron.md","sourceDirName":"db/relational/postgresql","slug":"/db/relational/postgresql/pg_cron","permalink":"/notes/db/relational/postgresql/pg_cron","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/postgresql/pg_cron.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1626706991000,"frontMatter":{"title":"pg_cron"},"sidebar":"docs","previous":{"title":"patroni","permalink":"/notes/db/relational/postgresql/patroni"},"next":{"title":"pg_prewarm","permalink":"/notes/db/relational/postgresql/pg_prewarm"}}'),o=t(86106),s=t(17776);let a={title:"pg_cron"},l="pg_cron",i={},c=[];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"pg_cron",children:"pg_cron"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/citusdata/pg_cron",children:"citusdata/pg_cron"})}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u9ED8\u8BA4\u5143\u6570\u636E\u8868\u4F4D\u4E8E postgres \u5E93 - \u53EA\u6709\u5728\u7ED9\u5B9A\u5E93\u624D\u53EF\u4EE5 CREATE EXTENSION\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"schema \u4E3A cron"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",children:"shared_preload_libraries = 'pg_cron'\ncron.database_name = 'postgres'\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sql",children:"SELECT cron.schedule('nightly-vacuum', '0 3 * * *', 'VACUUM');\nSELECT cron.unschedule('nightly-vacuum' );\n\n-- \u76F4\u63A5\u8DE8\u5E93\u64CD\u4F5C\nINSERT INTO cron.job (schedule, command, nodename, nodeport, database, username)\nVALUES ('*/1 * * * *', '\nDO $$\nBEGIN\n    delete from table_one;\n    delete from table_two;\n    delete from table_three;\nEND;\n$$;',\n        '/run/postgresql', 5432, 'my_dataabse', 'postgres');\n"})})]})}function p(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},17776:function(e,n,t){t.d(n,{R:()=>a,x:()=>l});var r=t(7378);let o={},s=r.createContext(o);function a(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);