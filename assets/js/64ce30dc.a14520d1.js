"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["38756"],{70734:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>c,toc:()=>u,default:()=>d,metadata:()=>t,assets:()=>o,contentTitle:()=>a});var t=JSON.parse('{"id":"service/storage/juicefs/juicefs-k8s","title":"JuiceFS on Kubernetes","description":"- CSI","source":"@site/../notes/service/storage/juicefs/juicefs-k8s.md","sourceDirName":"service/storage/juicefs","slug":"/service/storage/juicefs/k8s","permalink":"/notes/service/storage/juicefs/k8s","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/storage/juicefs/juicefs-k8s.md","tags":[{"inline":true,"label":"Kubernetes","permalink":"/notes/tags/kubernetes"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1709090151000,"frontMatter":{"tags":["Kubernetes"]},"sidebar":"docs","previous":{"title":"JuiceFS FAQ","permalink":"/notes/service/storage/juicefs/faq"},"next":{"title":"MinIO","permalink":"/notes/service/storage/minio/"}}'),r=n(86106),i=n(17776);let c={tags:["Kubernetes"]},a="JuiceFS on Kubernetes",o={},u=[];function l(e){let s={a:"a",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"juicefs-on-kubernetes",children:"JuiceFS on Kubernetes"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"CSI"}),"\n",(0,r.jsxs)(s.li,{children:["\u53EF\u4EE5\u914D\u7F6E pathPattern=",(0,r.jsx)(s.code,{children:'"${.PVC.namespace}-${.PVC.name}"'}),"\uFF0C\u751F\u6210\u7684 pv \u540D\u5B57\u66F4\u6613\u8BFB"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Secret\nmetadata:\n  name: juicefs-secret\ntype: Opaque\nstringData:\n  name: <JUICEFS_NAME>\n  metaurl: <META_URL>\n  storage: s3\n  bucket: https://<BUCKET>.s3.<REGION>.amazonaws.com\n  access-key: <ACCESS_KEY>\n  secret-key: <SECRET_KEY>\n  # \u8BBE\u7F6E Mount Pod \u65F6\u533A\uFF0C\u9ED8\u8BA4\u4E3A UTC\u3002\n  # envs: "{TZ: Asia/Shanghai}"\n  # \u5982\u9700\u5728 Mount Pod \u4E2D\u521B\u5EFA\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4E5F\u53EF\u4EE5\u5C06\u66F4\u591A juicefs format \u53C2\u6570\u586B\u5165 format-options\u3002\n  # format-options: trash-days=1,block-size=4096\n\n---\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: juicefs\nprovisioner: csi.juicefs.com\nparameters:\n  csi.storage.k8s.io/provisioner-secret-name: juicefs-secret\n  csi.storage.k8s.io/provisioner-secret-namespace: default\n  csi.storage.k8s.io/node-publish-secret-name: juicefs-secret\n  csi.storage.k8s.io/node-publish-secret-namespace: default\n'})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"/var/lib/juicefs/volume/PV_NAME"}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://juicefs.com/docs/csi/introduction/",children:"https://juicefs.com/docs/csi/introduction/"})}),"\n"]})]})}function d(e={}){let{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},17776:function(e,s,n){n.d(s,{R:()=>c,x:()=>a});var t=n(7378);let r={},i=t.createContext(r);function c(e){let s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);