"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["64318"],{205968:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>s,toc:()=>c,default:()=>h,metadata:()=>o,assets:()=>a,contentTitle:()=>l});var o=JSON.parse('{"id":"web/react/react-hook-form","title":"React Hook Form","description":"- react-hook-form/react-hook-form \u662F\u4EC0\u4E48\uFF1F","source":"@site/../notes/web/react/react-hook-form.md","sourceDirName":"web/react","slug":"/web/react/hook-form","permalink":"/notes/web/react/hook-form","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/react/react-hook-form.md","tags":[{"inline":true,"label":"Form","permalink":"/notes/tags/form"},{"inline":true,"label":"React","permalink":"/notes/tags/react"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"React Hook Form","tags":["Form","React"]},"sidebar":"docs","previous":{"title":"react-grid-layout","permalink":"/notes/web/react/grid-layout"},"next":{"title":"React Hooks","permalink":"/notes/web/react/hooks"}}'),t=r(486106),i=r(917776);let s={title:"React Hook Form",tags:["Form","React"]},l="React Hook Form",a={},c=[{value:"\u6280\u5DE7",id:"\u6280\u5DE7",level:2},{value:"Schema Validation",id:"schema-validation",level:3},{value:"\u6570\u7EC4\u540D\u5B57",id:"\u6570\u7EC4\u540D\u5B57",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"react-hook-form",children:"React Hook Form"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/react-hook-form/react-hook-form",children:"react-hook-form/react-hook-form"})," \u662F\u4EC0\u4E48\uFF1F\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u57FA\u4E8E Hook \u7684\u8F7B\u91CF\u7EA7\u8868\u5355\u7EC4\u4EF6 - 5KB"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://react-hook-form.com/zh/api/",children:"\u63A5\u53E3"})}),"\n",(0,t.jsxs)(n.li,{children:["\u9ED8\u8BA4\u901A\u8FC7 ref \u7684\u65B9\u5F0F\u8FDB\u884C\u6CE8\u518C\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u83B7\u53D6 name, type, value"}),"\n",(0,t.jsx)(n.li,{children:"\u5728\u8BBE\u7F6E ref \u65F6\u5019\u5C31\u4F1A\u521D\u59CB\u5316\u8FDB\u884C\u6CE8\u518C"}),"\n",(0,t.jsx)(n.li,{children:"\u4F1A\u5224\u65AD\u662F\u5426\u4E3A checkbox \u548C radio - \u4F7F\u7528 checked"}),"\n",(0,t.jsx)(n.li,{children:"\u5982\u679C\u662F html \u5143\u7D20 ref - \u4F1A\u6DFB\u52A0\u4E8B\u4EF6\u76D1\u542C"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Controller - \u57FA\u4E8E useController \u5B9E\u73B0\u7684\u81EA\u5B9A\u4E49\u63A7\u4EF6\u5C01\u88C5\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5904\u7406\u6CA1\u6709 ref \u8FDB\u884C\u6CE8\u518C\u7684\u573A\u666F"}),"\n",(0,t.jsxs)(n.li,{children:["\u6838\u5FC3\u903B\u8F91\u5728 ",(0,t.jsx)(n.code,{children:"useController"})]}),"\n",(0,t.jsx)(n.li,{children:"Controller \u53EA\u5305\u542B\u57FA\u7840\u6E32\u67D3\u903B\u8F91 - \u6E32\u67D3 as \u6216\u8005\u4F7F\u7528 render \u51FD\u6570\u6E32\u67D3"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useController"})," - \u63D0\u4F9B\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u6240\u9700\u7684\u4E0A\u4E0B\u6587\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u63D0\u4F9B onChange, onBlur, name, value, ref,"}),"\n",(0,t.jsx)(n.li,{children:"\u63D0\u4F9B\u5143\u6570\u636E invalid, isDirty, isTouched"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u80FD\u4F7F\u7528 ref \u5C3D\u91CF\u4F7F\u7528 ref \u6CE8\u518C - ",(0,t.jsx)(n.code,{children:"register"})]}),"\n"]})}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9ED8\u8BA4 mode \u4E3A ",(0,t.jsx)(n.code,{children:"onSubmit"})," - \u4E5F\u5C31\u662F\u5728\u63D0\u4EA4\u7684\u65F6\u5019\u624D\u4F1A\u6821\u9A8C"]}),"\n",(0,t.jsxs)(n.li,{children:["\u5143\u7D20\u4E0A\u7684 ",(0,t.jsx)(n.code,{children:"required"})," \u4F1A\u7531\u6D4F\u89C8\u5668\u5904\u7406\uFF0C\u800C\u4E0D\u4F1A\u6DFB\u52A0\u5230 rhf \u7684\u89C4\u5219\u91CC"]}),"\n",(0,t.jsxs)(n.li,{children:["resolver \u548C rules \u4E0D\u80FD\u540C\u65F6\u4F7F\u7528\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/orgs/react-hook-form/discussions/8992",children:"#8992"})}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const MyForm: React.FC<{ onSubmit; defaultValue }> = ({ onSubmit, defaultValue }) => {\n  const formMethods = useForm({ mode: 'onBlur', defaultValues: defaultValue });\n  const { register, handleSubmit } = formMethods;\n  return (\n    <FormProvider {...formMethods}>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <input {...register('name')} />\n        <input type='number' {...register('age')} />\n        <button type='submit'>Submit</button>\n      </form>\n    </FormProvider>\n  );\n};\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"mode = onSubmit - \u9A8C\u8BC1\u7B56\u7565: onChange, onBlur, onSubmit, onTouched, all"}),"\n",(0,t.jsx)(n.li,{children:"reValidateMode = onChange - \u9A8C\u8BC1\u7B56\u7565: onChange, onBlur, onSubmit"}),"\n",(0,t.jsx)(n.li,{children:"defaultValues"}),"\n",(0,t.jsx)(n.li,{children:"resolver - \u5916\u90E8\u9A8C\u8BC1 - yup, zod, joi, superstruct, vest, class-validator, io-ts, nope, computed-types, typanion, ajv, typebox, arktype, valibot"}),"\n",(0,t.jsx)(n.li,{children:"context"}),"\n",(0,t.jsx)(n.li,{children:"criteriaMode - firstError | all"}),"\n",(0,t.jsx)(n.li,{children:"shouldFocusError = true"}),"\n",(0,t.jsx)(n.li,{children:"shouldUnregister = false"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u6280\u5DE7",children:"\u6280\u5DE7"}),"\n",(0,t.jsx)(n.h3,{id:"schema-validation",children:"Schema Validation"}),"\n",(0,t.jsxs)(n.p,{children:["Using ",(0,t.jsx)(n.a,{href:"https://github.com/react-hook-form/resolvers",children:"Resolver"})," with Zod, Yup, Joi, etc."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install @hookform/resolvers zod\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport * as z from 'zod';\n\nconst schema = z.object({\n  name: z.string().min(1, { message: 'Required' }),\n  age: z.number().min(10),\n});\n\nconst App = () => {\n  const { register, handleSubmit } = useForm({\n    resolver: zodResolver(schema),\n  });\n\n  return (\n    <form onSubmit={handleSubmit((d) => console.log(d))}>\n      <input {...register('name')} />\n      <input type='number' {...register('age', { valueAsNumber: true })} />\n      <input type='submit' />\n    </form>\n  );\n};\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u6570\u7EC4\u540D\u5B57",children:"\u6570\u7EC4\u540D\u5B57"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// test[0].name\n// test.0.name\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},917776:function(e,n,r){r.d(n,{R:()=>s,x:()=>l});var o=r(7378);let t={},i=o.createContext(t);function s(e){let n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);