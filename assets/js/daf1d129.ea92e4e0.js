"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["30744"],{7306:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>r,toc:()=>h,default:()=>o,metadata:()=>s,assets:()=>d,contentTitle:()=>c});var s=JSON.parse('{"id":"languages/go/lib/ent","title":"entgo","description":"- ent/ent \u662F\u4EC0\u4E48\uFF1F","source":"@site/../notes/languages/go/lib/ent.md","sourceDirName":"languages/go/lib","slug":"/languages/go/lib/ent","permalink":"/notes/languages/go/lib/ent","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/go/lib/ent.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1656388638000,"frontMatter":{"title":"entgo"},"sidebar":"docs","previous":{"title":"colly","permalink":"/notes/languages/go/lib/colly"},"next":{"title":"fx","permalink":"/notes/languages/go/lib/fx"}}'),l=i(86106),t=i(17776);let r={title:"entgo"},c="entgo",d={},h=[{value:"Note",id:"note",level:2},{value:"entql",id:"entql",level:3},{value:"\u6267\u884C\u4EFB\u610F SQL",id:"\u6267\u884C\u4EFB\u610F-sql",level:2},{value:"ent v0.10",id:"ent-v010",level:2},{value:"ent v0.9",id:"ent-v09",level:2},{value:"ent v0.8",id:"ent-v08",level:2}];function a(n){let e={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"entgo",children:"entgo"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/ent/ent",children:"ent/ent"})," \u662F\u4EC0\u4E48\uFF1F\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9879\u76EE\u6E90\u81EA facebook, \u52A0\u5165 LF"}),"\n",(0,l.jsx)(e.li,{children:"\u652F\u6301 RESTful \u63A5\u53E3"}),"\n",(0,l.jsxs)(e.li,{children:["\u57FA\u4E8E\u4EE3\u7801\u751F\u6210\u7684 ORM\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652F\u6301 MySQL, MariaDB, PostgreSQL, SQLite, Gremlin"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u521B\u5EFA\u548C\u66F4\u65B0\u4F7F\u7528 setter/getter"}),"\n",(0,l.jsx)(e.li,{children:"\u652F\u6301\u751F\u6210 gqlgen \u96C6\u6210\u4EE3\u7801"}),"\n",(0,l.jsxs)(e.li,{children:["\u7279\u70B9\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E0D\u57FA\u4E8E struct \u5B9A\u4E49\u6A21\u578B\uFF0C\u76F4\u63A5\u5B9A\u4E49 Fields, Indexes, Edges"}),"\n",(0,l.jsx)(e.li,{children:"\u652F\u6301\u5B9A\u4E49\u6821\u9A8C"}),"\n",(0,l.jsx)(e.li,{children:"\u80FD mixin \u516C\u5171\u6A21\u578B"}),"\n",(0,l.jsx)(e.li,{children:"\u6DFB\u52A0 annotation \u81EA\u5B9A\u4E49\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u652F\u6301\u7684\u7C7B\u578B\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6240\u6709 golang \u6570\u5B57\u7C7B\u578B"}),"\n",(0,l.jsx)(e.li,{children:"bool"}),"\n",(0,l.jsx)(e.li,{children:"string"}),"\n",(0,l.jsx)(e.li,{children:"time.Time"}),"\n",(0,l.jsx)(e.li,{children:"[]byte"}),"\n",(0,l.jsx)(e.li,{children:"JSON"}),"\n",(0,l.jsx)(e.li,{children:"Enum"}),"\n",(0,l.jsx)(e.li,{children:"UUID"}),"\n",(0,l.jsx)(e.li,{children:"Other - \u81EA\u5B9A\u4E49 DB \u7C7B\u578B\u548C Go \u7C7B\u578B"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u652F\u6301\u5168\u5C40\u552F\u4E00 ID - int \u7C7B\u578B\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"migrate.WithGlobalUniqueID"}),"\n",(0,l.jsx)(e.li,{children:"ID \u524D\u9762\u90E8\u5206\u4E3A Table \u7D22\u5F15"}),"\n",(0,l.jsx)(e.li,{children:"ent_types \u8868\u7EF4\u62A4 \u8868\u540D->\u7D22\u5F15 \u5173\u7CFB"}),"\n",(0,l.jsx)(e.li,{children:"\u56E0\u6B64\u4E00\u4E2A ID \u80FD\u83B7\u53D6\u5230\u7C7B\u578B\u4FE1\u606F"}),"\n",(0,l.jsx)(e.li,{children:"graphql Node ID \u9700\u8981\u8BE5\u80FD\u529B"}),"\n",(0,l.jsxs)(e.li,{children:["github gql \u4F7F\u7528 String ID - \u683C\u5F0F\u4E3A base64 ",(0,l.jsx)(e.code,{children:"04:User583231"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/ent/contrib",children:"ent/contribs"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"entoas,entgql,entgrpc"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/ogen-go/ogen",children:"ogen-go/ogen"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u751F\u6210 OpenAPIv3"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/452#issuecomment-619430120",children:"Neptune / Gremlin - experience compared to SQL backends"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ent \u65E9\u671F\u540E\u7AEF\u4E3A Gremlin"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/ariga/atlas",children:"ariga/atlas"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"DSL schema \u7BA1\u7406"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/ariga/entcache",children:"ariga/entcache"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ent \u7F13\u5B58\u5C42"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u6838\u5FC3\u6210\u5458\u6210\u7ACB\u7684\u516C\u53F8 ",(0,l.jsx)(e.a,{href:"https://ariga.io/",children:"https://ariga.io/"})," operational data graph"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5185\u5EFA id \u5B57\u6BB5 - \u53EF\u8986\u76D6"}),"\n",(0,l.jsxs)(e.li,{children:["\u4E0D\u652F\u6301 \u67E5\u8BE2 Hook - ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/833",children:"ent/ent#833"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u53EF\u4EE5\u4F7F\u7528 ",(0,l.jsx)(e.a,{href:"https://entgo.io/docs/privacy/#multi-tenancy",children:"privacy"})," \u5B9E\u73B0\u7C7B\u578B\u529F\u80FD"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["gRPC \u6269\u5C55\u652F\u6301\u60C5\u51B5 ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/2446",children:"#2446"})]}),"\n"]})}),"\n",(0,l.jsx)(e.admonition,{type:"caution",children:(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4E0D\u652F\u6301 \u8F6F\u5220\u9664 - ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/252",children:"ent/ent#252"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u4E0D\u652F\u6301\u7EA7\u8054\u5220\u9664 - ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/407",children:"ent/ent#407"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u4E0D\u652F\u6301\u591A\u6001 - ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/1048",children:"#1048"})]}),"\n",(0,l.jsxs)(e.li,{children:["entql \u5D4C\u5957\u5206\u9875 N+1 \u95EE\u9898 - ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/1180",children:"#1180"})]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.del,{children:"\u76EE\u524D GoType \u8981\u6C42\u4E3A struct \u6216\u53EF\u6620\u5C04\u7C7B\u578B"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.del,{children:"\u5173\u8054\u5173\u7CFB\u4E0D\u652F\u6301\u81EA\u5B9A\u4E49\u5C5E\u6027"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsxs)(e.del,{children:["\u4E0D\u652F\u6301 upsert - ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/139",children:"ent/ent#139"})]})}),"\n"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"go get entgo.io/ent/cmd/ent\n\ngo mod init <project>\nent init User\ngo generate ./ent\n\n# edge\ngo run entgo.io/ent/cmd/ent init Car Group\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["feature\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"privacy"}),"\n",(0,l.jsx)(e.li,{children:"entql - EntQL DSL \u62BD\u8C61\u652F\u6301\u5E95\u5C42\u591A\u79CD\u65B9\u8A00"}),"\n",(0,l.jsxs)(e.li,{children:["schema/snapshot\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u7F13\u5B58\u4E4B\u524D schema \u89E3\u51B3\u5408\u5E76\u51B2\u7A81 ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/852",children:"#852"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"sql/schemaconfig - \u9488\u5BF9 table \u6307\u5B9A schema"}),"\n",(0,l.jsx)(e.li,{children:"sql/lock - \u751F\u6210 ForUpdate/ForShare"}),"\n",(0,l.jsx)(e.li,{children:"sql/modifier - \u751F\u6210 Modify \u8C03\u6574\u8BED\u53E5"}),"\n",(0,l.jsxs)(e.li,{children:["sql/versioned-migration\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Schema \u589E\u52A0 Diff \u548C NamedDiff"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:'client.Schema.NamedDiff(ctx, "migration_name", schema.WithDir(dir))'}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u751F\u6210\u8FC1\u79FB\u5230\u6587\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u4E0E\u73B0\u6709 schema \u8FDB\u884C diff"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["sql/execquery\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u751F\u6210 ExecContext, QueryContext"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"sql/upsert - \u751F\u6210 OnConflict"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"note",children:"Note"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Validator \u4E0D\u80FD\u83B7\u53D6\u5230\u4E0A\u4E0B\u6587\uFF0C\u4F1A cast \u6210\u5B9E\u9645\u7C7B\u578B"}),"\n",(0,l.jsxs)(e.li,{children:["Save \u987A\u5E8F\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8BBE\u7F6E\u9ED8\u8BA4\u503C"}),"\n",(0,l.jsxs)(e.li,{children:["\u6CA1\u6709 hooks\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6821\u9A8C\u5B57\u6BB5"}),"\n",(0,l.jsx)(e.li,{children:"\u4FDD\u5B58"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u6709 hooks\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u751F\u6210 Mutator - \u6821\u9A8C\u3001\u4FDD\u5B58"}),"\n",(0,l.jsx)(e.li,{children:"\u6267\u884C hook"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["ent.Policy - \u8BBF\u95EE\u7B56\u7565\u63A7\u5236\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u901A\u8FC7\u62E6\u622A\u63A7\u5236\u67E5\u8BE2\u548C\u4FEE\u6539 - \u6CA1\u6709 Action \u6982\u5FF5\uFF0C\u53EA\u6709 Query \u548C Mutation"}),"\n",(0,l.jsxs)(e.li,{children:["\u4E09\u79CD\u51B3\u7B56\u7ED3\u679C\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"privacy.Allow"}),"\n",(0,l.jsx)(e.li,{children:"privacy.Deny"}),"\n",(0,l.jsx)(e.li,{children:"privacy.Skip"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"entql",children:"entql"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u52A8\u6001 sql \u751F\u6210"}),"\n",(0,l.jsx)(e.li,{children:"\u652F\u6301\u51FD\u6570"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"func"}),(0,l.jsx)(e.th,{children:"how"}),(0,l.jsx)(e.th,{children:"note"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"equal_fold"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"LOWER(col) = ${strings.ToLower(sub)}"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"contains"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:'col like ${"%"+sub+"%"}'})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"contains_fold"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:'col ilike ${"%"+sub+"%"}'})}),(0,l.jsxs)(e.td,{children:["pg ilike, mysql ",(0,l.jsx)(e.code,{children:"COLLATE utf8mb4_general_ci LIKE"})]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"has_prefix"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:'col like ${prefix+"%"}'})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"has_suffix"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:'col like ${"%"+suffix}'})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"has_edge(edge,expr...)"}),(0,l.jsx)(e.td,{}),(0,l.jsx)(e.td,{})]})]})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sql",children:'select * from account where has_edge(owningUser)\n--\nselect * from account where owning_user_id IS NOT NULL\n\nselect * from account where has_edge(owningUser,username = "wener")\n-- args [wener]\nSELECT * FROM "accounts" WHERE "accounts"."owning_user_id" IS NOT NULL AND "accounts"."owning_user_id" IN (SELECT "users"."id" FROM "users" WHERE "username" = $1)\n\nselect * from account where has_edge(owningUser,has_edge(department,name = "Test"))\n-- args [Test]\nSELECT * FROM "accounts" WHERE "accounts"."owning_user_id" IN (SELECT "users"."id" FROM "users" WHERE "users"."department_id" IN (SELECT "departments"."id" FROM "departments" WHERE "name" = $1))\n'})}),"\n",(0,l.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,l.jsx)(e.h2,{id:"\u6267\u884C\u4EFB\u610F-sql",children:"\u6267\u884C\u4EFB\u610F SQL"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u751F\u6210\u65F6\u6DFB\u52A0 sql/execquery \u7279\u6027"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"// \u66B4\u9732\u5E95\u5C42 DB\nfunc (c *Client) DB() *sql.DB {\n	if c.debug {\n            return c.driver.(*dialect.DebugDriver).Driver.(*entsql.Driver).DB()\n	}\n	return c.driver.(*entsql.Driver).DB()\n}\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/issues/85#issuecomment-542194059",children:"https://github.com/ent/ent/issues/85#issuecomment-542194059"})}),"\n"]}),"\n",(0,l.jsx)(e.h1,{id:"version",children:"Version"}),"\n",(0,l.jsx)(e.h2,{id:"ent-v010",children:"ent v0.10"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/ariga/atlas",children:"ariga/atlas"})," \u7EE7\u627F\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u57FA\u4E8E HCL \u7684 DDL Schema \u5B9A\u4E49/\u8FC1\u79FB"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\nimport (\n    "context"\n    "log"\n    "<project>/ent"\n    "<project>/ent/migrate"\n    "entgo.io/ent/dialect/sql/schema"\n)\nfunc main() {\n    client, err := ent.Open("mysql", "root:pass@tcp(localhost:3306)/test")\n    if err != nil {\n        log.Fatalf("failed connecting to mysql: %v", err)\n    }\n    defer client.Close()\n    ctx := context.Background()\n    // \u4F7F\u7528 Atlas \u6267\u884C\u8FC1\u79FB\n    err = client.Schema.Create(ctx, schema.WithAtlas(true))\n    if err != nil {\n        log.Fatalf("failed creating schema resources: %v", err)\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"ent-v09",children:"ent v0.9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Upsert/UpsertBulk"}),"\n",(0,l.jsx)(e.li,{children:"Row-level locking"}),"\n",(0,l.jsx)(e.li,{children:"\u65B0\u7684 entc.Extension API"}),"\n",(0,l.jsx)(e.li,{children:"\u652F\u6301 SQL Query \u4FEE\u9970\u7B26"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'id, err := client.User.\n    Create().\n    SetAge(30).\n    SetName("Ariel").\n    // upsert\n    OnConflict().\n    SetName("Mashraki").\n    ID(ctx)\n\n// UpsertBulk\nerr := client.User.\n    CreateBulk(builders...).\n    OnConflict().\n    UpdateNewValues().\n    Exec(ctx)\n\ntx.User.Query().\n    Where(user.Name(name)).\n    // RLL\n    ForUpdate().\n    Only(ctx)\n\nclient.Pet.\n    Query().\n    //  SQL Modifier\n    Modify(func(s *sql.Selector) {\n        s.Select("SUM(LENGTH(name))")\n    }).\n    IntX(ctx)\n'})}),"\n",(0,l.jsx)(e.h2,{id:"ent-v08",children:"ent v0.8"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["entc/gen\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://entgo.io/docs/templates/#global-annotations",children:"\u5168\u5C40 Annotation"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F1A\u6DFB\u52A0\u5230 gen.Config"}),"\n",(0,l.jsx)(e.li,{children:"\u7C7B\u4F3C\u4E8E\u914D\u7F6E entc"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["entc/schema\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u751F\u6210\u4EE3\u7801\u4F7F\u7528\u5B9E\u9645 GoType - ",(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/pull/1428",children:"#1428"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4E4B\u524D\u4F8B\u5982 ID \u7C7B\u578B\uFF0C\u4F1A\u751F\u6210\u5BF9\u5E94\u7684 SQL \u7C7B\u578B - \u4F8B\u5982 ",(0,l.jsx)(e.code,{children:"sql.NullString"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"UpdateOne \u652F\u6301 Select \u5B57\u6BB5"}),"\n",(0,l.jsx)(e.li,{children:"\u5141\u8BB8\u67E5\u8BE2\u5173\u95ED DISTINCT - \u9ED8\u8BA4\u5F00\u542F"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/ent/ent/releases/tag/v0.8.0",children:"v0.8.0"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'type Annotation struct {\n    Config *config.Config\n}\n\nfunc (Annotation) Name() string {\n    return "GQL"\n}\n\n// \u5168\u5C40\nvar _ schema.Annotation = (*Annotation)(nil)\n'})})]})}function o(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},17776:function(n,e,i){i.d(e,{R:()=>r,x:()=>c});var s=i(7378);let l={},t=s.createContext(l);function r(n){let e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);