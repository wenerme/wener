"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["72454"],{67180:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>d,default:()=>o,metadata:()=>l,assets:()=>a,contentTitle:()=>c});var l=JSON.parse('{"id":"languages/zig/README","title":"Zig","description":"- ziglang.org","source":"@site/../notes/languages/zig/README.md","sourceDirName":"languages/zig","slug":"/languages/zig/","permalink":"/notes/languages/zig/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/zig/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1696577752000,"frontMatter":{"title":"Zig"},"sidebar":"docs","previous":{"title":"xpath","permalink":"/notes/languages/xml/xpath"},"next":{"title":"Zig FAQ","permalink":"/notes/languages/zig/faq"}}'),s=i(86106),r=i(17776);let t={title:"Zig"},c="Zig",a={},d=[{value:"C Interop",id:"c-interop",level:2}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"zig",children:"Zig"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://ziglang.org/",children:"ziglang.org"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/zig-lang/zig",children:"zig-lang/zig"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"MIT, Zig"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Why\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4E0E C \u4EA4\u4E92\u975E\u5E38\u597D, \u53EF\u76F4\u63A5\u5BFC\u5165 C \u5934\u6587\u4EF6\u4F7F\u7528"}),"\n",(0,s.jsx)(n.li,{children:"\u53EF\u4E0E C \u7684\u7F16\u8BD1\u540E\u5BF9\u63A5\u8FDB\u884C\u6DF7\u5408\u7F16\u8BD1"}),"\n",(0,s.jsx)(n.li,{children:"stdlib \u8BBE\u8BA1\u4E0A\u4E0D\u4F9D\u8D56 libc - wasm \u66F4\u5C0F"}),"\n",(0,s.jsxs)(n.li,{children:["\u5185\u7F6E libc - \u652F\u6301\u4EA4\u53C9\u7F16\u8BD1\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ARCH: aarch64,aarch64_6e,armeb,arm,i386,mips64el,mips64,mipsel,mips,powerpc64le,powerpc64,powerpc,riscv64,s390x,sparc,sparcv9,x86_64"}),"\n",(0,s.jsx)(n.li,{children:"{ARCH}-{linux,windows}-{musl,gnu}{,eabi,eabihf,abi64,abin32}"}),"\n",(0,s.jsx)(n.li,{children:"wasm32-freestanding-musl"}),"\n",(0,s.jsx)(n.li,{children:"40+"}),"\n",(0,s.jsx)(n.li,{children:"linux 3.16+, macOS 10.13+, Windows 8.1+"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u5185\u7F6E clang - zig cc"}),"\n",(0,s.jsx)(n.li,{children:"\u52A8\u6001\u7F16\u8BD1\u8DEF\u5F84"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/ZigEmbeddedGroup/microzig",children:"ZigEmbeddedGroup/microzig"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"zig for microcontrollers"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://andrewkelley.me/",children:"https://andrewkelley.me/"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://scattered-thoughts.net/writing/assorted-thoughts-on-zig-and-rust/",children:"Assorted thoughts on zig"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ziglang.org/learn/why_zig_rust_d_cpp/",children:"Why Zig When There is Already C++, D, and Rust?"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.scattered-thoughts.net/writing/how-safe-is-zig/",children:"How safe is zig?"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["ARM < v7 \u5F88\u591A\u4E0D\u652F\u6301\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["atomic,sync ",(0,s.jsx)(n.a,{href:"https://github.com/ziglang/zig/issues/4959",children:"#4959"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["self-hosted compiler ",(0,s.jsx)(n.a,{href:"https://github.com/ziglang/zig/issues/89",children:"#89"})]}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run --rm -it -v $PWD:/host -w /host wener/zig\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zig",metastring:'title="hello.zig"',children:'const std = @import("std");\n\npub fn main() !void {\n    const stdout = std.io.getStdOut().writer();\n    try stdout.print("Hello, {s}!\\n", .{"world"});\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-zig",metastring:'title="hello.zig"',children:'const print = @import("std").debug.print;\n\npub fn main() void {\n    print("Hello, world!\\n", .{});\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"zig build-exe hello.zig\n# \u4EA4\u53C9\u7F16\u8BD1\nzig targets # \u6240\u6709 targets\nzig build-exe -target arm-linux hello.zig\n\nzig build-exe -target arm-linux-musleabi -mcpu arm1176jzf_s hello.zig\nzig build-exe -target arm-linux-gnueabi -mcpu arm1176jzf_s hello.zig\n\n# hello \u7EA6 4.4k\nzig build-exe --strip -O ReleaseSmall hello.zig\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["flags\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"-fsingle-threaded"}),"\n",(0,s.jsx)(n.li,{children:"-mcpu=arm926ej_s+soft_float"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-l[lib], --library [lib]"})," - \u5728\u9700\u8981\u65F6 link \u7CFB\u7EDF\u5E93"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-L[d], --library-directory [d]"})," - \u6DFB\u52A0 \u5E93 \u76EE\u5F55"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"c-interop",children:"C Interop"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"--verbose-cc \u67E5\u770B cc \u547D\u4EE4"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",metastring:'title="hello.c"',children:'#include <stdio.h>\n\nint main(int argc, char **argv) {\n    printf("Hello world\\n");\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u76F4\u63A5\u7F16\u8BD1 C\nzig build-exe hello.c\nldd hello\nfile hello\n# \u9759\u6001\u94FE\u63A5\n# x86_64-macos\n# x86_64-macos-musl \u5931\u8D25\nzig build-exe hello.c --library c -target x86_64-macos-gnu\n# macOS \u4E0B\u4EA4\u53C9\u7F16\u8BD1 - \u9759\u6001\u94FE\u63A5 ~11k\nzig build-exe hello.c --library c -target x86_64-linux-musl\nfile hello\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4EA4\u53C9\u7F16\u8BD1\u7B2C\u4E00\u6B21\u4F1A\u6162 - \u9884\u7F16\u8BD1\u4E00\u4E9B\u5185\u5BB9"}),"\n"]})]})}function o(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},17776:function(e,n,i){i.d(n,{R:()=>t,x:()=>c});var l=i(7378);let s={},r=l.createContext(s);function t(e){let n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);