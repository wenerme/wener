"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["60622"],{35396:function(n,e,t){t.r(e),t.d(e,{frontMatter:()=>l,toc:()=>o,default:()=>h,metadata:()=>s,assets:()=>c,contentTitle:()=>d});var s=JSON.parse('{"id":"os/linux/network/mtu","title":"MTU","description":"- MTU - Maximum transmission unit","source":"@site/../notes/os/linux/network/mtu.md","sourceDirName":"os/linux/network","slug":"/os/linux/network/mtu","permalink":"/notes/os/linux/network/mtu","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/network/mtu.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1617466645000,"frontMatter":{"title":"MTU"},"sidebar":"docs","previous":{"title":"Keepalived","permalink":"/notes/os/linux/network/keepalived"},"next":{"title":"\u7F51\u7EDC\u5E38\u89C1\u95EE\u9898","permalink":"/notes/os/linux/network/faq"}}'),i=t(86106),r=t(17776);let l={title:"MTU"},d="MTU",c={},o=[{value:"PMTU",id:"pmtu",level:2}];function a(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"mtu",children:"MTU"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["MTU - ",(0,i.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Maximum_transmission_unit",children:"Maximum transmission unit"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6700\u5927\u4F20\u8F93\u5355\u5143"}),"\n",(0,i.jsxs)(e.li,{children:["\u8D85\u8FC7 MTU \u4EA7\u751F \u788E\u7247/fragment\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53EF\u914D\u7F6E DF don't fragment"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"Tinc \u9ED8\u8BA4 PMTU 1431"}),"\n",(0,i.jsx)(e.li,{children:"Ping \u5934 28 = 20 IP + 8 ICMP"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Transport"}),(0,i.jsx)(e.th,{children:"MTU"}),(0,i.jsx)(e.th,{children:"Desc"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Ethvernet v2"}),(0,i.jsx)(e.td,{children:"1500"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Ethvernet jumbo frames"}),(0,i.jsx)(e.td,{children:"1501-9202+"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"PPPoE v2"}),(0,i.jsx)(e.td,{children:"1492"}),(0,i.jsx)(e.td,{children:"PPPoE+8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"IEEE 802.11/Wi-Fi"}),(0,i.jsx)(e.td,{children:"2304"}),(0,i.jsx)(e.td,{children:"WEP+8,WPA-TKIP+20,WPA2-CCMP+16"})]})]})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u4E00\u822C\u6700\u5927 1464\n# 1500=1464+20+8+8 = Body+IP+ICMP+PPoE\nping -s 1464 baidu.com\n\n# \u4F46\u6709\u4E9B\u652F\u6301\u66F4\u5927\u7684 MTU\nping -s 2000 wener.me\n"})}),"\n",(0,i.jsx)(e.h2,{id:"pmtu",children:"PMTU"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["PMTUD - Path MTU Discovery - \u81EA\u52A8\u53D1\u73B0\u94FE\u8DEF MTU\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"IPv4 \u53EF\u9009, IPv6 \u5F3A\u5236"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"socket \u9009\u9879 IP_MTU_DISCOVER - \u9ED8\u8BA4\u5F00\u542F"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u822C\u65E0\u8FDE\u63A5\uFF0C\u4E0D\u7A33\u5B9A\u8FDE\u63A5\u4E0D\u4F1A\u5F00\u542F PMTUD"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u4E3A 0 \u8868\u793A\u5F00\u542F pmtu\ncat /proc/sys/net/ipv4/ip_no_pmtu_disc\n\nsudo apk add iputils\n# \u53D1\u4FE1\u606F/probe mtu\ntracepath -n 114.114.114.114\n\n# \u8FD4\u56DE\u5F53\u524D\u7684\u8DEF\u7531\u7F13\u5B58\u548C MTU\nip route get 114.114.114.114\n"})})]})}function h(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}},17776:function(n,e,t){t.d(e,{R:()=>l,x:()=>d});var s=t(7378);let i={},r=s.createContext(i);function l(n){let e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);