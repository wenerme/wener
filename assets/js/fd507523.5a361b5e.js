"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["52532"],{63234:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>t,toc:()=>h,default:()=>x,metadata:()=>d,assets:()=>c,contentTitle:()=>l});var d=JSON.parse('{"id":"os/alpine/alpine-apk","title":"apk","description":"- apk - Alpine Package Keeper","source":"@site/../notes/os/alpine/alpine-apk.md","sourceDirName":"os/alpine","slug":"/os/alpine/apk","permalink":"/notes/os/alpine/apk","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/alpine/alpine-apk.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1709090151000,"frontMatter":{"title":"apk"},"sidebar":"docs","previous":{"title":"Alpine","permalink":"/notes/os/alpine/"},"next":{"title":"AlpineLinux Awesome","permalink":"/notes/os/alpine/awesome"}}'),r=s(86106),i=s(17776);let t={title:"apk"},l="apk",c={},h=[{value:"Notes",id:"notes",level:2},{value:"APKINDEX",id:"apkindex",level:2},{value:"Reference",id:"reference",level:2},{value:"cache",id:"cache",level:2}];function a(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"apk",children:"apk"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"apk - Alpine Package Keeper"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://gitlab.alpinelinux.org/alpine/apk-tools",children:"alpine/apk-tools"})}),"\n",(0,r.jsxs)(e.li,{children:["github ",(0,r.jsx)(e.a,{href:"https://github.com/alpinelinux/apk-tools",children:"mirror"})]}),"\n",(0,r.jsxs)(e.li,{children:[".apk-new\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"apk \u5347\u7EA7\u5982\u679C\u68C0\u6D4B\u5230\u672C\u5730\u4FEE\u6539\uFF0C\u5219\u4F1A\u521B\u5EFA apk-new \u6587\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"-a, --available -> \u5141\u8BB8 \u66FF\u6362\u548C\u964D\u7EA7"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"apk info -r so:libgnutls.so.30.28.0\napk search cmd:blkid\napk version -l '!'\n\n# \u7248\u672C\u53F7\napk policy musl | sed '2!d' | sed 's/[^0-9a-z.-]//g'\n\n# 1.2.3-r4\ndocker run --rm -it wener/base sh -c 'apk update >/dev/null;apk policy musl | sed \"2!d\" | sed \"s/[^0-9a-z.-]//g\"'\n# 1.2.3\ndocker run --rm -it wener/base sh -c 'apk update >/dev/null;apk policy musl | sed \"2!d\" | sed \"s/[^0-9a-z.-]//g\"' | cut -d '-' -f 1\n\n# \u67E5\u770B\nzcat lib.apk | tar -vtf\ntar -vtf lib.apk # \u4E00\u822C tar \u652F\u6301 gzip\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"command"}),(0,r.jsx)(e.th,{children:"note"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u5305\u7BA1\u7406"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk add"}),(0,r.jsx)(e.td,{children:"\u5B89\u88C5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk del"}),(0,r.jsx)(e.td,{children:"\u5378\u8F7D"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk fix"}),(0,r.jsx)(e.td,{children:"reinstall/upgrade - \u4E0D\u4FEE\u6539 world"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk update"}),(0,r.jsx)(e.td,{children:"\u66F4\u65B0 index"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk upgrade"}),(0,r.jsx)(e.td,{children:"\u5347\u7EA7\u5305"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk cache"}),(0,r.jsx)(e.td,{children:"\u7F13\u5B58\u7BA1\u7406"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u67E5\u8BE2"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk info"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk list"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk dot"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk policy"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk search"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u4ED3\u5E93\u7BA1\u7406"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk index"}),(0,r.jsx)(e.td,{children:"\u521B\u5EFA index"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk fetch"}),(0,r.jsx)(e.td,{children:"\u4E0B\u8F7D pkg \u5230\u672C\u5730"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk manifest"}),(0,r.jsx)(e.td,{children:"\u5185\u5BB9 checksum"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk verify"}),(0,r.jsx)(e.td,{children:"\u6821\u9A8C\u5185\u5BB9\u548C\u7B7E\u540D"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u5176\u4ED6"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk audit"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk stats"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk version"}),(0,r.jsx)(e.td,{})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"flag"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"\u5168\u5C40"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-p, --root ROOTFS"}),(0,r.jsx)(e.td,{children:"/"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-X, --repository REPO"}),(0,r.jsx)(e.td,{children:"\u4FEE\u6539\u4F7F\u7528\u7684\u4ED3\u5E93"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--allow-untrusted"}),(0,r.jsx)(e.td,{children:"\u5141\u8BB8\u4F7F\u7528\u672A\u7B7E\u540D\u7684\u5305"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--arch ARCH"}),(0,r.jsx)(e.td,{children:"\u6307\u5B9A\u67B6\u6784"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--cache-dir CACHEDIR"}),(0,r.jsx)(e.td,{children:"\u6307\u5B9A\u7F13\u5B58\u76EE\u5F55 /etc/apk/cache"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--cache-max-age AGE"}),(0,r.jsx)(e.td,{children:"\u6307\u5B9A\u7F13\u5B58\u6700\u5927\u65F6\u95F4 min"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-U, --update-cache"}),(0,r.jsxs)(e.td,{children:["\u66F4\u65B0\u7F13\u5B58 -> ",(0,r.jsx)(e.code,{children:"--cache-max-age 1"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--keys-dir KEYSDIR"}),(0,r.jsx)(e.td,{children:"\u6307\u5B9A\u5BC6\u94A5\u76EE\u5F55 /etc/apk/keys/"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--no-cache"}),(0,r.jsx)(e.td,{children:"\u4E0D\u4F7F\u7528\u7F13\u5B58"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--no-network"}),(0,r.jsx)(e.td,{children:"\u4E0D\u4F7F\u7528\u7F51\u7EDC"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--no-progress"}),(0,r.jsx)(e.td,{children:"\u4E0D\u663E\u793A\u8FDB\u5EA6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--print-arch"}),(0,r.jsx)(e.td,{children:"\u6253\u5370\u67B6\u6784"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--purge"}),(0,r.jsx)(e.td,{children:"\u5378\u8F7D\u5305\u65F6\u5220\u9664\u914D\u7F6E"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--repositories-file REPOFILE"}),(0,r.jsx)(e.td,{children:"\u6307\u5B9A\u4ED3\u5E93\u6587\u4EF6 /etc/apk/repositories"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Commit"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-s, --simulate"}),(0,r.jsx)(e.td,{children:"\u6A21\u62DF"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--clean-protected"}),(0,r.jsxs)(e.td,{children:["\u4E0D\u521B\u5EFA ",(0,r.jsx)(e.code,{children:".apk-new"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--no-scripts"}),(0,r.jsx)(e.td,{children:"\u4E0D\u6267\u884C\u811A\u672C"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--no-commit-hooks"}),(0,r.jsx)(e.td,{children:"\u4E0D\u6267\u884C commit hook"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"apk add"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--initdb"}),(0,r.jsx)(e.td,{children:"\u521D\u59CB\u5316\u6570\u636E\u5E93"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-l, --latest"}),(0,r.jsx)(e.td,{children:"\u4F7F\u7528\u6700\u65B0\u7248\u672C"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-u, --upgrade"}),(0,r.jsx)(e.td,{children:"\u5347\u7EA7\u5305"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-t, --virtual NAME"}),(0,r.jsx)(e.td,{children:"\u5B89\u88C5\u865A\u62DF\u5305"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--no-chown"}),(0,r.jsx)(e.td,{children:"\u4E0D\u4FEE\u6539\u6587\u4EF6\u6240\u6709\u8005"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"apk info"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-a, --all"}),(0,r.jsx)(e.td,{children:"\u6240\u6709\u4FE1\u606F"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-d, --description"}),(0,r.jsx)(e.td,{children:"\u63CF\u8FF0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-e, --installed"}),(0,r.jsx)(e.td,{children:"\u5B89\u88C5\u72B6\u6001"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-L, --contents"}),(0,r.jsx)(e.td,{children:"\u5305\u542B\u6587\u4EF6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-P, --provides"}),(0,r.jsx)(e.td,{children:"\u63D0\u4F9B\u7684\u5305"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-r, --rdepends"}),(0,r.jsx)(e.td,{children:"\u53CD\u5411\u4F9D\u8D56"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-R, --depends"}),(0,r.jsx)(e.td,{children:"\u4F9D\u8D56"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-s, --size"}),(0,r.jsx)(e.td,{children:"\u5B89\u88C5\u5927\u5C0F"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-w, --webpage"}),(0,r.jsx)(e.td,{children:"\u7F51\u9875"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-W, --who-owns"}),(0,r.jsx)(e.td,{children:"\u6587\u4EF6\u6240\u5C5E\u5305"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--install-if"}),(0,r.jsx)(e.td,{children:"\u5B89\u88C5\u6761\u4EF6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--license"}),(0,r.jsx)(e.td,{children:"\u8BB8\u53EF\u8BC1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--replaces"}),(0,r.jsx)(e.td,{children:"\u66FF\u6362"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--rinstall-if"}),(0,r.jsx)(e.td,{children:"\u5B89\u88C5\u6761\u4EF6\u5F15\u7528"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--triggers"}),(0,r.jsx)(e.td,{children:"\u89E6\u53D1\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"apk audit"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--backup"}),(0,r.jsx)(e.td,{children:"/etc"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--system"}),(0,r.jsx)(e.td,{children:"/"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--check-permissions"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--packages"}),(0,r.jsx)(e.td,{children:"\u53EA\u8F93\u51FA\u5305\u540D"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-r, --recursive"}),(0,r.jsx)(e.td,{children:"\u9012\u5F52\u76EE\u5F55"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--packages -q"}),(0,r.jsx)(e.td,{children:"\u65E0\u7248\u672C\u53F7"})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"apk --print-arch  # x86_64\ncat /etc/apk/arch #\n\napk info -W /sbin/tunctl\n\napk audit                               # \u7CFB\u7EDF\u76EE\u524D\u53D8\u5316 - \u54EA\u4E9B\u589E\u52A0\u4E86\uFF0C\u54EA\u4E9B\u5220\u9664\u4E86\napk audit --system                      #\napk audit --packages -q | xargs apk fix # \u4FEE\u590D\u6709\u4FEE\u6539\u7684\u5305\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["/etc/apk/repositories\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"http://"}),", ",(0,r.jsx)(e.code,{children:"https://"}),", ",(0,r.jsx)(e.code,{children:"ftp://"})]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"$repository/$arch/APKINDEX.tar.gz"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"$repository/$arch/$pkgname-$pkgver-r$pkgrel.apk"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"/etc/apk/world"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"apk_name_foreach_matching \u6838\u5FC3\u5339\u914D\u903B\u8F91"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"struct apk_hash_ops {\n	ptrdiff_t	node_offset;\n	apk_blob_t	  (*get_key)(apk_hash_item item);\n	unsigned long	(*hash_key)(apk_blob_t key);\n	unsigned long	(*hash_item)(apk_hash_item item);\n	int		        (*compare)(apk_blob_t itemkey, apk_blob_t key);// \u6BD4\u8F83\u5305\u540D\n	int		        (*compare_item)(apk_hash_item item, apk_blob_t key); // \u6BD4\u8F83\u5185\u5BB9\n	void		      (*delete_item)(apk_hash_item item);\n};\n\n// \u5305\u540D\u5B57\u5217\u8868\nstruct apk_hash {\n	const struct apk_hash_ops *ops;\n	struct apk_hash_array *buckets;\n	int num_items;\n};\n"})}),"\n",(0,r.jsx)(e.h2,{id:"apkindex",children:"APKINDEX"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["APKINDEX.tar.gz\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"mailto:.SIGN.RSA.alpine-devel@lists.alpinelinux.org-6165ee59.rsa.pub",children:".SIGN.RSA.alpine-devel@lists.alpinelinux.org-6165ee59.rsa.pub"})}),"\n",(0,r.jsx)(e.li,{children:"DESCRIPTION"}),"\n",(0,r.jsx)(e.li,{children:"APKINDEX"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# APKINDEX.tar.gz \u901A\u8FC7\u7B7E\u540D\u52A0\u672A\u7B7E\u540D\u5F52\u6863\u6587\u4EF6\u6784\u9020\ncat signature.tar.gz APKINDEX.unsigned.tar.gz > APKINDEX.tar.gz\n# \u6784\u9020\u7B7E\u540D\nopenssl dgst -sha1 -sign privatekeyfile -out .SIGN.RSA.nameofpublickey APKINDEX.unsigned.tar.gz\ntar -c .SIGN.RSA.nameofpublickey | abuild-tar --cut | gzip -9 > signature.tar.gz\n# \u6784\u9020 index\napk index -o APKINDEX.unsigned.tar.gz *.apk\n\n# control.tar.gz\n#   .PKGINFO\n#   .pre-install/upgrade/deinstall\n#   .post-install/upgrade/deinstall\ncat $controldir/control.tar.gz $controldir/data.tar.gz > mypackage-1.0-r0.apk\n\ntar -c .PKGNIFO .pre-install | abuild-tar --cut | gzip -9 > $controldir/control.tar.gz\n\n# data.tar.gz\ncd $pkgdir\ntar -c * | abuild-tar --hash | gzip -9 > $controldir/data.tar.gz\n"})}),"\n",(0,r.jsx)(e.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://git.alpinelinux.org/apk-tools/",children:"https://git.alpinelinux.org/apk-tools/"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Apk_spec",children:"https://wiki.alpinelinux.org/wiki/Apk_spec"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Apkindex_format",children:"https://wiki.alpinelinux.org/wiki/Apkindex_format"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Alpine_package_format",children:"https://wiki.alpinelinux.org/wiki/Alpine_package_format"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management",children:"https://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management"})}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"cache",children:"cache"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"apk"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk cache clean"}),(0,r.jsx)(e.td,{children:"\u79FB\u9664\u4E0D\u5728 index \u7684\u5305"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk cache download [...deps]"}),(0,r.jsx)(e.td,{children:"\u4E0B\u8F7D\u5230\u7F13\u5B58\uFF0C\u9ED8\u8BA4\u4E0B\u8F7D world"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk cache purge"}),(0,r.jsxs)(e.td,{children:["-> ",(0,r.jsx)(e.code,{children:"clean --purge"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"apk cache sync ...deps"}),(0,r.jsx)(e.td,{})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"apk cache flags"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--add-dependencies"}),(0,r.jsx)(e.td,{children:"\u6DFB\u52A0 deps \u5230 world"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-a, --available"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"--ignore-conflict"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-l, --latest"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-u, --upgrade"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-s, --simulate"}),(0,r.jsx)(e.td,{children:"dry run"})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["/var/cache/apk - apk \u9ED8\u8BA4\u7F13\u5B58\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"apk add"}),", ",(0,r.jsx)(e.code,{children:"apk update"}),", ",(0,r.jsx)(e.code,{children:"apk cache clean"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["/etc/apk/cache - \u672C\u5730\u7F13\u5B58, \u79BB\u7EBF\u5305\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"apk add"}),", ",(0,r.jsx)(e.code,{children:"apk upgrade"})," \u4F1A\u68C0\u67E5\u8FD9\u4E2A\u76EE\u5F55\u907F\u514D\u4E0B\u8F7D"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"mkdir -p /var/cache/apk++\nln -s /var/cache/apk /etc/apk/cache\n"})})]})}function x(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},17776:function(n,e,s){s.d(e,{R:()=>t,x:()=>l});var d=s(7378);let r={},i=d.createContext(r);function t(n){let e=d.useContext(i);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),d.createElement(i.Provider,{value:e},n.children)}}}]);