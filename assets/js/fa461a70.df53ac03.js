"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["91221"],{961924:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>i,toc:()=>r,default:()=>u,metadata:()=>s,assets:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"service/file/nextcloud-ops","title":"Nextcloud Operations","description":"App Installation (Manual)","source":"@site/../notes/service/file/nextcloud-ops.md","sourceDirName":"service/file","slug":"/service/file/nextcloud-ops","permalink":"/notes/service/file/nextcloud-ops","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/file/nextcloud-ops.md","tags":[{"inline":true,"label":"Service","permalink":"/notes/tags/service"},{"inline":true,"label":"Nextcloud","permalink":"/notes/tags/nextcloud"},{"inline":true,"label":"Ops","permalink":"/notes/tags/ops"},{"inline":true,"label":"CLI","permalink":"/notes/tags/cli"},{"inline":true,"label":"Backup","permalink":"/notes/tags/backup"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"Nextcloud Operations","tags":["Service","Nextcloud","Ops","CLI","Backup"]},"sidebar":"docs","previous":{"title":"Nextcloud Management","permalink":"/notes/service/file/nextcloud-mgmt"},"next":{"title":"Awesome Financial Tools","permalink":"/notes/service/financial/awesome"}}'),a=t(486106),o=t(917776);let i={title:"Nextcloud Operations",tags:["Service","Nextcloud","Ops","CLI","Backup"]},l="Nextcloud Operations",c={},r=[{value:"App Installation (Manual)",id:"app-installation-manual",level:2},{value:"<code>occ</code> Command",id:"occ-command",level:2},{value:"System Configuration",id:"system-configuration",level:3},{value:"Config Export/Import",id:"config-exportimport",level:3},{value:"SAML / SSO Configuration",id:"saml--sso-configuration",level:3},{value:"<code>occ</code> Help Reference",id:"occ-help-reference",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"nextcloud-operations",children:"Nextcloud Operations"})}),"\n",(0,a.jsx)(n.h2,{id:"app-installation-manual",children:"App Installation (Manual)"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://apps.nextcloud.com/",children:"Nextcloud App Store"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://github.com/nextcloud/appstore",children:"nextcloud/appstore"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://nextcloudappstore.readthedocs.io/en/latest/",children:"Documentation"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Example: Announcement Center\ncurl -LOC- https://github.com/nextcloud/announcementcenter/releases/download/v3.8.1/announcementcenter-3.8.1.tar.gz\n# Upload to server's apps directory\nscp announcementcenter-3.8.1.tar.gz admin@server:/data/nextcloud/apps\n\n# App location: /var/www/nextcloud/apps\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"occ-command",children:[(0,a.jsx)(n.code,{children:"occ"})," Command"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/occ_command.html",children:"OCC Command Documentation"})}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"system-configuration",children:"System Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Check status\n./occ status\n\n# Trusted Domains\n./occ config:system:get trusted_domains\n./occ config:system:set trusted_domains 1 --value=192.168.1.1\n\n# Offline Mode (Has Internet Connection)\n./occ config:system:set has_internet_connection --value=false --type=boolean\n\n# Default Language\n./occ config:system:set default_language --value=zh_CN\n./occ config:system:set default_locale --value=zh\n# Typo fix in original content: default_localenguage -> default_locale\n\n# Proxy\n./occ config:system:set proxy --value=socks5://192.168.36.8:8888\n"})}),"\n",(0,a.jsx)(n.h3,{id:"config-exportimport",children:"Config Export/Import"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# List config (Hide sensitive)\n./occ config:list --private\n# List system config\n./occ config:list system --output=plain\n\n# Import config via JSON\ncat << JSON | ./occ config:import\n{\n  "system":{\n    "default_language" :"zh_CN",\n    "default_locale": "zh"\n  }\n}\nJSON\n'})}),"\n",(0,a.jsx)(n.h3,{id:"saml--sso-configuration",children:"SAML / SSO Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'KC_HOST=http://192.168.36.8:8080\nKC_REALM=incos\n\ncat << JSON | ./occ config:import\n{\n    "apps": {\n        "user_saml": {\n            "sp-privateKey": "",\n            "sp-x509cert": "",\n            "idp-x509cert": "",\n            "sp-name-id-format": "urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",\n            "general-uid_mapping": "REMOTE_USER",\n            "general-idp0_display_name": "SSO",\n            "idp-singleSignOnService.url": "$KC_HOST/auth/realms/$KC_REALM/protocol/saml",\n            "idp-entityId": "$KC_HOST/auth/realms/$KC_REALM",\n            "idp-singleLogoutService.url": "$KC_HOST/auth/realms/$KC_REALM/protocol/saml",\n            "security-authnRequestsSigned": "1",\n            "security-logoutRequestSigned": "1",\n            "security-logoutResponseSigned": "1",\n            "security-wantMessagesSigned": "1",\n            "security-wantAssertionsSigned": "1",\n            "providerIds": "1",\n            "general-require_provisioned_account": "0",\n            "general-allow_multiple_user_back_ends": "0",\n            "general-use_saml_auth_for_desktop": "1"\n        }\n    }\n}\nJSON\n\n# Scan files for user\ndocker exec -u www-data nextcloud php occ files:scan --all\n'})}),"\n",(0,a.jsxs)(n.h2,{id:"occ-help-reference",children:[(0,a.jsx)(n.code,{children:"occ"})," Help Reference"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"Nextcloud 19.0.0\n\nUsage: command [options] [arguments]\n\nAvailable commands:\n  check               check dependencies\n  status              show status\n  upgrade             run upgrade routines\n\n  app:enable          enable an app\n  app:install         install an app\n  app:list            List all available apps\n  app:remove          remove an app\n  app:update          update an app\n\n  config:list         List all configs\n  config:system:get   Get a system config value\n  config:system:set   Set a system config value\n\n  db:convert-type     Convert database type\n\n  encryption:status   Lists encryption status\n\n  files:scan          rescan filesystem\n\n  ldap:show-config    shows LDAP configuration\n\n  log:tail            Tail logfile\n\n  maintenance:mode    set maintenance mode\n  maintenance:repair  repair installation\n\n  user:add            adds a user\n  user:resetpassword  Resets password\n  user:list           list users\n"})})]})}function u(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},917776:function(e,n,t){t.d(n,{R:()=>i,x:()=>l});var s=t(7378);let a={},o=s.createContext(a);function i(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);