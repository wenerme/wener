"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["293450"],{599938:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>t,toc:()=>a,default:()=>h,metadata:()=>l,assets:()=>o,contentTitle:()=>i});var l=JSON.parse('{"id":"db/relational/mysql/mysql-conf","title":"MySQL \u914D\u7F6E","description":"mysqld","source":"@site/../notes/db/relational/mysql/mysql-conf.md","sourceDirName":"db/relational/mysql","slug":"/db/relational/mysql/conf","permalink":"/notes/db/relational/mysql/conf","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/mysql/mysql-conf.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1690946986000,"frontMatter":{"title":"MySQL \u914D\u7F6E"},"sidebar":"docs","previous":{"title":"Binary Log","permalink":"/notes/db/relational/mysql/binlog"},"next":{"title":"MySQL Cookbook","permalink":"/notes/db/relational/mysql/cookbook"}}'),r=s(486106),c=s(917776);let t={title:"MySQL \u914D\u7F6E"},i="MySQL Conf",o={},a=[{value:"\u914D\u7F6E\u65B9\u5F0F",id:"\u914D\u7F6E\u65B9\u5F0F",level:2},{value:"query_cache_size",id:"query_cache_size",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mysql-conf",children:"MySQL Conf"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mysqld --verbose --help\nmysqld --no-defaults --verbose --help\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SHOW VARIABLES;\n\nselect * from performance_schema.persisted_variables;\nselect * from performance_schema.global_variables;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"mysqld"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--character-set-server=utf8mb4\n--collation-server=utf8mb4_unicode_ci\n--max-connections=2000\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"my.cnf"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"--defaults-extra-file"})}),"\n",(0,r.jsxs)(n.li,{children:[".mylogin.cnf\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"--no-defaults"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["mysqld-auto.cnf\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"persisted_globals_load"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"SET PERSIST"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"mysql_config_editor"}),"\n",(0,r.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/notes/db/relational/mysql/log",children:"MySQL Log"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html",children:"https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/option-files.html",children:"https://dev.mysql.com/doc/refman/8.0/en/option-files.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u914D\u7F6E\u65B9\u5F0F",children:"\u914D\u7F6E\u65B9\u5F0F"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u542F\u52A8\u53C2\u6570\u914D\u7F6E"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mysqld --sort-buffer-size=256K --max-allowed-packet=1G\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"my.cnf"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[mysqld]\nsort_buffer_size=256K\nmax_allowed_packet=1G\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u52A8\u6001\u914D\u7F6E"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SET GLOBAL max_connections = 1000;\nSET @@GLOBAL.max_connections = 1000;\n\n-- mysqld-auto.cnf\nSET PERSIST max_connections = 1000;\nSET @@PERSIST.max_connections = 1000;\n\n-- \u4E0D\u4FEE\u6539\u5F53\u524D\nSET PERSIST_ONLY back_log = 1000;\nSET @@PERSIST_ONLY.back_log = 1000;\n\n-- \u4F1A\u8BDD\u7EF4\u5EA6\nSET SESSION sql_mode = 'TRADITIONAL';\nSET @@SESSION.sql_mode = 'TRADITIONAL';\nSET @@sql_mode = 'TRADITIONAL';\n"})}),"\n",(0,r.jsx)(n.h2,{id:"query_cache_size",children:"query_cache_size"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"8.0 \u79FB\u9664"}),"\n",(0,r.jsx)(n.li,{children:"5.6 \u7981\u7528"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dba.stackexchange.com/a/217578/234272",children:"https://dba.stackexchange.com/a/217578/234272"})}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},917776:function(e,n,s){s.d(n,{R:()=>t,x:()=>i});var l=s(7378);let r={},c=l.createContext(r);function t(e){let n=l.useContext(c);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(c.Provider,{value:n},e.children)}}}]);