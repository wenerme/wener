"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["61161"],{46670:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>a,toc:()=>d,default:()=>u,metadata:()=>t,assets:()=>s,contentTitle:()=>o});var t=JSON.parse('{"id":"web/script/lib/konva","title":"konva","description":"- konvajs/konva","source":"@site/../notes/web/script/lib/konva.md","sourceDirName":"web/script/lib","slug":"/web/script/lib/konva","permalink":"/notes/web/script/lib/konva","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/script/lib/konva.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1734410758000,"frontMatter":{"title":"konva"},"sidebar":"docs","previous":{"title":"jstat","permalink":"/notes/web/script/lib/jstat"},"next":{"title":"ky","permalink":"/notes/web/script/lib/ky"}}'),r=i(86106),l=i(17776);let a={title:"konva"},o="konva",s={},d=[{value:"Notes",id:"notes",level:2},{value:"draggable",id:"draggable",level:2}];function c(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"konva",children:"konva"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/konvajs/konva",children:"konvajs/konva"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"MIT, JS+TS"}),"\n",(0,r.jsx)(e.li,{children:"Canvas 2D"}),"\n",(0,r.jsx)(e.li,{children:"\u7EA7\u8054\u5173\u7CFB Stage - Layer - Group - Shape"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://konvajs.org/docs/performance/All_Performance_Tips.html",children:"All Konva performance tips list"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Stage - \u6839\u5BB9\u5668/\u7ED8\u56FE\u533A\u57DF\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5BBD\u5EA6\u3001\u9AD8\u5EA6\u3001\u7F29\u653E\u3001\u62D6\u62FD"}),"\n",(0,r.jsx)(e.li,{children:"\u4E8B\u4EF6\u76D1\u542C"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Layer - \u5206\u79BB\u7ED8\u56FE\u5185\u5BB9\u7684\u903B\u8F91\u5C42\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u62E5\u6709\u72EC\u7ACB\u7684 Canvas"}),"\n",(0,r.jsx)(e.li,{children:"\u72EC\u7ACB\u7684\u900F\u660E\u5EA6\u3001\u53EF\u89C1\u6027\u548C\u7ED8\u56FE\u987A\u5E8F\u7BA1\u7406"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Group\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5206\u7EC4\u7BA1\u7406\u4E00\u7EC4\u56FE\u5F62\u7684\u5BB9\u5668"}),"\n",(0,r.jsx)(e.li,{children:"\u5171\u540C\u64CD\u4F5C\uFF08\u5982\u79FB\u52A8\u3001\u7F29\u653E\u3001\u65CB\u8F6C\u7B49\uFF09"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Shape\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7ED8\u56FE\u7684\u6700\u5C0F\u5355\u4F4D"}),"\n",(0,r.jsx)(e.li,{children:"\u4F4D\u7F6E\u3001\u989C\u8272\u3001\u5927\u5C0F"}),"\n",(0,r.jsx)(e.li,{children:"\u652F\u6301\u4E8B\u4EF6\u76D1\u542C"}),"\n",(0,r.jsx)(e.li,{children:"Rect, Circle, Ellipse"}),"\n",(0,r.jsx)(e.li,{children:"Line, Polygon, Spline, Blob"}),"\n",(0,r.jsx)(e.li,{children:"Sprite"}),"\n",(0,r.jsx)(e.li,{children:"Image, Text, TextPath, Star, Ring, Arc, Label, SVG Path, RegularPolygon, Arrow"}),"\n",(0,r.jsxs)(e.li,{children:["\u901A\u8FC7 ",(0,r.jsx)(e.code,{children:"sceneFunc={(context, shape)=>{}}"})," \u6765\u5B9E\u73B0\u81EA\u5B9A\u4E49\u56FE\u50CF\u753B\u4EFB\u610F\u5185\u5BB9"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Image"}),"\n",(0,r.jsx)(e.li,{children:"offset \u662F\u5143\u7D20\u53D8\u5316\u4E2D\u5FC3\uFF0C\u800C\u4E0D\u662F\u4F4D\u7F6E"}),"\n",(0,r.jsx)(e.li,{children:"Konva.Image"}),"\n",(0,r.jsx)(e.li,{children:"window.Image"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/konvajs/use-image",children:"konvajs/use-image"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"npm:use-image"}),"\n",(0,r.jsx)(e.li,{children:"url -> DOM image"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Node -> Container -> Stage & Layer & Group"}),"\n",(0,r.jsx)(e.li,{children:"Node -> Shape"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"export interface NodeConfig {\n  [index: string]: any;\n  id?: string;\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  visible?: boolean;\n  listening?: boolean;\n  name?: string;\n  opacity?: number;\n  scale?: Vector2d;\n  scaleX?: number;\n  skewX?: number;\n  skewY?: number;\n  scaleY?: number;\n  rotation?: number;\n  rotationDeg?: number;\n  offset?: Vector2d;\n  offsetX?: number;\n  offsetY?: number;\n  draggable?: boolean;\n  dragDistance?: number;\n  dragBoundFunc?: (this: Node, pos: Vector2d) => Vector2d;\n  preventDefault?: boolean;\n  globalCompositeOperation?: globalCompositeOperationType;\n  filters?: Array<Filter>;\n}\n\nexport type ClipFuncOutput = void | [Path2D | CanvasFillRule] | [Path2D, CanvasFillRule];\nexport interface ContainerConfig extends NodeConfig {\n  clearBeforeDraw?: boolean;\n  clipFunc?: (ctx: SceneContext) => ClipFuncOutput;\n  clipX?: number;\n  clipY?: number;\n  clipWidth?: number;\n  clipHeight?: number;\n}\n\nexport interface ShapeConfig extends NodeConfig {\n  fill?: string | CanvasGradient;\n  fillPatternImage?: HTMLImageElement;\n  fillPatternX?: number;\n  fillPatternY?: number;\n  fillPatternOffset?: Vector2d;\n  fillPatternOffsetX?: number;\n  fillPatternOffsetY?: number;\n  fillPatternScale?: Vector2d;\n  fillPatternScaleX?: number;\n  fillPatternScaleY?: number;\n  fillPatternRotation?: number;\n  fillPatternRepeat?: string;\n  fillLinearGradientStartPoint?: Vector2d;\n  fillLinearGradientStartPointX?: number;\n  fillLinearGradientStartPointY?: number;\n  fillLinearGradientEndPoint?: Vector2d;\n  fillLinearGradientEndPointX?: number;\n  fillLinearGradientEndPointY?: number;\n  fillLinearGradientColorStops?: Array<number | string>;\n  fillRadialGradientStartPoint?: Vector2d;\n  fillRadialGradientStartPointX?: number;\n  fillRadialGradientStartPointY?: number;\n  fillRadialGradientEndPoint?: Vector2d;\n  fillRadialGradientEndPointX?: number;\n  fillRadialGradientEndPointY?: number;\n  fillRadialGradientStartRadius?: number;\n  fillRadialGradientEndRadius?: number;\n  fillRadialGradientColorStops?: Array<number | string>;\n  fillEnabled?: boolean;\n  fillPriority?: string;\n  fillRule?: CanvasFillRule;\n  stroke?: string | CanvasGradient;\n  strokeWidth?: number;\n  fillAfterStrokeEnabled?: boolean;\n  hitStrokeWidth?: number | string;\n  strokeScaleEnabled?: boolean;\n  strokeHitEnabled?: boolean;\n  strokeEnabled?: boolean;\n  lineJoin?: LineJoin;\n  lineCap?: LineCap;\n  sceneFunc?: (con: Context, shape: Shape) => void;\n  hitFunc?: (con: Context, shape: Shape) => void;\n  shadowColor?: string;\n  shadowBlur?: number;\n  shadowOffset?: Vector2d;\n  shadowOffsetX?: number;\n  shadowOffsetY?: number;\n  shadowOpacity?: number;\n  shadowEnabled?: boolean;\n  shadowForStrokeEnabled?: boolean;\n  dash?: number[];\n  dashOffset?: number;\n  dashEnabled?: boolean;\n  perfectDrawEnabled?: boolean;\n}\n\nexport interface Vector2d {\n  x: number;\n  y: number;\n}\nexport type Filter = (this: Node, imageData: ImageData) => void;\ntype globalCompositeOperationType =\n  | ''\n  | 'source-over'\n  | 'source-in'\n  | 'source-out'\n  | 'source-atop'\n  | 'destination-over'\n  | 'destination-in'\n  | 'destination-out'\n  | 'destination-atop'\n  | 'lighter'\n  | 'copy'\n  | 'xor'\n  | 'multiply'\n  | 'screen'\n  | 'overlay'\n  | 'darken'\n  | 'lighten'\n  | 'color-dodge'\n  | 'color-burn'\n  | 'hard-light'\n  | 'soft-light'\n  | 'difference'\n  | 'exclusion'\n  | 'hue'\n  | 'saturation'\n  | 'color'\n  | 'luminosity';\n\nexport interface KonvaEventObject<EventType, This = Node> {\n  type: string;\n  target: Shape | Stage;\n  evt: EventType;\n  pointerId: number;\n  currentTarget: This;\n  cancelBubble: boolean;\n  child?: Node;\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"draggable",children:"draggable"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5904\u7406\u7684\u662F xy"}),"\n",(0,r.jsx)(e.li,{children:"\u53EF\u4EE5\u901A\u8FC7\u76D1\u542C drageEnd \u6765\u83B7\u53D6\u6700\u7EC8\u4F4D\u7F6E"}),"\n"]})]})}function u(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},17776:function(n,e,i){i.d(e,{R:()=>a,x:()=>o});var t=i(7378);let r={},l=t.createContext(r);function a(n){let e=t.useContext(l);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);