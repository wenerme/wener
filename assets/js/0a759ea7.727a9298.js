"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["85245"],{44967:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>c,toc:()=>a,default:()=>p,metadata:()=>t,assets:()=>i,contentTitle:()=>d});var t=JSON.parse('{"id":"devops/docker/dockerd","title":"dockerd","description":"- https://docs.docker.com/engine/reference/commandline/dockerd/","source":"@site/../notes/devops/docker/dockerd.md","sourceDirName":"devops/docker","slug":"/devops/docker/dockerd","permalink":"/notes/devops/docker/dockerd","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/docker/dockerd.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1739157197000,"frontMatter":{"title":"dockerd"},"sidebar":"docs","previous":{"title":"Docker Version","permalink":"/notes/devops/docker/version"},"next":{"title":"Watchtower","permalink":"/notes/devops/docker/watchtower"}}'),s=r(86106),o=r(17776);let c={title:"dockerd"},d="dockerd",i={},a=[{value:"conf",id:"conf",level:2}];function l(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"dockerd",children:"dockerd"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/reference/commandline/dockerd/",children:"https://docs.docker.com/engine/reference/commandline/dockerd/"})}),"\n",(0,s.jsxs)(n.li,{children:["--insecure-registry\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["secure tls \u6216 ",(0,s.jsx)(n.code,{children:"/etc/docker/certs.d/myregistry:5000/ca.crt"})]}),"\n",(0,s.jsx)(n.li,{children:"insecure - http \u6216 \u4E0D\u9A8C\u8BC1\u8BC1\u4E66"}),"\n",(0,s.jsxs)(n.li,{children:["\u652F\u6301\u683C\u5F0F\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"myregistry:5000"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"10.1.0.0/16"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"daemon.json"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "insecure-registries": ["localhost:5000"],\n  "registry-mirrors": ["https://docker.wener.me"]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"conf",children:"conf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "allow-nondistributable-artifacts": [],\n  "api-cors-header": "",\n  "authorization-plugins": [],\n  "bip": "",\n  "bridge": "",\n  "builder": {\n    "gc": {\n      "enabled": true,\n      "defaultKeepStorage": "10GB",\n      "policy": [\n        { "keepStorage": "10GB", "filter": ["unused-for=2200h"] },\n        { "keepStorage": "50GB", "filter": ["unused-for=3300h"] },\n        { "keepStorage": "100GB", "all": true }\n      ]\n    }\n  },\n  "cgroup-parent": "",\n  "containerd": "/run/containerd/containerd.sock",\n  "containerd-namespace": "docker",\n  "containerd-plugins-namespace": "docker-plugins",\n  "data-root": "",\n  "debug": true,\n  "default-address-pools": [\n    {\n      "base": "172.30.0.0/16",\n      "size": 24\n    },\n    {\n      "base": "172.31.0.0/16",\n      "size": 24\n    }\n  ],\n  "default-cgroupns-mode": "private",\n  "default-gateway": "",\n  "default-gateway-v6": "",\n  "default-network-opts": {},\n  "default-runtime": "runc",\n  "default-shm-size": "64M",\n  "default-ulimits": {\n    "nofile": {\n      "Hard": 64000,\n      "Name": "nofile",\n      "Soft": 64000\n    }\n  },\n  "dns": [],\n  "dns-opts": [],\n  "dns-search": [],\n  "exec-opts": [],\n  "exec-root": "",\n  "experimental": false,\n  "features": {\n    "cdi": true,\n    "containerd-snapshotter": true\n  },\n  "fixed-cidr": "",\n  "fixed-cidr-v6": "",\n  "group": "",\n  "host-gateway-ip": "",\n  "hosts": [],\n  "proxies": {\n    "http-proxy": "http://proxy.example.com:80",\n    "https-proxy": "https://proxy.example.com:443",\n    "no-proxy": "*.test.example.com,.example.org"\n  },\n  "icc": false,\n  "init": false,\n  "init-path": "/usr/libexec/docker-init",\n  "insecure-registries": [],\n  "ip": "0.0.0.0",\n  "ip-forward": false,\n  "ip-masq": false,\n  "iptables": false,\n  "ip6tables": false,\n  "ipv6": false,\n  "labels": [],\n  "live-restore": true,\n  "log-driver": "json-file",\n  "log-format": "text",\n  "log-level": "",\n  "log-opts": {\n    "cache-disabled": "false",\n    "cache-max-file": "5",\n    "cache-max-size": "20m",\n    "cache-compress": "true",\n    "env": "os,customer",\n    "labels": "somelabel",\n    "max-file": "5",\n    "max-size": "10m"\n  },\n  "max-concurrent-downloads": 3,\n  "max-concurrent-uploads": 5,\n  "max-download-attempts": 5,\n  "mtu": 0,\n  "no-new-privileges": false,\n  "node-generic-resources": ["NVIDIA-GPU=UUID1", "NVIDIA-GPU=UUID2"],\n  "pidfile": "",\n  "raw-logs": false,\n  "registry-mirrors": [],\n  "runtimes": {\n    "cc-runtime": {\n      "path": "/usr/bin/cc-runtime"\n    },\n    "custom": {\n      "path": "/usr/local/bin/my-runc-replacement",\n      "runtimeArgs": ["--debug"]\n    }\n  },\n  "seccomp-profile": "",\n  "selinux-enabled": false,\n  "shutdown-timeout": 15,\n  "storage-driver": "",\n  "storage-opts": [],\n  "swarm-default-advertise-addr": "",\n  "tls": true,\n  "tlscacert": "",\n  "tlscert": "",\n  "tlskey": "",\n  "tlsverify": true,\n  "userland-proxy": false,\n  "userland-proxy-path": "/usr/libexec/docker-proxy",\n  "userns-remap": ""\n}\n'})})]})}function p(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},17776:function(e,n,r){r.d(n,{R:()=>c,x:()=>d});var t=r(7378);let s={},o=t.createContext(s);function c(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);