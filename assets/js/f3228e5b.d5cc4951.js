"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["76259"],{74530:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>d,toc:()=>a,default:()=>h,metadata:()=>t,assets:()=>o,contentTitle:()=>l});var t=JSON.parse('{"id":"voip/asterisk/chan_dongle","title":"chan_dongle","description":"- \u662F\u4EC0\u4E48\uFF1F","source":"@site/../notes/voip/asterisk/chan_dongle.md","sourceDirName":"voip/asterisk","slug":"/voip/asterisk/chan_dongle","permalink":"/notes/voip/asterisk/chan_dongle","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/voip/asterisk/chan_dongle.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1617462276000,"frontMatter":{"title":"chan_dongle"},"sidebar":"docs","previous":{"title":"DAHDi Channel","permalink":"/notes/voip/asterisk/chan_dahdi"},"next":{"title":"chan_extra","permalink":"/notes/voip/asterisk/chan_extra"}}'),s=i(86106),r=i(17776);let d={title:"chan_dongle"},l="chan_dongle",o={},a=[{value:"dongle.conf",id:"dongleconf",level:2},{value:"command",id:"command",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"chan_dongle",children:"chan_dongle"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u662F\u4EC0\u4E48\uFF1F\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Asterisk \u652F\u6301\u5916\u7F6E GSM \u6A21\u5757"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/bg111/asterisk-chan-dongle/wiki/Requirements-and-Limitations",children:"Requirements and Limitations"})}),"\n",(0,s.jsxs)(n.li,{children:["\u6E90\u7801\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u76EE\u524D\u5927\u591A\u4F7F\u7528 ",(0,s.jsx)(n.a,{href:"https://github.com/oleg-krv/asterisk-chan-dongle",children:"oleg-krv/asterisk-chan-dongle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u6700\u8FD1\u63D0\u4EA4 fork ",(0,s.jsx)(n.a,{href:"https://github.com/phcoder/asterisk-chan-dongle",children:"phcoder/asterisk-chan-dongle"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/100809316",children:"OpenWRT\u901A\u8FC73G Modem\u52A0asterisk\u5C06GSM\u901A\u8BDD\u8F6C\u4E3ASIP"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"apk add asterisk-chan-dongle\n\n# \u914D\u7F6E\ncp /etc/asterisk/dongle.conf.sample /etc/asterisk/dongle.conf\n\n# \u52A0\u8F7D\u6A21\u5757\nasterisk -rx 'module load chan_dongle.so'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"dongleconf",children:"dongle.conf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[general]\n\ninterval=15			; \u5C1D\u8BD5\u8FDE\u63A5\u8BBE\u5907\u7684\u95F4\u9694\n\n;------------------------------ JITTER BUFFER CONFIGURATION --------------------------\n;jbenable = yes			; Enables the use of a jitterbuffer on the receiving side of a\n				; Dongle channel. Defaults to \"no\". An enabled jitterbuffer will\n				; be used only if the sending side can create and the receiving\n				; side can not accept jitter. The Dongle channel can't accept jitter,\n				; thus an enabled jitterbuffer on the receive Dongle side will always\n				; be used if the sending side can create jitter.\n\n;jbforce = no			; Forces the use of a jitterbuffer on the receive side of a Dongle\n				; channel. Defaults to \"no\".\n\n;jbmaxsize = 200		; Max length of the jitterbuffer in milliseconds.\n\n;jbresyncthreshold = 1000	; Jump in the frame timestamps over which the jitterbuffer is\n				; resynchronized. Useful to improve the quality of the voice, with\n				; big jumps in/broken timestamps, usually sent from exotic devices\n				; and programs. Defaults to 1000.\n\n;jbimpl = fixed			; Jitterbuffer implementation, used on the receiving side of a Dongle\n				; channel. Two implementations are currently available - \"fixed\"\n				; (with size always equals to jbmaxsize) and \"adaptive\" (with\n				; variable size, actually the new jb of IAX2). Defaults to fixed.\n\n;jbtargetextra = 40		; This option only affects the jb when 'jbimpl = adaptive' is set.\n				; The option represents the number of milliseconds by which the new jitter buffer\n				; will pad its size. the default is 40, so without modification, the new\n				; jitter buffer will set its size to the jitter value plus 40 milliseconds.\n				; increasing this value may help if your network normally has low jitter,\n				; but occasionally has spikes.\n\n;jblog = no			; Enables jitterbuffer frame logging. Defaults to \"no\".\n;-----------------------------------------------------------------------------------\n\n; \u9ED8\u8BA4\u8BBE\u7F6E\n[defaults]\n\ncontext=default			; \u547C\u5165\u9ED8\u8BA4 context\ngroup=0				      ; calling group\nrxgain=0			      ; increase the incoming volume; may be negative\ntxgain=0			      ; increase the outgoint volume; may be negative\nautodeletesms=yes		; \u81EA\u52A8\u5220\u9664\u6536\u5230\u7684\u77ED\u4FE1\nresetdongle=yes			; reset dongle during initialization with ATZ command\nu2diag=-1			      ; set ^U2DIAG parameter on device (0 = disable everything except modem function) ; -1 not use ^U2DIAG command\nusecallingpres=yes	; use the caller ID presentation or not\ncallingpres=allowed_passed_screen ; set caller ID presentation		by default use default network settings\ndisablesms=no			; disable of SMS reading from device when received\n				;  chan_dongle has currently a bug with SMS reception. When a SMS gets in during a\n				;  call chan_dongle might crash. Enable this option to disable sms reception.\n				;  default = no\n\nlanguage=en			  ; \u901A\u9053\u9ED8\u8BA4\u8BED\u8A00\nsmsaspdu=yes			; PDU \u65B9\u5F0F\u53D1\u9001\u77ED\u4FE1\nmindtmfgap=45			; minimal interval from end of previews DTMF from begining of next in ms\nmindtmfduration=80		; minimal DTMF tone duration in ms\nmindtmfinterval=200		; minimal interval between ends of DTMF of same digits in ms\n\ncallwaiting=auto		; if 'yes' allow incoming calls waiting; by default use network settings\n				; if 'no' waiting calls just ignored\ndisable=no			; OBSOLETED by initstate: if 'yes' no load this device and just ignore this section\n\ninitstate=start			; specified initial state of device, must be one of 'stop' 'start' 'remote'\n				;   'remove' same as 'disable=yes'\n\nexten=+1234567890		; exten for start incoming calls, only in case of Subscriber Number not available!, also set to CALLERID(ndid)\n\ndtmf=relax			; control of incoming DTMF detection, possible values:\n				;   off	   - off DTMF tones detection, voice data passed to asterisk unaltered\n				;              use this value for gateways or if not use DTMF for AVR or inside dialplan\n				;   inband - do DTMF tones detection\n				;   relax  - like inband but with relaxdtmf option\n				;  default is 'relax' by compatibility reason\n\n; \u8BBE\u5907\n[dongle0]\naudio=/dev/ttyUSB1		; \u97F3\u9891 tty \u7AEF\u53E3\ndata=/dev/ttyUSB2		  ; AT \u547D\u4EE4 tty \u7AEF\u53E3\n\n; \u4F7F\u7528 imei, imsi \u53EF\u5FFD\u7565 audio, data \u914D\u7F6E - Linux \u4E0B\u80FD\u81EA\u52A8\u53D1\u73B0\n; audio \u548C data \u914D\u7F6E\u4F18\u5148\n; 15 \u4E2A\u6570\u5B57\nimei=123456789012345\nimsi=123456789012345\n"})}),"\n",(0,s.jsx)(n.h2,{id:"command",children:"command"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"cmd"}),(0,s.jsx)(n.th,{children:"desc"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle callwaiting"}),(0,s.jsx)(n.td,{children:"Enable/Disable Call-Waiting on the dongle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle cmd"}),(0,s.jsx)(n.td,{children:"Send commands to port for debugging"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle discovery"}),(0,s.jsx)(n.td,{children:"Discovery devices and create config"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle pdu"}),(0,s.jsx)(n.td,{children:"Send PDU of SMS from the dongle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle reload"}),(0,s.jsx)(n.td,{children:"Reload dongle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle remove"}),(0,s.jsx)(n.td,{children:"Remove dongle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle reset"}),(0,s.jsx)(n.td,{children:"Reset dongle now"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle restart"}),(0,s.jsx)(n.td,{children:"Restart dongle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle show device settings"}),(0,s.jsx)(n.td,{children:"Show Dongle device settings"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle show device state"}),(0,s.jsx)(n.td,{children:"Show Dongle device state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle show device statistics"}),(0,s.jsx)(n.td,{children:"Show Dongle device statistics"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle show devices"}),(0,s.jsx)(n.td,{children:"Show Dongle devices state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle show version"}),(0,s.jsx)(n.td,{children:"Show module version"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle sms"}),(0,s.jsx)(n.td,{children:"Send SMS from the dongle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle start"}),(0,s.jsx)(n.td,{children:"Start dongle"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"`dongle stop <now"}),(0,s.jsx)(n.td,{children:"gracefully"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dongle ussd"}),(0,s.jsx)(n.td,{children:"Send USSD commands to the dongle"})]})]})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["IMSI ",(0,s.jsx)(n.a,{href:"https://zh.wikipedia.org/wiki/%E5%9B%BD%E9%99%85%E7%A7%BB%E5%8A%A8%E7%94%A8%E6%88%B7%E8%AF%86%E5%88%AB%E7%A0%81",children:"https://zh.wikipedia.org/wiki/\u56FD\u9645\u79FB\u52A8\u7528\u6237\u8BC6\u522B\u7801"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["IMEI ",(0,s.jsx)(n.a,{href:"https://zh.wikipedia.org/wiki/IMEI",children:"https://zh.wikipedia.org/wiki/IMEI"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.quora.com/What-is-the-difference-between-ICCID-IMSI-and-IMEI-numbers",children:"https://www.quora.com/What-is-the-difference-between-ICCID-IMSI-and-IMEI-numbers"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["iPhone \u83B7\u53D6\u65B9\u5F0F",(0,s.jsx)(n.a,{href:"https://support.apple.com/zh-cn/HT204073",children:"https://support.apple.com/zh-cn/HT204073"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.dc-unlocker.com/",children:"https://www.dc-unlocker.com/"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"http://a-zgsm.com/huawei.php",children:"http://a-zgsm.com/huawei.php"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/bg111/asterisk-chan-dongle",children:"https://github.com/bg111/asterisk-chan-dongle"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"http://www.modemunlock.com/huawei-modem-firmwares-download-all-huawei-firmwares",children:"http://www.modemunlock.com/huawei-modem-firmwares-download-all-huawei-firmwares"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["USSD -> ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Unstructured_Supplementary_Service_Data",children:"https://en.wikipedia.org/wiki/Unstructured_Supplementary_Service_Data"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["PDU ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Protocol_data_unit",children:"https://en.wikipedia.org/wiki/Protocol_data_unit"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"http://www.smartposition.nl/resources/sms_pdu.html",children:"http://www.smartposition.nl/resources/sms_pdu.html"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"smsc Short Message Service Center\uFF08\u77ED\u6D88\u606F\u670D\u52A1\u4E2D\u5FC3\uFF09"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'$ blkid /dev/sr1\n# /dev/sr1: UUID="2009-12-16-02-00-00-00" LABEL="Mobile Partner" TYPE="iso9660" PTTYPE="mac"\nmount -t iso9660 /dev/sr1 /mnt/a\n\n# MAC\nioreg -p IOUSB -l -b | grep -10 -i huawei\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://m2msupport.net/m2msupport/module-tester/",children:"http://m2msupport.net/m2msupport/module-tester/"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://wiki.archlinux.org/index.php/Huawei_E1550_3G_modem",children:"https://wiki.archlinux.org/index.php/Huawei_E1550_3G_modem"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'apk add screen usb-modeswitch-udev usbutils\n\n# \u63D2\u5165 USB\n# \u53EF\u4EE5\u8BBF\u95EE\u5230\u9644\u5E26\u7684\u5B58\u50A8\nblkid /dev/sr1\n# /dev/sr1: UUID="2009-12-16-02-00-00-00" LABEL="Mobile Partner" TYPE="iso9660" PTTYPE="mac"\n# mount -t iso9660 /dev/sr1 /mnt/a\n# \u67E5\u770B product\nlsusb.py\n# \u5207\u6362\u4E3A modem \u6A21\u5F0F, \u66FF\u6362\u4E3A\u81EA\u5DF1\u7684\n# lsusb.py 2>/dev/null | sed -nre \'s/^.*?12d1:(\\S+).*/\\1/p\'\nPRODUCT_ID=`lsusb.py 2>/dev/null | sed -nre \'s/^.*?12d1:(\\S+).*/\\1/p\'`\n/lib/udev/usb_modeswitch --vendor 0x12d1 --product=0x$PRODUCT_ID --type option-zerocd\nmodprobe usbserial vendor=0x12d1 product=0x$PRODUCT_ID\n\n# 1001 \u7684\u4F1A\u51FA\u6765\u4E09\u4E2A\u7AEF\u53E3, \u5206\u522B\u4E3A modem,diag,pcui\n# 1003 \u7684\u4E0D\u4F1A\u6709 diag, \u76EE\u524D\u731C\u6D4B\u4E3A\u8BED\u97F3\u62E8\u53F7\n'})})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},17776:function(e,n,i){i.d(n,{R:()=>d,x:()=>l});var t=i(7378);let s={},r=t.createContext(s);function d(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);