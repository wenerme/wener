"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["43585"],{2996:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>l,toc:()=>c,default:()=>a,metadata:()=>s,assets:()=>d,contentTitle:()=>o});var s=JSON.parse('{"id":"os/linux/init/init-awesome","title":"Init Awesome","description":"supervisor","source":"@site/../notes/os/linux/init/init-awesome.md","sourceDirName":"os/linux/init","slug":"/os/linux/init/awesome","permalink":"/notes/os/linux/init/awesome","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/init/init-awesome.md","tags":[{"inline":true,"label":"Awesome","permalink":"/notes/tags/awesome"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1718079305000,"frontMatter":{"title":"Init Awesome","tags":["Awesome"]},"sidebar":"docs","previous":{"title":"hostname","permalink":"/notes/os/linux/hostname"},"next":{"title":"OpenRC","permalink":"/notes/os/linux/init/openrc"}}'),t=i(86106),r=i(17776);let l={title:"Init Awesome",tags:["Awesome"]},o="Init Awesome",d={},c=[{value:"supervisor",id:"supervisor",level:2},{value:"Pure Init",id:"pure-init",level:2},{value:"docker",id:"docker",level:2}];function h(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"init-awesome",children:"Init Awesome"})}),"\n",(0,t.jsx)(e.h2,{id:"supervisor",children:"supervisor"}),"\n",(0,t.jsx)(e.admonition,{type:"info",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u7CFB\u7EDF\u7EA7 supervisor\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u4E00\u822C\u6709 init \u80FD\u529B"}),"\n",(0,t.jsx)(e.li,{children:"\u9664\u4E86\u8FDB\u7A0B\u53EF\u80FD\u8FD8\u4F1A\u7EF4\u62A4\u5176\u4ED6\u8D44\u6E90 - \u4F8B\u5982: socket"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\u8FDB\u7A0B\u7EA7 supervisor\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u53EA\u5173\u5FC3\u8FDB\u7A0B\u6B7B\u6D3B"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"supervisor ~= process manager/monitor"}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/Supervisor/supervisor",children:"supervisor"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"size: 4161536"}),"\n",(0,t.jsx)(e.li,{children:"Python"}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/package/edge/main/x86_64/supervisor",children:"https://pkgs.alpinelinux.org/package/edge/main/x86_64/supervisor"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"http://smarden.org/runit/",children:"runit"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/package/edge/community/x86_64/runit",children:"https://pkgs.alpinelinux.org/package/edge/community/x86_64/runit"})}),"\n",(0,t.jsx)(e.li,{children:"size: 258048"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["systemd\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Python"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:"initd"}),"\n",(0,t.jsx)(e.li,{children:"upstart"}),"\n",(0,t.jsxs)(e.li,{children:["tini\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/krallin/tini",children:"https://github.com/krallin/tini"})}),"\n",(0,t.jsx)(e.li,{children:"size: 40960"}),"\n",(0,t.jsx)(e.li,{children:"docker 1.13 \u540E\u5185\u5EFA"}),"\n",(0,t.jsx)(e.li,{children:"\u4E3B\u8981\u7528\u4E8E\u5904\u7406\u50F5\u5C38\u96C6\u6210\u548C\u4FE1\u53F7\u91CF\u5904\u7406"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["dump-init\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/package/edge/community/x86_64/dumb-init",children:"https://pkgs.alpinelinux.org/package/edge/community/x86_64/dumb-init"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["openrc\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"C+Shell"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["Gentoo ",(0,t.jsx)(e.a,{href:"https://wiki.gentoo.org/wiki/Comparison_of_init_systems",children:"Comparison of init systems"})]}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://wiki.gentoo.org/wiki/OpenRC_to_systemd_Cheatsheet",children:"OpenRC to systemd Cheatsheet"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"pure-init",children:"Pure Init"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"tinit"}),"\n",(0,t.jsx)(e.li,{children:"dump-init"}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/troglobit/finit",children:"troglobit/finit"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"docker",children:"docker"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"tinit - \u5982\u679C\u4F7F\u7528\u5355\u4E2A\u8FDB\u7A0B"}),"\n",(0,t.jsx)(e.li,{children:"\u5982\u679C\u8981\u5141\u8BB8\u591A\u4E2A\u670D\u52A1\uFF0C\u9009\u62E9 s6 \u6216 runit"}),"\n",(0,t.jsxs)(e.li,{children:["docker \u5185\u7F6E tini - ",(0,t.jsx)(e.code,{children:"--init"})]}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/Yelp/dumb-init",children:"Yelp/dumb-init"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/krallin/tini",children:"krallin/tini"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://ahmet.im/blog/minimal-init-process-for-containers/",children:"Choosing init for multi-process containers"})}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"apk add dumb-init\n/usr/bin/dumb-init --\n\napk add tini\n/sbin/tini --\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u6700\u7B80\u5355\u7684 \u591A\u8FDB\u7A0B init"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",metastring:'title="entrypoint.sh"',children:"#!/usr/bin/env bash\nset -e\n\nprogram1 &\nprogram2 &\nwait -n\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-dockerfile",children:'ENTRYPOINT ["/bin/tini", "--", "entrypoint.sh"]\n'})})]})}function a(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}},17776:function(n,e,i){i.d(e,{R:()=>l,x:()=>o});var s=i(7378);let t={},r=s.createContext(t);function l(n){let e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);