"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["92902"],{71103:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>t,toc:()=>a,default:()=>d,metadata:()=>i,assets:()=>o,contentTitle:()=>c});var i=JSON.parse('{"id":"service/api/graphql/apollo/apollo-client","title":"apollo/client","description":"- apollographql/apollo-client","source":"@site/../notes/service/api/graphql/apollo/apollo-client.md","sourceDirName":"service/api/graphql/apollo","slug":"/service/api/graphql/apollo/client","permalink":"/notes/service/api/graphql/apollo/client","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/api/graphql/apollo/apollo-client.md","tags":[{"inline":true,"label":"Client","permalink":"/notes/tags/client"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1716536381000,"frontMatter":{"tags":["Client"]},"sidebar":"docs","previous":{"title":"GraphQL","permalink":"/notes/service/api/graphql/"},"next":{"title":"Apollo Federation","permalink":"/notes/service/api/graphql/apollo/federation"}}'),r=l(86106),s=l(17776);let t={tags:["Client"]},c="apollo/client",o={},a=[];function h(e){let n={a:"a",h1:"h1",header:"header",li:"li",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"apolloclient",children:"apollo/client"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/apollographql/apollo-client",children:"apollographql/apollo-client"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"MIT, TS"}),"\n",(0,r.jsx)(n.li,{children:"npm:@apollo/client"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["ApolloClient\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5305\u542B cache \u548C link"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["link - \u901A\u4FE1\u5C42\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"httpLink \u6700\u5E38\u7528"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"cache - \u6CDB\u5316\u7F13\u5B58\u5C42"}),"\n",(0,r.jsxs)(n.li,{children:["fetch \u7B56\u7565\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'cache-first' | 'network-only' | 'cache-only' | 'no-cache' | 'standby'"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"WatchQueryFetchPolicy = FetchPolicy | 'cache-and-network'"}),"\n",(0,r.jsx)(n.li,{children:"ErrorPolicy = 'none' | 'ignore' | 'all'"}),"\n",(0,r.jsxs)(n.li,{children:["\u6CE8\u610F\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u26A0\uFE0F \u4E0D\u652F\u6301 fast refresh\u3001\u4E0D\u652F\u6301 suspense\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5F00\u53D1\u4F53\u9A8C\u5341\u5206\u7CDF\u7CD5"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"issues \u91CC\u4E0D\u5C11\u5F71\u54CD\u4F7F\u7528\u7684\u95EE\u9898 - \u5F00\u53D1\u4E0D\u592A\u6D3B\u8DC3"}),"\n",(0,r.jsx)(n.li,{children:"apollo \u6BD4\u8F83\u5927 - bundle \u53EF\u80FD 50k+"}),"\n",(0,r.jsx)(n.li,{children:"notifyOnNetworkStatusChange \u9ED8\u8BA4\u5173\u95ED"}),"\n",(0,r.jsx)(n.li,{children:"errorPolicy \u9ED8\u8BA4 none - runtime error"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u4F18\u52BF\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6CDB\u5316\u7F13\u5B58"}),"\n",(0,r.jsx)(n.li,{children:"mutation \u81EA\u52A8\u5931\u6548 - \u4E0D\u4E00\u5B9A\u51C6"}),"\n",(0,r.jsx)(n.li,{children:"\u6570\u636E\u5B57\u6BB5\u5B58\u5728\u4E0D\u4F1A\u518D\u6B21\u67E5\u8BE2 - \u6BD4 react query \u57FA\u4E8E key \u7684\u6A21\u5F0F\u7C92\u5EA6\u66F4\u7EC6"}),"\n",(0,r.jsx)(n.li,{children:"devtools - \u96C6\u6210 iql\uFF0C\u80FD\u76F4\u63A5\u67E5\u8BE2\u53EF\u76F4\u89C2\u7684\u770B\u5230 gql\uFF0C\u80FD\u770B\u6CDB\u5316\u540E\u7684\u7F13\u5B58\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u4E2A\u4EBA\u611F\u53D7\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"retry \u901A\u8FC7 link \u5B9E\u73B0 - \u76F8\u5BF9\u9EBB\u70E6"}),"\n",(0,r.jsxs)(n.li,{children:["Devtools\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u4F3C\u4E4E\u5BF9 hmr/fast refresh \u652F\u6301\u4E0D\u597D\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/apollographql/apollo-client/issues/5870",children:"#5870"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\u65E0\u6CD5\u5931\u6548\u6570\u636E - \u6570\u636E\u6CA1\u6709\u72B6\u6001\u6982\u5FF5 - \u56E0\u4E3A\u6CA1\u6709\u5355\u6B21\u67E5\u8BE2\u6982\u5FF5"}),"\n",(0,r.jsx)(n.li,{children:"\u67E5\u8BE2\u8981\u5199 displayName - \u5426\u5219\u4E0D\u65B9\u4FBF\u770B"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://react-query.tanstack.com/comparison",children:"React Query vs Apollo"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u52A3\u52BF\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Devtools - \u975E web \u96C6\u6210 - \u4F7F\u7528\u6CA1\u6709 react query \u7684\u65B9\u4FBF"}),"\n",(0,r.jsx)(n.li,{children:"Lagged Query Data - react query \u652F\u6301\u76F4\u63A5\u8FD4\u56DE\u4E0A\u6B21\u6570\u636E - apollo 3 \u540E\u6DFB\u52A0\u4E86 previousData"}),"\n",(0,r.jsx)(n.li,{children:"Render Optimization - react query \u4F1A\u4F18\u5316\u72B6\u6001\u53D8\u89E6\u53D1\u7684 rerender - \u53EF\u4EE5\u9009\u62E9\u6027\u7684\u90E8\u5206\u72B6\u6001\u4ECE\u65B0\u6E32\u67D3"}),"\n",(0,r.jsxs)(n.li,{children:["Auto Garbage Collection\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"apollo \u624B\u52A8 gc"}),"\n",(0,r.jsx)(n.li,{children:"react query \u56E0\u4E3A\u6709 mount \u6982\u5FF5\uFF0C\u53EF\u4EE5\u81EA\u52A8 gc \u4E0D\u7528\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Stale While Revalidate"}),"\n",(0,r.jsxs)(n.li,{children:["Partial Query Matching\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"react query \u6709 key \u6982\u5FF5\uFF0C\u6570\u7EC4\u53EF\u4EE5\u90E8\u5206\u5339\u914D"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Stale Time \u914D\u7F6E\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"apollo \u4E0D\u652F\u6301"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Pre-usage Query/Mutation Configuration - \u6BCF\u6B21\u4F7F\u7528\u72EC\u7ACB\u914D\u7F6E\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"apollo \u4E0D\u652F\u6301"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Window Focus Refetching - \u7A97\u53E3\u83B7\u53D6\u7126\u70B9\u81EA\u52A8\u5237\u65B0"}),"\n",(0,r.jsxs)(n.li,{children:["Suspense - apollo \u4E0D\u652F\u6301 - ",(0,r.jsx)(n.a,{href:"https://github.com/apollographql/apollo-feature-requests/issues/162",children:"#162"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.apollographql.com/blog/bc68bd819be3/",children:"GraphQL Concepts Visualized"})}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},17776:function(e,n,l){l.d(n,{R:()=>t,x:()=>c});var i=l(7378);let r={},s=i.createContext(r);function t(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);