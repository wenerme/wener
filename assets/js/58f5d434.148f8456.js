"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["26611"],{53279:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>a,toc:()=>c,default:()=>u,metadata:()=>t,assets:()=>i,contentTitle:()=>d});var t=JSON.parse('{"id":"devops/kubernetes/distro/k3s/k3s-upgrade","title":"K3S \u5347\u7EA7","description":"upgrade}","source":"@site/../notes/devops/kubernetes/distro/k3s/k3s-upgrade.md","sourceDirName":"devops/kubernetes/distro/k3s","slug":"/devops/kubernetes/distro/k3s/upgrade","permalink":"/notes/devops/kubernetes/distro/k3s/upgrade","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/kubernetes/distro/k3s/k3s-upgrade.md","tags":[{"inline":true,"label":"Upgrade","permalink":"/notes/tags/upgrade"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1758158840000,"frontMatter":{"tags":["Upgrade"]},"sidebar":"docs","previous":{"title":"Install","permalink":"/notes/devops/kubernetes/distro/k3s/install"},"next":{"title":"K3S Version","permalink":"/notes/devops/kubernetes/distro/k3s/version"}}'),r=n(86106),o=n(17776);let a={tags:["Upgrade"]},d="K3S \u5347\u7EA7 {#upgrade}",i={},c=[];function l(e){let s={code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"upgrade",children:"K3S \u5347\u7EA7"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"v1.27 \u524D\u9762\u7248\u672C containerd \u65E0 zfs snapshotter"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# \u51C6\u5907\nrc-update del k3s\nreboot\n\n# \u5347\u7EA7\nk3s -v # \u5F53\u524D\u7248\u672C\n\nsudo apk add jq\n\n# ARCH=arm64\n# SUFFIX=-${ARCH}\nARCH=amd64\nSUFFIX=\n\nVERSION_K3S=$(curl -sf https://update.k3s.io/v1-release/channels | jq -r \'.data[] | select(.id == "stable") | .latest\')\necho Upgrade $VERSION_K3S\n# GITHUB_URL=https://github.com/k3s-io/k3s/releases\n# \u8D70\u4EE3\u7406\nGITHUB_URL=https://mirror.echo.wener.cc/github.com/k3s-io/k3s/releases\nGITHUB_URL=https://github.com/k3s-io/k3s/releases\ncurl --remote-name-all -L "${GITHUB_URL}/download/${VERSION_K3S}/sha256sum-${ARCH}.txt" "${GITHUB_URL}/download/${VERSION_K3S}/k3s${SUFFIX}"\n\nsha256sum -c sha256sum-${ARCH}.txt --ignore-missing\n\ncp k3s$SUFFIX k3s.$VERSION_K3S\nchmod +x k3s.$VERSION_K3S\ncp $(which k3s) k3s.last              # backup\nsudo cp k3s.$VERSION_K3S $(which k3s) # replace\n\nsudo k3s check-config\nk3s -v\n\n# \u542F\u52A8\nservice k3s restart\nrc-update add k3s\n\nk3s kubectl get nodes\n'})})]})}function u(e={}){let{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},17776:function(e,s,n){n.d(s,{R:()=>a,x:()=>d});var t=n(7378);let r={},o=t.createContext(r);function a(e){let s=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);