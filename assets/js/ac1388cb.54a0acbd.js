"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["1361"],{932:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>o,default:()=>h,metadata:()=>r,assets:()=>d,contentTitle:()=>c});var r=JSON.parse('{"id":"service/auth/keycloak/keycloak-faq","title":"Keycloak \u5E38\u89C1\u95EE\u9898","description":"- \u591A Realm/Client \u6027\u80FD\u6709\u95EE\u9898 - \u5B98\u65B9\u6B63\u5728\u7740\u624B\u5904\u7406","source":"@site/../notes/service/auth/keycloak/keycloak-faq.md","sourceDirName":"service/auth/keycloak","slug":"/service/auth/keycloak/faq","permalink":"/notes/service/auth/keycloak/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/keycloak/keycloak-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1702440128000,"frontMatter":{"title":"Keycloak \u5E38\u89C1\u95EE\u9898","tags":["FAQ"]},"sidebar":"docs","previous":{"title":"Keycloak \u5F00\u53D1","permalink":"/notes/service/auth/keycloak/dev"},"next":{"title":"Keycloak \u672F\u8BED\u8868","permalink":"/notes/service/auth/keycloak/glossary"}}'),i=t(86106),l=t(17776);let s={title:"Keycloak \u5E38\u89C1\u95EE\u9898",tags:["FAQ"]},c="Keycloak FAQ",d={},o=[{value:"\u9ED8\u8BA4 mapper \u5B57\u6BB5",id:"\u9ED8\u8BA4-mapper-\u5B57\u6BB5",level:2},{value:"OIDC Brokering \u65E0\u6CD5\u963B\u6B62\u521B\u5EFA\u672C\u5730\u8D26\u53F7",id:"oidc-brokering-\u65E0\u6CD5\u963B\u6B62\u521B\u5EFA\u672C\u5730\u8D26\u53F7",level:2},{value:"\u670D\u52A1\u8D26\u53F7 - Service Account",id:"\u670D\u52A1\u8D26\u53F7---service-account",level:2},{value:"\u4E3B\u57DF - Master Realm",id:"\u4E3B\u57DF---master-realm",level:2},{value:"login-status-iframe.html/init 403 \u5F02\u5E38",id:"login-status-iframehtmlinit-403-\u5F02\u5E38",level:2},{value:"invalid_grant: Code not valid",id:"invalid_grant-code-not-valid",level:2},{value:"invalid_client_credentials CODE_TO_TOKEN_ERROR",id:"invalid_client_credentials-code_to_token_error",level:2},{value:"Could not modify attribute for DN",id:"could-not-modify-attribute-for-dn",level:2},{value:"Found an Attribute element with duplicated Name",id:"found-an-attribute-element-with-duplicated-name",level:2},{value:"IDP parameter for the UID (username) not found. Possible parameters are: [&quot;Role&quot;]",id:"idp-parameter-for-the-uid-username-not-found-possible-parameters-are-role",level:2},{value:"Access to XMLHttpRequest at keycloak from origin &#39;http://127.0.0.1:3000&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.",id:"access-to-xmlhttprequest-at-keycloak-from-origin-http1270013000-has-been-blocked-by-cors-policy-no-access-control-allow-origin-header-is-present-on-the-requested-resource",level:2},{value:"JWKs \u6CA1\u6709\u7B7E\u540D\u7684\u516C\u94A5",id:"jwks-\u6CA1\u6709\u7B7E\u540D\u7684\u516C\u94A5",level:2},{value:"\u57DF\u540D\u6620\u5C04\u57DF",id:"\u57DF\u540D\u6620\u5C04\u57DF",level:2},{value:"Unexpected error when authenticating with identity provider",id:"unexpected-error-when-authenticating-with-identity-provider",level:2},{value:"ISPN000474: Error processing request 4@sparkle-stack-keycloak-76f867dd87-nkpcl: protostream.com.google.protobuf.InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field. This could mean either that the input has been truncated or that an embedded message misreported its own length.",id:"ispn000474-error-processing-request-4sparkle-stack-keycloak-76f867dd87-nkpcl-protostreamcomgoogleprotobufinvalidprotocolbufferexception-while-parsing-a-protocol-message-the-input-ended-unexpectedly-in-the-middle-of-a-field-this-could-mean-either-that-the-input-has-been-truncated-or-that-an-embedded-message-misreported-its-own-length",level:2},{value:"failed getting JSON response from Kubernetes Client",id:"failed-getting-json-response-from-kubernetes-client",level:2},{value:"API Key",id:"api-key",level:2}];function a(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"keycloak-faq",children:"Keycloak FAQ"})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u591A Realm/Client \u6027\u80FD\u6709\u95EE\u9898 - \u5B98\u65B9\u6B63\u5728\u7740\u624B\u5904\u7406\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8D85\u8FC7 100 Realm \u53EF\u80FD\u9700\u8981\u591A \u8282\u70B9"}),"\n",(0,i.jsx)(n.li,{children:"console \u8BBE\u8BA1\u672A\u8003\u8651 realm \u5F88\u591A\u7684\u573A\u666F"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/keycloak/keycloak-benchmark/",children:"keycloak/keycloak-benchmark"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/keycloak/keycloak/discussions/11074",children:"keycloak#11074"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://issues.redhat.com/browse/KEYCLOAK-4593",children:"KEYCLOAK-4593"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://stackoverflow.com/q/44583833/1870054",children:"https://stackoverflow.com/q/44583833/1870054"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4E5F\u53EF\u4EE5\u57FA\u4E8E realm \u5C31\u884C\u91CD\u5B9A\u5411 - \u5B9E\u73B0\u5206\u7247"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SSO \u4F9D\u8D56\u57DF\u540D\u7EDF\u4E00"}),"\n"]})}),"\n",(0,i.jsx)(n.h2,{id:"\u9ED8\u8BA4-mapper-\u5B57\u6BB5",children:"\u9ED8\u8BA4 mapper \u5B57\u6BB5"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"scope"}),(0,i.jsx)(n.th,{children:"mapper"}),(0,i.jsx)(n.th,{children:"field"}),(0,i.jsx)(n.th,{children:"to"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{rowSpan:"2",children:"roles"}),(0,i.jsx)(n.td,{children:"realm roles"}),(0,i.jsx)(n.td,{children:"realm_access.roles"}),(0,i.jsx)(n.td,{children:"User Realm Role"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"client roles"}),(0,i.jsx)(n.td,{children:"resource_access.${client_id}.roles"}),(0,i.jsx)(n.td,{children:"User Client Role"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"web-origins"}),(0,i.jsx)(n.td,{children:"allowed web origins"}),(0,i.jsx)(n.td,{children:"allowed-origins"}),(0,i.jsx)(n.td,{children:"Allowed Web Origins"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{rowSpan:"2",children:"phone"}),(0,i.jsx)(n.td,{children:"phone number"}),(0,i.jsx)(n.td,{children:"phone_number"}),(0,i.jsx)(n.td,{children:"Attribute - phoneNumber"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"phone number verified"}),(0,i.jsx)(n.td,{children:"phone_number_verified"}),(0,i.jsx)(n.td,{children:"Attribute - phoneNumberVerified"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{rowSpan:"2",children:"email"}),(0,i.jsx)(n.td,{children:"email"}),(0,i.jsx)(n.td,{children:"email"}),(0,i.jsx)(n.td,{children:"Property - phoneNumber"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"email verified"}),(0,i.jsx)(n.td,{children:"email_verified"}),(0,i.jsx)(n.td,{children:"Property - emailVerified"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"oidc-brokering-\u65E0\u6CD5\u963B\u6B62\u521B\u5EFA\u672C\u5730\u8D26\u53F7",children:"OIDC Brokering \u65E0\u6CD5\u963B\u6B62\u521B\u5EFA\u672C\u5730\u8D26\u53F7"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u76EE\u524D\u65E0\u89E3"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://issues.redhat.com/browse/KEYCLOAK-4429",children:"https://issues.redhat.com/browse/KEYCLOAK-4429"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://developers.redhat.com/blog/2020/12/30/how-to-restrict-users-being-authenticated-in-keycloak-during-identity-brokering#",children:"https://developers.redhat.com/blog/2020/12/30/how-to-restrict-users-being-authenticated-in-keycloak-during-identity-brokering#"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u670D\u52A1\u8D26\u53F7---service-account",children:"\u670D\u52A1\u8D26\u53F7 - Service Account"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5BA2\u6237\u7AEF\u76F4\u63A5\u7533\u8BF7\u83B7\u53D6 Token\uFF0C\u7136\u540E\u4F7F\u7528\u7533\u8BF7\u5230\u7684 Token \u8BBF\u95EE\u670D\u52A1"}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u6D89\u53CA\u7528\u6237\u548C\u6D4F\u89C8\u5668\u4EA4\u4E92"}),"\n",(0,i.jsx)(n.li,{children:"\u7528\u4E8E\u670D\u52A1\u4E4B\u95F4\u9274\u6743\uFF0C\u4F8B\u5982 \u670D\u52A1\u7AEF API \u6388\u6743"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.keycloak.org/docs/latest/server_admin/#_service_accounts",children:"https://www.keycloak.org/docs/latest/server_admin/#_service_accounts"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://medium.com/@mihirrajdixit/getting-started-with-service-accounts-in-keycloak-c8f6798a0675",children:"https://medium.com/@mihirrajdixit/getting-started-with-service-accounts-in-keycloak-c8f6798a0675"}),"\ngreat for administrative tasks executed on behalf of a service instead of individual user."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://planet.jboss.org/post/service_accounts_support_in_keycloak",children:"https://planet.jboss.org/post/service_accounts_support_in_keycloak"}),"\nallows to authenticate the client application with Keycloak server and retrieve the access token dedicated to this application."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.keycloak.org/docs/latest/server_admin/index.html#_service_accounts",children:"https://www.keycloak.org/docs/latest/server_admin/index.html#_service_accounts"})}),"\n",(0,i.jsx)(n.h2,{id:"\u4E3B\u57DF---master-realm",children:"\u4E3B\u57DF - Master Realm"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4E3B\u8981\u7528\u4E8E\u8D85\u7BA1\u8FDB\u884C\u7CFB\u7EDF\u7BA1\u7406"}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u8981\u5C06 Master Realm \u7528\u4E8E\u4E1A\u52A1"}),"\n",(0,i.jsx)(n.li,{children:"\u53EF\u4EE5\u5728\u5177\u4F53\u57DF\u4E0B\u521B\u5EFA\u7BA1\u7406\u5458\uFF0C\u7136\u540E\u7981\u7528 Master Realm"}),"\n",(0,i.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.keycloak.org/docs/latest/server_admin/#the-master-realm",children:"The Master Realm"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"login-status-iframehtmlinit-403-\u5F02\u5E38",children:"login-status-iframe.html/init 403 \u5F02\u5E38"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u786E\u4FDD\u5F00\u542F Implicit Flow Enabled"}),"\n",(0,i.jsxs)(n.li,{children:["\u786E\u4FDD client_id \u6B63\u786E\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679C client_id \u9519\u4E86\u4F1A 403\uFF0C\u4F46\u6CA1\u6709\u4EFB\u4F55\u5730\u65B9\u63D0\u793A client_id \u9519\u8BEF"}),"\n",(0,i.jsx)(n.li,{children:"\u975E\u5E38\u96BE\u6392\u67E5"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"invalid_grant-code-not-valid",children:"invalid_grant: Code not valid"}),"\n",(0,i.jsx)(n.h2,{id:"invalid_client_credentials-code_to_token_error",children:"invalid_client_credentials CODE_TO_TOKEN_ERROR"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u662F\u7EAF\u524D\u7AEF\uFF0C\u9700\u8981\u751F\u6210 Token"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -L -X POST 'http://localhost:8080/auth/realms/whatever-realm/protocol/openid-connect/token' \\\n  -H 'Content-Type: application/x-www-form-urlencoded' \\\n  --data-urlencode 'client_id=clientid-03' \\\n  --data-urlencode 'grant_type=password' \\\n  --data-urlencode 'client_secret=ec78c6bb-8339-4bed-9b1b-e973d27107dc' \\\n  --data-urlencode 'scope=openid' \\\n  --data-urlencode 'username=emuhamma' \\\n  --data-urlencode 'password=1'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"could-not-modify-attribute-for-dn",children:"Could not modify attribute for DN"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679C\u4F7F\u7528\u4E86 federation\uFF0C\u4FEE\u6539\u5BC6\u7801\u53EF\u80FD\u88AB\u7981\u6B62"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"found-an-attribute-element-with-duplicated-name",children:"Found an Attribute element with duplicated Name"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4F7F\u7528 SAML \u7684\u65F6\u5019 Nextcloud \u8981\u8BBE\u7F6E\u89D2\u8272\u5217\u8868\u8FD4\u56DE\u5355\u4E2A\u89D2\u8272"}),"\n",(0,i.jsx)(n.li,{children:"(Realm) -> Client Scopes -> role_list (saml) -> Mappers tab -> role list -> 'Single Role Attribute'."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"idp-parameter-for-the-uid-username-not-found-possible-parameters-are-role",children:'IDP parameter for the UID (username) not found. Possible parameters are: ["Role"]'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Nextcloud + SAML \u51FA\u73B0"}),"\n",(0,i.jsx)(n.li,{children:"\u5728 Keycloak Client Mappers \u6DFB\u52A0 Mapper"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Name"}),(0,i.jsx)(n.td,{children:"username"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Mapper Type"}),(0,i.jsx)(n.td,{children:"User Property"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Property"}),(0,i.jsx)(n.td,{children:"username"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Friendly Name"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SAML Attribute Name"}),(0,i.jsx)(n.td,{children:"username"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SAML Attribute NameFormat"}),(0,i.jsx)(n.td,{children:"Basic"})]})]})]}),"\n",(0,i.jsxs)(n.h2,{id:"access-to-xmlhttprequest-at-keycloak-from-origin-http1270013000-has-been-blocked-by-cors-policy-no-access-control-allow-origin-header-is-present-on-the-requested-resource",children:["Access to XMLHttpRequest at keycloak from origin '",(0,i.jsx)(n.a,{href:"http://127.0.0.1:3000",children:"http://127.0.0.1:3000"}),"' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u903B\u8F91\u4E0A\u6765\u8BF4\u662F\u9700\u8981\u914D\u7F6E Client \u7684 Web Origins"}),"\n",(0,i.jsx)(n.li,{children:"\u914D\u7F6E\u540E\u8FD8\u662F\u51FA\u73B0"}),"\n",(0,i.jsx)(n.li,{children:"curl \u6D4B\u8BD5\u6B63\u5E38"}),"\n",(0,i.jsx)(n.li,{children:"\u6D4F\u89C8\u5668\u6CA1\u6709\u53D1\u8D77 OPTIONS \u8BF7\u6C42"}),"\n",(0,i.jsxs)(n.li,{children:["\u5982\u679C\u53EA\u662F\u524D\u7AEF\u4F7F\u7528\uFF0C\u4E00\u5B9A\u9009\u62E9 ",(0,i.jsx)(n.strong,{children:"public"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u76F4\u63A5\u6D4B\u8BD5\u6709\u8FD4\u56DE\ncurl \\\n  --verbose \\\n  --request OPTIONS \\\n  https://keycloak \\\n  --header 'Origin: http://127.0.0.1:3000' \\\n  --header 'Access-Control-Request-Headers: Origin, Accept, Content-Type' \\\n  --header 'Access-Control-Request-Method: POST'\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"date: Fri, 15 Jan 2021 15:41:37 GMT\ncontent-length: 0\naccess-control-allow-headers: Origin, Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers, Authorization\nx-xss-protection: 1; mode=block\nreferrer-policy: no-referrer\naccess-control-allow-origin: http://127.0.0.1:3000\naccess-control-allow-credentials: true\nstrict-transport-security: max-age=15724800; includeSubDomains\nx-content-type-options: nosniff\naccess-control-allow-methods: POST, OPTIONS\naccess-control-max-age: 3600\n"})}),"\n",(0,i.jsx)(n.h2,{id:"jwks-\u6CA1\u6709\u7B7E\u540D\u7684\u516C\u94A5",children:"JWKs \u6CA1\u6709\u7B7E\u540D\u7684\u516C\u94A5"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4E0D\u662F\u6240\u6709\u7B97\u6CD5\u90FD\u6709"}),"\n",(0,i.jsx)(n.li,{children:"\u53EF\u4EE5\u8BBE\u7F6E\u4E3A\u6709 Public key \u7684\u7B97\u6CD5"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u57DF\u540D\u6620\u5C04\u57DF",children:"\u57DF\u540D\u6620\u5C04\u57DF"}),"\n",(0,i.jsx)(n.p,{children:"\u6CA1\u6709\u5F88\u597D\u7684\u529E\u6CD5"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://keycloak.discourse.group/t/1833",children:"One domain per realm, disabling unrelated keycloak pages"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"unexpected-error-when-authenticating-with-identity-provider",children:"Unexpected error when authenticating with identity provider"}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u5F00\u542F login \u65E5\u5FD7\u6392\u67E5\u5177\u4F53\u9519\u8BEF"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u5BF9\u65B9\u6CA1\u51FA\u95EE\u9898\uFF0C\u68C0\u67E5\u914D\u7F6E\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u53D1\u73B0 \u5F00\u542F back-channel logout \u4E14\u8BBE\u7F6E\u4E3A basic auth \u89E3\u51B3\u4E86\u95EE\u9898\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"ispn000474-error-processing-request-4sparkle-stack-keycloak-76f867dd87-nkpcl-protostreamcomgoogleprotobufinvalidprotocolbufferexception-while-parsing-a-protocol-message-the-input-ended-unexpectedly-in-the-middle-of-a-field-this-could-mean-either-that-the-input-has-been-truncated-or-that-an-embedded-message-misreported-its-own-length",children:"ISPN000474: Error processing request 4@sparkle-stack-keycloak-76f867dd87-nkpcl: protostream.com.google.protobuf.InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field. This could mean either that the input has been truncated or that an embedded message misreported its own length."}),"\n",(0,i.jsx)(n.p,{children:"Kubernetes \u4E0A\u90E8\u7F72\u4FEE\u6539\u53D1\u73B0\u903B\u8F91\u4E3A KUBE_PING"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"env:\n  # https://github.com/codecentric/helm-charts/issues/149\n  - name: JGROUPS_DISCOVERY_PROTOCOL\n    value: kubernetes.KUBE_PING\n  - name: JGROUPS_DISCOVERY_PROPERTIES\n    value: dump_requests=true,port_range=0,namespace={{.Release.Namespace}}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"failed-getting-json-response-from-kubernetes-client",children:"failed getting JSON response from Kubernetes Client"}),"\n",(0,i.jsx)(n.h2,{id:"api-key",children:"API Key"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u76EE\u524D\u53EA\u80FD\u8003\u8651 client id + client secret \u7684\u6A21\u5F0F"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/zak905/keycloak-api-key-demo",children:"https://github.com/zak905/keycloak-api-key-demo"})}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},17776:function(e,n,t){t.d(n,{R:()=>s,x:()=>c});var r=t(7378);let i={},l=r.createContext(i);function s(e){let n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);