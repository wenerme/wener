"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["92246"],{46964:function(n,e,t){t.r(e),t.d(e,{frontMatter:()=>r,toc:()=>a,default:()=>E,metadata:()=>i,assets:()=>d,contentTitle:()=>s});var i=JSON.parse('{"id":"service/network/vpn/tinc/tinc-1.0","title":"tinc 1.0","description":"- \u53EA\u6709 tincd","source":"@site/../notes/service/network/vpn/tinc/tinc-1.0.md","sourceDirName":"service/network/vpn/tinc","slug":"/service/network/vpn/tinc/1.0","permalink":"/notes/service/network/vpn/tinc/1.0","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/vpn/tinc/tinc-1.0.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1680070123000,"frontMatter":{"title":"tinc 1.0"},"sidebar":"docs","previous":{"title":"Tinc","permalink":"/notes/service/network/vpn/tinc/"},"next":{"title":"Tinc \u914D\u7F6E","permalink":"/notes/service/network/vpn/tinc/conf"}}'),c=t(86106),o=t(17776);let r={title:"tinc 1.0"},s="tinc 1.0",d={},a=[{value:"init",id:"init",level:2}];function l(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,o.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"tinc-10",children:"tinc 1.0"})}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"\u53EA\u6709 tincd"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"NETNAME=netname\nNODE=NodeA\nmkdir -p /etc/tinc/$NETNAME/hosts\n# tinc.conf\ncat << CONF > /etc/tinc/$NETNAME/tinc.conf\nName = $NODE\nMode = switch\n# ConnectTo = $NETANAME\nCONF\n\n# \u751F\u6210 key\ntincd -n $NETNAME -K\n\n# tinc-up\ncat << SH > /etc/tinc/$NETNAME/tinc-up\nifconfig $INTERFACE 10.10.1.1 netmask 255.0.0.0\nSH\n\n# \u968F\u673A port\ncat << CONF > /etc/tinc/$NETNAME/hosts/$NODE\nPort = 0\nCONF\n\n# \u6DFB\u52A0\u5176\u4ED6\u8282\u70B9\ncat << CONF > /etc/tinc/$NETNAME/hosts/$NETNAME\n# Subnet = 10.10.0.0/24\nAddress = 4.5.6.7\n\n-----BEGIN RSA PUBLIC KEY-----\n...\n-----END RSA PUBLIC KEY-----\nCONF\n\ntincd -n $NETNAME -Dd 5\n"})}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"  -c, --config=DIR               Read configuration options from DIR.\n  -D, --no-detach                Don't fork and detach.\n  -d, --debug[=LEVEL]            Increase debug level or set it to LEVEL.\n  -k, --kill[=SIGNAL]            Attempt to kill a running tincd and exit.\n  -n, --net=NETNAME              Connect to net NETNAME.\n  -K, --generate-keys[=BITS]     Generate public/private RSA keypair.\n  -L, --mlock                    Lock tinc into main memory.\n      --logfile[=FILENAME]       Write log entries to a logfile.\n      --pidfile=FILENAME         Write PID to FILENAME.\n  -o, --option=[HOST.]KEY=VALUE  Set global/host configuration value.\n  -R, --chroot                   chroot to NET dir at startup.\n  -U, --user=USER                setuid to given USER at startup.\n      --help                     Display this help and exit.\n      --version                  Output version information and exit.\n"})}),"\n",(0,c.jsx)(e.h2,{id:"init",children:"init"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.a,{href:"https://www.tinc-vpn.org/documentation/tinc.conf.5",children:"tinc.conf.5"})}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-bash",children:"export NETWORK=kubenet\nNODENAME=$(hostname | tr - _)\n\nmodprobe tun\n\nmkdir -p /etc/tinc/$NETWORK/hosts\ncd /etc/tinc/$NETWORK\n\ntincd -n $NETWORK -K 4096\ncat << CONF > tinc.conf\nName=$NODENAME\nMode=switch\nDevice = /dev/net/tun\nAddressFamily = ipv4\nCONF\n\ncat << 'SHELL' > tinc-up\nip link set $INTERFACE up\nip addr add 10.10.1.1 dev $INTERFACE\nip route add 10.10.1.0/24 dev $INTERFACE\nSHELL\ncat << 'SHELL' > tinc-down\nip link set $INTERFACE down\nSHELL\nchmod -v +x tinc-up tinc-down\n\ncp rsa_key.pub hosts/$NODENAME.rsa_key.pub\ncat << CONF > hosts/$NODENAME\nPublicKeyFile=$NODENAME.rsa_key.pub\nCONF\n\n# \u524D\u53F0\u542F\u52A8 - debug\ntincd -n $NETWORK -Dd 5\n\n# \u670D\u52A1\u542F\u52A8\necho \"NETWORK: $NETWORK\" >> /etc/conf.d/tinc.networks\nservice tincd start\n"})})]})}function E(n={}){let{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(l,{...n})}):l(n)}},17776:function(n,e,t){t.d(e,{R:()=>r,x:()=>s});var i=t(7378);let c={},o=i.createContext(c);function r(n){let e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:r(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);