"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["15154"],{33952:function(n,t,e){e.r(t),e.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>g,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var r=e(93976),o=e(86106),i=e(17776);let a={slug:"getopt-h-tips",title:"\u6982\u8FF0 getopt.h \u7684\u4F7F\u7528",tags:["C","\u7F16\u7A0B","\u5E93"],date:new Date("2012-02-23T00:00:00.000Z"),type:"post"},p,s={authorsImageUrls:[]},c=[{value:"\u6982\u8FF0",id:"\u6982\u8FF0",level:2},{value:"\u53C2\u6570\u4F20\u9012\u6807\u51C6",id:"\u53C2\u6570\u4F20\u9012\u6807\u51C6",level:2}];function l(n){let t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"\u6982\u8FF0",children:"\u6982\u8FF0"}),"\n",(0,o.jsx)(t.p,{children:"c\u8BED\u8A00\u63A7\u5236\u53F0\u7F16\u7A0B\u65F6\uFF0C\u7ECF\u5E38\u90FD\u8981\u63A5\u53D7\u547D\u4EE4\u884C\u4F20\u9012\u6765\u7684\u9009\u9879\uFF0C\u800Cgetopt\u662F\u4E13\u95E8\u7528\u6765\u89E3\u6790\u547D\u4EE4\u884C\u9009\u9879\u7684\u4E00\u5957\u51FD\u6570\u3002"}),"\n",(0,o.jsx)(t.p,{children:"\u7B80\u5355\u7684\u8BF4\u4E00\u4E0Bgetopt\uFF0C\u5979\u5DF2\u7ECF\u6709\u76F8\u5F53\u957F\u7684\u5386\u53F2\u4E86\uFF0C\u65E9\u671F\u662F\u5728Unix\u4E2D\u4F7F\u7528\uFF0C\u73B0\u5728\u5DF2\u7ECF\u79FB\u690D\u5230\u4E86\u4E2A\u4E2A\u4E0D\u540C\u7684\u8BED\u8A00\uFF08Shell,Java,Php,.NET...\uFF09\uFF0C\u4E3A\u63A5\u53D7\u547D\u4EE4\u884C\u9009\u9879\u63D0\u4F9B\u4E86\u5F88\u5927\u7684\u4FBF\u5229\u3002\u540C\u65F6\u4E5F\u6307\u5B9A\u4E86\u4E00\u5957\u4F20\u9012\u9009\u9879\u548C\u53C2\u6570\u7684\u6807\u51C6\u3002"}),"\n",(0,o.jsx)(t.h2,{id:"\u53C2\u6570\u4F20\u9012\u6807\u51C6",children:"\u53C2\u6570\u4F20\u9012\u6807\u51C6"}),"\n",(0,o.jsx)(t.p,{children:"\u5982\u4ECA\u7684\u9009\u9879\u6709\u4E24\u79CD\u6A21\u5F0F\uFF0C\u77ED\u9009\u9879\u548C\u957F\u9009\u9879\uFF0C\u9009\u9879\u53C8\u5206\u4E3A\u5E26\u53C2\u6570\u548C\u4E0D\u5E26\u53C2\u6570\u3002"}),"\n",(0,o.jsx)(t.p,{children:"\u6BD4\u5982\uFF1A"}),"\n",(0,o.jsx)(t.p,{children:"gcc -V \u662F\u77ED\u9009\u9879\uFF0C\u4E14\u4E0D\u5E26\u53C2\u6570"}),"\n",(0,o.jsx)(t.p,{children:"gcc --version \u662F\u957F\u9009\u9879\uFF0C\u4E0D\u5E26\u53C2\u6570\u3002\u4E0Egcc -V\u76F8\u540C"}),"\n",(0,o.jsx)(t.p,{children:"gcc -o exc \u662F\u77ED\u9009\u9879 \u5E26\u53C2\u6570\uFF0C\u4E0Egcc --output exc\u76F8\u540C"}),"\n",(0,o.jsx)(t.p,{children:"\u800C\u591A\u4E2A\u77ED\u9009\u9879\u53EF\u76F4\u63A5\u8FDE\u63A5\uFF0C\u4F8B\u5982gcc -so FILE \u4E0E gcc -s -o FILE\u76F8\u540C"}),"\n",(0,o.jsx)(t.p,{children:"\u77ED\u9009\u9879\u7684\u53C2\u6570\u53EF\u76F4\u63A5\u7D27\u63A5\u5728\u5176\u540E,\u4F8B\u5982gcc -oFILE = gcc -oFILE"}),"\n",(0,o.jsx)(t.p,{children:"\u957F\u9009\u9879\u7684\u53C2\u6570\u53EF\u4EE5\u4EE5\u7A7A\u683C\u5206\u9694\u6216\u8005=\u5206\u9694\uFF0C\u4F8B\u5982 gcc --output FILE = gcc --output=FILE"}),"\n",(0,o.jsx)(t.h1,{children:"\u5B9E\u73B0"}),"\ngetopt\u4E2D\u7684\u5185\u5BB9\uFF1A\n",(0,o.jsx)(t.p,{children:"\u5177\u4F53\u8BB2\u89E3\u5728\u5B9E\u4F8B\u4E2D\u3002"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-c",children:'/* \u5DF2\u5B9A\u4E49\u7684\u53D8\u91CF */\n\nint opterr\nint optopt\nint optind\nchar *optarg\n\n/* \u5DF2\u5B9A\u4E49\u7684\u51FD\u6570 */\n/*  */\nint getopt (int argc, char **argv, const char *options)\nint getopt_long (int argc, char *const *argv, const char *shortopts, const struct option *longopts, int *indexptr)\n\nint getopt_long_only (int argc, char *const *argv, const char *shortopts, const struct option *longopts, int *indexptr)\n\n/* \u6570\u636E\u7C7B\u578B */\nstruct option</code>\n\n\u5B9E\u4F8B1.\u5B9E\u73B0\u77ED\u53C2\u6570\n\n<code lang="c[lines]">\n#include <ctype .h>\n#include <stdio .h>\n#include <stdlib .h>\n/* getopt\u65F6\u5FC5\u987B\u5305\u542B unistd\u5934\u6587\u4EF6 */\n#include <unistd .h>\n\nint main (int argc, char **argv)\n{\n    int index;\n    int c;\n\n    opterr = 0;\n /* getopt \u7528\u6765\u89E3\u6790\u77ED\u9009\u9879\uFF0C\u7B2C\u4E00\u4E8C\u4E2A\u53C2\u6570\u57FA\u672C\u90FD\u662F\u76F8\u540C\u7684 */\n /* \u7B2C\u4E09\u4E2A\u9009\u9879\u4F20\u5165\u80FD\u63A5\u53D7\u7684\u53C2\u6570,\':\'\u4EE3\u8868\u9700\u8981\u503C \'::\'\u4EE3\u8868\u503C\u4E3A\u53EF\u9009*/\n /* \u5982\u679C\u4F20\u5165\u4E86\u503C\uFF0C\u5176\u503C\u4FDD\u5B58\u5728optarg\u5F53\u4E2D\uFF0C\u5F53\u5176\u503C\u4E3A\u5FC5\u987B\u662F\uFF0C\u82E5\u6CA1\u6709\u4F20\u5165\u503C\u5219\u4F1A\u62A5\u9519 \u7F3A\u5C11\u503C */\n /* getopt\u8FD4\u56DE\u5339\u914D\u7684\u9009\u9879&nbsp;\u4F8B\u5982a/b/c */\n /* \u672A\u5339\u914D\u503C\u65F6\u8FD4\u56DE\uFF1F \u89E3\u6790\u5B8C\u65F6\uFF0C\u4F1A\u8FD4\u56DE-1 \u8DF3\u51FA */\n    while ((c = getopt (argc, argv, "abc:")) != -1)\n        switch (c)\n        {\n        case \'a\':\n            printf("\u68C0\u6D4B\u5230-a\u9009\u9879\\n");\n            break;\n        case \'b\':\n            printf("\u68C0\u6D4B\u5230-b\u9009\u9879\\n");\n            break;\n        case \'c\':\n            printf("\u68C0\u6D4B\u5230-c\u9009\u9879\uFF0C\u5176\u53C2\u6570\u4E3A\uFF1A%s\\n", optarg);\n            break;\n        /* \u7528\u6765\u68C0\u6D4B\u5176\u4ED6\u610F\u5916\u7684\u503C */\n        case \'?\':\n         /* optopt\u4E3A\u5728\u6CA1\u6709\u5339\u914D\u4EFB\u4F55\u9009\u9879\u65F6\uFF0C\u4FDD\u5B58\u7684\u9009\u9879\u503C */\n         /* \u4F8B\u5982-n\uFF0C\u6CA1\u6709\u4E0E\u4E0A\u9762\u5339\u914D\uFF0C\u5219\u6B64\u65F6optopt=c */\n            if (optopt == \'c\')\n                fprintf (stderr, "\u9009\u9879 -%c \u9700\u8981\u4E00\u4E2A\u53C2\u6570.\\n", optopt);\n            else if (isprint (optopt))\n                fprintf (stderr, "`-%c\'\u672A\u5B9A\u4E49\\n", optopt);\n            else\n                fprintf (stderr,\n                         " `\\\\x%x\' \u672A\u5B9A\u4E49\\n",\n                         optopt);\n            return 1;\n        default:\n            abort ();\n        }\n /*\n \u6700\u540E\u68C0\u6D4B\u547D\u4EE4\u884C\u7ED9\u7684\u9009\u9879\u662F\u5426\u5DF2\u7ECF\u89E3\u6790\u5B8C\n  optind\u662F\u5F53\u524D\u89E3\u6790\u5230\u9009\u9879\u7684\u7D22\u5F15\n  \u5224\u65AD\u4F9D\u636E\u662F\u5982\u679C\u89E3\u6790\u7684\u4E2A\u6570\u5C0F\u4E8Eargc\uFF0C\u90A3\u4E48\u5C31\u662F\u6CA1\u6709\u89E3\u6790\u5B8C\n */\n    for (index = optind; index < argc; index++)\n        printf ("\u672A\u5B9A\u4E49\u7684\u53C2\u6570\uFF1A %s\\n", argv[index]);\n    return 0;\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:"\u5B9E\u4F8B2.\u5B9E\u73B0\u957F\u9009\u9879"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-c",children:'#include <stdio .h>\n#include <stdlib .h>\n/* \u4F7F\u7528getopt_long\u65F6\u4E0D\u9700\u8981unistd*/\n#include <getopt .h>\n\n/* \u7528\u6765\u4F5C\u4E3A\u4E00\u4E2A\u6807\u5FD7\u7684\u503C. */\nstatic int verbose_flag;\n\nint\nmain (argc, argv)\nint argc;\nchar **argv;\n{\n    int c;\n\n    while (1)\n    {\n     /*\n \u7ED3\u6784\u8BF4\u660E\n  struct option {\n const char *name; //\u5339\u914D\u7684\u957F\u9009\u9879\u540D\n int  has_arg; //\u6307\u5B9A\u53C2\u6570\u9009\u9879no_argument required_argument optional_argument\n  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// \u65E0\u503C \u503C\u5FC5\u987B \u503C\u53EF\u9009\n int *flag; //\u6807\u5FD7\u4F4D,\u6570\u636E\u7C7B\u578B\u4E3A int*\n int val; //\u503C\uFF0C\u6807\u5FD7\u4F4D\u4E0D\u4E3A0\u65F6\uFF0C\u5982\u679C\u8BE5\u9009\u9879\u6307\u5B9A\uFF0C\u90A3\u4E48flag=val \u6B64\u65F6val\u4E0D\u53EF\u4F5C\u4E3Acase\u503C\n //\u5426\u5219val\u53EF\u4EE5\u4F5C\u4E3A\u77ED\u9009\u9879 \u4E5F\u5C31\u76F8\u5F53\u4E8Ecase\n };\n */\n        static struct option long_options[] =\n        {\n            /* \u5982\u679C\u6307\u5B9A\u4E86-verbose \u90A3\u4E48verbose_flag = 1*/\n            {"verbose", no_argument,       &verbose_flag, 1},\n            /* \u5982\u679C\u6307\u5B9A\u4E86-brief \u90A3\u4E48verbose_flag = 0*/\n            {"brief",   no_argument,       &verbose_flag, 0},\n            /* --add = -a \u4E0D\u5E26\u53C2\u6570*/\n            {"add",     no_argument,       0, \'a\'},\n            {"append",  no_argument,       0, \'b\'},\n            /* --delete=XX = -dXX \u5E26\u53C2\u6570*/\n            {"delete",  required_argument, 0, \'d\'},\n            {"create",  required_argument, 0, \'c\'},\n            {"file",    required_argument, 0, \'f\'},\n            /* \u5F88\u660E\u663E5438\u4E0D\u53EF\u80FD\u7528\u4E00\u4E2AANSCI\u8868\u793A\u51FA\u6765\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u53EF\u4EE5\u76F4\u63A5\u7528case\u5C31\u53EF\u4EE5*/\n            {"a_very_long_arg",    no_argument, 0, 5438},\n            /* \u6700\u540E\u4E3A\u7A7A\u503C\uFF0C\u6765\u6807\u8BC6\u7ED3\u675F */\n            {0, 0, 0, 0}\n        };\n        /* \u56E0\u4E3A\u6CA1\u6709\u4E86optind\uFF0C\u90A3\u4E48\u5C31\u8981\u7528\u4E00\u4E2A\u503C\u6765\u5B58\u50A8\u5F53\u524D\u7D22\u5F15 */\n        int option_index = 0;\n\n /* \u524D\u4E09\u4E2A\u53C2\u6570\u4E0Egetopt\u76F8\u540C\uFF0C\u7B2C\u56DB\u4E2A\u4E3Aoption\uFF0C\u7B2C\u4E94\u4E2A\u4E3A\u5B58\u7D22\u5F15int\u7684\u6307\u9488*/\n        c = getopt_long (argc, argv, "abc:d:f:",\n                         long_options, &option_index);\n\n        /* \u5F53\u89E3\u6790\u5B8C\u8FD4\u56DE-1 \u8DF3\u51FA\u5FAA\u73AF */\n        if (c == -1)\n            break;\n\n        switch (c)\n        {\n        case 0:\n            /* \u5F53 flag\u4E0D\u4E3A0\u65F6\uFF0C\u9047\u5230\u90A3\u4E9B\u9009\u9879 getopt_long\u8FD4\u56DE0*/\n            if (long_options[option_index].flag != 0)\n                break;\n            printf ("\u9009\u9879 %s", long_options[option_index].name);\n            if (optarg)\n                printf (" \u503C %s", optarg);\n            printf ("\\n");\n            break;\n\n        case \'a\':\n            puts ("\u9009\u9879 -a\\n");\n            break;\n\n        case \'b\':\n            puts ("\u9009\u9879 -b\\n");\n            break;\n        //\u957F\u9009\u9879\n        case 5438:\n            puts ("\u9009\u9879 --a_very_long_arg\\n");\n            break;\n            break;\n        case \'c\':\n            printf ("\u9009\u9879 -c \u503C\u4E3A `%s\'\\n", optarg);\n            break;\n\n        case \'d\':\n            printf ("\u9009\u9879 -d \u503C\u4E3A `%s\'\\n", optarg);\n            break;\n\n        case \'f\':\n            printf ("\u9009\u9879 -f \u503C\u4E3A `%s\'\\n", optarg);\n            break;\n\n        case \'?\':\n            /* getopt_long \u4F1A\u81EA\u52A8\u8F93\u51FA\u9519\u8BEF\uFF0C\u4E0D\u50CFgetopt\u9700\u8981\u81EA\u5DF1\u68C0\u6D4B */\n            break;\n\n        default:\n            abort ();\n        }\n    }\n\n    /* \u68C0\u6D4B\u662F\u5426\u8BBE\u7F6E\u4E86\u6807\u5FD7\u4F4D */\n    if (verbose_flag)\n        puts ("verbose \u6807\u5FD7\u5DF2\u88AB\u8BBE\u7F6E");\n\n    /* \u8F93\u5165\u672A\u89E3\u6790\u5B8C\u7684\u9009\u9879. */\n    if (optind < argc)\n    {\n        printf ("\u65E0\u6548\u9009\u9879\uFF1A ");\n        while (optind < argc)\n            printf ("%s ", argv[optind++]);\n        putchar (\'\\n\');\n    }\n\n    exit (0);\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["\u5B9E\u4F8B3.",(0,o.jsx)(t.strong,{children:"getopt_long_only"})]}),"\n",(0,o.jsx)(t.p,{children:"\u8FD9\u4E2A\u51FD\u6570\u7684\u53C2\u6570\u548Cgetopt_long\u76F8\u540C\uFF0C\u53EA\u662F\u63A5\u53D7\u957F\u53C2\u6570\u65F6\uFF0C\u53EF\u4EE5\u53EA\u7528\u4E00\u4E2A'-'\u6765\u66FF\u4EE3'--'\u3002\u5F53-xx\u6CA1\u6709\u68C0\u6D4B\u5230xx\u7684\u957F\u53C2\u6570\u65F6\u4F1A\u68C0\u6D4B-x\u77ED\u53C2\u6570\u3002"}),"\n",(0,o.jsx)(t.p,{children:"\u540C\u65F6'--'\u4E5F\u80FD\u591F\u4F7F\u7528,\u4E5F\u5C31\u662F\u8BF4-xx=--xx"}),"\n",(0,o.jsx)(t.h1,{children:"\u7ED3\u5C3E"}),"\n\u4E0D\u5F97\u4E0D\u8BF4\uFF0Cgetopt\u662F\u4E00\u4E2A\u5F88\u5B9E\u7528\u7684\u5DE5\u5177\uFF0C\u5BF9\u4E8E\u7F16\u7A0B\u80FD\u63D0\u4F9B\u5F88\u591A\u7684\u4FBF\u5229\u3002gnu\u4E5F\u6709\u5F00\u6E90\u7684\u5B9E\u73B0\u5728gnulib\u548Clibc\u4E2D\u3002\n",(0,o.jsx)(t.p,{children:"\u53C2\u8003\uFF1A"}),"\n",(0,o.jsxs)(t.p,{children:["GNU Libc\u624B\u518C\uFF1A",(0,o.jsx)(t.a,{href:"http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt"}),(0,o.jsx)(t.a,{href:"http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt",children:"http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt"})]}),"\n",(0,o.jsxs)(t.p,{children:["Getopt\u82F1\u6587\u7EF4\u57FA\u9875\u9762\uFF1A",(0,o.jsx)(t.a,{href:"http://en.wikipedia.org/wiki/Getopt"}),(0,o.jsx)(t.a,{href:"http://en.wikipedia.org/wiki/Getopt",children:"http://en.wikipedia.org/wiki/Getopt"})]})]})}function g(n={}){let{wrapper:t}={...(0,i.R)(),...n.components};return t?(0,o.jsx)(t,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},17776:function(n,t,e){e.d(t,{R:()=>a,x:()=>p});var r=e(7378);let o={},i=r.createContext(o);function a(n){let t=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function p(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),r.createElement(i.Provider,{value:t},n.children)}},93976:function(n){n.exports=JSON.parse('{"permalink":"/story/getopt-h-tips","editUrl":"https://github.com/wenerme/wener/edit/master/story/../story/2012/2012-02-23-\u6982\u8FF0getopt.h\u7684\u4F7F\u7528.md","source":"@site/../story/2012/2012-02-23-\u6982\u8FF0getopt.h\u7684\u4F7F\u7528.md","title":"\u6982\u8FF0 getopt.h \u7684\u4F7F\u7528","description":"\u6982\u8FF0","date":"2012-02-23T00:00:00.000Z","tags":[{"inline":true,"label":"C","permalink":"/story/tags/c"},{"inline":true,"label":"\u7F16\u7A0B","permalink":"/story/tags/\u7F16\u7A0B"},{"inline":true,"label":"\u5E93","permalink":"/story/tags/\u5E93"}],"readingTime":5.3,"hasTruncateMarker":true,"authors":[],"frontMatter":{"slug":"getopt-h-tips","title":"\u6982\u8FF0 getopt.h \u7684\u4F7F\u7528","tags":["C","\u7F16\u7A0B","\u5E93"],"date":"2012-02-23T00:00:00.000Z","type":"post"},"unlisted":false,"prevItem":{"title":"\u6211\u7684\u7B2C\u4E00\u4E2AVB.Net\u7A0B\u5E8F","permalink":"/story/first-vb-prog"},"nextItem":{"title":"\u68A6\u5E7B\u897F\u6E38\u7248\u4E2A\u4EBA\u7B80\u4ECB PPT","permalink":"/story/fwj-resume"}}')}}]);