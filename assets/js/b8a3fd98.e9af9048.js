"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["18857"],{59760:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>d,toc:()=>o,default:()=>x,metadata:()=>i,assets:()=>c,contentTitle:()=>l});var i=JSON.parse('{"id":"dev/compression/zlib","title":"zlib","description":"- \u53C2\u8003","source":"@site/../notes/dev/compression/zlib.md","sourceDirName":"dev/compression","slug":"/dev/compression/zlib","permalink":"/notes/dev/compression/zlib","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/dev/compression/zlib.md","tags":[{"inline":true,"label":"Compression","permalink":"/notes/tags/compression"},{"inline":true,"label":"RFC","permalink":"/notes/tags/rfc"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1714721203000,"frontMatter":{"tags":["Compression","RFC"]},"sidebar":"docs","previous":{"title":"gzip","permalink":"/notes/dev/compression/gzip"},"next":{"title":"zstd","permalink":"/notes/dev/compression/zstd"}}'),r=s(86106),t=s(17776);let d={tags:["Compression","RFC"]},l="zlib",c={},o=[];function h(n){let e={a:"a",code:"code",h1:"h1",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"zlib",children:"zlib"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://www.rfc-editor.org/rfc/rfc1950",children:"rfc1950"})," ZLIB Compressed Data Format Specification version 3.3"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://www.rfc-editor.org/rfc/rfc1951",children:"rfc1951"})," DEFLATE Compressed Data Format Specification version 1.3"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/DEFLATE",children:"https://en.wikipedia.org/wiki/DEFLATE"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://kroki.io/bytefield/svg/eNptkcFuwjAMhu97Csu7gLROBQpsvbGWTkjsMu2GOKTUgWoprZJUgBDvPhdYSzcOnyI5X_7YSSchKazVBvx47aw10RaOvkyVAnwUrpTCxVP3odPSDqRUvms8Ke97Rbr9vrVi9561Ooj2nUKKO1mlLhQ1HnnxUI4r7yzCKldltnWUiEkZWKCLT9hj-syA8ZghM2LGzAvzykyYNyZgQmbKRLi8XA9xvifjFKQdzQP3Rk3Z2aWJ3YDnViUtds61gQ2JhLT5rbIJGHxECIujbwqetHe6eeoltMRo_v5PvDx2W-xY2lvAcBZ8zUI-4WfCbpa8mjIGTCVw0HNUbfMkdaB3qn-lirvmrUUBuMqzQpMxlEAirMB699zWJJxPPwd9_JvUtFbb1uZZ9wfuMrPJ",alt:""})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["CMF\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["0-3 CM Compression method\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"8 -> deflate"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["4-7 CINFO Compression info\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"CM=8 LZ77 window size, CINFO=7 -> 32K window size"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["FLG\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"0-4 - FCHECK (check bits for CMF and FLG)"}),"\n",(0,r.jsx)(e.li,{children:"5 - FDICT (preset dictionary)"}),"\n",(0,r.jsxs)(e.li,{children:["6-7 - FLEVEL (compression level)\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"0 - fastest"}),"\n",(0,r.jsx)(e.li,{children:"1 - fast"}),"\n",(0,r.jsx)(e.li,{children:"2 - default"}),"\n",(0,r.jsx)(e.li,{children:"3 - maximum compression, slowest algorithm"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'file /tmp/data\n# /tmp/data: zlib compressed data\nprintf "\\x1f\\x8b\\x08\\x00\\x00\\x00\\x00\\x00" | cat - /tmp/data | gzip -dc > /tmp/out\ncat /tmp/out\n\n# pigz \u5E76\u884C\u538B\u7F29\nbrew install pigz\npigz -z test\npigz -d -z test.zz\n\n# openssl zlib -d -in /tmp/data\n\n# qpdf\nzlib-flate -uncompress < FILE\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Header"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"L"}),(0,r.jsx)(e.th,{children:"ZLIB"}),(0,r.jsx)(e.th,{children:"GZIP"}),(0,r.jsx)(e.th,{children:"Notes"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"78 01"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{children:"No Compression/low"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2"}),(0,r.jsx)(e.td,{children:"78 5E"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{children:"Fast Compression"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"3"}),(0,r.jsx)(e.td,{children:"78 5E"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"4"}),(0,r.jsx)(e.td,{children:"78 5E"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"5"}),(0,r.jsx)(e.td,{children:"78 5E"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"6"}),(0,r.jsx)(e.td,{children:"78 9C"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{children:"Default Compression"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"7"}),(0,r.jsx)(e.td,{children:"78 DA"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{children:"Best Compression"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"8"}),(0,r.jsx)(e.td,{children:"78 DA"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"9"}),(0,r.jsx)(e.td,{children:"78 DA"}),(0,r.jsx)(e.td,{children:"1F 8B"}),(0,r.jsx)(e.td,{})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"CMF -Compression Method and flags"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"bits 0 to 3  CM     Compression method\nbits 4 to 7  CINFO  Compression info\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["CM = 8\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Deflate"}),"\n",(0,r.jsx)(e.li,{children:"window size up to 32K"}),"\n",(0,r.jsx)(e.li,{children:"used by gzip and PNG"}),"\n",(0,r.jsxs)(e.li,{children:["CINFO - base-2 logarithm of the LZ77 window size, minus eight\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"CINFO=7 indicates a 32K window size"}),"\n",(0,r.jsx)(e.li,{children:"\u56E0\u6B64\u5927\u591A\u524D\u7F00\u90FD\u662F 78"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["CM = 15\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"reserved"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"bits 0 to 4  FCHECK  (check bits for CMF and FLG)\nbit  5       FDICT   (preset dictionary)\nbits 6 to 7  FLEVEL  (compression level)\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:" +---+---+\n |CMF|FLG| (2 bytes - Defines the compression mode - More details below)\n +---+---+\n +---+---+---+---+\n |     DICTID    | (4 bytes. Present only when FLG.FDICT is set.) - Mostly not set\n +---+---+---+---+\n +=====================+\n |...compressed data...| (variable size of data)\n +=====================+\n +---+---+---+---+\n |     ADLER32   |  (4 bytes of checksum)\n +---+---+---+---+\n"})})]})}function x(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(h,{...n})}):h(n)}},17776:function(n,e,s){s.d(e,{R:()=>d,x:()=>l});var i=s(7378);let r={},t=i.createContext(r);function d(n){let e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);