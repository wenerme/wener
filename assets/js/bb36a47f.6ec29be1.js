"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["456253"],{150341:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>r,toc:()=>d,default:()=>h,metadata:()=>l,assets:()=>c,contentTitle:()=>a});var l=JSON.parse('{"id":"db/relational/postgresql/postgresql-scale","title":"Postgresql Scale","description":"- scale up","source":"@site/../notes/db/relational/postgresql/postgresql-scale.md","sourceDirName":"db/relational/postgresql","slug":"/db/relational/postgresql/scale","permalink":"/notes/db/relational/postgresql/scale","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/postgresql/postgresql-scale.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1715155165000,"frontMatter":{"title":"Postgresql Scale"},"sidebar":"docs","previous":{"title":"PostgreSQL Replicate","permalink":"/notes/db/relational/postgresql/replication"},"next":{"title":"Pg SQL \u5E38\u89C1\u95EE\u9898","permalink":"/notes/db/relational/postgresql/sql-faq"}}'),i=s(486106),t=s(917776);let r={title:"Postgresql Scale"},a="Postgresql Scale",c={},d=[{value:"Story",id:"story",level:2},{value:"Logical Replication",id:"logical-replication",level:2}];function o(e){let n={a:"a",admonition:"admonition",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"postgresql-scale",children:"Postgresql Scale"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["scale up\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5806\u786C\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["scale out replicas\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8BFB\u5199\u5206\u79BB"}),"\n",(0,i.jsx)(n.li,{children:"pub/sub"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["scale out sharding\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5206\u7247 - \u591A\u8282\u70B9"}),"\n",(0,i.jsxs)(n.li,{children:["\u5E94\u7528\u5206\u7247 - \u903B\u8F91\u6620\u5C04\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53EF\u63A7\u6027\u9AD8\u3001\u7279\u6B8A\u573A\u666F"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u670D\u52A1\u5206\u7247 - cdb\u3001citus\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4F7F\u7528\u7B80\u5355\u3001\u8981\u6C42\u4F7F\u7528 patten \u7B26\u5408"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"PostgreSQL \u5E76\u4E0D\u662F OLAP \u6570\u636E\u5E93\uFF0C\u80FD\u529B\u6709\u4E0A\u9650\uFF0C\u5F53\u53D1\u73B0\u6709\u66F4\u591A\u7684\u65F6\u95F4\u548C\u8D44\u6E90\u6295\u5165 \u6570\u636E\u4ED3\u5E93 \u65F6\uFF0C\u53EF\u4EE5\u8003\u8651\u9009\u62E9\u4E00\u4E2A\u771F\u6B63\u7684\u6570\u4ED3\u6570\u636E\u5E93\u3002"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["backup\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/pgbackrest/pgbackrest",children:"pgbackrest"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MIT, perl & C"}),"\n",(0,i.jsx)(n.li,{children:"by Crunchy Data"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/notes/db/relational/postgresql/wal-g",children:"wal-g"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"by Citus Data, Apache-2.0, Go"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Barman\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"2ndQuadrant, GPL v 3.0, python"}),"\n",(0,i.jsx)(n.li,{children:"basebackup & rsync"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["pg_probackup\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"by Postgres Professional, PostgreSQL License, C"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"BART"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.postgresql.eu/events/pgconfeu2018/sessions/session/2098/slides/123/Advanced%20backup%20methods.pdf",children:"Advanced PostgreSQL backup & recovery methods"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"story",children:"Story"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Gitlab \u56E0\u4E3A License \u95EE\u9898\u653E\u5F03 Citus ",(0,i.jsx)(n.a,{href:"https://about.gitlab.com/handbook/engineering/development/enablement/data_stores/database/doc/citus.html",children:"Sharding GitLab with CitusDB"})]}),"\n",(0,i.jsxs)(n.li,{children:["Gitlab PostgreSQL Partitioning with FDW\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://about.gitlab.com/handbook/engineering/development/enablement/data_stores/database/doc/fdw-sharding.html",children:"PostgreSQL 11 sharding with foreign data wrappers and partitioning"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u95EE\u9898\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9700\u8981\u4E3A foreign server \u8FDE\u63A5\u4FE1\u606F"}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u597D\u7EF4\u62A4 schema"}),"\n",(0,i.jsx)(n.li,{children:"\u53EA\u652F\u6301\u672C\u5730 foreign key"}),"\n",(0,i.jsx)(n.li,{children:"\u53EF\u80FD\u4E0D\u4F1A push down \u95EE\u9898"}),"\n",(0,i.jsx)(n.li,{children:"\u6027\u80FD\u964D\u4F4E"}),"\n",(0,i.jsx)(n.li,{children:"\u6267\u884C\u548C\u8BA1\u5212\u65F6\u95F4\u589E\u52A0"}),"\n",(0,i.jsx)(n.li,{children:"\u6BCF\u4E2A\u5206\u7247\u90FD\u9700\u8981 HA \u96C6\u7FA4"}),"\n",(0,i.jsx)(n.li,{children:"\u6CA1\u6709 parallel scan"}),"\n",(0,i.jsx)(n.li,{children:"\u66F4\u65B0\u6027\u80FD\u95EE\u9898"}),"\n",(0,i.jsx)(n.li,{children:"\u6CA1\u6709\u5168\u5C40\u4E8B\u52A1"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"logical-replication",children:"Logical Replication"}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4E0D\u4F1A\u590D\u5236 schema"}),"\n"]})})]})}function h(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},917776:function(e,n,s){s.d(n,{R:()=>r,x:()=>a});var l=s(7378);let i={},t=l.createContext(i);function r(e){let n=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);