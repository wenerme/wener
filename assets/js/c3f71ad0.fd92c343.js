"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["37091"],{802735:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>c,default:()=>d,metadata:()=>i,assets:()=>l,contentTitle:()=>o});var i=JSON.parse('{"id":"ai/model/img2img-turbo","title":"img2img-turbo","description":"img2img-turbo","source":"@site/../notes/ai/model/img2img-turbo.md","sourceDirName":"ai/model","slug":"/ai/model/img2img-turbo","permalink":"/notes/ai/model/img2img-turbo","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/ai/model/img2img-turbo.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1748756432000,"frontMatter":{"title":"img2img-turbo","refs":["arXiv:2403.12036"]},"sidebar":"docs","previous":{"title":"\u6DF7\u5143","permalink":"/notes/ai/model/hunyuan"},"next":{"title":"img2img","permalink":"/notes/ai/model/img2img"}}'),r=t(486106),a=t(917776);let s={title:"img2img-turbo",refs:["arXiv:2403.12036"]},o,l={},c=[{value:"img2img-turbo",id:"img2img-turbo",level:2},{value:"Notes",id:"notes",level:2}];function m(e){let n={a:"a",code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"img2img-turbo",children:"img2img-turbo"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/GaParmar/img2img-turbo",children:"GaParmar/img2img-turbo"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"MIT"}),"\n",(0,r.jsx)(n.li,{children:"One-step image-to-image with Stable Diffusion turbo"}),"\n",(0,r.jsx)(n.li,{children:"sketch2image, day2night, clear2rainy"}),"\n",(0,r.jsx)(n.li,{children:"pix2pix-turbo"}),"\n",(0,r.jsxs)(n.li,{children:["cyclegan-turbo\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4F7F\u7528 dino \u505A\u7279\u5F81\u63D0\u53D6"}),"\n",(0,r.jsx)(n.li,{children:"\u5229\u7528 sd-turbo"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"\u6A21\u578B\u548C\u8BAD\u7EC3\u53EA\u80FD A <-> B"}),"\n",(0,r.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["One-Step Image Translation with Text-to-Image Models ",(0,r.jsx)(n.a,{href:"https://arxiv.org/abs/2403.12036",children:"https://arxiv.org/abs/2403.12036"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"2024"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'git clone https://github.com/GaParmar/img2img-turbo\ncd img2img-turbo\n\n# horse2zebra\n# ====================\n# https://github.com/GaParmar/img2img-turbo/blob/main/docs/training_cyclegan_turbo.md\n# train_A 1067 test_A 120 train_B 1334 test_B 140\n# 256*256\n# \u6A21\u578B\u7EA6 1.2G, Nvidia L4 24G 3.5it/s, \u9ED8\u8BA4 25000 steps \u7EA6 24h\nbash scripts/download_horse2zebra.sh\n\npyenv install 3.9\npyenv local 3.9\npython -m venv venv\nsource venv/bin/activate\n\npip install -r requirements.txt\n# wandb \u914D\u7F6E $HOME/.netrc\npip install wandb vision_aided_loss\n\n# https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/15863#issuecomment-2125026282\n\n# $HOME/.cache/huggingface/accelerate/default_config.yaml\naccelerate config\nexport NCCL_P2P_DISABLE=1\n\naccelerate launch --main_process_port 29501 src/train_cyclegan_turbo.py \\\n  --pretrained_model_name_or_path="stabilityai/sd-turbo" \\\n  --output_dir="output/cyclegan_turbo/my_horse2zebra" \\\n  --dataset_folder "data/my_horse2zebra" \\\n  --train_img_prep "resize_286_randomcrop_256x256_hflip" --val_img_prep "no_resize" \\\n  --learning_rate="1e-5" --max_train_steps=25000 \\\n  --train_batch_size=1 --gradient_accumulation_steps=1 \\\n  --report_to "wandb" --tracker_project_name "gparmar_unpaired_h2z_cycle_debug_v2" \\\n  --enable_xformers_memory_efficient_attention --validation_steps 250 \\\n  --lambda_gan 0.5 --lambda_idt 1 --lambda_cycle 1\n\n# \u8F93\u51FA\u5185\u5BB9\nls output/cyclegan_turbo/my_horse2zebra/\n\n# \u63A8\u5BFC\npython src/inference_unpaired.py --model_path "output/cyclegan_turbo/my_horse2zebra/checkpoints/model_1001.pkl" \\\n  --input_image "data/my_horse2zebra/test_A/n02381460_20.jpg" \\\n  --prompt "picture of a zebra" --direction "a2b" \\\n  --output_dir "outputs" --image_prep "no_resize"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["pre-trained text-conditional one-step diffusion model\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"SD-Turbo"}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},917776:function(e,n,t){t.d(n,{R:()=>s,x:()=>o});var i=t(7378);let r={},a=i.createContext(r);function s(e){let n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);