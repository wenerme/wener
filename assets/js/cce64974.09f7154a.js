"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["853441"],{260862:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>i,toc:()=>l,default:()=>u,metadata:()=>r,assets:()=>d,contentTitle:()=>s});var r=JSON.parse('{"id":"blockchain/eth/eip-721","title":"ERC721","description":"- NFT \u6807\u51C6","source":"@site/../notes/blockchain/eth/eip-721.md","sourceDirName":"blockchain/eth","slug":"/blockchain/eth/eip-721","permalink":"/notes/blockchain/eth/eip-721","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/blockchain/eth/eip-721.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1659031280000,"frontMatter":{"title":"ERC721"},"sidebar":"docs","previous":{"title":"ERC-20","permalink":"/notes/blockchain/eth/eip-20"},"next":{"title":"EIP-777","permalink":"/notes/blockchain/eth/eip-777"}}'),o=t(486106),a=t(917776);let i={title:"ERC721"},s="ERC-721",d={},l=[{value:"\u83B7\u53D6\u6240\u6709 Token",id:"\u83B7\u53D6\u6240\u6709-token",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"erc-721",children:"ERC-721"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"NFT \u6807\u51C6"}),"\n",(0,o.jsxs)(n.li,{children:["\u76F8\u5173 EIP\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"[EIP-2981]: NFT Royalty Standard"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://erc721.org/",children:"https://erc721.org/"})}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-solidity",children:'/// ERC-165 0x80ac58cd.\ninterface ERC721 /* is ERC165 */ {\n    event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);\n    event Approval(address indexed _owner, address indexed _approved, uint256 indexed _tokenId);\n    event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);\n\n    /// owner \u6709\u591A\u5C11\u4E2A NFT\n    function balanceOf(address _owner) external view returns (uint256);\n\n    /// NTF \u7684 owner\n    function ownerOf(uint256 _tokenId) external view returns (address);\n\n    /// \u8F6C\u8BA9 NTF \u6240\u6709\u6743\n    /// \u4F1A\u786E\u8BA4 _to \u5B9E\u73B0 IERC721Receiver - onERC721Received(address,address,uint256,bytes)\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external payable;\n\n    /// \u540C\u5E26 data \u7684 safeTransferFrom - data \u9ED8\u8BA4\u4E3A \u7A7A\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable;\n\n    /// \u8F6C\u8BA9 NTF \u6240\u6709\u6743\n    /// msg.sender \u4E3A owner \u6216 \u6279\u51C6\u5730\u5740\n    function transferFrom(address _from, address _to, uint256 _tokenId) external payable;\n\n    /// \u6279\u51C6 _approved \u8FDB\u884C\u64CD\u4F5C\n    /// \u4E8B\u4EF6: Approval\n    function approve(address _approved, uint256 _tokenId) external payable;\n\n    /// \u6279\u51C6 _operator \u64CD\u4F5C\u6240\u6709 NTF\n    /// \u4E8B\u4EF6: ApprovalForAll\n    function setApprovalForAll(address _operator, bool _approved) external;\n\n    function getApproved(uint256 _tokenId) external view returns (address);\n    function isApprovedForAll(address _owner, address _operator) external view returns (bool);\n}\n\n/// ERC-165 0x150b7a02.\ninterface ERC721TokenReceiver {\n    /// transfer \u5230\u5408\u7EA6\u7684\u56DE\u8C03\n    function onERC721Received(address _operator, address _from, uint256 _tokenId, bytes _data) external returns(bytes4);\n}\n\n/// \u53EF\u9009\u5143\u6570\u636E\u6269\u5C55\u63A5\u53E3\n/// ERC-165 0x5b5e139f\ninterface ERC721Metadata /* is ERC721 */ {\n    /// @notice A descriptive name for a collection of NFTs in this contract\n    function name() external view returns (string _name);\n\n    /// @notice An abbreviated name for NFTs in this contract\n    function symbol() external view returns (string _symbol);\n\n    /// @notice A distinct Uniform Resource Identifier (URI) for a given asset.\n    /// @dev Throws if `_tokenId` is not a valid NFT. URIs are defined in RFC\n    ///  3986. The URI may point to a JSON file that conforms to the "ERC721\n    ///  Metadata JSON Schema".\n    function tokenURI(uint256 _tokenId) external view returns (string);\n}\n\n/// @title ERC-721 Non-Fungible Token Standard, optional enumeration extension\n/// @dev See https://eips.ethereum.org/EIPS/eip-721\n///  Note: the ERC-165 identifier for this interface is 0x780e9d63.\ninterface ERC721Enumerable /* is ERC721 */ {\n    /// @notice Count NFTs tracked by this contract\n    /// @return A count of valid NFTs tracked by this contract, where each one of\n    ///  them has an assigned and queryable owner not equal to the zero address\n    function totalSupply() external view returns (uint256);\n\n    /// @notice Enumerate valid NFTs\n    /// @dev Throws if `_index` >= `totalSupply()`.\n    /// @param _index A counter less than `totalSupply()`\n    /// @return The token identifier for the `_index`th NFT,\n    ///  (sort order not specified)\n    function tokenByIndex(uint256 _index) external view returns (uint256);\n\n    /// @notice Enumerate NFTs assigned to an owner\n    /// @dev Throws if `_index` >= `balanceOf(_owner)` or if\n    ///  `_owner` is the zero address, representing invalid NFTs.\n    /// @param _owner An address where we are interested in NFTs owned by them\n    /// @param _index A counter less than `balanceOf(_owner)`\n    /// @return The token identifier for the `_index`th NFT assigned to `_owner`,\n    ///   (sort order not specified)\n    function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256);\n}\n'})}),"\n",(0,o.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,o.jsx)(n.h2,{id:"\u83B7\u53D6\u6240\u6709-token",children:"\u83B7\u53D6\u6240\u6709 Token"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const myContract = new web3.eth.Contract(abiJson, contractAddress);\nmyContract\n  .getPastEvents('Transfer', {\n    filter: {\n      _from: '0x0000000000000000000000000000000000000000',\n    },\n    fromBlock: 0,\n  })\n  .then((events) => {\n    for (let event of events) {\n      console.log(event.returnValues._tokenId);\n    }\n  });\n"})})]})}function u(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},917776:function(e,n,t){t.d(n,{R:()=>i,x:()=>s});var r=t(7378);let o={},a=r.createContext(o);function i(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);