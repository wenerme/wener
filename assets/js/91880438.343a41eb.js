"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["6161"],{1100:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>i,toc:()=>c,default:()=>h,metadata:()=>l,assets:()=>r,contentTitle:()=>d});var l=JSON.parse('{"id":"ai/dev/evalscope","title":"evalscope","description":"- modelscope/evalscope","source":"@site/../notes/ai/dev/evalscope.md","sourceDirName":"ai/dev","slug":"/ai/dev/evalscope","permalink":"/notes/ai/dev/evalscope","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/ai/dev/evalscope.md","tags":[{"inline":true,"label":"Evaluation","permalink":"/notes/tags/evaluation"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1766368312000,"frontMatter":{"tags":["Evaluation"]},"sidebar":"docs","previous":{"title":"FAQ","permalink":"/notes/ai/dev/cuda"},"next":{"title":"genai","permalink":"/notes/ai/dev/genai"}}'),t=s(486106),a=s(917776);let i={tags:["Evaluation"]},d="evalscope",r={},c=[{value:"backend",id:"backend",level:2},{value:"service",id:"service",level:2},{value:"dataset",id:"dataset",level:2},{value:"eval",id:"eval",level:2},{value:"datasets",id:"datasets",level:2}];function o(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"evalscope",children:"evalscope"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/modelscope/evalscope",children:"modelscope/evalscope"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apache-2.0, Python"}),"\n",(0,t.jsx)(n.li,{children:"Evaluation Framework for LLMs"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install evalscope\n"})}),"\n",(0,t.jsx)(n.h2,{id:"backend",children:"backend"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Native Backend"}),"\n",(0,t.jsxs)(n.li,{children:["OpenCompass\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u63D0\u4F9B\u4E86\u66F4\u590D\u6742\u7684\u8BC4\u6D4B\u7B56\u7565\u548C\u80FD\u591F\u652F\u6301\u66F4\u5E7F\u6CDB\u7684\u793E\u533A\u6A21\u578B\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["VLMEvalKit\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u652F\u6301\u56FE\u50CF\u7406\u89E3\u3001\u89C6\u89C9\u95EE\u7B54\u7B49\u89C6\u89C9\u4E0E\u8BED\u8A00\u7ED3\u5408\u7684\u4EFB\u52A1\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["RAGEval\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u652F\u6301 MTEB (Massive Text Embedding Benchmark) \u548C CLIP Benchmark\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u8BC4\u6D4B Embedding \u6A21\u578B\u3001\u68C0\u7D22\u5668\u6548\u7387\u53CA\u751F\u6210\u8D28\u91CF"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"service",children:"service"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u7AEF\u70B9"}),(0,t.jsx)(n.th,{children:"\u65B9\u6CD5"}),(0,t.jsx)(n.th,{children:"\u529F\u80FD"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health"})}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:"\u5065\u5EB7\u68C0\u67E5"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/api/v1/eval"})}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:"\u6A21\u578B\u8BC4\u6D4B"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/api/v1/perf"})}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:"\u6027\u80FD\u538B\u6D4B"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/api/v1/eval/params"})}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:"\u8BC4\u6D4B\u53C2\u6570\u8BF4\u660E"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/api/v1/perf/params"})}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:"\u538B\u6D4B\u53C2\u6570\u8BF4\u660E"})]})]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  // --- \u57FA\u672C\u914D\u7F6E ---\n  "api_key": "your-api-key", // str - API \u8BA4\u8BC1\u5BC6\u94A5 (\u9ED8\u8BA4: "EMPTY")\n  "api_url": "https://dashscope.aliyuncs.com/compatible-mode/v1", // str - API \u670D\u52A1\u5730\u5740 (\u5FC5\u9700, \u5BF9\u5F00\u653EAPI\u6A21\u578B)\n  "model": "qwen-plus", // str - \u88AB\u6D4B\u6A21\u578B\u540D\u79F0\u6216\u6807\u8BC6\n  "model_id": "qwen-plus-v1", // str - \u6A21\u578B\u552F\u4E00\u6807\u8BC6 (\u53EF\u9009)\n\n  // --- \u6570\u636E\u96C6\u914D\u7F6E ---\n  "datasets": [\n    // \u8BC4\u6D4B\u6240\u7528\u6570\u636E\u96C6 (list of str)\n    "gsm8k",\n    "mmlu"\n  ],\n  "limit": 10, // int | float - \u8BC4\u6D4B\u6837\u672C\u4E0A\u9650 (\u6570\u503C\u4E3A\u4E2A\u6570, \u5C0F\u6570\u4E3A\u6BD4\u4F8B)\n  // dict - \u52A0\u8F7D\u6570\u636E\u96C6\u65F6\u7684\u9644\u52A0\u53C2\u6570 (\u53EF\u9009)\n  "dataset_args": {\n    "gsm8k": {\n      // \u5B50\u96C6\n      "subset_list": ["main"],\n      "few_shot_num": 0\n    }\n  },\n  "dataset_dir": "~/.cache/modelscope/hub/datasets", // str - \u6570\u636E\u96C6\u7F13\u5B58\u76EE\u5F55 (\u53EF\u9009)\n  "repeats": 1, // int - \u6BCF\u4E2A\u6837\u672C\u91CD\u590D\u8BC4\u6D4B\u6B21\u6570 (\u9ED8\u8BA4: 1)\n\n  // --- \u751F\u6210\u914D\u7F6E ---\n  "generation_config": {\n    "max_tokens": 2048, // int - \u6700\u591A\u751F\u6210 token \u6570 (\u9ED8\u8BA4: 2048)\n    "temperature": 0, // float - \u91C7\u6837\u6E29\u5EA6 (\u9ED8\u8BA4: 0)\n    "top_k": 1, // int - top-k \u91C7\u6837\u53C2\u6570 (\u53EF\u9009)\n    "top_p": 1.0, // float - \u6838\u91C7\u6837\u53C2\u6570 (\u53EF\u9009)\n    "stream": false, // bool - \u662F\u5426\u5F00\u542F\u6D41\u5F0F\u751F\u6210 (\u53EF\u9009)\n    "timeout": 60 // float - \u8BF7\u6C42\u8D85\u65F6\u65F6\u95F4(\u79D2) (\u53EF\u9009)\n  },\n\n  // --- \u8BC4\u6D4B\u4E0E\u8BC4\u5BA1\u6D41\u7A0B ---\n  "eval_batch_size": 1, // int - \u5355\u6279\u6B21\u6837\u672C\u6570 (\u9ED8\u8BA4: 1)\n  "eval_type": "service", // str - \u8BC4\u6D4B\u7C7B\u578B (\u586B api_url \u5219\u81EA\u52A8\u4E3A service, \u9ED8\u8BA4\u4E3A\u81EA\u52A8)\n  "judge_strategy": "auto", // str - LLM \u8BC4\u5BA1\u6A21\u5F0F (auto/single/pairwise\uFF0C\u9ED8\u8BA4\u4E3A auto)\n  "judge_worker_num": 1, // int - \u8BC4\u5BA1\u8FDB\u7A0B\u6570 (\u9ED8\u8BA4: 1)\n  "judge_model_args": {}, // dict - LLM \u8BC4\u5BA1\u6A21\u578B\u914D\u7F6E (\u53EF\u9009)\n\n  // --- \u8FD0\u884C\u914D\u7F6E ---\n  "seed": 42, // int - \u968F\u673A\u79CD\u5B50 (\u9ED8\u8BA4: 42)\n  "work_dir": "./outputs", // str - \u8F93\u51FA\u76EE\u5F55 (\u65E5\u5FD7\u3001\u7ED3\u679C\u7B49)\n  "debug": false, // bool - \u662F\u5426\u8C03\u8BD5\u6A21\u5F0F (\u9ED8\u8BA4: false)\n  "use_cache": "", // str - \u5DF2\u6709\u7ED3\u679C\u7F13\u5B58\u8DEF\u5F84 (\u53EF\u9009\uFF0C\u590D\u7528\u7ED3\u679C)\n  // dict - \u6A21\u578B\u521D\u59CB\u5316\u989D\u5916\u53C2\u6570 (\u53EF\u9009)\n  "model_args": {\n    "default_headers": {\n      "X-Custom-Header": "custom-value",\n      "X-Request-ID": "eval-12345",\n      "X-Tenant-ID": "tenant-001"\n    },\n    "timeout": 60.0,\n    "max_retries": 3\n  }\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"# \u4F7F\u7528 OpenAI \u517C\u5BB9\u5BA2\u6237\u7AEF\uFF0C\u76F4\u63A5\u900F\u4F20 model_args\nself.client = OpenAI(\n    api_key=self.api_key,\n    base_url=self.base_url,\n    **model_args, # <--- \u76F4\u63A5\u900F\u4F20\u6240\u6709\u53C2\u6570\n)\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["work_dir=./outputs\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"YYYYMMDD_HHMMSS"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["use_cache\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u8F93\u51FA\u76EE\u5F55,"}),"\n",(0,t.jsx)(n.li,{children:"\u65AD\u70B9\u7EED\u8BC4"}),"\n",(0,t.jsx)(n.li,{children:"\u5F3A\u5236\u6307\u5B9A\u76EE\u5F55"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"dataset",children:"dataset"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"~/.cache/modelscope/hub/datasets"}),"\n",(0,t.jsx)(n.li,{children:"~/.cache/evalscope"}),"\n",(0,t.jsx)(n.li,{children:"EVALSCOPE_CACHE"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://evalscope.readthedocs.io/zh-cn/latest/get_started/supported_dataset/index.html",children:"https://evalscope.readthedocs.io/zh-cn/latest/get_started/supported_dataset/index.html"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"eval",children:"eval"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"outputs/20251213_141531/\n\u251C\u2500\u2500 configs/          # \u4EFB\u52A1\u914D\u7F6E\n\u2502   \u2514\u2500\u2500 task_config_f384e2.yaml\n\u251C\u2500\u2500 logs/             # \u8BC4\u6D4B\u65E5\u5FD7\n\u2502   \u2514\u2500\u2500 eval_log.log\n\u251C\u2500\u2500 predictions/      # \u6A21\u578B\u9884\u6D4B\u7ED3\u679C (\u539F\u59CB\u8F93\u51FA)\n\u2502   \u2514\u2500\u2500 qwen3-vl-4b-instruct/\n\u2502       \u251C\u2500\u2500 gsm8k_main.jsonl\n\u2502       \u251C\u2500\u2500 arc_ARC-Easy.jsonl\n\u2502       \u251C\u2500\u2500 arc_ARC-Challenge.jsonl\n\u2502       \u251C\u2500\u2500 hellaswag_default.jsonl\n\u2502       \u2514\u2500\u2500 mmlu_*.jsonl (57\u4E2A\u5B50\u96C6)\n\u251C\u2500\u2500 reports/          # \u8BC4\u6D4B\u62A5\u544A (\u6C47\u603B\u5206\u6570)\n\u2502   \u2514\u2500\u2500 qwen3-vl-4b-instruct/\n\u2502       \u251C\u2500\u2500 gsm8k.json\n\u2502       \u251C\u2500\u2500 arc.json\n\u2502       \u251C\u2500\u2500 hellaswag.json\n\u2502       \u2514\u2500\u2500 mmlu.json\n\u2514\u2500\u2500 reviews/          # \u8BC4\u5206\u8BE6\u60C5 (\u6BCF\u9053\u9898\u5BF9\u9519)\n    \u2514\u2500\u2500 qwen3-vl-4b-instruct/\n        \u2514\u2500\u2500 *.jsonl (61\u4E2A\u6587\u4EF6)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"datasets",children:"datasets"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"DEFAULT_EVALSCOPE_CACHE_DIR=~/.cache/evalscope"}),"\n",(0,t.jsx)(n.li,{children:"~/.cache/evalscope/datasets"}),"\n",(0,t.jsx)(n.li,{children:"evalscope/api/dataset/loader.py"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"~/.cache/evalscope/datasets/{dataset_name}-{hash}/"})}),"\n",(0,t.jsxs)(n.li,{children:["\u914D\u7F6E\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"datasets=[]"}),"\n",(0,t.jsx)(n.li,{children:"dataset_hub=HuggingFace|ModelScope"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},917776:function(e,n,s){s.d(n,{R:()=>i,x:()=>d});var l=s(7378);let t={},a=l.createContext(t);function i(e){let n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),l.createElement(a.Provider,{value:n},e.children)}}}]);