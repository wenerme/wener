"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["9720"],{13455:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>r,toc:()=>o,default:()=>d,metadata:()=>i,assets:()=>a,contentTitle:()=>c});var i=JSON.parse('{"id":"service/storage/s3/README","title":"S3","description":"- garage","source":"@site/../notes/service/storage/s3/README.md","sourceDirName":"service/storage/s3","slug":"/service/storage/s3/","permalink":"/notes/service/storage/s3/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/storage/s3/README.md","tags":[{"inline":true,"label":"AWS","permalink":"/notes/tags/aws"},{"inline":true,"label":"Limits","permalink":"/notes/tags/limits"},{"inline":true,"label":"Protocol","permalink":"/notes/tags/protocol"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1753172183000,"frontMatter":{"title":"S3","tags":["AWS","Limits","Protocol"]},"sidebar":"docs","previous":{"title":"rustfs","permalink":"/notes/service/storage/rustfs"},"next":{"title":"garage","permalink":"/notes/service/storage/s3/garage"}}'),t=s(86106),l=s(17776);let r={title:"S3",tags:["AWS","Limits","Protocol"]},c="S3",a={},o=[{value:"Limits",id:"limits",level:2},{value:"headers",id:"headers",level:2},{value:"API",id:"api",level:2},{value:"Profile",id:"profile",level:2}];function h(e){let n={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"s3",children:"S3"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/notes/service/storage/s3/garage",children:"garage"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/notes/service/storage/minio/",children:"MinIO"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/oxyno-zeta/s3-proxy",children:"oxyno-zeta/s3-proxy"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apache-2.0, Go"}),"\n",(0,t.jsx)(n.li,{children:"Reverse Proxy with GET, PUT and DELETE methods and authentication"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/gaul/s3proxy",children:"gaul/s3proxy"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apache-2.0, Java"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["S3 Proxy with overlay\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/Switch-TV/s3proxy/tree/feature/overlay-middleware",children:"https://github.com/Switch-TV/s3proxy/tree/feature/overlay-middleware"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/dandanthedev/littletinystorage",children:"dandanthedev/littletinystorage"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"GPLv3, TS"}),"\n",(0,t.jsx)(n.li,{children:"S3 \u517C\u5BB9\u63A5\u53E3"}),"\n",(0,t.jsx)(n.li,{children:"\u53EF\u4EE5\u4F5C\u4E3A\u5B9E\u73B0\u7684\u53C2\u8003"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"glacier - \u51B7\u5B58\u50A8, 90 \u5929 \u5220\u9664"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.del,{children:(0,t.jsx)(n.a,{href:"https://github.com/pottava/aws-s3-proxy",children:"pottava/aws-s3-proxy"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"MIT, Go"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"limits",children:"Limits"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"item"}),(0,t.jsx)(n.th,{children:"spec"}),(0,t.jsx)(n.th,{children:"e.g."})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"key"}),(0,t.jsx)(n.td,{children:"1024 bytes"}),(0,t.jsx)(n.td,{children:"a/b/c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"key segment"}),(0,t.jsx)(n.td,{children:"255 bytes"}),(0,t.jsx)(n.td,{children:"a"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bucket"}),(0,t.jsx)(n.td,{children:"63 bytes"}),(0,t.jsx)(n.td,{})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"bucket name"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"(?!(^xn--|.+-s3alias$))^[a-z0-9][a-z0-9-]{1,61}[a-z0-9]$\n(?!(^((2(5[0-5]|[0-4][0-9])|[01]?[0-9]{1,2})\\.){3}(2(5[0-5]|[0-4][0-9])|[01]?[0-9]{1,2})$|^xn--|.+-s3alias$))^[a-z0-9][a-z0-9.-]{1,61}[a-z0-9]$\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["key\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"UTF8"}),"\n",(0,t.jsxs)(n.li,{children:["\u5B89\u5168\u5B57\u7B26 ",(0,t.jsx)(n.code,{children:"[0-9a-zA-z!_.*'()-]"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-keys.html",children:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-keys.html"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html",children:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"BucketName \u89C4\u5219"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/qfacts.html",children:"S3 Limits"})}),"\n",(0,t.jsxs)(n.li,{children:["minio ",(0,t.jsx)(n.a,{href:"https://min.io/docs/minio/linux/operations/concepts/thresholds.html",children:"Thresholds and Limits"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"headers",children:"headers"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"x-amz-meta-"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"x-amz-acl"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"x-amz-server-side-encryption-"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"x-amz-server-side-encryption"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"x-amz-storage-class"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"content-type\ncache-control\ncontent-encoding\ncontent-disposition\ncontent-language\nx-amz-website-redirect-location\n\nContent-MD5: ${BASE64}\n\n# SigV4 - Signature Version 4\n# UNSIGNED-PAYLOAD \u4E0D\u8BA1\u7B97 payload hash\nx-amz-content-sha256: UNSIGNED-PAYLOAD\nx-amz-content-sha256: ${hex(sha256)}\n\n# \u81EA\u52A8\u5904\u7406\nx-amz-sdk-checksum: SHA256\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/checking-object-integrity.html",children:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/checking-object-integrity.html"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"### List Objects V2\nGET /?list-type=2&continuation-token=ContinuationToken&delimiter=Delimiter&encoding-type=EncodingType&fetch-owner=FetchOwner&max-keys=MaxKeys&prefix=Prefix&start-after=StartAfter HTTP/1.1\nHost: Bucket.s3.amazonaws.com\nx-amz-request-payer: RequestPayer\nx-amz-expected-bucket-owner: ExpectedBucketOwner\nx-amz-optional-object-attributes: OptionalObjectAttributes\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["ObjectIdentifier\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Key\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"XML \u9700\u8981\u505A escape"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"ETag"}),"\n",(0,t.jsx)(n.li,{children:"LastModifiedTime"}),"\n",(0,t.jsx)(n.li,{children:"Size"}),"\n",(0,t.jsx)(n.li,{children:"VersionId"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["write once, read many (WORM) model\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Lock"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["S3 API compatibility\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.openio.io/latest/source/arch-design/s3_compliancy.html",children:"https://docs.openio.io/latest/source/arch-design/s3_compliancy.html"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.riak.com/riak/cs/2.1.1/references/apis/storage/s3/index.html",children:"https://docs.riak.com/riak/cs/2.1.1/references/apis/storage/s3/index.html"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.ceph.com/en/latest/radosgw/s3/",children:"https://docs.ceph.com/en/latest/radosgw/s3/"})}),"\n",(0,t.jsxs)(n.li,{children:["Garage ",(0,t.jsx)(n.a,{href:"https://garagehq.deuxfleurs.fr/documentation/reference-manual/s3-compatibility/",children:"https://garagehq.deuxfleurs.fr/documentation/reference-manual/s3-compatibility/"})]}),"\n",(0,t.jsxs)(n.li,{children:["Cloudflare R2 ",(0,t.jsx)(n.a,{href:"https://developers.cloudflare.com/r2/api/s3/api/",children:"https://developers.cloudflare.com/r2/api/s3/api/"})]}),"\n",(0,t.jsxs)(n.li,{children:["MinIO ",(0,t.jsx)(n.a,{href:"https://min.io/docs/minio/linux/reference/s3-api-compatibility.html",children:"https://min.io/docs/minio/linux/reference/s3-api-compatibility.html"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u963F\u91CC\u4E91 ",(0,t.jsx)(n.a,{href:"https://help.aliyun.com/zh/oss/developer-reference/compatibility-with-amazon-s3",children:"https://help.aliyun.com/zh/oss/developer-reference/compatibility-with-amazon-s3"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/API/Type_API_Reference.html",children:"https://docs.aws.amazon.com/AmazonS3/latest/API/Type_API_Reference.html"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://min.io/docs/minio/linux/developers/javascript/API.html",children:"https://min.io/docs/minio/linux/developers/javascript/API.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"profile",children:"Profile"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"AWS_PROFILE"}),"\n",(0,t.jsx)(n.li,{children:"~/.aws/credentials"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"%USERPROFILE%\\.aws\\credentials"})}),"\n",(0,t.jsx)(n.li,{children:"~/.aws/config"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html",children:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",metastring:'title="~/.aws/credentials"',children:"[default]\naws_access_key_id = YOUR_ACCESS_KEY\naws_secret_access_key = YOUR_SECRET_KEY\n\n[your_profile_name]\naws_access_key_id = YOUR_ACCESS_KEY\naws_secret_access_key = YOUR_SECRET_KEY\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"aws --profile project01 --endpoint-url http://localhost:9000 s3 ls s3://my-bucket01/\n"})}),"\n",(0,t.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Aliyun\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"s3.oss-cn-hongkong.aliyuncs.com"}),"\n",(0,t.jsx)(n.li,{children:"\u5185\u7F51 s3.oss-cn-hongkong-internal.aliyuncs.com"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://help.aliyun.com/zh/oss/developer-reference/compatibility-with-amazon-s3-1/",children:"https://help.aliyun.com/zh/oss/developer-reference/compatibility-with-amazon-s3-1/"})}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},17776:function(e,n,s){s.d(n,{R:()=>r,x:()=>c});var i=s(7378);let t={},l=i.createContext(t);function r(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);