"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["76448"],{41558:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>a,toc:()=>c,default:()=>h,metadata:()=>l,assets:()=>o,contentTitle:()=>r});var l=JSON.parse('{"id":"service/data/crawler/till","title":"till","description":"- DataHenHQ/till \u662F\u4EC0\u4E48\uFF1F","source":"@site/../notes/service/data/crawler/till.md","sourceDirName":"service/data/crawler","slug":"/service/data/crawler/till","permalink":"/notes/service/data/crawler/till","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/data/crawler/till.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1628355009000,"frontMatter":{"title":"till"},"sidebar":"docs","previous":{"title":"Scrapy","permalink":"/notes/service/data/crawler/scrapy"},"next":{"title":"WARC","permalink":"/notes/service/data/crawler/warc"}}'),s=t(86106),i=t(17776);let a={title:"till"},r="till",o={},c=[{value:"config",id:"config",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"till",children:"till"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/DataHenHQ/till",children:"DataHenHQ/till"})," \u662F\u4EC0\u4E48\uFF1F\n\u722C\u866B\u8BF7\u6C42\u4EE3\u7406\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Apache-2.0, Go"}),"\n",(0,s.jsxs)(n.li,{children:["\u9700\u8981\u4ECE till.datahen.com \u83B7\u53D6 token\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u514D\u8D39 3 \u5B9E\u4F8B"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u968F\u673A User-Agent"}),"\n",(0,s.jsx)(n.li,{children:"Proxy IP address rotation"}),"\n",(0,s.jsxs)(n.li,{children:["\u7C98\u6027\u4F1A\u8BDD\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"X-DH-Session-ID"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Cookie \u7BA1\u7406"}),"\n",(0,s.jsx)(n.li,{children:"\u8BF7\u6C42\u65E5\u5FD7"}),"\n",(0,s.jsxs)(n.li,{children:["HTTP \u7F13\u5B58\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u547D\u4E2D\u7F13\u5B58\u4F1A\u8FD4\u56DE X-Dh-Cache-Created-At"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Global ID/GID\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7F13\u5B58 Key"}),"\n",(0,s.jsx)(n.li,{children:"\u4F1A\u8FD4\u56DE X-DH-GID"}),"\n",(0,s.jsx)(n.li,{children:"X-DH-Cache-Freshness \u7F13\u5B58\u5237\u65B0\u65F6\u95F4"}),"\n",(0,s.jsx)(n.li,{children:"X-DH-Cache-Serve-Failures \u662F\u5426\u7F13\u5B58\u9519\u8BEF\u54CD\u5E94"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["~/.config/datahen/till\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"default.data/ - \u7F13\u5B58\u548C\u6570\u636E"}),"\n",(0,s.jsxs)(n.li,{children:["proxylist.txt - \u4EE3\u7406\u5217\u8868, --proxy-file\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u683C\u5F0F\u4E3A ",(0,s.jsx)(n.code,{children:"http://<user>:<password>@<ip>:<port>"})]}),"\n",(0,s.jsx)(n.li,{children:"\u5F3A\u5236\u5207\u6362 X-DH-Cache-Freshness: now"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# curl -LO https://github.com/DataHenHQ/till/releases/download/v0.8.0/till_0.8.0_Darwin_MacOS_x86_64.tar.gz\n\n# HTTP \u4EE3\u7406 http://localhost:2933\n# Till UI http://localhost:2980\ntill serve -t <token>\ncurl -k --proxy http://localhost:2933 https://fetchtest.datahen.com/echo/request\n"})}),"\n",(0,s.jsx)(n.h2,{id:"config",children:"config"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u914D\u7F6E\u540D\u5B57\u548C flag \u540D\u5B57\u57FA\u672C\u4E00\u81F4"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"~/.config/datahen/till/config.yaml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Get your auth token for FREE at https://till.datahen.com\ntoken: replace-with-your-token\n\n# The Till instance name.\n# This can be changed to match other instance names that you've\n# created on https://till.datahen.com/instances\ninstance: default\n\n# The data directory that is used by various features of Till to store data.\n# It usually follows the naming convention of `<instance name>.data`\ndatadir: ~/.config/datahen/till/default.data\n\n# The proxy port where your scraper codes will connect to.\nport: 2930\n\n# The port to the Till UI.\nuiport: 2980\n\n# Certificate Authority (CA) settings that Till will use to act as Man-In-The-Middle (MIITM) proxy.\n# The path to the CA certificate file.\nca-cert: ~/.config/datahen/till/till-ca-cert.pem\n# The path to the CA key file.\nca-key: ~/.config/datahen/till/till-ca-key.pem\n\n# User agent settings.\n# When set to true, it will override all user-agent with a randomly generated one\nforce-user-agent: false\n# specify user agent type to generate randomly.\nua-type: desktop\n\n# Proxy IP settings.\n# Path to the text file that contains a list of proxy IPs.\n# If you don't specify this, Till will use your real local IP address.\nproxy-file: ~/.config/datahen/till/proxylist.txt\n\n# Sticky Session settings\nsessions:\n  # Disable the sticky sessions feature.\n  # Defaults to false.\n  disabled: false\n\n  # TTL (Time To Live). How long a session record will be allowed to live before it gets deleted.\n  # Defaults to \"week\".\n  ttl: 'week'\n\n# Cache settings\ncache:\n  # Disable the cache feature.\n  # Defaults to false.\n  disabled: false\n\n  # TTL (Time To Live). How long a cache record will be allowed to live before it gets deleted.\n  # Defaults to \"week\".\n  ttl: 'week'\n\n  # Specifies by default on how fresh the Cache Hit will be.\n  # Defaults to \"any\"\n  freshness: 'any'\n\n  # Specifies if Till should serve cached responses of failed HTTP requests (non 2XX statuses)\n  # Defaults to false.\n  serve-failures: false\n\n# Logger settings\nlogger:\n  # Disable the logger feature\n  # Defaults to false.\n  disabled: false\n\n  # TTL (Time To Live). How long a request log record will be allowed to live before it gets deleted.\n  # Defaults to \"week\".\n  ttl: 'week'\n\n# \u8BF7\u6C42\u62E6\u622A\ninterceptors:\n  # this example intercept various image URLs and responds with a local image\n  - name: replace_images\n    disabled: true\n    matches:\n      pattern: '.+\\.(jpe?g|png|tiff|bmp|gif|webp)'\n      method: GET\n    responds:\n      code: 200\n      header:\n        'Content-Type': 'image/png'\n      file: '/path/to/your/image.png'\n  # this example intercept a certain URL and responds with a body\n  - name: replace_body\n    disabled: true\n    matches:\n      pattern: 'fetchtest\\.datahen\\.com\\/echo\\/request'\n      method: GET,POST\n    responds:\n      code: 200\n      header:\n        'Content-Type': 'application/json'\n      body: '{\"Hello\":\"this has been intercepted\"}'\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},17776:function(e,n,t){t.d(n,{R:()=>a,x:()=>r});var l=t(7378);let s={},i=l.createContext(s);function a(e){let n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);