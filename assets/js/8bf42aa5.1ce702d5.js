"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["788903"],{655784:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,toc:()=>d,default:()=>p,metadata:()=>r,assets:()=>c,contentTitle:()=>a});var r=JSON.parse('{"id":"web/script/js/js-transpile","title":"transpile","description":"helper","source":"@site/../notes/web/script/js/js-transpile.md","sourceDirName":"web/script/js","slug":"/web/script/js/transpile","permalink":"/notes/web/script/js/transpile","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/script/js/js-transpile.md","tags":[{"inline":true,"label":"Compiler","permalink":"/notes/tags/compiler"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1753627141000,"frontMatter":{"tags":["Compiler"]},"sidebar":"docs","previous":{"title":"Temporal","permalink":"/notes/web/script/js/temporal"},"next":{"title":"ECMAScript Version","permalink":"/notes/web/script/js/version"}}'),i=t(486106),s=t(917776);let l={tags:["Compiler"]},a="transpile",c={},d=[{value:"helper",id:"helper",level:2},{value:"prefix",id:"prefix",level:2},{value:"import type",id:"import-type",level:2}];function o(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"transpile",children:"transpile"})}),"\n",(0,i.jsx)(n.h2,{id:"helper",children:"helper"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["tslib\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"12kB/4kB"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["@swc/helpers\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"23kB/6kB + tslib"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="tsconfig.json"',children:'{\n  "compilerOptions": {\n    "importHelpers": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title=".swcrc"',children:'{\n  "jsc": {\n    "externalHelpers": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# 1041179 bytes -> 573325 bytes reduced 45.00%\nfind ./lib -type f -name "*.js" -exec stat -c %s {} + | awk \'{total += $1} END {print total " bytes"}\'\n'})}),"\n",(0,i.jsx)(n.h2,{id:"prefix",children:"prefix"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"var require, __filename, __dirname;\n{\n  const { createRequire } = await import('node:module');\n  require ||= createRequire(import.meta.url);\n}\n{\n  const { fileURLToPath } = await import('node:url');\n  const { dirname } = await import('node:path');\n  __filename ||= fileURLToPath(import.meta.url);\n  __dirname ||= dirname(__filename);\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const __dirname = path.dirname(import.meta.url).replace('file://', '');\n"})}),"\n",(0,i.jsx)(n.h2,{id:"import-type",children:"import type"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import file from './file.txt?raw' with { type: 'text' }\nimport file from './file.md?raw' with { type: 'text' }\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Vite - ",(0,i.jsx)(n.a,{href:"https://vite.dev/guide/assets",children:"https://vite.dev/guide/assets"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"?url"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"?no-inline"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"?inline"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"?raw"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"?worker"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"?sharedworker"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Esbuild - ",(0,i.jsx)(n.a,{href:"https://esbuild.github.io/content-types/",children:"https://esbuild.github.io/content-types/"})]}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},917776:function(e,n,t){t.d(n,{R:()=>l,x:()=>a});var r=t(7378);let i={},s=r.createContext(i);function l(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);