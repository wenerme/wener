"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["189752"],{493061:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>l,default:()=>h,metadata:()=>a,assets:()=>c,contentTitle:()=>o});var a=JSON.parse('{"id":"service/analytics/matomo/matomo-tracker","title":"Matomo Tracker \u53C2\u8003","description":"- WeChat Matomo - \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F Matomo \u57CB\u70B9","source":"@site/../notes/service/analytics/matomo/matomo-tracker.md","sourceDirName":"service/analytics/matomo","slug":"/service/analytics/matomo/tracker","permalink":"/notes/service/analytics/matomo/tracker","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/analytics/matomo/matomo-tracker.md","tags":[{"inline":true,"label":"Matomo","permalink":"/notes/tags/matomo"},{"inline":true,"label":"Analytics","permalink":"/notes/tags/analytics"},{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Tracking","permalink":"/notes/tags/tracking"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"Matomo Tracker \u53C2\u8003","tags":["Matomo","Analytics","Web","Tracking"]},"sidebar":"docs","previous":{"title":"Matomo JS","permalink":"/notes/service/analytics/matomo/js"},"next":{"title":"umami","permalink":"/notes/service/analytics/umami"}}'),r=t(486106),i=t(917776);let s={title:"Matomo Tracker \u53C2\u8003",tags:["Matomo","Analytics","Web","Tracking"]},o="Matomo Tracker \u53C2\u8003",c={},l=[];function m(e){let n={a:"a",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"matomo-tracker-\u53C2\u8003",children:"Matomo Tracker \u53C2\u8003"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/Liudapeng/wechat-matomo/tree/master/wechat-matomo",children:"WeChat Matomo"})," - \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F Matomo \u57CB\u70B9"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.matomo.org/guides/tracking-javascript-guide",children:"Tracking JavaScript Guide"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8DE8\u8BBE\u5907\u7CBE\u786E\u7528\u6237\u68C0\u6D4B: User ID (\u5728 JS \u548C\u6240\u6709\u5176\u4ED6\u5BA2\u6237\u7AEF\u4E2D\u8BBE\u7F6E)\n",(0,r.jsx)(n.a,{href:"https://github.com/matomo-org/matomo/issues/3490",children:"GitHub Issue #3490"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://developers.google.com/analytics/devguides/collection/analyticsjs/user-id",children:"Google Analytics User-ID \u53C2\u8003"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://matomo.org/faq/how-to/faq_175/",children:"FAQ 175: \u5982\u4F55\u544A\u8BC9 Matomo \u57FA\u4E8E Visitor ID Cookie \u8FFD\u8E2A\u552F\u4E00\u8BBF\u5BA2\u800C\u4E0D\u662F IP \u5730\u5740\uFF1F"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[Tracker]\ntrust_visitors_cookies = 1\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/Valve/fingerprintjs2",children:"fingerprintjs2"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.fingerprintjs.com/pro/integrations/matomo-piwik",children:"FingerprintJS Matomo \u96C6\u6210"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// \u793A\u4F8B: \u7AD9\u70B9\u641C\u7D22\u8FFD\u8E2A\ngetGlobalThis()?.['_paq']?.push([\n  'trackSiteSearch',\n  `${search.policyProvince ?? ''} ${search.keyword}`,\n  '\u65B0\u51A0\u653F\u7B56\u641C\u7D22',\n  result.length,\n]);\n\n// \u8DE8\u57DF\u94FE\u63A5\n_paq.push(['setDomains', ['*.domain1.com', '*.domain2.com']]);\n_paq.push(['enableCrossDomainLinking']);\n\n// \u5E38\u7528 API\n_paq.push(['trackEvent', category, action, name, value, { dimension1: 'DimensionValue' }]);\n_paq.push(['trackSiteSearch', keyword, category, resultsCount, { dimension1: 'DimensionValue' }]);\n_paq.push(['trackLink', url, linkType, { dimension1: 'DimensionValue' }]);\n_paq.push(['trackGoal', idGoal, customRevenue, { dimension1: 'DimensionValue' }]);\n\n// \u7528\u6237\u767B\u51FA\u91CD\u7F6E\n_paq.push(['resetUserId']);\n_paq.push(['appendToTrackingUrl', 'new_visit=1']); // \u5F3A\u5236\u65B0\u8BBF\u95EE\n_paq.push(['trackPageView']);\n_paq.push(['appendToTrackingUrl', '']); // \u91CD\u7F6E\uFF0C\u907F\u514D\u5F71\u54CD\u540E\u7EED\u8BF7\u6C42\n\n// \u5185\u5BB9\u8FFD\u8E2A\n_paq.push(['trackContentImpression', 'Content Name', 'Content Piece', 'http://www.example.com']);\n\ndiv.addEventListener('click', function () {\n  _paq.push(['trackContentInteraction', 'tabActivated', 'Content Name', 'Content Piece', 'http://www.example.com']);\n});\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u8868\u5355\u5206\u6790:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.form-analytics.net/",children:"Form Analytics"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://matomo.org/faq/form-analytics/",children:"Matomo FAQ"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["React \u96C6\u6210: ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/@datapunt/matomo-tracker-react",children:"@datapunt/matomo-tracker-react"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Next.js \u8DEF\u7531\u76D1\u542C: ",(0,r.jsx)(n.a,{href:"https://stackoverflow.com/questions/54443354/listen-to-route-change-with-next-js-to-use-with-matomo-piwik",children:"StackOverflow"})]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},917776:function(e,n,t){t.d(n,{R:()=>s,x:()=>o});var a=t(7378);let r={},i=a.createContext(r);function s(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);