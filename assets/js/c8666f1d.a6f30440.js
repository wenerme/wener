"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["10434"],{88731:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>l,toc:()=>h,default:()=>o,metadata:()=>t,assets:()=>c,contentTitle:()=>d});var t=JSON.parse('{"id":"db/relational/postgresql/postgres-supabase","title":"Supabase PostgreSQL Image","description":"- supabase/postgres","source":"@site/../notes/db/relational/postgresql/postgres-supabase.md","sourceDirName":"db/relational/postgresql","slug":"/db/relational/postgresql/postgres-supabase","permalink":"/notes/db/relational/postgresql/postgres-supabase","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/postgresql/postgres-supabase.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1754894738000,"frontMatter":{"title":"Supabase PostgreSQL Image"},"sidebar":"docs","previous":{"title":"PostGraphile","permalink":"/notes/db/relational/postgresql/postgraphile"},"next":{"title":"ACL","permalink":"/notes/db/relational/postgresql/acl"}}'),r=n(86106),i=n(17776);let l={title:"Supabase PostgreSQL Image"},d="Supabase PostgreSQL Image",c={},h=[{value:"Extensions",id:"extensions",level:2},{value:"You might want to create it and/or set &quot;pgsodium.getkey_script&quot; to the correct path.",id:"you-might-want-to-create-it-andor-set-pgsodiumgetkey_script-to-the-correct-path",level:2}];function a(e){let s={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"supabase-postgresql-image",children:"Supabase PostgreSQL Image"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://github.com/supabase/postgres",children:"supabase/postgres"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Docker \u955C\u50CF"}),"\n",(0,r.jsx)(s.li,{children:"\u4F7F\u7528 ansible \u6784\u5EFA"}),"\n",(0,r.jsx)(s.li,{children:"~250MB - 300MB"}),"\n",(0,r.jsx)(s.li,{children:"\u5305\u542B\u5927\u591A\u63D2\u4EF6"}),"\n",(0,r.jsx)(s.li,{children:"\u7248\u672C\u53F7\u5339\u914D Postgres"}),"\n",(0,r.jsx)(s.li,{children:"\u57FA\u7840\u955C\u50CF\u4E3A postgres"}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/supabase/postgres/blob/develop/Dockerfile",children:"Dockerfile"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\u6269\u5C55\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/supabase/supautils",children:"supabase/supautils"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.div,{children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u76EE\u524D\u6709 PG 15, 17\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u6709 PG 17 orioledb \u955C\u50CF ",(0,r.jsx)(s.a,{href:"https://hub.docker.com/r/supabase/postgres/tags",children:"https://hub.docker.com/r/supabase/postgres/tags"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Vote for Postgres extensions ",(0,r.jsx)(s.a,{href:"https://github.com/orgs/supabase/discussions/679",children:"supabase#679"})]}),"\n"]})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# \u6CE8\u610F superuser \u4E3A supabase_admin \u5BC6\u7801\u548C postgres \u76F8\u540C\n# \u5EFA\u8BAE\u767B\u5F55\u4E3A supabase_admin \u7136\u540E alter user postgres with superuser\n# https://hub.docker.com/r/supabase/postgres\nPASSWORD=$(uuidgen | tr -d \'[[:space:]]\')\ndocker run --rm -it \\\n  -e POSTGRES_PASSWORD=$PASSWORD \\\n  -p 5432:5432 \\\n  -e POSTGRES_INITDB_ARGS="--encoding=UTF-8 --lc-collate=C --lc-ctype=C" \\\n  -v $PWD/data:/var/lib/postgresql/data \\\n  --name postgres supabase/postgres:17.4.1.071 \\\n  -clisten_addresses="*" \\\n  -cshared_preload_libraries=pg_stat_statements,pg_stat_monitor,pgaudit,plpgsql,plpgsql_check,pg_cron,pg_net,timescaledb,auto_explain,pg_tle\n'})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-conf",children:"unix_socket_directories = '/var/run/postgresql'\nsession_preload_libraries = 'supautils'\ninclude = '/etc/postgresql-custom/supautils.conf'\ncron.database_name = 'postgres'\npljava.libjvm_location = '/usr/lib/jvm/java-11-openjdk-${TARGETARCH}/lib/server/libjvm.so'\npgsodium.getkey_script= '/usr/lib/postgresql/${postgresql_major}/bin/pgsodium_getkey.sh'\nauto_explain.log_min_duration = 10s\n"})}),"\n",(0,r.jsx)(s.h2,{id:"extensions",children:"Extensions"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Extension"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/contrib.html",children:"Postgres contrib modules"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"pg_stat_statements"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://postgis.net/",children:"PostGIS"})}),(0,r.jsx)(s.td,{children:"GIS"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://pgrouting.org/",children:"pgRouting"})}),(0,r.jsx)(s.td,{children:"Extension of PostGIS - provides geospatial routing functionalities."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://pgtap.org/",children:"pgTAP"})}),(0,r.jsx)(s.td,{children:"Unit Testing for Postgres."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/citusdata/pg_cron",children:"pg_cron"})}),(0,r.jsx)(s.td,{children:"Run CRON jobs inside Postgres."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://www.pgaudit.org/",children:"pgAudit"})}),(0,r.jsx)(s.td,{children:"Generate highly compliant audit logs."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/michelp/pgjwt",children:"pgjwt"})}),(0,r.jsx)(s.td,{children:"Generate JSON Web Tokens (JWT) in Postgres."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/pramsey/pgsql-http",children:"pgsql-http"})}),(0,r.jsx)(s.td,{children:"HTTP client for Postgres."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/okbob/plpgsql_check",children:"plpgsql_check"})}),(0,r.jsx)(s.td,{children:"Linter tool for PL/pgSQL."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/eradman/pg-safeupdate",children:"pg-safeupdate"})}),(0,r.jsx)(s.td,{children:"Protect your data from accidental updates or deletes."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/eulerto/wal2json",children:"wal2json"})}),(0,r.jsx)(s.td,{children:"JSON output plugin for logical replication decoding."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/tada/pljava",children:"PL/Java"})}),(0,r.jsx)(s.td,{children:"PL/Java"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/plv8/plv8",children:"plv8"})}),(0,r.jsx)(s.td,{children:"PL/Javascript"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/pgexperts/pg_plan_filter",children:"pg_plan_filter"})}),(0,r.jsx)(s.td,{children:"Only allow statements that fulfill set criteria to be executed."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/supabase/pg_net",children:"pg_net"})}),(0,r.jsx)(s.td,{children:"Expose the SQL interface for async networking."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/postgrespro/rum",children:"rum"})}),(0,r.jsx)(s.td,{children:"An alternative to the GIN index."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/iCyberon/pg_hashids",children:"pg_hashids"})}),(0,r.jsx)(s.td,{children:"Generate unique identifiers from numbers."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/michelp/pgsodium",children:"pgsodium"})}),(0,r.jsx)(s.td,{children:"libsodium"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/percona/pg_stat_monitor",children:"pg_stat_monitor"})}),(0,r.jsx)(s.td,{children:"Query Performance Monitoring"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/pgvector/pgvector",children:"pgvector"})}),(0,r.jsx)(s.td,{children:"vector similarity search"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/reorg/pg_repack",children:"pg_repack"})}),(0,r.jsx)(s.td,{children:"Tool to remove bloat from tables and indexes"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"pg_jsonschema"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"pg_graphql"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"sfcgal"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"timescaledb"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"vault"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/supabase/wrappers",children:"wrappers"})}),(0,r.jsx)(s.td,{children:"FDW dev kit by Supabase"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"pgroonga"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"hypopg"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://github.com/aws/pg_tle",children:"pg_tle"})}),(0,r.jsx)(s.td,{children:"trusted language extensions"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"supautils"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"plls"}),(0,r.jsx)(s.td,{children:"PL/LiveScript"})]})]})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"create extension if not exists pg_hashids;\n-- id_encode, id_decode\nselect id_encode(1234567, 'This is my salt', /*min length*/ 10, /* alphabet */ 'abcdefghijABCDxFGHIJ1234567890');\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"TLE - Trusted Language Extensions"}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://github.com/tensorchord/pgvecto.rs",children:"tensorchord/pgvecto.rs"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["pgvecto.rs ",(0,r.jsx)(s.a,{href:"https://github.com/supabase/postgres/issues/895",children:"#895"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4E0D\u662F trusted extension, \u4F7F\u7528\u4E86 ipc/mmap"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["vs pgvector\n",(0,r.jsx)(s.a,{href:"https://docs.pgvecto.rs/faqs/comparison-pgvector.html",children:"https://docs.pgvecto.rs/faqs/comparison-pgvector.html"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(s.h2,{id:"you-might-want-to-create-it-andor-set-pgsodiumgetkey_script-to-the-correct-path",children:'You might want to create it and/or set "pgsodium.getkey_script" to the correct path.'}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"pgsodium.getkey_script='/usr/lib/postgresql/${postgresql_major}/bin/pgsodium_getkey.sh'\n"})})]})}function o(e={}){let{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},17776:function(e,s,n){n.d(s,{R:()=>l,x:()=>d});var t=n(7378);let r={},i=t.createContext(r);function l(e){let s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);