"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["69975"],{365168:function(n,e,l){l.r(e),l.d(e,{frontMatter:()=>r,toc:()=>c,default:()=>u,metadata:()=>a,assets:()=>i,contentTitle:()=>s});var a=JSON.parse('{"id":"languages/lua/README","title":"Lua","description":"- \u4F7F\u7528\u6700\u5E7F\u7684\u811A\u672C\u8BED\u8A00\u4E4B\u4E00","source":"@site/../notes/languages/lua/README.md","sourceDirName":"languages/lua","slug":"/languages/lua/","permalink":"/notes/languages/lua/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/lua/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1718079305000,"frontMatter":{"title":"Lua"},"sidebar":"docs","previous":{"title":"Emscripten","permalink":"/notes/languages/llvm/emscripten"},"next":{"title":"Lua Awesome","permalink":"/notes/languages/lua/awesome"}}'),t=l(486106),d=l(917776);let r={title:"Lua"},s="Lua",i={},c=[{value:"\u8BED\u6CD5",id:"\u8BED\u6CD5",level:2},{value:"metatable",id:"metatable",level:2},{value:"Helper",id:"helper",level:2}];function o(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"lua",children:"Lua"})}),"\n",(0,t.jsx)(e.admonition,{type:"tip",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u4F7F\u7528\u6700\u5E7F\u7684\u811A\u672C\u8BED\u8A00\u4E4B\u4E00"}),"\n"]})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/lua/lua",children:"lua/lua"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://www.lua.org/manual/5.4/manual.html",children:"5.4/manual"})}),"\n",(0,t.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://blog.luden.io/bf72a1328733",children:"What do I think about Lua after shipping a project with 60,000 lines of code?"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.admonition,{type:"caution",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u4E0D\u80FD\u76F4\u63A5\u4E3A Table \u6DFB\u52A0\u989D\u5916\u65B9\u6CD5, \u56E0\u4E3A\u6BCF\u4E2A Table \u90FD\u6709\u81EA\u5DF1\u7684 Metadata"}),"\n"]})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:'-- \u81EA\u5B9A\u4E49\u52A0\u8F7D\u76EE\u5F55\npackage.path = package.path .. \';/data/lua/?.lua\'\nT = require("t")\n\n-- dotfile \u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u7EDD\u5BF9\u8DEF\u5F84\ndofile("/data/lua/my")\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u8BED\u6CD5",children:"\u8BED\u6CD5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:"-- \u7C7B\nDog = {}\n\nfunction Dog:new()\n  local newObj = {sound = 'woof'}\n  self.__index = self\n  return setmetatable(newObj, self)\nend\n\nfunction Dog:makeSound()\n  print('I say ' .. self.sound)\nend\n-- : \u7B49\u540C\u4E8E\nfunction Dog.makeSound(self)\n  print('I say ' .. self.sound)\nend\n\n-- \u7EE7\u627F\nLoudDog = Dog:new()\n\n-- \u53EF\u9009\nfunction LoudDog:new()\n  local newObj = {}\n  -- \u521D\u59CB\u5316 newObj\n  self.__index = self\n  return setmetatable(newObj, self)\nend\nfunction LoudDog:makeSound()\n  local s = self.sound .. ' '\n  print(s .. s .. s)\nend\n\n-- mod.lua\nlocal M = {}\nfunction M.func()\n  return true\nend\nreturn M\n\n-- \u4F9D\u8D56\u6A21\u5757\n-- require \u4F1A\u7F13\u5B58\n-- dofile \u4E0D\u4F1A\u7F13\u5B58\n-- loadfile \u4E0D\u6267\u884C\uFF0C\u8FD4\u56DE\u51FD\u6570 - \u7C7B\u4F3C\u4E8E loadstring\nlocal mod = require('mod')\n-- \u7B49\u4EF7\u4E8E\nlocal mod = (function ()\n  -- mod.lua \u5185\u5BB9\n  local M = {}\n  function M.func()\n    return true\n  end\n  return M\nend)()\n"})}),"\n",(0,t.jsx)(e.h2,{id:"metatable",children:"metatable"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5143\u8868 - \u64CD\u4F5C\u91CD\u8F7D"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["| method                | demo      |\n| --------------------- | --------- | ---------------------- |\n| ",(0,t.jsx)(e.code,{children:"__add(a, b)"}),"         | ",(0,t.jsx)(e.code,{children:"a + b"}),"   |\n| ",(0,t.jsx)(e.code,{children:"__sub(a, b)"}),"         | ",(0,t.jsx)(e.code,{children:"a - b"}),"   |\n| ",(0,t.jsx)(e.code,{children:"__mul(a, b)"}),"         | ",(0,t.jsx)(e.code,{children:"a * b"}),"   |\n| ",(0,t.jsx)(e.code,{children:"__div(a, b)"}),"         | ",(0,t.jsx)(e.code,{children:"a / b"}),"   |\n| ",(0,t.jsx)(e.code,{children:"__mod(a, b)"}),"         | ",(0,t.jsx)(e.code,{children:"a % b"}),"   |\n| ",(0,t.jsx)(e.code,{children:"__pow(a, b)"}),"         | ",(0,t.jsx)(e.code,{children:"a ^ b"}),"   |\n| ",(0,t.jsx)(e.code,{children:"__unm(a)"}),"            | ",(0,t.jsx)(e.code,{children:"-a"}),"      |\n| ",(0,t.jsx)(e.code,{children:"__concat(a, b)"}),"      | ",(0,t.jsx)(e.code,{children:"a .. b"}),"  |\n| ",(0,t.jsx)(e.code,{children:"__len(a)"}),"            | ",(0,t.jsx)(e.code,{children:"#a"}),"      |\n| ",(0,t.jsx)(e.code,{children:"__eq(a, b)"}),"          | ",(0,t.jsx)(e.code,{children:"a == b"}),"  |\n| ",(0,t.jsx)(e.code,{children:"__lt(a, b)"}),"          | ",(0,t.jsx)(e.code,{children:"a < b"}),"   |\n| ",(0,t.jsx)(e.code,{children:"__le(a, b)"}),"          | ",(0,t.jsx)(e.code,{children:"a <= b"}),"  |\n| ",(0,t.jsx)(e.code,{children:"__index(a, b)"}),"       | ",(0,t.jsx)(e.code,{children:"a.b"}),"     | fn(tbl,key) or a table |\n| ",(0,t.jsx)(e.code,{children:"__newindex(a, b, c)"})," | ",(0,t.jsx)(e.code,{children:"a.b = c"})," |\n| ",(0,t.jsx)(e.code,{children:"__call(a, ...)"}),"      | ",(0,t.jsx)(e.code,{children:"a(...)"}),"  |\n| ",(0,t.jsx)(e.code,{children:"__gc"}),"                |           |\n| ",(0,t.jsx)(e.code,{children:"__close"}),"             |           |\n| ",(0,t.jsx)(e.code,{children:"__mode"}),"              |           |\n| ",(0,t.jsx)(e.code,{children:"__name"}),"              |           |"]}),"\n",(0,t.jsx)(e.h2,{id:"helper",children:"Helper"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-lua",children:'---------------------------------------------\n---- Lua Table Helper\n---------------------------------------------\nlocal table_meta = { __index = table }\nfunction T(t)\n    -- returns the table passed as parameter or a new table\n    -- with custom metatable already set to resolve methods in `table`\n    return setmetatable(t or {}, table_meta)\nend\n\ntable.T = T\n\nfunction table.filter(tab, f)\n    if type(f) ~= \'function\' then\n        local _v = f\n        f = function(v, i) return v == _v end\n    end\n\n    local t = T {}\n    for k, v in pairs(tab) do\n        if not f(v) then\n            t[#t + 1] = v\n        end\n    end\n    return t\nend\n\nfunction table.map(tab, fn)\n    for k, v in pairs(tab) do\n        tab[k] = fn(v, k)\n    end\n    return tab\nend\n\nfunction string:split(sep)\n    local sep, fields = sep or ",", T {}\n    local pattern = string.format("([^%s]+)", sep)\n    self:gsub(pattern, function(c) fields[#fields + 1] = c end)\n    return fields\nend\n\nreturn T\n'})})]})}function u(n={}){let{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}},917776:function(n,e,l){l.d(e,{R:()=>r,x:()=>s});var a=l(7378);let t={},d=a.createContext(t);function r(n){let e=a.useContext(d);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),a.createElement(d.Provider,{value:e},n.children)}}}]);