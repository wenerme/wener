"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["343758"],{991538:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>d,toc:()=>t,default:()=>j,metadata:()=>l,assets:()=>a,contentTitle:()=>c});var l=JSON.parse('{"id":"java/jvm/classloader","title":"JVM \u7C7B\u52A0\u8F7D\u5668","description":"Java \u7684\u7C7B\u52A0\u8F7D\u673A\u5236\u8D1F\u8D23\u52A8\u6001\u5730\u5C06 class \u6587\u4EF6\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D\uFF0C\u5E76\u52A0\u4EE5\u9A8C\u8BC1\u3001\u51C6\u5907\u548C\u521D\u59CB\u5316\uFF0C\u6700\u7EC8\u5F62\u6210\u53EF\u4EE5\u88AB\u865A\u62DF\u673A\u76F4\u63A5\u4F7F\u7528\u7684 Java \u7C7B\u578B\u3002","source":"@site/../notes/java/jvm/classloader.md","sourceDirName":"java/jvm","slug":"/java/jvm/classloader","permalink":"/notes/java/jvm/classloader","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/java/jvm/classloader.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"JVM \u7C7B\u52A0\u8F7D\u5668"},"sidebar":"docs","previous":{"title":"JNLP (Java Network Launching Protocol)","permalink":"/notes/java/jnlp"},"next":{"title":"GraalVM","permalink":"/notes/java/jvm/graalvm"}}'),r=s(486106),i=s(917776);let d={title:"JVM \u7C7B\u52A0\u8F7D\u5668"},c="JVM \u7C7B\u52A0\u8F7D\u5668 (ClassLoader)",a={},t=[{value:"\u7C7B\u52A0\u8F7D\u5668\u5C42\u6B21 (JDK 9+)",id:"\u7C7B\u52A0\u8F7D\u5668\u5C42\u6B21-jdk-9",level:2},{value:"\u6838\u5FC3\u673A\u5236",id:"\u6838\u5FC3\u673A\u5236",level:2},{value:"\u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B (Parent Delegation Model)",id:"\u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B-parent-delegation-model",level:3},{value:"\u7834\u574F\u53CC\u4EB2\u59D4\u6D3E",id:"\u7834\u574F\u53CC\u4EB2\u59D4\u6D3E",level:3},{value:"\u7C7B\u52A0\u8F7D\u8FC7\u7A0B",id:"\u7C7B\u52A0\u8F7D\u8FC7\u7A0B",level:2}];function o(n){let e={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"jvm-\u7C7B\u52A0\u8F7D\u5668-classloader",children:"JVM \u7C7B\u52A0\u8F7D\u5668 (ClassLoader)"})}),"\n",(0,r.jsx)(e.p,{children:"Java \u7684\u7C7B\u52A0\u8F7D\u673A\u5236\u8D1F\u8D23\u52A8\u6001\u5730\u5C06 class \u6587\u4EF6\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D\uFF0C\u5E76\u52A0\u4EE5\u9A8C\u8BC1\u3001\u51C6\u5907\u548C\u521D\u59CB\u5316\uFF0C\u6700\u7EC8\u5F62\u6210\u53EF\u4EE5\u88AB\u865A\u62DF\u673A\u76F4\u63A5\u4F7F\u7528\u7684 Java \u7C7B\u578B\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u7C7B\u52A0\u8F7D\u5668\u5C42\u6B21-jdk-9",children:"\u7C7B\u52A0\u8F7D\u5668\u5C42\u6B21 (JDK 9+)"}),"\n",(0,r.jsx)(e.p,{children:"\u81EA JDK 9 \u5F15\u5165\u6A21\u5757\u5316\u7CFB\u7EDF (JPMS) \u540E\uFF0C\u7C7B\u52A0\u8F7D\u5668\u5C42\u6B21\u7ED3\u6784\u53D1\u751F\u4E86\u5FAE\u8C03\uFF0C\u4F46\u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B\u4F9D\u7136\u5B58\u5728\u3002"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u542F\u52A8\u7C7B\u52A0\u8F7D\u5668 (Bootstrap ClassLoader)"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u804C\u8D23"}),": \u52A0\u8F7D\u6838\u5FC3 Java \u6A21\u5757 (\u5982 ",(0,r.jsx)(e.code,{children:"java.base"}),", ",(0,r.jsx)(e.code,{children:"java.logging"}),", ",(0,r.jsx)(e.code,{children:"java.xml"}),")\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5B9E\u73B0"}),": \u5728 HotSpot\u4E2D\u7531 C++ \u5B9E\u73B0\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u83B7\u53D6"}),": \u65E0\u6CD5\u901A\u8FC7 Java \u4EE3\u7801\u76F4\u63A5\u83B7\u53D6\uFF0C",(0,r.jsx)(e.code,{children:"String.class.getClassLoader()"})," \u8FD4\u56DE ",(0,r.jsx)(e.code,{children:"null"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5E73\u53F0\u7C7B\u52A0\u8F7D\u5668 (Platform ClassLoader)"})," (JDK 9 \u4E4B\u524D\u53EB Extension ClassLoader)"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u804C\u8D23"}),": \u52A0\u8F7D\u6269\u5C55\u7684 Java \u6A21\u5757 (\u5982 ",(0,r.jsx)(e.code,{children:"java.scripting"}),", ",(0,r.jsx)(e.code,{children:"java.sql"}),")\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u53D8\u5316"}),": JDK 9 \u5E9F\u5F03\u4E86 ",(0,r.jsx)(e.code,{children:"jre/lib/ext"})," \u76EE\u5F55\u548C ",(0,r.jsx)(e.code,{children:"java.ext.dirs"})," \u673A\u5236\u3002\u73B0\u5728\u4E3B\u8981\u8D1F\u8D23\u52A0\u8F7D JDK \u4E2D\u975E\u6838\u5FC3\u7684\u6A21\u5757\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u7236\u52A0\u8F7D\u5668"}),": Bootstrap ClassLoader\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u7CFB\u7EDF/\u5E94\u7528\u7C7B\u52A0\u8F7D\u5668 (System/App ClassLoader)"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u804C\u8D23"}),": \u52A0\u8F7D\u5E94\u7528\u7A0B\u5E8F\u7C7B\u8DEF\u5F84 (",(0,r.jsx)(e.code,{children:"-cp"}),", ",(0,r.jsx)(e.code,{children:"CLASSPATH"}),") \u4E0A\u7684\u7C7B\u548C\u6A21\u5757\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u7236\u52A0\u8F7D\u5668"}),": Platform ClassLoader\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u83B7\u53D6"}),": ",(0,r.jsx)(e.code,{children:"ClassLoader.getSystemClassLoader()"}),"\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u6838\u5FC3\u673A\u5236",children:"\u6838\u5FC3\u673A\u5236"}),"\n",(0,r.jsx)(e.h3,{id:"\u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B-parent-delegation-model",children:"\u53CC\u4EB2\u59D4\u6D3E\u6A21\u578B (Parent Delegation Model)"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5DE5\u4F5C\u539F\u7406"}),": \u5F53\u4E00\u4E2A\u7C7B\u52A0\u8F7D\u5668\u6536\u5230\u52A0\u8F7D\u8BF7\u6C42\u65F6\uFF0C\u4F18\u5148\u59D4\u6D3E\u7ED9\u7236\u52A0\u8F7D\u5668\u53BB\u5B8C\u6210\u3002\u53EA\u6709\u7236\u52A0\u8F7D\u5668\u53CD\u9988\u65E0\u6CD5\u52A0\u8F7D\uFF08\u627E\u4E0D\u5230\u7C7B\uFF09\u65F6\uFF0C\u5B50\u52A0\u8F7D\u5668\u624D\u5C1D\u8BD5\u81EA\u5DF1\u52A0\u8F7D\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u76EE\u7684"}),":\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u5B89\u5168\u6027"}),': \u8FD9\u91CC\u7684"\u6C99\u7BB1"\u673A\u5236\u9632\u6B62\u6838\u5FC3 API \u88AB\u7BE1\u6539\u3002\u4F8B\u5982\uFF0C\u7528\u6237\u65E0\u6CD5\u5B9A\u4E49\u4E00\u4E2A ',(0,r.jsx)(e.code,{children:"java.lang.String"})," \u6765\u66FF\u6362\u6838\u5FC3\u5E93\u4E2D\u7684\u7248\u672C\uFF0C\u56E0\u4E3A Bootstrap ClassLoader \u4F1A\u4F18\u5148\u52A0\u8F7D\u6838\u5FC3\u5E93\u4E2D\u7684\u7248\u672C\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u907F\u514D\u91CD\u590D\u52A0\u8F7D"}),": \u4FDD\u8BC1\u5728 JVM \u4E2D\u540C\u4E00\u4E2A\u7C7B\uFF08\u5168\u9650\u5B9A\u540D\uFF09\u53EA\u88AB\u52A0\u8F7D\u4E00\u6B21\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u7834\u574F\u53CC\u4EB2\u59D4\u6D3E",children:"\u7834\u574F\u53CC\u4EB2\u59D4\u6D3E"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u573A\u666F"}),": \u57FA\u7840\u7C7B\u9700\u8981\u8C03\u7528\u7528\u6237\u4EE3\u7801\uFF08SPI \u573A\u666F\uFF0C\u5982 JDBC \u9A71\u52A8\u52A0\u8F7D\uFF09\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u624B\u6BB5"}),": ",(0,r.jsx)(e.strong,{children:"\u7EBF\u7A0B\u4E0A\u4E0B\u6587\u7C7B\u52A0\u8F7D\u5668 (Thread Context ClassLoader)"}),"\u3002\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6838\u5FC3\u5E93\u63A5\u53E3\uFF08\u7531 Bootstrap \u52A0\u8F7D\uFF09\u53EF\u4EE5\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"Thread.currentThread().getContextClassLoader()"}),"\uFF08\u901A\u5E38\u662F AppClassLoader\uFF09\u6765\u52A0\u8F7D\u670D\u52A1\u63D0\u4F9B\u5546\u7684\u5B9E\u73B0\u7C7B\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u7C7B\u52A0\u8F7D\u8FC7\u7A0B",children:"\u7C7B\u52A0\u8F7D\u8FC7\u7A0B"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u52A0\u8F7D (Loading)"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u901A\u8FC7\u5168\u7C7B\u540D\u83B7\u53D6\u4E8C\u8FDB\u5236\u5B57\u8282\u6D41\u3002"}),"\n",(0,r.jsx)(e.li,{children:"\u5C06\u5B57\u8282\u6D41\u8F6C\u5316\u4E3A\u65B9\u6CD5\u533A\u7684\u8FD0\u884C\u65F6\u6570\u636E\u7ED3\u6784\u3002"}),"\n",(0,r.jsxs)(e.li,{children:["\u5728\u5806\u4E2D\u751F\u6210 ",(0,r.jsx)(e.code,{children:"java.lang.Class"})," \u5BF9\u8C61\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u94FE\u63A5 (Linking)"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u9A8C\u8BC1 (Verification)"}),": \u786E\u4FDD\u5B57\u8282\u6D41\u7B26\u5408\u89C4\u8303\uFF0C\u5B89\u5168\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u51C6\u5907 (Preparation)"}),": \u4E3A ",(0,r.jsx)(e.strong,{children:"static \u53D8\u91CF"})," \u5206\u914D\u5185\u5B58\u5E76\u8BBE\u7F6E",(0,r.jsx)(e.strong,{children:"\u96F6\u503C"}),"\uFF08\u5982 int=0, ref=null\uFF09\u3002\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.em,{children:"\u6CE8\u610F"}),": ",(0,r.jsx)(e.code,{children:"static final"})," \u5E38\u91CF\u5728\u6B64\u9636\u6BB5\u76F4\u63A5\u8D4B\u503C\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u89E3\u6790 (Resolution)"}),": \u7B26\u53F7\u5F15\u7528 -> \u76F4\u63A5\u5F15\u7528\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u521D\u59CB\u5316 (Initialization)"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6267\u884C\u7C7B\u6784\u9020\u5668 ",(0,r.jsx)(e.code,{children:"<clinit>()"})," \u65B9\u6CD5\uFF08\u9759\u6001\u53D8\u91CF\u8D4B\u503C + \u9759\u6001\u4EE3\u7801\u5757\uFF09\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u89E6\u53D1\u6761\u4EF6"}),": ",(0,r.jsx)(e.code,{children:"new"}),"\u3001\u8BBF\u95EE\u9759\u6001\u5B57\u6BB5/\u65B9\u6CD5\u3001\u53CD\u5C04\u3001\u5B50\u7C7B\u521D\u59CB\u5316\u3001Main \u7C7B\u542F\u52A8\u3002"]}),"\n"]}),"\n"]}),"\n"]})]})}function j(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},917776:function(n,e,s){s.d(e,{R:()=>d,x:()=>c});var l=s(7378);let r={},i=l.createContext(r);function d(n){let e=l.useContext(i);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),l.createElement(i.Provider,{value:e},n.children)}}}]);