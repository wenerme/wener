"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["167606"],{271338:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>i,toc:()=>d,default:()=>p,metadata:()=>t,assets:()=>o,contentTitle:()=>r});var t=JSON.parse('{"id":"os/android/adb","title":"adb","description":"- tcp:5037","source":"@site/../notes/os/android/adb.md","sourceDirName":"os/android","slug":"/os/android/adb","permalink":"/notes/os/android/adb","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/android/adb.md","tags":[{"inline":true,"label":"Shell","permalink":"/notes/tags/shell"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1750997941000,"frontMatter":{"tags":["Shell"]},"sidebar":"docs","previous":{"title":"Android","permalink":"/notes/os/android/"},"next":{"title":"Android Awesome","permalink":"/notes/os/android/awesome"}}'),l=s(486106),a=s(917776);let i={tags:["Shell"]},r="adb",o={},d=[{value:"Touch Event",id:"touch-event",level:2},{value:"\u5C06 HttpClient \u7684\u65E5\u5FD7\u8F93\u51FA\u5230 Logcat",id:"\u5C06-httpclient-\u7684\u65E5\u5FD7\u8F93\u51FA\u5230-logcat",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"adb",children:"adb"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"tcp:5037"}),"\n",(0,l.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/senzhk/ADBKeyBoard",children:"https://github.com/senzhk/ADBKeyBoard"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["camellia\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Redmi Note 10 5G"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"camellia-user 11 RP1A.200720.011 V12.22.1.13.EP.WOSQ.K19 release-keys"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["RP1A.200720.011\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"AOSP"}),"\n",(0,l.jsx)(n.li,{children:"R: Android 11 - Red Velvet Cake"}),"\n",(0,l.jsx)(n.li,{children:"P1A - Pixel 1A - \u6E90\u7801\u5206\u652F"}),"\n",(0,l.jsx)(n.li,{children:"200720 - \u57FA\u7840\u7248\u672C\u65E5\u671F 2020\u5E747\u670820\u65E5"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://github.com/appium/appium-adb",children:"appium/appium-adb"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Apache-2.0, JS"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# AlpineLinux\napk add android-tools\n# macOS\nbrew install android-platform-tools\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'adb devices # \u67E5\u770B\u8BBE\u5907\u5217\u8868\n\nadb logcat # \u67E5\u770B\u65E5\u5FD7\n\n# \u53D1\u9001\u77ED\u4FE1\n# ADB Shell \u6CA1\u6709 READ_SMS \u6743\u9650\nadb shell service call isms 7 i32 1 s16 "com.android.mms" s16 "+6512345678" s16 "null" s16 \'This is a test message from ADB.\' s16 "null" s16 "null"\n\n# \u83B7\u53D6\u8BBE\u5907\u4FE1\u606F\nadb shell getprop\nadb shell getprop ro.build.version.release\nadb shell getprop ro.build.version.sdk\nadb shell getprop ro.build.version.security_patch\nadb shell getprop ro.build.display.id\nadb shell getprop ro.build.description\n\n# \u622A\u5C4F\u5230\u526A\u5207\u677F\nimgpbcopy() {\n  osascript -e "set the clipboard to (POSIX file \\"$PWD/$1\\")"\n}\n\nadb exec-out screencap -p > screenshot.png\nimgpbcopy screenshot.png\n\n# \u5199\u5165\u526A\u5207\u677F\n# Android 10+\n# Android < 10 \u51FA\u73B0 /system/bin/sh: clipboard: inaccessible or not found\nadb shell clipboard set-primary-clip "\u4F60\u60F3\u5199\u5165\u7684\u6587\u672C\u5185\u5BB9"\npbpaste | adb shell clipboard get-primary-clip\n\n# \u8F93\u5165\u6587\u672C\nadb shell input text TEXT\n\nadb shell service call clipboard 1\n\n# \u8F93\u5165\u6CD5\n# ==================\nadb shell ime list -s\n# \u5207\u6362\u4E3A \u641C\u72D7 \u8F93\u5165\u6CD5\n# com.sohu.inputmethod.sogou.xiaomi/.SogouIME\nadb shell ime set com.sohu.inputmethod.sogou/.SogouIME\n\ncurl -LO https://github.com/senzhk/ADBKeyBoard/raw/refs/heads/master/ADBKeyboard.apk\nadb install -r ADBKeyboard.apk\n\nadb shell ime enable com.android.adbkeyboard/.AdbIME\nadb shell ime set com.android.adbkeyboard/.AdbIME\n\n# \u6709\u4E9B\u4E0D\u652F\u6301 UTF8\nadb shell am broadcast -a ADB_INPUT_TEXT --es msg \'\u4F60\u597D\'\n# \u4F7F\u7528 base64 workaround\nadb shell am broadcast -a ADB_INPUT_B64 --es msg $(echo -n \'\u4F60\u597D\' | base64)\nadb shell am broadcast -a ADB_INPUT_B64 --es msg $(echo $(pbpaste) | base64)\n\n# \u91CD\u7F6E\u8F93\u5165\u6CD5\nadb shell ime reset\n\n# Simulate fast tap\n# /mnt/sdcard/events \u662F\u4ECE dev \u4E2D\u83B7\u53D6\u5230\u7684\nadb shell "while true;do cat /mnt/sdcard/events > /dev/input/event1 && sleep 0.01; done;"\n\n# \u8BBE\u5907 ID\nadb shell settings get secure android_id\n# \u67E5\u770B\u5F53\u524D Activity \u7684\u540D\u5B57\nadb shell dumpsys activity | grep mFocusedActivity\n# \u4E32\u53F7\nadb shell getprop ro.serialno\n# \u67E5\u770B\u8BBE\u5907\u4FE1\u606F Android < 5.0\nadb shell dumpsys iphonesubinfo\n# \u901A\u8FC7 TCP \u94FE\u63A5\nadb tcpip 5555\nadb connect 192.168.0.101:5555\nadb shell ip -f inet addr show wlan0\n# \u6062\u590D\u4E3A USB \u94FE\u63A5\nadb usb\n\n# \u670D\u52A1\u8C03\u7528\n# http://ktnr74.blogspot.com/2014/09/calling-android-services-from-adb-shell.html\n# \u83B7\u53D6 IMEI\nadb shell service call iphonesubinfo 1 | awk -F "\'" \'{print $2}\' | sed \'s/[^0-9A-F]*//g\' | tr -d \'\\n\' && echo\n# 1  getDeviceId\n# 2  getDeviceIdForSubscriber\n# 3  getImeiForSubscriber\n# 4  getDeviceSvn\n# 5  getSubscriberId\n# 6  getSubscriberIdForSubscriber\n# 7  getGroupIdLevel1\n# 8  getGroupIdLevel1ForSubscriber\n# 9  getIccSerialNumber\n# 10  getIccSerialNumberForSubscriber\n# 11  getLine1Number\n# 12  getLine1NumberForSubscriber\n# 13  getLine1AlphaTag\n# 14  getLine1AlphaTagForSubscriber\n# 15  getMsisdn\n# 16  getMsisdnForSubscriber\n# 17  getVoiceMailNumber\n# 18  getVoiceMailNumberForSubscriber\n# 19  getCompleteVoiceMailNumber\n# 20  getCompleteVoiceMailNumberForSubscriber\n# 21  getVoiceMailAlphaTag\n# 22  getVoiceMailAlphaTagForSubscriber\n# 23  getIsimImpi\n# 24  getIsimDomain\n# 25  getIsimImpu\n# 26  getIsimIst\n# 27  getIsimPcscf\n# 28  getIsimChallengeResponse\n# 29  getIccSimChallengeResponse\n\n# \u83B7\u53D6\u5C4F\u5E55\u4E0A\u7684\u989C\u8272\n# <bytes per pixel> \u4E00\u822C\u4E3A4\n# <pixel offset> = Y * width + X\n# \u9700\u8981 ROOT \u6743\u9650\nadb shell "dd if=/dev/graphics/fb0 bs=<bytes per pixel> count=1 skip=<pixel offset> 2>/dev/null | hd"\n# \u83B7\u53D6\u5C4F\u5E55\u5BBD\u5EA6\nadb shell getprop ro.sf.lcd_density\n\n# \u62C9\u53D6\u6240\u6709\u7167\u7247\nadb pull /mnt/sdcard/DCIM/\n\n# \u77ED\u4FE1\n# \u6570\u636E\u5E93\u6587\u4EF6\u9700\u8981 root \u6743\u9650\n# /data/data/com.android.providers.telephony/databases/mmssms.db\n# \u53EF\u4F7F\u7528 APP \u5907\u4EFD\u7136\u540E\u4E0B\u8F7D\n# https://play.google.com/store/apps/details?id=com.riteshsahu.SMSBackupRestore\n# \u5907\u4EFD\u540E\u62C9\u53D6\u5373\u53EF\nadb pull /mnt/sdcard/SMSBackupRestore\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://gist.github.com/Pulimet/5013acf2cd5b28e55036c82c91bd56d8",children:"https://gist.github.com/Pulimet/5013acf2cd5b28e55036c82c91bd56d8"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"touch-event",children:"Touch Event"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u67E5\u770B\u6240\u6709\u7684\u8BBE\u5907,\u6709 MT_TOUCH \u4E3A\u89E6\u6478\u8BBE\u5907\ngetevent -pl\n# \u5047\u8BBE /dev/input/event1 \u4E3A\u89E6\u6478\u8BBE\u5907\n# \u8BB0\u5F55\u6240\u6709\u7684\u64CD\u4F5C, \u9700\u624B\u52A8\u4E2D\u65AD\ncat /dev/input/event1 > event-dump\n# \u56DE\u653E\u8BB0\u5F55\u7684\u64CD\u4F5C\ncat event-dump > /dev/input/event1\n# \u53EF\u547D\u4EE4\u884C\u64CD\u4F5C tap\ninput tap 233 466\n# \u67E5\u770B\u6240\u6709\u64CD\u4F5C\u7684\u4E8B\u4EF6\ngetevent -l\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5C06-httpclient-\u7684\u65E5\u5FD7\u8F93\u51FA\u5230-logcat",children:"\u5C06 HttpClient \u7684\u65E5\u5FD7\u8F93\u51FA\u5230 Logcat"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u4EE3\u7801"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'java.util.logging.Logger.getLogger("org.apache.http.wire").setLevel(java.util.logging.Level.FINEST);\njava.util.logging.Logger.getLogger("org.apache.http.headers").setLevel(java.util.logging.Level.FINEST);\n\nSystem.setProperty("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.SimpleLog");\nSystem.setProperty("org.apache.commons.logging.simplelog.showdatetime", "true");\nSystem.setProperty("org.apache.commons.logging.simplelog.log.httpclient.wire", "debug");\nSystem.setProperty("org.apache.commons.logging.simplelog.log.org.apache.http", "debug");\nSystem.setProperty("org.apache.commons.logging.simplelog.log.org.apache.http.headers", "debug");\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u547D\u4EE4\u884C"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'adb shell setprop log.tag.org.apache.http VERBOSE\nadb shell setprop log.tag.org.apache.http.wire VERBOSE\nadb shell setprop log.tag.org.apache.http.headers VERBOSE\n\nadb logcat -s "org.apache.http.wire" -s "log.tag.org.apache.http.headers" -s "org.apache.http"\n'})})]})}function p(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},917776:function(e,n,s){s.d(n,{R:()=>i,x:()=>r});var t=s(7378);let l={},a=t.createContext(l);function i(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);