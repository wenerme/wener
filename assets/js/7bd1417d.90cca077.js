"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["809094"],{461290:function(n,e,r){r.r(e),r.d(e,{frontMatter:()=>o,toc:()=>d,default:()=>p,metadata:()=>s,assets:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"service/api/protobuf/protoc","title":"protoc","description":"| flag                             | for                                           |","source":"@site/../notes/service/api/protobuf/protoc.md","sourceDirName":"service/api/protobuf","slug":"/service/api/protobuf/protoc","permalink":"/notes/service/api/protobuf/protoc","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/api/protobuf/protoc.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1733665497000,"frontMatter":{"title":"protoc"},"sidebar":"docs","previous":{"title":"protoc-gen-validate","permalink":"/notes/service/api/protobuf/protoc-gen-validate"},"next":{"title":"Serialization Awesome","permalink":"/notes/service/api/serialization-awesome"}}'),t=r(486106),i=r(917776);let o={title:"protoc"},l="protoc",c={},d=[{value:"Plugins",id:"plugins",level:2},{value:"Descriptor",id:"descriptor",level:2},{value:"Write Plugins",id:"write-plugins",level:2}];function h(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"protoc",children:"protoc"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"flag"}),(0,t.jsx)(e.th,{children:"for"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsxs)(e.td,{children:["-I,--proto_path ",(0,t.jsx)(e.code,{children:"<PATH>"})]}),(0,t.jsx)(e.td,{children:"\u9ED8\u8BA4\u5F53\u524D\u76EE\u5F55, --descriptor_set_in"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsxs)(e.td,{children:["--encode ",(0,t.jsx)(e.code,{children:"<MESSAGE_TYPE>"})]}),(0,t.jsx)(e.td,{children:"text -> proto"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--deterministic_output"}),(0,t.jsxs)(e.td,{children:["\u5F53 ",(0,t.jsx)(e.code,{children:"--encode"})," \u786E\u4FDD map \u987A\u5E8F\u56FA\u5B9A"]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsxs)(e.td,{children:["--decode ",(0,t.jsx)(e.code,{children:"<MESSAGE_TYPE>"})]}),(0,t.jsx)(e.td,{children:"proto -> text"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--decode_raw"}),(0,t.jsx)(e.td,{children:"proto -> tag,value - \u4E0D\u9700\u8981 proto"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsxs)(e.td,{children:["--descriptor_set_in ",(0,t.jsx)(e.code,{children:"<FILES>"})]}),(0,t.jsx)(e.td,{children:"FileDescriptorSet \u5217\u8868 descriptor.proto"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsxs)(e.td,{children:["-o,--descriptor_set_out ",(0,t.jsx)(e.code,{children:"<FILE>"})]}),(0,t.jsx)(e.td,{children:"FileDescriptorSet"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--include_imports"}),(0,t.jsxs)(e.td,{children:["\u5F53 ",(0,t.jsx)(e.code,{children:"--descriptor_set_out"})," \u5305\u542B\u4F9D\u8D56"]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--include_source_info"}),(0,t.jsxs)(e.td,{children:["\u5F53 ",(0,t.jsx)(e.code,{children:"--descriptor_set_out"})," \u4FDD\u7559 SourceCodeInfo"]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--dependency_out=FILE"}),(0,t.jsx)(e.td,{children:"\u8F93\u51FA make \u4F9D\u8D56"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--error_format=FORMAT"}),(0,t.jsx)(e.td,{children:"gcc, msvs"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--fatal_warnings"}),(0,t.jsx)(e.td,{children:"warnings -> fatal"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--print_free_field_numbers"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"--plugin=EXECUTABLE"}),(0,t.jsxs)(e.td,{children:["\u9ED8\u8BA4 PATH, \u53EF\u4EE5\u662F ",(0,t.jsx)(e.code,{children:"NAME=PATH"})]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"@<filename>"})}),(0,t.jsx)(e.td,{children:"\u4ECE\u6587\u4EF6\u8BFB\u53D6\u914D\u7F6E"})]})]})]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u63D2\u4EF6\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"<plugin>_out"})," - \u8F93\u51FA\u76EE\u5F55 - \u4F8B\u5982 ",(0,t.jsx)(e.code,{children:".:."}),", ",(0,t.jsx)(e.code,{children:".:./gen/out"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"<plugin>_opt"})," - \u53C2\u6570"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["plugin\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"cpp"}),"\n",(0,t.jsx)(e.li,{children:"csharp"}),"\n",(0,t.jsx)(e.li,{children:"java"}),"\n",(0,t.jsx)(e.li,{children:"js"}),"\n",(0,t.jsx)(e.li,{children:"kotlin"}),"\n",(0,t.jsx)(e.li,{children:"objc"}),"\n",(0,t.jsxs)(e.li,{children:["php ",(0,t.jsx)(e.a,{href:"https://protobuf.dev/reference/php/php-generated/",children:"https://protobuf.dev/reference/php/php-generated/"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"php_namespace"}),"\n",(0,t.jsx)(e.li,{children:"php_metadata_namespace"}),"\n",(0,t.jsx)(e.li,{children:"php_class_prefix"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:"python"}),"\n",(0,t.jsx)(e.li,{children:"ruby"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["descriptor_set\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u9884\u751F\u6210 descriptor\uFF0C\u4E4B\u540E\u5219\u4E0D\u9700\u8981 proto \u6E90\u6587\u4EF6"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"plugins",children:"Plugins"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"protoc-gen-<plugin>"})}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"/notes/service/api/protobuf/protoc-gen-validate",children:"protoc-gen-validate"})," \u6821\u9A8C message\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"go,java,cc"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/protobuf-c/protobuf-c",children:"protoc-gen-c"})}),"\n",(0,t.jsxs)(e.li,{children:["Golang\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/protocolbuffers/protobuf-go",children:"protoc-gen-go"})}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/mitchellh/protoc-gen-go-json",children:"protoc-gen-go-json"})," Go JSON Marshal/Unmarshal"]}),"\n",(0,t.jsx)(e.li,{children:"protoc-gen-go-vtproto"}),"\n",(0,t.jsx)(e.li,{children:"protoc-gen-gotag"}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/gogo/protobuf",children:"gogo/protobuf"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"APIv2 \u53D1\u5E03\u540E\u4E0D\u518D\u7EF4\u62A4"}),"\n",(0,t.jsx)(e.li,{children:"protoc-gen-{gofast,combo,gogo,gogofast,gogofaster,gogoslic,gogotypes,gostring}"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["Document\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"protoc-gen-slate"}),"\n",(0,t.jsx)(e.li,{children:"protoc-gen-swagger"}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/pseudomuto/protoc-gen-doc",children:"protoc-gen-doc"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["Schema\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/chrusty/protoc-gen-jsonschema",children:"protoc-gen-jsonschema"})}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/GoogleCloudPlatform/protoc-gen-bq-schema",children:"protoc-gen-bq-schema"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"pb to BigQuery schema"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"descriptor",children:"Descriptor"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"proto \u89E3\u6790\u8FC7\u540E\u7684\u7ED3\u6784"}),"\n",(0,t.jsxs)(e.li,{children:["DescriptorProto - Message\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"field FieldDescriptorProto"}),"\n",(0,t.jsx)(e.li,{children:"extension"}),"\n",(0,t.jsx)(e.li,{children:"nested_type - DescriptorProto"}),"\n",(0,t.jsx)(e.li,{children:"enum_type - EnumDescriptorProto"}),"\n",(0,t.jsx)(e.li,{children:"oneof - OneofDescriptorProto"}),"\n",(0,t.jsx)(e.li,{children:"options - MessageOptions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"write-plugins",children:"Write Plugins"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u63D2\u4EF6\u534F\u8BAE ",(0,t.jsx)(e.a,{href:"https://github.com/protocolbuffers/protobuf/blob/main/src/google/protobuf/compiler/plugin.proto",children:"https://github.com/protocolbuffers/protobuf/blob/main/src/google/protobuf/compiler/plugin.proto"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u901A\u8FC7 stdio \u4EA4\u4E92"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/lyft/protoc-gen-star",children:"lyft/protoc-gen-star"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u8F85\u52A9\u5B9E\u73B0\u63D2\u4EF6"}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/lyft/protoc-gen-star/tree/master/protoc-gen-debug",children:"protoc-gen-debug"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u751F\u6210 bin\uFF0C\u7528\u4E8E\u6D4B\u8BD5\u63D2\u4EF6"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/danielgtaylor/python-betterproto",children:"danielgtaylor/python-betterproto"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Python 3.6+ code generator & library for Protobuf 3 and async gRPC"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://json-to-proto.github.io/",children:"json-to-proto"})}),"\n"]})]})}function p(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}},917776:function(n,e,r){r.d(e,{R:()=>o,x:()=>l});var s=r(7378);let t={},i=s.createContext(t);function o(n){let e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);