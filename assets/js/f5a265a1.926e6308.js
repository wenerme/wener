"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["85617"],{17757:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>c,toc:()=>u,default:()=>d,metadata:()=>s,assets:()=>i,contentTitle:()=>l});var s=JSON.parse('{"id":"web/react/use-context-selector","title":"use-context-selector","description":"- use-context-selector","source":"@site/../notes/web/react/use-context-selector.md","sourceDirName":"web/react","slug":"/web/react/use-context-selector","permalink":"/notes/web/react/use-context-selector","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/react/use-context-selector.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1667714749000,"frontMatter":{"title":"use-context-selector"},"sidebar":"docs","previous":{"title":"uniforms","permalink":"/notes/web/react/uniforms"},"next":{"title":"valtio","permalink":"/notes/web/react/valtio"}}'),r=n(86106),o=n(17776);let c={title:"use-context-selector"},l="use-context-selector",i={},u=[];function a(e){let t={a:"a",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"use-context-selector",children:"use-context-selector"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/dai-shi/use-context-selector",children:"use-context-selector"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u652F\u6301 context \u9009\u53D6\u90E8\u5206 - \u76D1\u542C\u90E8\u5206\u53D8\u5316"}),"\n",(0,r.jsx)(t.li,{children:"\u53EF\u4EE5\u4F20\u9012\u66F4\u65B0\u903B\u8F91 - \u652F\u6301 suspense"}),"\n",(0,r.jsx)(t.li,{children:"\u652F\u6301 concurrent \u6A21\u5F0F"}),"\n",(0,r.jsx)(t.li,{children:"\u63D0\u4F9B BridgeProvider - \u591A\u4E2A render \u4E0A\u4E0B\u6587"}),"\n",(0,r.jsx)(t.li,{children:"\u65E0 Consumer"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["RFC ",(0,r.jsx)(t.a,{href:"https://github.com/reactjs/rfcs/pull/119",children:"useContextUpdate"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:'// \u5B9E\u9645 Context \u503C\u5BF9\u8C61\n// React.Provider \u7684\u503C\u4E0D\u4F1A\u53D1\u751F\u53D8\u5316\ntype ContextValue<Value> = {\n  [CONTEXT_VALUE]: {\n    /* "v"alue     */ v: MutableRefObject<Value>;\n    /* versio"n"   */ n: MutableRefObject<Version>;\n    /* "l"isteners */ l: Set<Listener<Value>>;\n    /* "u"pdate    */ u: (thunk: () => void, options?: { suspense: boolean }) => void;\n  };\n};\n\n// \u8DDF\u8E2A useContextSelector\ntype Listener<Value> = (action: { n: Version; p?: Promise<Value>; v?: Value }) => void;\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { createContext, useContextSelector } from 'use-context-selector';\n\nconst Context = createContext(null);\n\nconst StateProvider = ({ children }) => (\n  <Context.Provider value={useState({ count1: 0, count2: 0 })}>{children}</Context.Provider>\n);\n"})})]})}function d(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},17776:function(e,t,n){n.d(t,{R:()=>c,x:()=>l});var s=n(7378);let r={},o=s.createContext(r);function c(e){let t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);