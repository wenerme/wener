"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["70356"],{1624:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>i,toc:()=>c,default:()=>x,metadata:()=>t,assets:()=>a,contentTitle:()=>l});var t=JSON.parse('{"id":"devops/xaas/db-schema","title":"Tenant DB Schema","description":"FAQ","source":"@site/../notes/devops/xaas/db-schema.md","sourceDirName":"devops/xaas","slug":"/devops/xaas/db-schema","permalink":"/notes/devops/xaas/db-schema","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/xaas/db-schema.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1693463269000,"frontMatter":{"title":"Tenant DB Schema"},"sidebar":"docs","previous":{"title":"Web Server FAQ","permalink":"/notes/devops/web/faq"},"next":{"title":"Dokku","permalink":"/notes/devops/xaas/paas/dokku"}}'),d=s(86106),r=s(17776);let i={title:"Tenant DB Schema"},l="Database Schema for multi-tendency",a={},c=[{value:"FAQ",id:"faq",level:2},{value:"Tenant Schema vs Shared Table vs Tenant View",id:"tenant-schema-vs-shared-table-vs-tenant-view",level:3}];function h(e){let n={a:"a",br:"br",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"database-schema-for-multi-tendency",children:"Database Schema for multi-tendency"})}),"\n",(0,d.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,d.jsx)(n.h3,{id:"tenant-schema-vs-shared-table-vs-tenant-view",children:"Tenant Schema vs Shared Table vs Tenant View"}),"\n",(0,d.jsx)(n.p,{children:"\u79DF\u6237\u6570\u636E\u5E93\u8BBE\u8BA1\u4E0E\u79DF\u6237\u573A\u666F\u5173\u7CFB"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u5E94\u7528\u573A\u666F"}),(0,d.jsxs)(n.th,{children:["Tenant Schema",(0,d.jsx)(n.br,{}),"\u79DF\u6237\u5E93"]}),(0,d.jsxs)(n.th,{children:["Shared Table",(0,d.jsx)(n.br,{}),"\u5171\u4EAB\u8868"]}),(0,d.jsxs)(n.th,{children:["Tenant View",(0,d.jsx)(n.br,{}),"\u79DF\u6237\u89C6\u56FE"]})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u79DF\u6237\u591A\u5C11"}),(0,d.jsx)(n.td,{children:"\u5C11"}),(0,d.jsx)(n.td,{children:"\u591A"}),(0,d.jsx)(n.td,{children:"\u591A"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u79DF\u6237\u5927\u5C0F"}),(0,d.jsx)(n.td,{children:"\u5927"}),(0,d.jsx)(n.td,{children:"\u4E2D"}),(0,d.jsx)(n.td,{children:"\u4E2D"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u79DF\u6237\u5B9A\u5236"}),(0,d.jsx)(n.td,{children:"\u9AD8"}),(0,d.jsx)(n.td,{children:"\u4F4E"}),(0,d.jsx)(n.td,{children:"\u4F4E"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u7EF4\u62A4\u6210\u672C"}),(0,d.jsx)(n.td,{children:"\u4E2D"}),(0,d.jsx)(n.td,{children:"\u4F4E"}),(0,d.jsx)(n.td,{children:"\u4E2D"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u5F00\u53D1\u6210\u672C"}),(0,d.jsx)(n.td,{children:"\u4F4E"}),(0,d.jsx)(n.td,{children:"\u9AD8"}),(0,d.jsx)(n.td,{children:"\u4F4E"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u5B89\u5168\u9694\u79BB"}),(0,d.jsx)(n.td,{children:"\u9AD8"}),(0,d.jsx)(n.td,{children:"\u4F4E"}),(0,d.jsx)(n.td,{children:"\u4E2D"})]})]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Tenant Schema\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5BF9\u5F00\u53D1\u53CB\u597D\uFF0C\u9002\u7528\u4E8E\u5927\u578B\u5F3A\u4E1A\u52A1\u79DF\u6237"}),"\n",(0,d.jsx)(n.li,{children:"\u79DF\u6237\u591A\u65F6 Schema \u5347\u7EA7\u96BE"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["Shared Table\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u9002\u7528\u4E8E\u79DF\u6237\u5185\u5BB9\u76F8\u5BF9\u7B80\u5355\uFF0C\u4F46\u79DF\u6237\u91CF\u7279\u522B\u591A\u7684\u573A\u666F"}),"\n",(0,d.jsx)(n.li,{children:"\u5355\u4E00 Schema\uFF0C\u7ED3\u6784\u7EF4\u62A4\u7B80\u5355\uFF0C\u4F46\u53EA\u80FD\u4F7F\u7528\u540C\u4E00\u7248\u672C\u7ED3\u6784\uFF0C\u4E0D\u80FD\u5B9A\u5236\u8868\u5217"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["Tenant View\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u4F9D\u8D56 DB \u7279\u6027\uFF0C\u4F8B\u5982 PG \u7684\u53EF\u5199\u89C6\u56FE\uFF0CMySQL \u4E0D\u652F\u6301\u8FD9\u79CD\u6A21\u5F0F"}),"\n",(0,d.jsx)(n.li,{children:"\u4E24\u8005\u7684\u4E00\u4E2A\u7EFC\u5408\uFF0C\u96C6\u6210\u4E86\u4E24\u8005\u4E0D\u597D\u7684\u70B9"}),"\n",(0,d.jsx)(n.li,{children:"\u4F46\u5BF9\u5F00\u53D1\u76F8\u5BF9\u53CB\u597D\u4E00\u70B9"}),"\n",(0,d.jsx)(n.li,{children:"\u5B9A\u5236\u5316\u53EF\u901A\u8FC7\u8868\u7684 JSON \u5B57\u6BB5\uFF0C\u5728 \u79DF\u6237\u89C6\u56FE \u4E2D\u4F5C\u4E3A\u5217\uFF0C\u4F46\u65E0\u6CD5\u66F4\u65B0 - \u5B9E\u73B0\u66F4\u65B0\u53EF\u4EE5\u4F7F\u7528 trigger \u6216 rule\uFF0C\u4F46\u76F8\u5BF9\u9EBB\u70E6"}),"\n",(0,d.jsx)(n.li,{children:"\u5B9A\u5236\u5316\u4E5F\u53EF\u4EE5\u901A\u8FC7 JOIN \u5916\u90E8\u8868\u5B9E\u73B0"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://stackoverflow.com/questions/44524364",children:"PostgreSQL's schemas for multi-tenant applications"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://docs.citusdata.com/en/latest/articles/designing_saas.html",children:"Designing your SaaS Database for Scale with Postgres"})}),"\n"]}),"\n"]}),"\n"]})]})}function x(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},17776:function(e,n,s){s.d(n,{R:()=>i,x:()=>l});var t=s(7378);let d={},r=t.createContext(d);function i(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);