"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["715166"],{391267:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>a,toc:()=>c,default:()=>f,metadata:()=>s,assets:()=>i,contentTitle:()=>l});var s=JSON.parse('{"id":"web/framework/taro","title":"Taro","description":"Tips","source":"@site/../notes/web/framework/taro.md","sourceDirName":"web/framework","slug":"/web/framework/taro","permalink":"/notes/web/framework/taro","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/framework/taro.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"Taro"},"sidebar":"docs","previous":{"title":"Taro FAQ","permalink":"/notes/web/framework/taro/faq"},"next":{"title":"tauri","permalink":"/notes/web/framework/tauri"}}'),o=t(486106),r=t(917776);let a={title:"Taro"},l,i={},c=[{value:"Tips",id:"tips",level:2},{value:"FAQ",id:"faq",level:2},{value:"\u5F15\u7528\u9759\u6001\u5B57\u4F53\u6587\u4EF6",id:"\u5F15\u7528\u9759\u6001\u5B57\u4F53\u6587\u4EF6",level:3},{value:"\u4F7F\u7528 async/await",id:"\u4F7F\u7528-asyncawait",level:3},{value:"\u4F7F\u7528\u522B\u540D",id:"\u4F7F\u7528\u522B\u540D",level:2}];function d(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",view:"view",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"tips",children:"Tips"}),"\n",(0,o.jsxs)(n.ol,{start:"0",children:["\n",(0,o.jsx)(n.li,{children:"CSS"}),"\n",(0,o.jsx)(n.li,{children:"\u4E0D\u8981\u4F7F\u7528 ID \u9009\u62E9\u5668 (#od)\u3001\u5C5E\u6027\u9009\u62E9\u5668\u3001\u6807\u7B7E\u9009\u62E9\u5668"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u7EC4\u4EF6\u548C\u5F15\u7528\u7EC4\u4EF6\u7684\u9875\u9762\u4E0D\u80FD\u4F7F\u7528 id \u9009\u62E9\u5668\uFF08#a\uFF09\u3001\u5C5E\u6027\u9009\u62E9\u5668\uFF08[a]\uFF09\u548C\u6807\u7B7E\u540D\u9009\u62E9\u5668\uFF0C\u8BF7\u6539\u7528 class \u9009\u62E9\u5668\u3002\n\u7EC4\u4EF6\u548C\u5F15\u7528\u7EC4\u4EF6\u7684\u9875\u9762\u4E2D\u4F7F\u7528\u540E\u4EE3\u9009\u62E9\u5668\uFF08.a .b\uFF09\u5728\u4E00\u4E9B\u6781\u7AEF\u60C5\u51B5\u4E0B\u4F1A\u6709\u975E\u9884\u671F\u7684\u8868\u73B0\uFF0C\u5982\u9047\uFF0C\u8BF7\u907F\u514D\u4F7F\u7528\u3002\n\u5B50\u5143\u7D20\u9009\u62E9\u5668\uFF08.a > .b\uFF09\u53EA\u80FD\u7528\u4E8E View \u7EC4\u4EF6\u4E0E\u5176\u5B50\u8282\u70B9\u4E4B\u95F4\uFF0C\u7528\u4E8E\u5176\u4ED6\u7EC4\u4EF6\u53EF\u80FD\u5BFC\u81F4\u975E\u9884\u671F\u7684\u60C5\u51B5\u3002\n\u7EE7\u627F\u6837\u5F0F\uFF0C\u5982 font \u3001 color \uFF0C\u4F1A\u4ECE\u7EC4\u4EF6\u5916\uFF08\u7236\u7EC4\u4EF6\uFF09\u7EE7\u627F\u5230\u7EC4\u4EF6\u5185\u3002\u4F46\u662F\u5F15\u7528\u7EC4\u4EF6\u65F6\u5728\u7EC4\u4EF6\u8282\u70B9\u4E0A\u4E66\u5199\u7684 className \u65E0\u6548\u3002 \uFF08\u5177\u4F53\u89E3\u51B3\u65B9\u6848\u8BF7\u53C2\u89C1\u4E0B\u9762\u7684\u5916\u90E8\u548C\u5168\u5C40\u6837\u5F0F\u4ECB\u7ECD\u3002\uFF09\n\u9664\u7EE7\u627F\u6837\u5F0F\u5916\uFF0C app.scss \u4E2D\u7684\u6837\u5F0F\u3001\u7EC4\u4EF6\u6240\u5728\u9875\u9762\u7684\u6837\u5F0F\uFF0C\u5747\u5BF9\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u65E0\u6548\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u6CE8\u610F\uFF1AexternalClasses \u9700\u8981\u4F7F\u7528 \u77ED\u6A2A\u7EBF\u547D\u540D\u6CD5 (kebab-case)\uFF0C\u800C\u4E0D\u662F React \u60EF\u7528\u7684 \u9A7C\u5CF0\u547D\u540D\u6CD5 (camelCase)\u3002\u5426\u5219\u65E0\u6548\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u9700\u8981\u901A\u8FC7 View \u6765\u5E03\u5C40"}),"\n",(0,o.jsx)(n.p,{children:"// \u5047\u8BBE\u6211\u4EEC\u4E4B\u524D\u8BBE\u7F6E\u4E86 this.state.counter = 0\nupdateCounter () {\nthis.setState({\ncounter: 1\n}, () => {\n// \u5728\u8FD9\u4E2A\u51FD\u6570\u5185\u4F60\u53EF\u4EE5\u62FF\u5230 setState \u4E4B\u540E\u7684\u503C\n})\n}"}),"\n",(0,o.jsx)(n.p,{children:"\u8FD9\u662F Taro \u548C React \u53E6\u4E00\u4E2A\u4E0D\u540C\u7684\u5730\u65B9\uFF1AReact \u7684 setState \u4E0D\u4E00\u5B9A\u603B\u662F\u5F02\u6B65\u7684\uFF0C\u4ED6\u5185\u90E8\u6709\u4E00\u5957\u4E8B\u52A1\u673A\u5236\u63A7\u5236\uFF0C\u4E14 React 15/16 \u7684\u5B9E\u73B0\u4E5F\u5404\u4E0D\u76F8\u540C\u3002\u800C\u5BF9\u4E8E Taro \u800C\u8A00\uFF0CsetState \u4E4B\u540E\uFF0C\u4F60\u63D0\u4F9B\u7684\u5BF9\u8C61\u4F1A\u88AB\u52A0\u5165\u4E00\u4E2A\u6570\u7EC4\uFF0C\u7136\u540E\u5728\u6267\u884C\u4E0B\u4E00\u4E2A eventloop \u7684\u65F6\u5019\u5408\u5E76\u5B83\u4EEC\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u6CE8\u610F\uFF1A\u5728\u5404\u5C0F\u7A0B\u5E8F\u7AEF\uFF0C\u4F7F\u7528\u533F\u540D\u51FD\u6570\uFF0C\u5C24\u5176\u662F\u5728 \u5FAA\u73AF\u4E2D \u4F7F\u7528\u533F\u540D\u51FD\u6570\uFF0C\u6BD4\u4F7F\u7528 bind \u8FDB\u884C\u4E8B\u4EF6\u4F20\u53C2\u5360\u7528\u66F4\u5927\u7684\u5185\u5B58\uFF0C\u901F\u5EA6\u4E5F\u4F1A\u66F4\u6162\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u6CE8\u610F\uFF1A \u4F7F\u7528\u901A\u8FC7 usingComponents \u7684\u7B2C\u4E09\u65B9\u7EC4\u4EF6\u4E0D\u652F\u6301\u533F\u540D\u51FD\u6570"}),"\n",(0,o.jsx)(n.p,{children:"\u666E\u901A\u51FD\u6570\u5F0F\u7EC4\u4EF6\u547D\u540D\u89C4\u5219\u8BF7\u9075\u5B88\u5E15\u65AF\u5361\u547D\u540D\u6CD5\uFF08Pascal Case), \u5982\u679C\u662F\u5728\u51FD\u6570\u5185\u58F0\u660E\u95ED\u5305\u7EC4\u4EF6\uFF0C\u5219\u9700\u8981\u4F7F\u7528\u51FD\u6570\u8868\u8FBE\u5F0F\u7684\u5199\u6CD5\u3002\n\u5F62\u5982:\nconst renderBody = state => {"}),"\n",(0,o.jsx)(n.p,{children:"HOC \u652F\u6301\u4E0D\u597D"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://github.com/NervJS/taro/issues/5069",children:"Issue #5069: Context support"}),"\n\u95ED\u5305\u51FD\u6570\u5F0F\u7EC4\u4EF6\u63A5\u6536\u51FD\u6570\u53C2\u6570\u65F6\uFF0C\u51FD\u6570\u53C2\u6570\u4F1A\u88AB\u7F16\u8BD1\u6210\u4E00\u4E2A\u6210\u5458\u53D8\u91CF\uFF0C\u5BFC\u81F4\u591A\u6B21\u8C03\u7528\u8BE5\u7EC4\u4EF6\u65F6\u51FD\u6570\u53C2\u6570\u88AB\u8986\u76D6\u3002"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u7531\u4E8E\u73B0\u5728 Taro \u8FD8\u6CA1\u6709 render props \u7684\u5B8C\u6574\u652F\u6301\uFF0C\u6240\u4EE5\u65E0\u6CD5\u4F7F\u7528 Context.Comsumer API\uFF0C\u5982\u679C\u8981\u6D88\u8D39 Context\uFF0C\u53EF\u4EE5\u4F7F\u7528 ContextType \u6216 useContext API\u3002"}),"\n",(0,o.jsxs)(n.p,{children:["\u4E0D\u52A0 undefined \u53EF\u80FD\u4F1A\u51FA\u73B0 true - \u5728\u5C0F\u7A0B\u5E8F\u4E2D\n{this.state.collapse ? undefined : ",(0,o.jsx)(n.view,{children:"{this.props.children}"}),"}"]}),"\n",(0,o.jsx)(n.p,{children:"\u7531\u4E8E\u73B0\u5728 Taro \u8FD8\u6CA1\u6709 render props \u7684\u5B8C\u6574\u652F\u6301\uFF0C\u6240\u4EE5\u65E0\u6CD5\u4F7F\u7528 Context.Comsumer API\uFF0C\u5982\u679C\u8981\u6D88\u8D39 Context\uFF0C\u53EF\u4EE5\u4F7F\u7528 ContextType \u6216 useContext API\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"/* \u4E0D\u8981\u8FD9\u6837\u7528 */\n#title {\n}\n[data-title] {\n}\nView {\n}\n\n/* \u907F\u514D\u4F7F\u7528 - \u53EF\u80FD\u4F1A\u6709\u95EE\u9898 */\n.content .title {\n}\n/* \u53EA\u80FD\u7528\u4E8E View \u7EC4\u4EF6\u4E0E\u5176\u5B50\u8282\u70B9\u4E4B\u95F4 - \u7528\u4E8E\u5176\u5B83\u8282\u70B9\u53EF\u80FD\u4F1A\u6709\u95EE\u9898 */\n.content > .title {\n}\n\n/* \u5FAE\u4FE1 1.7.2 */\n:host {\n  color: yellow;\n}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"class MyComponent extends Component {\n  static options = {\n    // \u5168\u5C40\u6837\u5F0F - \u5EFA\u8BAE\u6240\u6709\u7EC4\u4EF6\u90FD\u5F00\u542F - \u56E0\u4E3A Web \u9ED8\u8BA4\u884C\u4E3A\u662F\u8FD9\u6837\u7684\n    // \u5FAE\u4FE1 2.2.3\n    addGlobalClass: true,\n  };\n\n  // \u4F9D\u8D56\u5916\u90E8\u6837\u5F0F - \u540D\u5B57\u9700\u8981\u4E2D\u5212\u7EBF\u5206\u5272\n  // \u5FAE\u4FE1 1.9.90\n  static externalClasses = ['my-class'];\n}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"<Button open-type='getUserInfo' onGetUserInfo={this.getUserInfo} > \u5FAE\u4FE1\u6388\u6743 </Button>\n\n<AtAvatar openData={{type:'userAvatarUrl'}} circle></AtAvatar>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,o.jsx)(n.h3,{id:"\u5F15\u7528\u9759\u6001\u5B57\u4F53\u6587\u4EF6",children:"\u5F15\u7528\u9759\u6001\u5B57\u4F53\u6587\u4EF6"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u9700\u8981\u505A base64 \u7F16\u7801"}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://transfonter.org/",children:"Transfonter"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/NervJS/taro-ui-demo/blob/master/src/assets/font-awesome/font-awesome.scss",children:"NervJS/taro-ui-demo"})}),"\n",(0,o.jsxs)(n.li,{children:["\u6216\u8005\u5916\u90E8\u5F15\u7528\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://cdnjs.com/libraries/font-awesome/5.12.0-1",children:"font-awesome/5.12.0-1"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"@font-face {\n  font-family: 'FontAwesome';\n  src: url('https://netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?v=4.7.0');\n  src: url('https://netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('https://netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('https://netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('https://netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('https://netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');\n  // src: url('./assets/font-awesome/fontawesome-webfont.eot?v=4.7.0');\n  // src: url('./assets/font-awesome/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('./fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('./fontawesome-webfont.woff?v=4.7.0') format('woff'), url('./fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('./fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u4F7F\u7528-asyncawait",children:"\u4F7F\u7528 async/await"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"yarn add babel-plugin-transform-runtime --dev\nyarn add babel-runtime\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"config/index.js"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\n  babel: {\n    sourceMap: true,\n    presets: [\n      [\n        'env',\n        {\n          modules: false\n        }\n      ]\n    ],\n    plugins: [\n      'transform-decorators-legacy',\n      'transform-class-properties',\n      'transform-object-rest-spread',\n      // \u65B0\u589E\u8BE5\u914D\u7F6E\n      ['transform-runtime', {\n        \"helpers\": false,\n        \"polyfill\": false,\n        \"regenerator\": true,\n        \"moduleName\": 'babel-runtime'\n      }]\n    ]\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u4F7F\u7528\u522B\u540D",children:"\u4F7F\u7528\u522B\u540D"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"config/index.js"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{\n  // \u65B0\u589E\u914D\u7F6E\u9879\n  alias: {\n    // \u5982\u679C\u6BD4\u8F83\u591A\n    ...(Object.fromEntries(['components', 'libs', 'hooks', 'types'].map(v => [v, path.resolve(__dirname, '..', `src/${v}`)]))),\n    // \u6216\u8005\u5355\u4E2A\u914D\u7F6E\n    'utils': path.resolve(__dirname, '..', 'src/utils')\n  },\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"tsconfig.json"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    // \u65B0\u589E\u914D\u7F6E\n    "paths": {\n      "components/*": ["src/components/*"],\n      "types/*": ["src/types/*"],\n      "libs/*": ["src/libs/*"],\n      "hooks/*": ["src/hooks/*"]\n    }\n  }\n}\n'})})]})}function f(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},917776:function(e,n,t){t.d(n,{R:()=>a,x:()=>l});var s=t(7378);let o={},r=s.createContext(o);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);