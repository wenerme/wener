"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["83142"],{62344:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>l,toc:()=>h,default:()=>o,metadata:()=>t,assets:()=>c,contentTitle:()=>i});var t=JSON.parse('{"id":"os/macos/pmset","title":"pmset","description":"pmset","source":"@site/../notes/os/macos/pmset.md","sourceDirName":"os/macos","slug":"/os/macos/pmset","permalink":"/notes/os/macos/pmset","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/macos/pmset.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1692169664000,"frontMatter":{"title":"pmset"},"sidebar":"docs","previous":{"title":"pfctl","permalink":"/notes/os/macos/pfctl"},"next":{"title":"Spotlight","permalink":"/notes/os/macos/spotlight"}}'),r=s(86106),d=s(17776);let l={title:"pmset"},i,c={},h=[{value:"pmset",id:"pmset",level:2},{value:"Unable to sleep system: error 0xe00002e2",id:"unable-to-sleep-system-error-0xe00002e2",level:2}];function a(n){let e={a:"a",blockquote:"blockquote",code:"code",del:"del",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"pmset",children:"pmset"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["wiki ",(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Pmset",children:"Pmset"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://www.dssw.co.uk/reference/pmset.html",children:"pmset"})," man"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.freebsd.org/cgi/man.cgi?query=pmset&sektion=1&manpath=Darwin",children:"https://www.freebsd.org/cgi/man.cgi?query=pmset&sektion=1&manpath=Darwin"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://opensource.apple.com/source/PowerManagement/PowerManagement-321.5.3/pmset/",children:"https://opensource.apple.com/source/PowerManagement/PowerManagement-321.5.3/pmset/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u907F\u514D\u5F85\u673A\ncaffeinate\n# \u6216\npmset noidel\n\n# \u67E5\u770B\u5F53\u524D\u914D\u7F6E - \u57FA\u4E8E\u60C5\u51B5\u663E\u793A AC \u6216 \u7535\u6C60\npmset -g\npmset -g | tail -n +4 | sort\n# \u6240\u6709\u914D\u7F6E\npmset -g custom\n\n\n# \u4E00\u6B21\u4FEE\u6539\u591A\u4E2A\u8BBE\u7F6E\npmset -a displaysleep 10 disksleep 10 sleep 30 womp 1\n# standby https://support.apple.com/zh-cn/HT202124\npmset -a hibernatemode 3 standby 1 standbydelayhigh 150 standbydelaylow 0\n\npmset -a proximitywake 0\n\npmset restoredefaults # \u7535\u6E90\u914D\u7F6E\u6062\u590D\u7CFB\u7EDF\u8BBE\u7F6E\npmset sleepnow        # \u7ACB\u5373\u4F11\u7720\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"flag"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-a"}),(0,r.jsx)(e.td,{children:"all"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-b"}),(0,r.jsx)(e.td,{children:"bettery"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-c"}),(0,r.jsx)(e.td,{children:"charger, wall power, ac power"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-u"}),(0,r.jsx)(e.td,{children:"UPS"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-g"}),(0,r.jsx)(e.td,{children:"-> -g live \u663E\u793A\u5F53\u524D\u914D\u7F6E"})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["-g live - \u5F53\u524D\u914D\u7F6E\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"disk"}),"\n",(0,r.jsx)(e.li,{children:"cap - \u652F\u6301\u7684\u7279\u6027"}),"\n",(0,r.jsx)(e.li,{children:"shed - scheduled startup/wake and shutdown/sleep events"}),"\n",(0,r.jsx)(e.li,{children:"ups - UPS emergency thresholds"}),"\n",(0,r.jsx)(e.li,{children:"ps - status of batteries and UPSs"}),"\n",(0,r.jsx)(e.li,{children:"pslog - \u76D1\u542C\u65E5\u5FD7"}),"\n",(0,r.jsx)(e.li,{children:"batt"}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"conf"}),(0,r.jsx)(e.th,{children:"default"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"acwake"}),(0,r.jsx)(e.td,{children:"0"}),(0,r.jsx)(e.td,{children:"\u5145\u7535\u65F6\u5524\u9192"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"autopoweroff"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u662F\u5426\u81EA\u52A8\u505C\u6B62\u7535\u6E90"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"autopoweroffdelay"}),(0,r.jsx)(e.td,{children:"14400"}),(0,r.jsx)(e.td,{children:"\u8FDB\u5165\u81EA\u52A8\u505C\u6B62\u7535\u6E90\u6A21\u5F0F\u7684\u5EF6\u8FDF,\u79D2"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"lowpowermode"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u4F4E\u7535\u91CF\u6A21\u5F0F"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"disksleep"}),(0,r.jsx)(e.td,{children:"10"}),(0,r.jsx)(e.td,{children:"\u78C1\u76D8\u7761\u7720\u5B9A\u65F6\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"displaysleep"}),(0,r.jsx)(e.td,{children:"10"}),(0,r.jsx)(e.td,{children:"\u663E\u793A\u5668\u7761\u7720\u5B9A\u65F6\u5668,\u5206\u949F,0 \u7981\u7528"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"gpuswitch"}),(0,r.jsx)(e.td,{children:"2"}),(0,r.jsx)(e.td,{children:"GUP \u5207\u6362"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"halfdim"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u663E\u793A\u5668\u4F11\u7720\u4F7F\u7528\u66F4\u6697\u7684\u4EAE\u5EA6\uFF0C\u800C\u4E0D\u662F\u76F4\u63A5\u5173"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hibernatefile"}),(0,r.jsx)(e.td,{children:"/var/vm/sleepimage"}),(0,r.jsx)(e.td,{children:"\u4F11\u7720\u65F6\u8F6C\u50A8\u7684\u6587\u4EF6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hibernatemode"}),(0,r.jsx)(e.td,{children:"3"}),(0,r.jsx)(e.td,{children:"\u4F11\u7720\u6A21\u5F0F,\u5206\u949F,0 \u7981\u7528"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"highstandbythreshold"}),(0,r.jsx)(e.td,{children:"50"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"lidwake"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u7B14\u8BB0\u672C\u5F00\u76D6\u65F6\u5524\u9192"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"networkoversleep"}),(0,r.jsx)(e.td,{children:"0"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"powernap"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u662F\u5426\u542F\u7528 Power Nap"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"proximitywake"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u76F8\u540C iCloud ID \u8BBE\u5907\u63A5\u8FD1\u65F6\u5524\u9192"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"sleep"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u7CFB\u7EDF\u7761\u7720\u5B9A\u65F6\u5668,\u5206\u949F,0 \u7981\u7528"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"standby"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u662F\u5426\u8BA9\u7535\u6E90\u7BA1\u7406\u5668\u81EA\u52A8\u4F11\u7720\u7CFB\u7EDF."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.del,{children:"standbydelay"})}),(0,r.jsx)(e.td,{children:"10800"}),(0,r.jsx)(e.td,{children:"\u5199\u5165\u4F11\u7720\u955C\u50CF\u5230\u78C1\u76D8\u4E4B\u524D\u548C\u505C\u6B62\u7ED9\u5185\u5B58\u4F9B\u7535\u7684\u5EF6\u8FDF,\u79D2"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"standbydelayhigh"}),(0,r.jsx)(e.td,{children:"150"}),(0,r.jsx)(e.td,{children:"\u5199\u4F11\u7720\u955C\u50CF\u7684\u5EF6\u65F6\uFF0C\u79D2"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"standbydelaylow"}),(0,r.jsx)(e.td,{children:"0"}),(0,r.jsx)(e.td,{children:"\u5199\u4F11\u7720\u955C\u50CF\u7684\u5EF6\u65F6\uFF0C\u79D2"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ttyskeepawake"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u5F53\u4EFB\u4F55 tty \u5904\u4E8E'\u6FC0\u6D3B'\u7684\u65F6\u5019\u90FD\u4F7F\u7CFB\u7EDF\u4E0D\u4F1A\u8FDB\u5165\u7761\u7720.\u5F53 tty \u7684\u7A7A\u95F2\u65F6\u95F4\u8D85\u8FC7\u7CFB\u7EDF\u7761\u7720\u65F6\u95F4\u540E\u4FBF\u4E0D\u518D\u5904\u4E8E '\u6FC0\u6D3B' \u72B6\u6001."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"womp"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{children:"\u662F\u5426\u542F\u7528\u7F51\u7EDC\u5524\u9192"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"tcpkeepalive"}),(0,r.jsx)(e.td,{children:"1"}),(0,r.jsx)(e.td,{})]})]})]}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Note"})}),"\n",(0,r.jsx)(e.p,{children:"default \u6839\u636E mac \u578B\u53F7\u4E0D\u540C\u800C\u4E0D\u540C"}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"autorestart \u662F\u5426\u5728\u65AD\u7535\u540E\u81EA\u52A8\u91CD\u542F"}),"\n",(0,r.jsx)(e.li,{children:"ring - wake on modem ring"}),"\n",(0,r.jsx)(e.li,{children:"lessbright - slightly turn down display brightness when switching to this power source"}),"\n",(0,r.jsx)(e.li,{children:"sms - use Sudden Motion Sensor to park disk heads on sudden changes in G force"}),"\n",(0,r.jsx)(e.li,{children:"networkoversleep - this setting affects how OS X networking presents shared network services during system sleep. This setting is not used by all platforms; changing its value is unsupported."}),"\n",(0,r.jsx)(e.li,{children:"destroyfvkeyonstandby - Destroy File Vault Key when going to standby mode. By default File vault keys are retained even when system goes to standby. If the keys are destroyed, user will be prompted to enter the password while coming out of standby mode.(value: 1 - Destroy, 0 - Retain)"}),"\n",(0,r.jsx)(e.li,{children:"womp - wake on ethernet magic packet"}),"\n",(0,r.jsx)(e.li,{children:"reduce - CPU \u964D\u901F"}),"\n",(0,r.jsx)(e.li,{children:"lessbright"}),"\n",(0,r.jsx)(e.li,{children:"sms - Sudden Motion Sensor"}),"\n",(0,r.jsx)(e.li,{children:"hibernatemode"}),"\n",(0,r.jsxs)(e.li,{children:["\u914D\u7F6E\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7CFB\u7EDF /Library/Preferences/SystemConfiguration/com.apple.PowerManagement.plist"}),"\n",(0,r.jsx)(e.li,{children:"Scheduled /Library/Preferences/SystemConfiguration/com.apple.AutoWake.plist"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5176\u4ED6\u53C2\u6570\n#  boot \u91CD\u542F\u7CFB\u7EDF\n#  force \u5F3A\u5236 PM(Power Management) \u7ACB\u5373\u6FC0\u6D3B\u8BBE\u7F6E.\u4E0D\u8BB2\u8BBE\u7F6E\u5199\u5230\u78C1\u76D8,\u53EF\u4EE5\u4F7F\u8BBE\u7F6E\u80FD\u591F\u5F88\u5BB9\u6613\u88AB\u91CD\u5199.\u5F53\u5728\u7279\u6B8A\u573A\u666F\u4E0B PM \u672A\u8FD0\u884C\u65F6\u5F88\u6709\u5E2E\u52A9.\n#  touch PM \u4ECE\u65B0\u4ECE\u78C1\u76D8\u8BFB\u53D6\u73B0\u6709\u914D\u7F6E\n#  noidle \u907F\u514D\u7A7A\u95F2\u65F6\u8FDB\u5165\u7761\u7720\u6A21\u5F0F,\u8BE5\u547D\u4EE4\u5DF2\u88AB\u5E9F\u5F03,\u4F7F\u7528 caffeinate \u66FF\u4EE3\n#  sleepnow \u7ACB\u5373\u4F7F\u7CFB\u7EDF\u8FDB\u5165\u7761\u7720\n#  restoredefaults \u6062\u590D\u8282\u80FD\u7A0B\u5E8F\u5230\u9ED8\u8BA4\u503C\n#  displaysleepnow \u4F7F\u663E\u793A\u5668\u7ACB\u5373\u8FDB\u5165\u7761\u7720\n#  resetdisplayambientparams \u91CD\u7F6E\u6307\u5B9A\u663E\u793A\u5668\u7684\u73AF\u5883\u5149\u53C2\u6570\n\n# \u4FEE\u6539\u65F6\u6307\u5B9A\u8303\u56F4\n#		-b \u7535\u6C60\n#		-c \u94FE\u63A5\u4E86\u7535\u6E90, UPS ( -u )\n#		-u UPS\n#		-a \u6240\u6709\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4F11\u7720\u6A21\u5F0F\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"0 - Legacy sleep mode - \u4E0D\u4F1A\u5C06\u5185\u5B58\u6301\u4E45\u5316\u5230\u5B58\u50A8.\u5728\u65AD\u7535\u65F6\u5185\u5B58\u6570\u636E\u4F1A\u4E22\u5931."}),"\n",(0,r.jsx)(e.li,{children:"1 - Legacy Safe Sleep"}),"\n",(0,r.jsxs)(e.li,{children:["3 - Default - \u4F1A\u5C06\u5185\u5B58\u62F7\u8D1D\u5230\u5B58\u50A8,\u5F53\u7761\u7720\u65F6\u4E5F\u4F1A\u7ED9\u5185\u5B58\u4F9B\u7535,\u7CFB\u7EDF\u4F1A\u5C1D\u8BD5\u4ECE\u5185\u5B58\u542F\u52A8,\u5982\u679C\u65AD\u7535\u4F1A\u5F3A\u5236\u4ECE\u78C1\u76D8\u6062\u590D.\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u9ED8\u8BA4\u4E3A\u8BE5\u9009\u9879"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["25 \u4F1A\u5C06\u5185\u5B58\u62F7\u8D1D\u5230\u5B58\u50A8,\u5E76\u4E14\u505C\u6B62\u7ED9\u5185\u5B58\u4F9B\u7535,\u542F\u52A8\u65F6\u4F1A\u4ECE\u78C1\u76D8\u6062\u590D\u5185\u5B58.\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7701\u7535,\u7535\u6C60\u5BFF\u547D\u66F4\u4E45"}),"\n",(0,r.jsx)(e.li,{children:"\u4F46\u7761\u7720\u548C\u5524\u9192\u66F4\u6162"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u7CFB\u7EDF\u652F\u6301 standby, \u5219\u5728\u8D85\u8FC7 standbydely \u540E\u5C31\u4F1A\u5199\u4E00\u4E2A\u4F11\u7720\u955C\u50CF"}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u8981\u5B8C\u5168\u7981\u6B62\u4F11\u7720,\u53EF\u5C06 hibernatemode, standby \u548C autopoweroff \u8BBE\u7F6E\u4E3A 0"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"unable-to-sleep-system-error-0xe00002e2",children:"Unable to sleep system: error 0xe00002e2"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo pmset -a disablesleep 0\n"})})]})}function o(n={}){let{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},17776:function(n,e,s){s.d(e,{R:()=>l,x:()=>i});var t=s(7378);let r={},d=t.createContext(r);function l(n){let e=t.useContext(d);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),t.createElement(d.Provider,{value:e},n.children)}}}]);