"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["89100"],{98048:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>l,toc:()=>h,default:()=>j,metadata:()=>t,assets:()=>c,contentTitle:()=>d});var t=JSON.parse('{"id":"web/cdn","title":"CDN","description":"| cdn        | import                            | github           | cjs -> esm |","source":"@site/../notes/web/cdn.md","sourceDirName":"web","slug":"/web/cdn","permalink":"/notes/web/cdn","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/cdn.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1737815601000,"frontMatter":{"title":"CDN"},"sidebar":"docs","previous":{"title":"violentmonkey","permalink":"/notes/web/browser/violentmonkey"},"next":{"title":"Cookie","permalink":"/notes/web/cookie"}}'),r=s(86106),i=s(17776);let l={title:"CDN"},d="CDN",c={},h=[{value:"CDN Test",id:"cdn-test",level:2},{value:"esm.sh",id:"esmsh",level:2},{value:"jsdelivr vs. unpkg",id:"jsdelivr-vs-unpkg",level:2}];function o(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"cdn",children:"CDN"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"cdn"}),(0,r.jsx)(e.th,{children:"import"}),(0,r.jsx)(e.th,{children:"github"}),(0,r.jsx)(e.th,{children:"cjs -> esm"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Skypack"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://cdn.skypack.dev/",children:"https://cdn.skypack.dev/"})}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{children:"\u2705"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://esm.sh/",children:"esm.sh"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://esm.sh/",children:"https://esm.sh/"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://github.com/esm-dev/esm.sh",children:"esm-dev/esm.sh"})}),(0,r.jsx)(e.td,{children:"\u2705"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/notes/web/jsdelivr",children:"jsDelivr"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://cdn.jsdelivr.net/npm/",children:"https://cdn.jsdelivr.net/npm/"})}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{children:"\u274C"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"/notes/web/jspm",children:"JSPM"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://ga.jspm.io/npm:pkg@x.y.z/",children:"https://ga.jspm.io/npm:pkg@x.y.z/"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://github.com/jspm/project",children:"jspm/project"})}),(0,r.jsx)(e.td,{children:"\u274C"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"unpkg"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://unpkg.com/$%7BPKG%7D?module",children:"https://unpkg.com/${PKG}?module"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"https://github.com/mjackson/unpkg",children:"mjackson/unpkg"})}),(0,r.jsx)(e.td,{children:"\u274C"})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["jsDelivr\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5546\u4E1A\u5316\u3001\u529F\u80FD\u591A\u901F\u5EA6\u5FEB"}),"\n",(0,r.jsxs)(e.li,{children:["cdn.jsdelivr.net\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4F7F\u7528 Fastly"}),"\n",(0,r.jsx)(e.li,{children:"\u56FD\u5185\u5927\u90E8\u5206\u5730\u533A\u4E0D\u53EF\u7528"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["testingcf.jsdelivr.net\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4F7F\u7528 Cloudflare"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["JSPM\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E rollup"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u652F\u6301 systemjs"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["jsdelivr \u63D0\u4F9B esm.run \u522B\u540D\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://esm.run/react",children:"https://esm.run/react"})," -> ",(0,r.jsx)(e.a,{href:"https://cdn.jsdelivr.net/npm/react/+esm",children:"https://cdn.jsdelivr.net/npm/react/+esm"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["unpkg\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5F88\u4E45\u6CA1\u66F4\u65B0\u7EF4\u62A4\u4E86"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["esm.sh\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"MIT, Golang"}),"\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E esbuild - \u4E0D\u652F\u6301 systemjs"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"skypack - ESM"}),"\n",(0,r.jsx)(e.li,{children:"BootstrapCDN"}),"\n",(0,r.jsxs)(e.li,{children:["cdnjs\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u52A0\u5165 CDN \u9700\u8981\u7533\u8BF7"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/cdnjs/cdnjs",children:"cdnjs"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://cdnjs.cloudflare.com",children:"https://cdnjs.cloudflare.com"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u68C0\u6D4B\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://ping.chinaz.com/",children:"https://ping.chinaz.com/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"cdn-test",children:"CDN Test"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://esm.run/react@17",children:"https://esm.run/react@17"})," -> ",(0,r.jsx)(e.a,{href:"https://cdn.jsdelivr.net/npm/react@17/+esm",children:"https://cdn.jsdelivr.net/npm/react@17/+esm"})," - \u4F9D\u7136\u662F CJS"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'for i in $(seq 3); do\n\n  rm bench-*.txt\n  for i in $(seq 10); do\n    curl -o /dev/null -s -w "%{time_total}\\n" https://cdn.skypack.dev/react@17 >> bench-a.txt\n    curl -o /dev/null -s -w "%{time_total}\\n" https://cdn.jsdelivr.net/npm/react@17/+esm >> bench-b.txt\n    curl -o /dev/null -s -w "%{time_total}\\n" https://esm.sh/react@17 >> bench-c.txt\n  done\n  for i in bench-*.txt; do\n    echo $i\n    awk \'{ total += $1; count++ } END { print total/count }\' $i\n  done\n\ndone\n'})}),"\n",(0,r.jsx)(e.h2,{id:"esmsh",children:"esm.sh"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u53EF\u4EE5 Selfhosted"}),"\n",(0,r.jsx)(e.li,{children:"\u4E3B\u670D\u52A1\u5668\u5728 HK"}),"\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E esbuild \u6784\u5EFA"}),"\n",(0,r.jsx)(e.li,{children:"cjs -> esm \u4F7F\u7528 swc"}),"\n",(0,r.jsxs)(e.li,{children:["\u652F\u6301 X-Typescript-Types \u5934 - demo \u7C7B\u578B\u68C0\u6D4B\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"?no-check"})," \u7981\u7528"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import React from 'https://esm.sh/react@17';\n// \u975E\u6A21\u5757\u6587\u4EF6\nimport 'https://esm.sh/tailwindcss/dist/tailwind.min.css';\n// bundle \u6A21\u5F0F\nimport {Button} from 'https://esm.sh/antd?bundle';\n// \u5F00\u53D1\u6A21\u5F0F\nimport React from 'https://esm.sh/react?dev';\n// \u4F9D\u8D56\u63A7\u5236\nimport React from 'https://esm.sh/react@16.14.0';\nimport useSWR from 'https://esm.sh/swr?deps=react@16.14.0';\n// \u522B\u540D\nimport useSWR from 'https://esm.sh/swr?alias=react:preact/compat&deps=preact@10.5.14';\n// \u76EE\u6807\u7248\u672C - \u9ED8\u8BA4\u57FA\u4E8E header \u5224\u65AD\nimport React from 'https://esm.sh/react?target=es2020';\n// WebWorker\nimport editorWorker from '/monaco-editor/esm/vs/editor/editor.worker?worker';\nconst worker = new editorWorker();\n"})}),"\n",(0,r.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(e.h2,{id:"jsdelivr-vs-unpkg",children:"jsdelivr vs. unpkg"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["unpkg\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6162"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["jsdelivr\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u56FD\u5185\u66F4\u5FEB\uFF0C\u6709 ICP \u5907\u6848"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.jsdelivr.com/unpkg",children:"unpkg to jsdelivr"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://w3techs.com/technologies/comparison/cd-jsdelivr,cd-unpkg",children:"Comparison of the usage statistics of jsDelivr vs. unpkg for websites"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://w3techs.com/technologies/reportlist/content_delivery",children:"https://w3techs.com/technologies/reportlist/content_delivery"})}),"\n"]}),"\n"]}),"\n"]})]})}function j(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},17776:function(n,e,s){s.d(e,{R:()=>l,x:()=>d});var t=s(7378);let r={},i=t.createContext(r);function l(n){let e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);