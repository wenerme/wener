"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["79468"],{13026:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>r,toc:()=>a,default:()=>x,metadata:()=>s,assets:()=>d,contentTitle:()=>c});var s=JSON.parse('{"id":"service/workflow/xstate","title":"xstate","description":"- statelyai/xstate","source":"@site/../notes/service/workflow/xstate.md","sourceDirName":"service/workflow","slug":"/service/workflow/xstate","permalink":"/notes/service/workflow/xstate","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/workflow/xstate.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1745546888000,"frontMatter":{"title":"xstate"},"sidebar":"docs","previous":{"title":"Workflow Glossary","permalink":"/notes/service/workflow/glossary"},"next":{"title":"XaaS Awesome","permalink":"/notes/service/xaas/awesome"}}'),l=i(86106),t=i(17776);let r={title:"xstate"},c="xstate",d={},a=[{value:"Notes",id:"notes",level:2},{value:"Why XState/FSM",id:"why",level:2}];function h(n){let e={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"xstate",children:"xstate"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/statelyai/xstate",children:"statelyai/xstate"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MIT, TS"}),"\n",(0,l.jsx)(e.li,{children:"\u72B6\u6001\u673A"}),"\n",(0,l.jsx)(e.li,{children:"FSM - finite state machines - \u6709\u9650\u72B6\u6001\u673A"}),"\n",(0,l.jsxs)(e.li,{children:["\u53EF\u4EE5\u7BA1\u7406\u5E94\u7528\u72B6\u6001 - react, vue, sevelte\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F8B\u5982\uFF1A \u767B\u5F55\u3001\u8868\u5355"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u4EE5\u7BA1\u7406\u4E1A\u52A1\u72B6\u6001 - \u4F5C\u4E3A Workflow"}),"\n",(0,l.jsx)(e.li,{children:"\u7528 Declarative \u7684\u65B9\u5F0F\u5B9A\u4E49\u548C\u7BA1\u7406\u72B6\u6001"}),"\n",(0,l.jsx)(e.li,{children:"state orchestrator - \u72B6\u6001\u7F16\u6392"}),"\n",(0,l.jsx)(e.li,{children:"actor model"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.img,{src:"https://badgen.net/bundlephobia/min/xstate",alt:""})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.del,{children:(0,l.jsx)(e.a,{href:"https://github.com/statelyai/xstate-viz",children:"statelyai/xstate-viz"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5F00\u6E90 \u53EF\u89C6\u5316 \uFF0C\u73B0\u5728\u5B98\u65B9\u63A8\u7684\u662F \u81EA\u5DF1\u7684\u5728\u7EBF\u7F16\u8F91\u5668"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["XState V5\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Docs ",(0,l.jsx)(e.a,{href:"https://stately.ai/docs",children:"https://stately.ai/docs"})]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://stately.ai/blog/2023-12-01-xstate-v5",children:"https://stately.ai/blog/2023-12-01-xstate-v5"})}),"\n",(0,l.jsx)(e.li,{children:"actor model"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/statelyai/xstate/discussions/3398",children:"Has anyone used xstate for domain modeling?"})}),"\n",(0,l.jsx)(e.li,{children:"npm:@xstate/store"}),"\n",(0,l.jsx)(e.li,{children:"npm:@xstate/react"}),"\n",(0,l.jsx)(e.li,{children:"npm:@xstate/vue"}),"\n",(0,l.jsx)(e.li,{children:"npm:@xstate/svelte"}),"\n",(0,l.jsx)(e.li,{children:"npm:@xstate/test"}),"\n",(0,l.jsx)(e.li,{children:"npm:@xstate/graph"}),"\n",(0,l.jsx)(e.li,{children:"npm:@statelyai/inspect"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"npm add xstate\n\n# for FW\n# @xstate/react @xstate/vue @xstate/svelte\nnpm add @xstate/react\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"@xstate/test"}),"\n",(0,l.jsx)(e.li,{children:"@statelyai/inspect"}),"\n",(0,l.jsxs)(e.li,{children:["setup - \u5B9A\u4E49\u4E0A\u4E0B\u6587\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B9A\u4E49 context\u3001\u4E8B\u4EF6\u3001\u7C7B\u578B\u3001guards\u3001actions\u3001actors"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["createMachine\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u57FA\u4E8E setup \u5B9A\u4E49\u7684\u4E0A\u4E0B\u6587\u6784\u5EFA\u72B6\u6001\u673A"}),"\n",(0,l.jsx)(e.li,{children:"\u5B9A\u4E49\u72B6\u6001\u548C transition"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["examples\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/statelyai/xstate/tree/main/examples",children:"https://github.com/statelyai/xstate/tree/main/examples"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"notes",children:"Notes"}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528 always \u6765\u505A \u6761\u4EF6 target"}),"\n"]})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["machine\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B9A\u4E49\u7684\u5185\u5BB9: transition, meta, actions, guards, actors, delays"}),"\n",(0,l.jsx)(e.li,{children:"\u9664\u4E86 transition \u4EE5\u5916\u5927\u591A\u90FD\u53EF\u4EE5 Machine.provide \u7684\u65B9\u5F0F\u63D0\u4F9B\u5B9E\u73B0"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Actions - \u5373\u89E6\u53D1\u540E\u4E0D\u5173\u5FC3\u7ED3\u679C\u7684\u526F\u4F5C\u7528\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u540C\u6B65"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Services - \u5373\u89E6\u53D1\u540E\u9700\u8981\u7B49\u5F85\u7ED3\u679C\u7684\u526F\u4F5C\u7528\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5F02\u6B65"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Actors - \u53EF\u4EE5\u4E0E\u72B6\u6001\u673A actor \u8FDB\u884C\u901A\u4FE1\u7684\u5B9E\u4F53\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"(state, event, actorCtx) => NextState"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"Guards - \u51B3\u5B9A\u662F\u5426\u5E94\u8BE5\u8FDB\u884C\u72B6\u6001\u8F6C\u6362\u7684\u6761\u4EF6"}),"\n",(0,l.jsx)(e.li,{children:"Delays - \u6307\u5B9A\u5EF6\u8FDF\u8F6C\u6362\u6216\u53D1\u9001\u5EF6\u8FDF\u4E8B\u4EF6\u524D\u7684\u7B49\u5F85\u65F6\u95F4"}),"\n",(0,l.jsx)(e.li,{children:"Input - \u6307\u63D0\u4F9B\u7ED9\u72B6\u6001\u673A\u7684\u6570\u636E\uFF0C\u7528\u4E8E\u5F71\u54CD\u5176\u884C\u4E3A\u3002"}),"\n",(0,l.jsx)(e.li,{children:"Output - \u6307actor\u4EA7\u751F\u7684\u6700\u7EC8\u6570\u636E\u3002"}),"\n",(0,l.jsx)(e.li,{children:"transition - \u7531\u4E8B\u4EF6\u89E6\u53D1\u7684\u4ECE\u4E00\u4E2A\u6709\u9650\u72B6\u6001\u5230\u53E6\u4E00\u4E2A\u72B6\u6001\u7684\u53D8\u5316\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["Actor \u80FD\u529B\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u63A5\u6536\u4E8B\u4EF6 - ",(0,l.jsx)(e.code,{children:"actor.send(event)"})]}),"\n",(0,l.jsx)(e.li,{children:"\u53D1\u9001\u4E8B\u4EF6"}),"\n",(0,l.jsx)(e.li,{children:"swap actors - State machine actors can spawn/invoke actors and have child actors."}),"\n",(0,l.jsx)(e.li,{children:"\u8F93\u5165"}),"\n",(0,l.jsx)(e.li,{children:"\u8F93\u51FA"}),"\n",(0,l.jsx)(e.li,{children:"\u6709\u81EA\u5DF1\u7684\u5185\u90E8\u72B6\u6001 - \u81EA\u5DF1\u7EF4\u62A4"}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u4EE5\u4E0E\u5176\u4ED6 actor \u4EA4\u4E92 - \u4F7F\u7528\u5F02\u6B65 event \u65B9\u5F0F"}),"\n",(0,l.jsx)(e.li,{children:"\u4E00\u6B21\u53EA\u5904\u7406\u4E00\u4E2A message, \u6709\u5185\u90E8\u7684 mailbox, \u7C7B\u4F3C\u4E8B\u4EF6\u961F\u5217"}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u4EE5\u521B\u5EFA\u65B0\u7684 actor - spawn/invoke"}),"\n",(0,l.jsxs)(e.li,{children:["actor model\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7C7B\u4F3C Akka, Erlang"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u901A\u8FC7 ActorSystem \u5728 actor \u4E4B\u95F4\u4EA4\u4E92\u548C\u8C03\u5EA6"}),"\n",(0,l.jsx)(e.li,{children:"actor \u6709\u81EA\u5DF1\u7684 systemId"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Actor\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"id, systemId, update, start, stop, emit, on, send, subscribe, mailbox, getPersistedSnapshot, getSnapshot"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"_actorScope"})," - \u76F8\u5F53\u4E8E Actor \u7684\u4E0A\u4E0B\u6587"]}),"\n",(0,l.jsx)(e.li,{children:"update - \u5B9E\u9645\u5904\u7406"}),"\n",(0,l.jsx)(e.li,{children:"mailbox -> _process|logic.transition -> update"}),"\n",(0,l.jsx)(e.li,{children:"stop \u4F1A clear mailbox"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["ActorScope\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"self, id, sessionId, logger, defer, emit, system stopChild, actionExecutor"}),"\n",(0,l.jsx)(e.li,{children:"logic/machine \u7684\u53C2\u6570\u4F20\u9012\u90FD\u662F\u4F20\u9012 actorScope \u800C\u4E0D\u662F Actor"}),"\n",(0,l.jsx)(e.li,{children:"\u63D0\u4F9B defer \u5B9E\u73B0 timeout/\u5EF6\u8FDF\u6267\u884C \u529F\u80FD"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"ActorSystem"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"interface ActorLogic"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"config, transition, getInitialSnapshot, restoreSnapshot, start, getPersistedSnapshot"}),"\n",(0,l.jsx)(e.li,{children:"Actor \u5B9E\u9645\u4F7F\u7528\u7684\u662F ActorLogic \u63A5\u53E3"}),"\n",(0,l.jsx)(e.li,{children:"StateMachine \u4E5F\u662F\u4E00\u4E2A ActorLogic"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5185\u7F6E actors\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"fromCallback, fromObservable, fromPromise, fromEventObservable, fromTransition"}),"\n",(0,l.jsx)(e.li,{children:"\u76F4\u63A5\u5B9E\u73B0\u7684 ActorLogic \u800C\u4E0D\u662F\u4F5C\u4E3A machine"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5185\u7F6E actions\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B9E\u73B0 ActionFunction"}),"\n",(0,l.jsx)(e.li,{children:"\u4E0D\u5E94\u8BE5\u76F4\u63A5\u8C03\u7528 - actionExecutor \u8C03\u7528\u4F1A\u4FEE\u6539\u5168\u5C40 executingCustomAction"}),"\n",(0,l.jsx)(e.li,{children:"assign, cancel, emit, log, raose, forwardTo, sendParent, sendTo, spawnChild, stopChild, enqueueActions"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["PersistedSnapshot\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"status - done, error, active"}),"\n",(0,l.jsx)(e.li,{children:"output"}),"\n",(0,l.jsx)(e.li,{children:"error"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["State\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["value\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["nested states\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"{ paused: 'buffering' }"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5E76\u884C\u72B6\u6001\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"{ monitor: 'on', mode: 'dark' }"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"context"}),"\n",(0,l.jsx)(e.li,{children:"meta"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Transition\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"sibling.child.grandchild"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:".child.grandchild"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"#specificState"})}),"\n",(0,l.jsxs)(e.li,{children:["Wildcard ",(0,l.jsx)(e.code,{children:"'*': { target: 'awake' }"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"'feedback.*': { target: 'form' }"})}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"*"})," \u53EA\u4F1A\u5339\u914D\u5355\u5C42"]}),"\n",(0,l.jsx)(e.li,{children:"catch-all"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u7981\u6B62 ",(0,l.jsx)(e.code,{children:"{ on: { forbidden: {} } }"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["transition\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"import {transition} from 'xstate'"})}),"\n",(0,l.jsx)(e.li,{children:"Pure function - \u4E0D\u4F1A\u6267\u884C actions"}),"\n",(0,l.jsx)(e.li,{children:"\u8FD4\u56DE nextSnapshot \u548C actions"}),"\n",(0,l.jsxs)(e.li,{children:["\u7B49\u540C\u4E8E ",(0,l.jsx)(e.code,{children:"logic.transition(snapshot, event, createInertActorScope())"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["inspect event\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["@xstate.actor\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"createActor \u89E6\u53D1"}),"\n",(0,l.jsx)(e.li,{children:"actorRef \u83B7\u53D6\u5F53\u524D actor \u7684\u5F15\u7528"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"@xstate.event - \u7CFB\u7EDF\u4E2D\u4ECE\u6E90 actor \u5F15\u7528\u5411\u76EE\u6807 actor \u5F15\u7528\u53D1\u9001\u4E86\u4E00\u4E2A\u4E8B\u4EF6"}),"\n",(0,l.jsx)(e.li,{children:"@xstate.snapshot - actor \u5F15\u7528\u56E0\u63A5\u6536\u5230\u4E8B\u4EF6\u800C\u53D1\u51FA\u5FEB\u7167"}),"\n",(0,l.jsx)(e.li,{children:"@xstate.microstep"}),"\n",(0,l.jsx)(e.li,{children:"@xstate.action"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["event\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"xstate.init"}),"\n",(0,l.jsx)(e.li,{children:"xstate.stop"}),"\n",(0,l.jsx)(e.li,{children:"xstate.error"}),"\n",(0,l.jsx)(e.li,{children:"xstate.raise"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"xstate.done.actor.${invokeId}"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"xstate.done.state.${id}"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"xstate.error.actor.${id}"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"xstate.after.${delayRef}.${id}"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Mailbox\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4E8B\u4EF6\u961F\u5217"}),"\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528 LinkedList"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"ActorSystem"}),"\n",(0,l.jsxs)(e.li,{children:["StateNodeConfig\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["type\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"atomic - \u65E0\u5B50\u72B6\u6001\u8282\u70B9"}),"\n",(0,l.jsx)(e.li,{children:"compound - \u5D4C\u5957\u5B50\u72B6\u6001\u8282\u70B9 (XOR)"}),"\n",(0,l.jsx)(e.li,{children:"parallel - \u6B63\u4EA4\u5D4C\u5957\u5B50\u72B6\u6001\u8282\u70B9 (AND)"}),"\n",(0,l.jsx)(e.li,{children:"history - \u5386\u53F2\u72B6\u6001\u8282\u70B9"}),"\n",(0,l.jsx)(e.li,{children:"final - \u7EC8\u6001\u8282\u70B9"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["history\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"shallow - \u4EC5\u4FDD\u5B58\u5F53\u524D\u72B6\u6001"}),"\n",(0,l.jsx)(e.li,{children:"deep - \u4FDD\u5B58\u6240\u6709\u5B50\u72B6\u6001"}),"\n",(0,l.jsx)(e.li,{children:"true - shallow"}),"\n",(0,l.jsx)(e.li,{children:"false - none - \u9ED8\u8BA4"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"states - key -> StateNodeConfig"}),"\n",(0,l.jsx)(e.li,{children:"invoke - \u8FDB\u5165\u8282\u70B9\u65F6\u8C03\u7528\u670D\u52A1"}),"\n",(0,l.jsx)(e.li,{children:"on - event -> transition"}),"\n",(0,l.jsx)(e.li,{children:"entry - \u8FDB\u5165\u72B6\u6001\u6267\u884C\u7684 action"}),"\n",(0,l.jsx)(e.li,{children:"exit - \u79BB\u5F00\u72B6\u6001\u6267\u884C\u7684 action"}),"\n",(0,l.jsxs)(e.li,{children:["onDone - ",(0,l.jsx)(e.code,{children:"{[done(id)]: { target: '' }}"})]}),"\n",(0,l.jsx)(e.li,{children:"after - delayed transition"}),"\n",(0,l.jsx)(e.li,{children:"always - active \u7684\u65F6\u5019\u603B\u662F\u4F1A\u6267\u884C"}),"\n",(0,l.jsx)(e.li,{children:"parent"}),"\n",(0,l.jsx)(e.li,{children:"meta"}),"\n",(0,l.jsx)(e.li,{children:"output - \u57FA\u4E8E context, \u653E\u5728 event.data"}),"\n",(0,l.jsxs)(e.li,{children:["id - \u901A\u8FC7 ",(0,l.jsx)(e.code,{children:"#id"})," \u6765\u5F15\u7528"]}),"\n",(0,l.jsx)(e.li,{children:"order"}),"\n",(0,l.jsx)(e.li,{children:"tags - \u5408\u5E76\u5230 state.tags"}),"\n",(0,l.jsx)(e.li,{children:"description"}),"\n",(0,l.jsx)(e.li,{children:"target"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"why",children:"Why XState/FSM"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7BA1\u7406\u590D\u6742\u57FA\u7840\u4E1A\u52A1\u903B\u8F91"}),"\n",(0,l.jsx)(e.li,{children:"\u5E94\u7528\u542F\u52A8\u6D41\u7A0B"}),"\n",(0,l.jsx)(e.li,{children:"\u8BA4\u8BC1"}),"\n",(0,l.jsx)(e.li,{children:"\u8868\u5355"}),"\n",(0,l.jsx)(e.li,{children:"Zustand -> data container"}),"\n",(0,l.jsx)(e.li,{children:"xstate -> state orchestration engine"}),"\n",(0,l.jsxs)(e.li,{children:["to start with modeling your state/data using events\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"event -> \u7C7B\u4F3C useReducer dispatching actions -> \u4FEE\u6539 data/state"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["state \u4E0D\u540C\u4E8E useState\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"useState \u7684 state \u5B9E\u9645\u662F reactive data"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["FSM \u7684 S - state \u4E3A\u5355\u72EC\u7684\u4E00\u4E2A\u72B6\u6001\u800C\u4E0D\u662F\u4E00\u7EC4\u6570\u636E\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u901A\u8FC7 \u6761\u4EF6/\u4E8B\u4EF6 \u8F6C\u6362\u5230\u53E6\u4E00\u4E2A\u72B6\u6001"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u72B6\u6001\u672C\u8EAB\u76F8\u5BF9\u72EC\u7ACB encapsulated\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6761\u4EF6/\u65F6\u95F4 -> \u9A71\u52A8\u72B6\u6001 -> \u9A71\u52A8\u4E1A\u52A1"}),"\n",(0,l.jsx)(e.li,{children:"\u800C reactive data \u53EF\u80FD\u4F1A\u6D89\u53CA\u5230\u5916\u90E8\u4EA4\u4E92 \u5173\u8054"}),"\n",(0,l.jsx)(e.li,{children:"reactive data \u66F4\u9762\u5411 \u4E1A\u52A1\u903B\u8F91"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"actor-based fsm"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.reddit.com/r/reactjs/comments/yjaqhi/whats_the_deal_with_xstate/",children:"https://www.reddit.com/r/reactjs/comments/yjaqhi/whats_the_deal_with_xstate/"})}),"\n"]})]})}function x(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},17776:function(n,e,i){i.d(e,{R:()=>r,x:()=>c});var s=i(7378);let l={},t=s.createContext(l);function r(n){let e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);