"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["74707"],{66323:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>i,toc:()=>d,default:()=>h,metadata:()=>o,assets:()=>l,contentTitle:()=>a});var o=JSON.parse('{"id":"hardware/power/ups","title":"UPS","description":"- \u7C7B\u578B","source":"@site/../notes/hardware/power/ups.md","sourceDirName":"hardware/power","slug":"/hardware/power/ups","permalink":"/notes/hardware/power/ups","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/hardware/power/ups.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1723169110000,"frontMatter":{"title":"UPS"},"sidebar":"docs","previous":{"title":"\u7535\u6C60","permalink":"/notes/hardware/power/battery"},"next":{"title":"\u673A\u67DC","permalink":"/notes/hardware/rack"}}'),r=t(86106),s=t(17776);let i={title:"UPS"},a="UPS",l={},d=[{value:"\u914D\u7F6E",id:"\u914D\u7F6E",level:2},{value:"Ladis/\u96F7\u8FEA\u65AF",id:"ladis\u96F7\u8FEA\u65AF",level:2},{value:"ViewPower",id:"viewpower",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ups",children:"UPS"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7C7B\u578B\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Standby\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5BF9\u7535\u6E90\u5145\u7535\uFF0C\u7B49\u5F85\u65AD\u7535\uFF0C\u65AD\u7535\u540E\u8FDB\u884C\u673A\u68B0\u5207\u6362"}),"\n",(0,r.jsx)(n.li,{children:"\u5207\u6362 20-100 ms"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Line-Interactive\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u7C7B\u4F3C\u4E8E Standby"}),"\n",(0,r.jsx)(n.li,{children:"\u5305\u542B\u8F6C\u6362\u5668\uFF0C\u66F4\u597D\u5904\u7406 brownouts \u548C power sags"}),"\n",(0,r.jsx)(n.li,{children:"\u9002\u5408 \u7535\u6D8C\u548C\u7535\u538B\u4E0D\u7A33\u5B9A \u573A\u666F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Online\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4EF7\u683C\u6700\u8D35"}),"\n",(0,r.jsx)(n.li,{children:"\u901A\u8FC7\u7535\u6C60\u5438\u5F15\u8FC7\u6EE4\uFF0C\u4E0D\u5B58\u5728\u5207\u6362"}),"\n",(0,r.jsx)(n.li,{children:"\u5C06\u8FDE\u63A5\u8BBE\u5907\u4E0E\u5B9E\u9645\u4F9B\u70B9\u9694\u79BB"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Network_UPS_Tools",children:"Network UPS Tools"})," - NUT"]}),"\n",(0,r.jsx)(n.li,{children:"SNMP Telnet 485 PDU"}),"\n",(0,r.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.apc.com/shop/cn/zh/tools/ups_selector/",children:"APC UPS \u9009\u62E9\u5668"})," / ",(0,r.jsx)(n.a,{href:"https://www.apc.com/shop/us/en/tools/ups_selector",children:"APC UPS Selector"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.howtogeek.com/161479/how-to-select-a-battery-backup-for-your-computer/",children:"How to Select an Uninterruptible Power Supply (UPS) for Your Computer"})}),"\n",(0,r.jsxs)(n.li,{children:["APC ",(0,r.jsx)(n.a,{href:"https://download.schneider-electric.com/files?p_Doc_Ref=SPD_SADE-5TNQYF_EN",children:"VA vs watt"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"http://powerquality.eaton.com/thoughtleadership/power-protection/va-vs-watts.asp?cx=-400",children:"The difference between VA and watts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Watts = VA * Power Factor"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"VA = Watts / Power Factor"})}),"\n",(0,r.jsx)(n.li,{children:"\u4F8B\u5982\u4E00\u676F\u5564\u9152 \u{1F37A}\uFF0CVA \u662F\u9152\u82B1\u7684\u6700\u9AD8\u70B9\uFF0C\u5B9E\u9645\u7684\u6DB2\u4F53\u624D\u662F Watt"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"apk add apcupsd\n\n# \u6D4B\u8BD5\u914D\u7F6E\napctest\n\nservice apcupsd start\napcaccess status\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u914D\u7F6E",children:"\u914D\u7F6E"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"USB \u914D\u7F6E"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"## apcupsd.conf v1.1 ##\nUPSCABLE usb\n\nUPSTYPE usb\n# USB UPSes \u4E3A\u7A7A\nDEVICE\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"## apcupsd.conf v1.1 ##\nUPSCABLE smart\nUPSTYPE apcsmart\nDEVICE /dev/ttyUSB0\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:'## apcupsd.conf v1.1 ##\n\n#\n# ========= General configuration parameters ============\n#\n\n# UPSNAME xxx\n#   Use this to give your UPS a name in log files and such. This\n#   is particulary useful if you have multiple UPSes. This does not\n#   set the EEPROM. It should be 8 characters or less.\n#UPSNAME\n\n# UPSCABLE <cable>\n#   Defines the type of cable connecting the UPS to your computer.\n#\n#   Possible generic choices for <cable> are:\n#     simple, smart, ether, usb\n#\n#   Or a specific cable model number may be used:\n#     940-0119A, 940-0127A, 940-0128A, 940-0020B,\n#     940-0020C, 940-0023A, 940-0024B, 940-0024C,\n#     940-1524C, 940-0024G, 940-0095A, 940-0095B,\n#     940-0095C, 940-0625A, M-04-02-2000\n#\nUPSCABLE smart\n\n# To get apcupsd to work, in addition to defining the cable\n# above, you must also define a UPSTYPE, which corresponds to\n# the type of UPS you have (see the Description for more details).\n# You must also specify a DEVICE, sometimes referred to as a port.\n# For USB UPSes, please leave the DEVICE directive blank. For\n# other UPS types, you must specify an appropriate port or address.\n#\n# UPSTYPE   DEVICE           Description\n# apcsmart  /dev/tty**       Newer serial character device, appropriate for\n#                            SmartUPS models using a serial cable (not USB).\n#\n# usb       <BLANK>          Most new UPSes are USB. A blank DEVICE\n#                            setting enables autodetection, which is\n#                            the best choice for most installations.\n#\n# net       hostname:port    Network link to a master apcupsd through apcupsd\'s\n#                            Network Information Server. This is used if the\n#                            UPS powering your computer is connected to a\n#                            different computer for monitoring.\n#\n# snmp      hostname:port:vendor:community\n#                            SNMP network link to an SNMP-enabled UPS device.\n#                            Hostname is the ip address or hostname of the UPS\n#                            on the network. Vendor can be can be "APC" or\n#                            "APC_NOTRAP". "APC_NOTRAP" will disable SNMP trap\n#                            catching; you usually want "APC". Port is usually\n#                            161. Community is usually "private".\n#\n# netsnmp   hostname:port:vendor:community\n#                            OBSOLETE\n#                            Same as SNMP above but requires use of the\n#                            net-snmp library. Unless you have a specific need\n#                            for this old driver, you should use \'snmp\' instead.\n#\n# dumb      /dev/tty**       Old serial character device for use with\n#                            simple-signaling UPSes.\n#\n# pcnet     ipaddr:username:passphrase:port\n#                            PowerChute Network Shutdown protocol which can be\n#                            used as an alternative to SNMP with the AP9617\n#                            family of smart slot cards. ipaddr is the IP\n#                            address of the UPS management card. username and\n#                            passphrase are the credentials for which the card\n#                            has been configured. port is the port number on\n#                            which to listen for messages from the UPS, normally\n#                            3052. If this parameter is empty or missing, the\n#                            default of 3052 will be used.\n#\n# modbus    /dev/tty**       Serial device for use with newest SmartUPS models\n#                            supporting the MODBUS protocol.\n# modbus    <BLANK>          Leave the DEVICE setting blank for MODBUS over USB\n#                            or set to the serial number of the UPS to ensure\n#                            that apcupsd binds to that particular unit\n#                            (helpful if you have more than one USB UPS).\n#\nUPSTYPE apcsmart\nDEVICE /dev/ttyUSB0\n\n# POLLTIME <int>\n#   Interval (in seconds) at which apcupsd polls the UPS for status. This\n#   setting applies both to directly-attached UPSes (UPSTYPE apcsmart, usb,\n#   dumb) and networked UPSes (UPSTYPE net, snmp). Lowering this setting\n#   will improve apcupsd\'s responsiveness to certain events at the cost of\n#   higher CPU utilization. The default of 60 is appropriate for most\n#   situations.\n#POLLTIME 60\n\n# LOCKFILE <path to lockfile>\n#   Path for device lock file. This is the directory into which the lock file\n#   will be written. The directory must already exist; apcupsd will not create\n#   it. The actual name of the lock file is computed from DEVICE.\n#   Not used on Win32.\nLOCKFILE /var/lock\n\n# SCRIPTDIR <path to script directory>\n#   Directory in which apccontrol and event scripts are located.\nSCRIPTDIR /etc/apcupsd\n\n# PWRFAILDIR <path to powerfail directory>\n#   Directory in which to write the powerfail flag file. This file\n#   is created when apcupsd initiates a system shutdown and is\n#   checked in the OS halt scripts to determine if a killpower\n#   (turning off UPS output power) is required.\nPWRFAILDIR /etc/apcupsd\n\n# NOLOGINDIR <path to nologin directory>\n#   Directory in which to write the nologin file. The existence\n#   of this flag file tells the OS to disallow new logins.\nNOLOGINDIR /etc\n\n\n#\n# ======== Configuration parameters used during power failures ==========\n#\n\n# The ONBATTERYDELAY is the time in seconds from when a power failure\n#   is detected until we react to it with an onbattery event.\n#\n#   This means that, apccontrol will be called with the powerout argument\n#   immediately when a power failure is detected.  However, the\n#   onbattery argument is passed to apccontrol only after the\n#   ONBATTERYDELAY time.  If you don\'t want to be annoyed by short\n#   powerfailures, make sure that apccontrol powerout does nothing\n#   i.e. comment out the wall.\nONBATTERYDELAY 6\n\n#\n# Note: BATTERYLEVEL, MINUTES, and TIMEOUT work in conjunction, so\n# the first that occurs will cause the initation of a shutdown.\n#\n\n# If during a power failure, the remaining battery percentage\n# (as reported by the UPS) is below or equal to BATTERYLEVEL,\n# apcupsd will initiate a system shutdown.\nBATTERYLEVEL 5\n\n# If during a power failure, the remaining runtime in minutes\n# (as calculated internally by the UPS) is below or equal to MINUTES,\n# apcupsd, will initiate a system shutdown.\nMINUTES 3\n\n# If during a power failure, the UPS has run on batteries for TIMEOUT\n# many seconds or longer, apcupsd will initiate a system shutdown.\n# A value of 0 disables this timer.\n#\n#  Note, if you have a Smart UPS, you will most likely want to disable\n#    this timer by setting it to zero. That way, you UPS will continue\n#    on batteries until either the % charge remaing drops to or below BATTERYLEVEL,\n#    or the remaining battery runtime drops to or below MINUTES.  Of course,\n#    if you are testing, setting this to 60 causes a quick system shutdown\n#    if you pull the power plug.\n#  If you have an older dumb UPS, you will want to set this to less than\n#    the time you know you can run on batteries.\nTIMEOUT 0\n\n#  Time in seconds between annoying users to signoff prior to\n#  system shutdown. 0 disables.\nANNOY 300\n\n# Initial delay after power failure before warning users to get\n# off the system.\nANNOYDELAY 60\n\n# The condition which determines when users are prevented from\n# logging in during a power failure.\n# NOLOGON <string> [ disable | timeout | percent | minutes | always ]\nNOLOGON disable\n\n# If KILLDELAY is non-zero, apcupsd will continue running after a\n# shutdown has been requested, and after the specified time in\n# seconds attempt to kill the power. This is for use on systems\n# where apcupsd cannot regain control after a shutdown.\n# KILLDELAY <seconds>  0 disables\nKILLDELAY 0\n\n#\n# ==== Configuration statements for Network Information Server ====\n#\n\n# NETSERVER [ on | off ] on enables, off disables the network\n#  information server. If netstatus is on, a network information\n#  server process will be started for serving the STATUS and\n#  EVENT data over the network (used by CGI programs).\nNETSERVER on\n\n# NISIP <dotted notation ip address>\n#  IP address on which NIS server will listen for incoming connections.\n#  This is useful if your server is multi-homed (has more than one\n#  network interface and IP address). Default value is 0.0.0.0 which\n#  means any incoming request will be serviced. Alternatively, you can\n#  configure this setting to any specific IP address of your server and\n#  NIS will listen for connections only on that interface. Use the\n#  loopback address (127.0.0.1) to accept connections only from the\n#  local machine.\nNISIP 0.0.0.0\n\n# NISPORT <port> default is 3551 as registered with the IANA\n#  port to use for sending STATUS and EVENTS data over the network.\n#  It is not used unless NETSERVER is on. If you change this port,\n#  you will need to change the corresponding value in the cgi directory\n#  and rebuild the cgi programs.\nNISPORT 3551\n\n# If you want the last few EVENTS to be available over the network\n# by the network information server, you must define an EVENTSFILE.\nEVENTSFILE /var/log/apcupsd.events\n\n# EVENTSFILEMAX <kilobytes>\n#  By default, the size of the EVENTSFILE will be not be allowed to exceed\n#  10 kilobytes.  When the file grows beyond this limit, older EVENTS will\n#  be removed from the beginning of the file (first in first out).  The\n#  parameter EVENTSFILEMAX can be set to a different kilobyte value, or set\n#  to zero to allow the EVENTSFILE to grow without limit.\nEVENTSFILEMAX 10\n\n#\n# ========== Configuration statements used if sharing =============\n#            a UPS with more than one machine\n\n#\n# Remaining items are for ShareUPS (APC expansion card) ONLY\n#\n\n# UPSCLASS [ standalone | shareslave | sharemaster ]\n#   Normally standalone unless you share an UPS using an APC ShareUPS\n#   card.\nUPSCLASS standalone\n\n# UPSMODE [ disable | share ]\n#   Normally disable unless you share an UPS using an APC ShareUPS card.\nUPSMODE disable\n\n#\n# ===== Configuration statements to control apcupsd system logging ========\n#\n\n# Time interval in seconds between writing the STATUS file; 0 disables\nSTATTIME 0\n\n# Location of STATUS file (written to only if STATTIME is non-zero)\nSTATFILE /var/log/apcupsd.status\n\n# LOGSTATS [ on | off ] on enables, off disables\n# Note! This generates a lot of output, so if\n#       you turn this on, be sure that the\n#       file defined in syslog.conf for LOG_NOTICE is a named pipe.\n#  You probably do not want this on.\nLOGSTATS off\n\n# Time interval in seconds between writing the DATA records to\n#   the log file. 0 disables.\nDATATIME 0\n\n# FACILITY defines the logging facility (class) for logging to syslog.\n#          If not specified, it defaults to "daemon". This is useful\n#          if you want to separate the data logged by apcupsd from other\n#          programs.\n#FACILITY DAEMON\n\n#\n# ========== Configuration statements used in updating the UPS EPROM =========\n#\n\n#\n# These statements are used only by apctest when choosing "Set EEPROM with conf\n# file values" from the EEPROM menu. THESE STATEMENTS HAVE NO EFFECT ON APCUPSD.\n#\n\n# UPS name, max 8 characters\n#UPSNAME UPS_IDEN\n\n# Battery date - 8 characters\n#BATTDATE mm/dd/yy\n\n# Sensitivity to line voltage quality (H cause faster transfer to batteries)\n# SENSITIVITY H M L        (default = H)\n#SENSITIVITY H\n\n# UPS delay after power return (seconds)\n# WAKEUP 000 060 180 300   (default = 0)\n#WAKEUP 60\n\n# UPS Grace period after request to power off (seconds)\n# SLEEP 020 180 300 600    (default = 20)\n#SLEEP 180\n\n# Low line voltage causing transfer to batteries\n# The permitted values depend on your model as defined by last letter\n#  of FIRMWARE or APCMODEL. Some representative values are:\n#    D 106 103 100 097\n#    M 177 172 168 182\n#    A 092 090 088 086\n#    I 208 204 200 196     (default = 0 => not valid)\n#LOTRANSFER  208\n\n# High line voltage causing transfer to batteries\n# The permitted values depend on your model as defined by last letter\n#  of FIRMWARE or APCMODEL. Some representative values are:\n#    D 127 130 133 136\n#    M 229 234 239 224\n#    A 108 110 112 114\n#    I 253 257 261 265     (default = 0 => not valid)\n#HITRANSFER 253\n\n# Battery charge needed to restore power\n# RETURNCHARGE 00 15 50 90 (default = 15)\n#RETURNCHARGE 15\n\n# Alarm delay\n# 0 = zero delay after pwr fail, T = power fail + 30 sec, L = low battery, N = never\n# BEEPSTATE 0 T L N        (default = 0)\n#BEEPSTATE T\n\n# Low battery warning delay in minutes\n# LOWBATT 02 05 07 10      (default = 02)\n#LOWBATT 2\n\n# UPS Output voltage when running on batteries\n# The permitted values depend on your model as defined by last letter\n#  of FIRMWARE or APCMODEL. Some representative values are:\n#    D 115\n#    M 208\n#    A 100\n#    I 230 240 220 225     (default = 0 => not valid)\n#OUTPUTVOLTS 230\n\n# Self test interval in hours 336=2 weeks, 168=1 week, ON=at power on\n# SELFTEST 336 168 ON OFF  (default = 336)\n#SELFTEST 336\n'})}),"\n",(0,r.jsx)(n.h2,{id:"ladis\u96F7\u8FEA\u65AF",children:"Ladis/\u96F7\u8FEA\u65AF"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.ladis.com.cn/support/node_78.shtml",children:"https://www.ladis.com.cn/support/node_78.shtml"})}),"\n",(0,r.jsx)(n.li,{children:"\u4E0D\u5EFA\u8BAE\u8D2D\u4E70 - \u4E0D\u517C\u5BB9 APC \u534F\u8BAE\uFF0C\u76D1\u63A7\u7BA1\u7406\u9EBB\u70E6"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"viewpower",children:"ViewPower"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://www.power-software-download.com/viewpower-cn.html",children:"http://www.power-software-download.com/viewpower-cn.html"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -LO https://www.ladis.com.cn/down/installViewPowerHTML_Linux_text_x86_64_20200409.tar.gz\ntar zxvf installViewPowerHTML_Linux_text_x86_64_20200409.tar.gz\n\n# http://127.0.0.1:15178/ViewPower/monitor?277\n# --privileged -v /dev:/dev\ndocker run --rm -it -p 15178:15178 -v $PWD:/host --device=/dev/ttyUSB0 -w /host wener/base\n\napk del libc6-compat\n\ncurl -LOC- https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.32-r0/glibc-2.32-r0.apk\napk add --allow-untrust glibc-2.32-r0.apk\nln -s /usr/glibc-compat/lib/libc.so.6 /lib/libc.so.6\n\napk add gzip\n\n./installViewPowerHTML_Linux_text_x86_64.bin\n# /root/ViewPower/jre/bin/java com.zerog.lax.LAX /root/ViewPower/ViewPower.lax /tmp/env.properties.911\n# /root/ViewPower/jre/bin/java -Djava.util.logging.config.file=/root/ViewPower/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -classpath /root/ViewPower/tomcat/bin/bootstrap.jar:/root/ViewPower/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/root/ViewPower/tomcat -Dcatalina.home=/root/ViewPower/tomcat -Djava.io.tmpdir=/root/ViewPower/tomcat/temp org.apache.catalina.startup.Bootstrap start\n\n# \u65E5\u5FD7\n# tail -f /root/ViewPower/log/testlog/2020-08-27_00000.log\n"})})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},17776:function(e,n,t){t.d(n,{R:()=>i,x:()=>a});var o=t(7378);let r={},s=o.createContext(r);function i(e){let n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);