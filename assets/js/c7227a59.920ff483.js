"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["63240"],{72364:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>a,toc:()=>c,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>i});var s=JSON.parse('{"id":"web/dev/lerna","title":"Lerna","description":"npm \u652F\u6301 workspace \u540E lerna \u5DF2\u5F88\u5C11\u4F7F\u7528","source":"@site/../notes/web/dev/lerna.md","sourceDirName":"web/dev","slug":"/web/dev/lerna","permalink":"/notes/web/dev/lerna","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/dev/lerna.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1653992153000,"frontMatter":{"title":"Lerna"},"sidebar":"docs","previous":{"title":"knip","permalink":"/notes/web/dev/knip"},"next":{"title":"nx","permalink":"/notes/web/dev/nx"}}'),t=r(86106),l=r(17776);let a={title:"Lerna"},i="Lerna",o={},c=[{value:"lerna.json",id:"lernajson",level:2}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"lerna",children:"Lerna"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"npm \u652F\u6301 workspace \u540E lerna \u5DF2\u5F88\u5C11\u4F7F\u7528"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/lerna/lerna/issues/1243#issuecomment-401396850",children:"#1243"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Lerna \u7684\u4E3B\u8981\u76EE\u7684\u662F\u5E2E\u52A9 monorepo ",(0,t.jsx)(n.strong,{children:"\u53D1\u5E03"})," \u591A\u4E2A\u5305\uFF0C\u800C\u4E0D\u662F\u5E2E\u52A9\u672C\u5730\u5F00\u53D1\u672C\u5730\u591A\u6A21\u5757 - \u8FD9\u662F yarn workspace \u7684\u76EE\u7684"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Lerna \u53EF\u4EE5\u914D\u5408 yarn workspace \u4E00\u8D77\u4F7F\u7528"}),"\n",(0,t.jsxs)(n.li,{children:["\u95EE\u9898\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["yarn2 workspace protocol support - ",(0,t.jsx)(n.a,{href:"https://github.com/lerna/lerna/issues/2564",children:"#2564"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u5931\u8D25\u65E0\u6CD5\u6062\u590D - ",(0,t.jsx)(n.a,{href:"https://github.com/lerna/lerna/issues/455",children:"#455"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5EFA\u8BAE ",(0,t.jsx)(n.code,{children:"--no-push"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u8003\u8651\u7248\u672C\u4FEE\u6539\u548C\u53D1\u5E03\u5206\u5F00 ",(0,t.jsx)(n.code,{children:"lerna version && lerna publish from-git"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://doppelmutzi.github.io/monorepo-lerna-yarn-workspaces/",children:"Why Lerna and Yarn Workspaces is a Perfect Match for Building Mono-Repos"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# npx lerna init\nyarn dlx lerna init\n\n# \u9879\u76EE\u95F4\u4F9D\u8D56\nlerna add @wener/core --scope=@wener/admin\n\nyarn lerna publish 1.0.0 -y --skip-git\n\n# \u53EA\u4FEE\u6539\u7248\u672C - \u4E0D push\nyarn lerna version prerelease --no-push\n\n# \u5F53\u524D git \u7248\u672C\ngit describe --abbrev=0 --tags\n# \u53D1\u5E03 git \u7248\u672C - \u7528\u4E8E\u53D1\u5E03\u5931\u8D25\u7684\u65F6\u5019\nyarn lerna from-git\n"})}),"\n",(0,t.jsx)(n.h2,{id:"lernajson",children:"lerna.json"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/lerna/lerna#lernajson",children:"lerna.json"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "packages": ["packages/*"],\n  "command": {\n    "create": {\n      "homepage": "https://github.com/lerna/lerna",\n      "license": "MIT"\n    },\n    "version": {\n      "allowBranch": "master",\n      "conventionalCommits": true,\n      "exact": true,\n      "gitRemote": "upstream",\n      "message": "chore(release): %s"\n    }\n  },\n  "ignoreChanges": ["**/__fixtures__/**", "**/__tests__/**", "**/*.md"],\n  "version": "3.20.2"\n}\n'})})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},17776:function(e,n,r){r.d(n,{R:()=>a,x:()=>i});var s=r(7378);let t={},l=s.createContext(t);function a(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);