"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["33434"],{12631:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,toc:()=>i,default:()=>p,metadata:()=>s,assets:()=>a,contentTitle:()=>c});var s=JSON.parse('{"id":"security/openssl","title":"OpenSSL","description":"- openssl/openssl","source":"@site/../notes/security/openssl.md","sourceDirName":"security","slug":"/security/openssl","permalink":"/notes/security/openssl","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/security/openssl.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1739157197000,"frontMatter":{"title":"OpenSSL"},"sidebar":"docs","previous":{"title":"OpenSSL Version","permalink":"/notes/security/openssl-version"},"next":{"title":"PKCS","permalink":"/notes/security/pkcs"}}'),r=t(86106),o=t(17776);let l={title:"OpenSSL"},c="OpenSSL",a={},i=[{value:"CA",id:"ca",level:2},{value:"variable lookup failed for ca::default_ca",id:"variable-lookup-failed-for-cadefault_ca",level:2},{value:"SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway",id:"ssl-certificate-verify-result-unable-to-get-local-issuer-certificate-20-continuing-anyway",level:2}];function u(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"openssl",children:"OpenSSL"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/openssl/openssl",children:"openssl/openssl"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Apache-2.0, C, Perl"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"libssl, libcrypto, openssl"}),"\n",(0,r.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.openssl.org/docs/manmaster/",children:"https://www.openssl.org/docs/manmaster/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"ca",children:"CA"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"openssl genrsa -out example.org.key 2048\nopenssl rsa -in example.org.key -noout -text # introspect\n\nopenssl rsa -in example.org.key -pubout -out example.org.pubkey\nopenssl rsa -in example.org.pubkey -pubin -noout -text\n\nopenssl req -new -key example.org.key -out example.org.csr\nopenssl req -in example.org.csr -noout -text\n\nopenssl genrsa -out ca.key 2048\nopenssl req -new -x509 -key ca.key -out ca.crt\n\nopenssl x509 -req -in example.org.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out example.org.crt\nopenssl x509 -in example.org.crt -noout -text\ncat example.org.crt ca.crt > example.org.bundle.crt\n\n# \u67E5\u770B\u670D\u52A1\u5668\u8BC1\u4E66\nopenssl s_client -servername cloudflare.com -connect cloudflare.com:443\n# \u83B7\u53D6\u8BC1\u4E66\nopenssl s_client -servername cloudflare.com -connect cloudflare.com:443 < /dev/null | openssl x509 -outform PEM > cloudflare.com.crt\n# \u8BC1\u4E66\u4FE1\u606F\n# cloudflare.com, *.amp.cloudflare.com, *.cloudflare.com, *.dns.cloudflare.com, *.staging.cloudflare.com\nopenssl x509 -in cloudflare.com.crt -text -noout | grep -E 'Subject:|DNS:'\n\n# FP\necho -sha256 -sha1 -md5 | xargs -n1 openssl x509 -noout -fingerprint -inform pem -in ca.crt\n\n# \u67E5\u770B\u8BC1\u4E66\u65F6\u95F4\n# notBefore=\n# notAfter=\nopenssl x509 -in wener.me.crt -noout -dates\n# \u67E5\u770B\u57DF\u540D\nopenssl x509 -in wener.me.crt -noout -text | grep -E 'Subject:|DNS:'\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://gist.github.com/Soarez/9688998",children:"https://gist.github.com/Soarez/9688998"})}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(n.h2,{id:"variable-lookup-failed-for-cadefault_ca",children:"variable lookup failed for ca::default_ca"}),"\n",(0,r.jsx)(n.h2,{id:"ssl-certificate-verify-result-unable-to-get-local-issuer-certificate-20-continuing-anyway",children:"SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway"}),"\n",(0,r.jsx)(n.p,{children:"The root certificate is not in the local database of trusted root certificates. The local database of trusted root certificates was not give or queried by OpenSSL."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"openssl s_client -servername wener.me -connect wener.me:443\n"})})]})}function p(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},17776:function(e,n,t){t.d(n,{R:()=>l,x:()=>c});var s=t(7378);let r={},o=s.createContext(r);function l(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);