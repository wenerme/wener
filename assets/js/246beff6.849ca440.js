"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["99317"],{16814:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>c,toc:()=>o,default:()=>h,metadata:()=>r,assets:()=>t,contentTitle:()=>d});var r=JSON.parse('{"id":"ai/voice/funasr","title":"FunASR","description":"- modelscope/FunASR","source":"@site/../notes/ai/voice/funasr.md","sourceDirName":"ai/voice","slug":"/ai/voice/funasr","permalink":"/notes/ai/voice/funasr","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/ai/voice/funasr.md","tags":[{"inline":true,"label":"ASR","permalink":"/notes/tags/asr"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1753627141000,"frontMatter":{"title":"FunASR","tags":["ASR"]},"sidebar":"docs","previous":{"title":"Voice","permalink":"/notes/ai/voice/"},"next":{"title":"Voice Awesome","permalink":"/notes/ai/voice/awesome"}}'),i=s(86106),l=s(17776);let c={title:"FunASR",tags:["ASR"]},d="FunASR",t={},o=[{value:"Notes",id:"notes",level:2},{value:"Protocol",id:"protocol",level:2},{value:"llvmlite",id:"llvmlite",level:2},{value:"\u53CC\u58F0\u9053",id:"\u53CC\u58F0\u9053",level:2},{value:"ImportError: cannot import name HubDatasetModuleFactoryWithoutScript from datasets.load",id:"importerror-cannot-import-name-hubdatasetmodulefactorywithoutscript-from-datasetsload",level:2},{value:"IndexError: list index out of range",id:"indexerror-list-index-out-of-range",level:2}];function a(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"funasr",children:"FunASR"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/modelscope/FunASR",children:"modelscope/FunASR"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MIT"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/FunAudioLLM/SenseVoice",children:"FunAudioLLM/SenseVoice"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Multilingual Voice Understanding Model"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u6A21\u578B\u7F13\u5B58\u76EE\u5F55 ~/.cache/modelscope/hub/iic"}),"\n",(0,i.jsxs)(e.li,{children:["16kHz sampling rate, single channel, 16 bit depth\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/modelscope/FunASR/blob/172a3152b42af36443ec6a0a39969471c35b893d/funasr/utils/load_utils.py",children:"funasr/utils/load_utils.py"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# --privileged=true\ndocker run --rm -it \\\n  -p 10095:10095 \\\n  -v $PWD/funasr/models:/workspace/models \\\n  -w /workspace/FunASR/runtime \\\n  --name funasr registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-cpu-0.4.5\n\n# --certfile 0 \u5173\u95ED ssl\n# damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx\uFF08\u65F6\u95F4\u6233\uFF09\n# damo/speech_paraformer-large-contextual_asr_nat-zh-cn-16k-common-vocab8404-onnx\uFF08nn\u70ED\u8BCD\uFF09\n# \u5EFA\u8BAE\u70ED\u8BCD\u957F\u5EA6\u4E0D\u8D85\u8FC710\uFF0C\u4E2A\u6570\u4E0D\u8D85\u8FC71k\uFF0C\u6743\u91CD1~100\n# https://modelscope.cn/models/damo -> https://modelscope.cn/models/iic\n# https://www.modelscope.cn/models/iic/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx\n# \u5B9E\u9645\u542F\u52A8\n# https://github.com/modelscope/FunASR/blob/main/runtime/websocket/bin/funasr-wss-server.cpp\nbash run_server.sh \\\n  --certfile 0 \\\n  --download-model-dir /workspace/models \\\n  --vad-dir damo/speech_fsmn_vad_zh-cn-16k-common-onnx \\\n  --model-dir damo/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-onnx \\\n  --punc-dir damo/punc_ct-transformer_cn-en-common-vocab471067-large-onnx \\\n  --lm-dir damo/speech_ngram_lm_zh-cn-ai-wesp-fst \\\n  --itn-dir thuduj12/fst_itn_zh \\\n  --hotword /workspace/models/hotwords.txt\n\n# GPU\ndocker pull registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-gpu-0.2.1\ndocker run --gpus=all -p 10098:10095 -it --privileged=true \\\n  -v $PWD/funasr/models:/workspace/models \\\n  --name funasr registry.cn-hangzhou.aliyuncs.com/funasr_repo/funasr:funasr-runtime-sdk-gpu-0.2.1\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7F29\u5199"}),(0,i.jsx)(e.th,{children:"\u82F1\u6587\u5168\u79F0"}),(0,i.jsx)(e.th,{children:"\u4E2D\u6587\u542B\u4E49"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"AED"}),(0,i.jsx)(e.td,{children:"Acoustic Event Detection"}),(0,i.jsx)(e.td,{children:"\u4E8B\u4EF6\u68C0\u6D4B"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ASR"}),(0,i.jsx)(e.td,{children:"Automatic Speech Recognition"}),(0,i.jsx)(e.td,{children:"\u81EA\u52A8\u8BED\u97F3\u8BC6\u522B"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ITN"}),(0,i.jsx)(e.td,{children:"Inverse Text Normalization"}),(0,i.jsx)(e.td,{children:"\u6587\u672C\u5F52\u4E00\u5316"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"LID"}),(0,i.jsx)(e.td,{children:"Language Identification"}),(0,i.jsx)(e.td,{children:"\u8BED\u79CD\u8BC6\u522B"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SER"}),(0,i.jsx)(e.td,{children:"Speech Emotion Recognition"}),(0,i.jsx)(e.td,{children:"\u60C5\u611F\u8BC6\u522B"})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u6A21\u578B\u540D\u79F0"}),(0,i.jsx)(e.th,{children:"\u4E3B\u8981\u529F\u80FD\u63CF\u8FF0"}),(0,i.jsx)(e.th,{children:"\u8BED\u8A00"}),(0,i.jsx)(e.th,{children:"\u8BAD\u7EC3\u6570\u636E"}),(0,i.jsx)(e.th,{children:"\u53C2\u6570\u91CF"}),(0,i.jsx)(e.th,{children:"\u7279\u8272/\u5907\u6CE8"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SenseVoiceSmall"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD\u8BED\u97F3\u7406\u89E3\uFF08ASR\u3001ITN\u3001LID\u3001SER\u3001AED\uFF09"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD"}),(0,i.jsx)(e.td,{children:"300,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"234M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"paraformer-zh"}),(0,i.jsx)(e.td,{children:"\u8BED\u97F3\u8BC6\u522B\uFF0C\u5E26\u65F6\u95F4\u6233\uFF0C\u975E\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u4E2D\u6587"}),(0,i.jsx)(e.td,{children:"60,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"220M"}),(0,i.jsx)(e.td,{children:"\u65F6\u95F4\u6233\uFF0C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"SeACoParaformer-zh"}),(0,i.jsx)(e.td,{children:"\u70ED\u8BCD\u8BED\u97F3\u8BC6\u522B\uFF0C\u5E26\u65F6\u95F4\u6233\uFF0C\u975E\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u4E2D\u6587"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"220M"}),(0,i.jsx)(e.td,{children:"\u70ED\u8BCD\u3001\u65F6\u95F4\u6233"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"paraformer-zh-spk"}),(0,i.jsx)(e.td,{children:"\u5206\u89D2\u8272\u8BED\u97F3\u8BC6\u522B\uFF0C\u5E26\u65F6\u95F4\u6233\uFF0C\u975E\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u4E2D\u6587"}),(0,i.jsx)(e.td,{children:"60,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"220M"}),(0,i.jsx)(e.td,{children:"\u5206\u89D2\u8272\u3001\u65F6\u95F4\u6233"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"paraformer-zh-streaming"}),(0,i.jsx)(e.td,{children:"\u8BED\u97F3\u8BC6\u522B\uFF0C\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u4E2D\u6587"}),(0,i.jsx)(e.td,{children:"60,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"220M"}),(0,i.jsx)(e.td,{children:"\u5B9E\u65F6\uFF0C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"paraformer-zh-streaming-small"}),(0,i.jsx)(e.td,{children:"\u8BED\u97F3\u8BC6\u522B\uFF0C\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u4E2D\u6587"}),(0,i.jsx)(e.td,{children:"60,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"220M"}),(0,i.jsx)(e.td,{children:"\u5B9E\u65F6"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"paraformer-en"}),(0,i.jsx)(e.td,{children:"\u82F1\u6587\u8BED\u97F3\u8BC6\u522B\uFF0C\u975E\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u82F1\u6587"}),(0,i.jsx)(e.td,{children:"50,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"220M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"conformer-en"}),(0,i.jsx)(e.td,{children:"\u82F1\u6587\u8BED\u97F3\u8BC6\u522B\uFF0C\u975E\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u82F1\u6587"}),(0,i.jsx)(e.td,{children:"50,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"220M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ct-punc"}),(0,i.jsx)(e.td,{children:"\u6807\u70B9\u6062\u590D"}),(0,i.jsx)(e.td,{children:"\u4E2D/\u82F1\u6587"}),(0,i.jsx)(e.td,{children:"100M"}),(0,i.jsx)(e.td,{children:"290M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"fsmn-vad"}),(0,i.jsx)(e.td,{children:"\u8BED\u97F3\u6D3B\u52A8\u68C0\u6D4B"}),(0,i.jsx)(e.td,{children:"\u4E2D/\u82F1\u6587"}),(0,i.jsx)(e.td,{children:"5,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"0.4M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"fsmn-kws"}),(0,i.jsx)(e.td,{children:"\u5173\u952E\u8BCD\u68C0\u6D4B\uFF0C\u6D41\u5F0F"}),(0,i.jsx)(e.td,{children:"\u4E2D\u6587"}),(0,i.jsx)(e.td,{children:"5,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"0.7M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"fa-zh"}),(0,i.jsx)(e.td,{children:"\u65F6\u95F4\u6233\u9884\u6D4B"}),(0,i.jsx)(e.td,{children:"\u4E2D\u6587"}),(0,i.jsx)(e.td,{children:"5,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"38M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"cam++"}),(0,i.jsx)(e.td,{children:"\u8BF4\u8BDD\u4EBA\u9A8C\u8BC1/\u5206\u79BB"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"5,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"7.2M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Whisper-large-v3"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD\u8BED\u97F3\u8BC6\u522B\uFF0C\u5E26\u65F6\u95F4\u6233\uFF0C\u975E\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"1550M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Whisper-large-v3-turbo"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD\u8BED\u97F3\u8BC6\u522B\uFF0C\u5E26\u65F6\u95F4\u6233\uFF0C\u975E\u5B9E\u65F6"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"809M"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qwen-Audio"}),(0,i.jsx)(e.td,{children:"\u97F3\u9891-\u6587\u672C\u591A\u6A21\u6001\u9884\u8BAD\u7EC3\u6A21\u578B"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"8B"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qwen-Audio-Chat"}),(0,i.jsx)(e.td,{children:"\u97F3\u9891-\u6587\u672C\u591A\u6A21\u6001\u5BF9\u8BDD\u6A21\u578B"}),(0,i.jsx)(e.td,{children:"\u591A\u8BED\u79CD"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"8B"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"emotion2vec+large"}),(0,i.jsx)(e.td,{children:"\u8BED\u97F3\u60C5\u611F\u8BC6\u522B"}),(0,i.jsx)(e.td,{children:"-"}),(0,i.jsx)(e.td,{children:"40,000 \u5C0F\u65F6"}),(0,i.jsx)(e.td,{children:"300M"}),(0,i.jsx)(e.td,{})]})]})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Paraformer\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4E3B\u8981\u4E3A\u4E2D\u6587\u666E\u901A\u8BDD\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u58F0\u97F3\u4E8B\u4EF6\u68C0\u6D4B (AED) (\u5982\u7B11\u58F0\u3001\u638C\u58F0)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u65F6\u95F4\u6233\u9884\u6D4B"}),"\n",(0,i.jsx)(e.li,{children:"\u9006\u6587\u672C\u6B63\u5219\u5316 (ITN)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["paraformer-zh\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.modelscope.cn/models/iic/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-pytorch/summary",children:"https://www.modelscope.cn/models/iic/speech_paraformer-large-vad-punc_asr_nat-zh-cn-16k-common-vocab8404-pytorch/summary"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://huggingface.co/funasr/paraformer-zh",children:"https://huggingface.co/funasr/paraformer-zh"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["SenseVoice-Small\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u591A\u8BED\u8A00 (\u4E2D\u3001\u7CA4\u3001\u82F1\u3001\u65E5\u3001\u97E9\u7B49)"}),"\n",(0,i.jsx)(e.li,{children:"\u60C5\u611F\u8BC6\u522B (SER)"}),"\n",(0,i.jsx)(e.li,{children:"\u58F0\u97F3\u4E8B\u4EF6\u68C0\u6D4B (AED) (\u5982\u7B11\u58F0\u3001\u638C\u58F0)"}),"\n",(0,i.jsx)(e.li,{children:"\u8BED\u79CD\u8BC6\u522B (LID)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6A21\u578B\u540D\u5B57\u6620\u5C04"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["ct-punc 1.2G\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CT-Transformer\u6807\u70B9-\u4E2D\u82F1\u6587-\u901A\u7528-large"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["ct-punc-c 300M\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CT-Transformer\u6807\u70B9-\u4E2D\u6587-\u901A\u7528-pytorch"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-py",children:'name_maps_ms = {\n    "paraformer": "iic/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-pytorch",\n    "paraformer-zh": "iic/speech_seaco_paraformer_large_asr_nat-zh-cn-16k-common-vocab8404-pytorch",\n    "paraformer-en": "iic/speech_paraformer-large-vad-punc_asr_nat-en-16k-common-vocab10020",\n    "paraformer-en-spk": "iic/speech_paraformer-large-vad-punc_asr_nat-en-16k-common-vocab10020",\n    "paraformer-zh-streaming": "iic/speech_paraformer-large_asr_nat-zh-cn-16k-common-vocab8404-online",\n    "fsmn-vad": "iic/speech_fsmn_vad_zh-cn-16k-common-pytorch",\n    "ct-punc": "iic/punc_ct-transformer_cn-en-common-vocab471067-large",\n    "ct-punc-c": "iic/punc_ct-transformer_zh-cn-common-vocab272727-pytorch",\n    "fa-zh": "iic/speech_timestamp_prediction-v1-16k-offline",\n    "cam++": "iic/speech_campplus_sv_zh-cn_16k-common",\n    "Whisper-large-v2": "iic/speech_whisper-large_asr_multilingual",\n    "Whisper-large-v3": "iic/Whisper-large-v3",\n    "Qwen-Audio": "Qwen/Qwen-Audio",\n    "emotion2vec_plus_large": "iic/emotion2vec_plus_large",\n    "emotion2vec_plus_base": "iic/emotion2vec_plus_base",\n    "emotion2vec_plus_seed": "iic/emotion2vec_plus_seed",\n    "Whisper-large-v3-turbo": "iic/Whisper-large-v3-turbo",\n}\n\nname_maps_hf = {\n    "paraformer": "funasr/paraformer-zh",\n    "paraformer-zh": "funasr/paraformer-zh",\n    "paraformer-en": "funasr/paraformer-zh",\n    "paraformer-zh-streaming": "funasr/paraformer-zh-streaming",\n    "fsmn-vad": "funasr/fsmn-vad",\n    "ct-punc": "funasr/ct-punc",\n    "ct-punc-c": "iic/punc_ct-transformer_zh-cn-common-vocab272727-pytorch",\n    "fa-zh": "funasr/fa-zh",\n    "cam++": "funasr/campplus",\n    "Whisper-large-v2": "iic/speech_whisper-large_asr_multilingual",\n    "Whisper-large-v3": "iic/Whisper-large-v3",\n    "Qwen-Audio": "Qwen/Qwen-Audio",\n    "emotion2vec_plus_large": "emotion2vec/emotion2vec_plus_large",\n    "iic/emotion2vec_plus_large": "emotion2vec/emotion2vec_plus_large",\n    "emotion2vec_plus_base": "emotion2vec/emotion2vec_plus_base",\n    "iic/emotion2vec_plus_base": "emotion2vec/emotion2vec_plus_base",\n    "emotion2vec_plus_seed": "emotion2vec/emotion2vec_plus_seed",\n    "iic/emotion2vec_plus_seed": "emotion2vec/emotion2vec_plus_seed",\n    "Whisper-large-v3-turbo": "iic/Whisper-large-v3-turbo",\n}\n\nname_maps_openai = {\n    "Whisper-tiny.en": "tiny.en",\n    "Whisper-tiny": "tiny",\n    "Whisper-base.en": "base.en",\n    "Whisper-base": "base",\n    "Whisper-small.en": "small.en",\n    "Whisper-small": "small",\n    "Whisper-medium.en": "medium.en",\n    "Whisper-medium": "medium",\n    "Whisper-large-v1": "large-v1",\n    "Whisper-large-v2": "large-v2",\n    "Whisper-large-v3": "large-v3",\n    "Whisper-large": "large",\n    "Whisper-large-v3-turbo": "turbo",\n}\n'})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ddlBoJack/emotion2vec",children:"ddlBoJack/emotion2vec"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"iic/emotion2vec_base_finetuned"}),"\n",(0,i.jsx)(e.li,{children:"iic/emotion2vec_plus_large"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/modelscope/FunASR/blob/main/funasr/download/name_maps_from_hub.py",children:"https://github.com/modelscope/FunASR/blob/main/funasr/download/name_maps_from_hub.py"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Process\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["vad - \u8BED\u97F3\u6D3B\u52A8\u68C0\u6D4B\u6A21\u578B\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8FC7\u6EE4\u6389\u65E0\u7528\u7684\u9759\u97F3\u90E8\u5206\u6216\u80CC\u666F\u566A\u97F3\uFF0C\u786E\u4FDD ASR \u6A21\u578B\u53EA\u5904\u7406\u6709\u6548\u7684\u8BED\u97F3\u7247\u6BB5\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,i.jsx)(e.code,{children:"[[370, 2230], [2560, 7080]]"})," - \u5F00\u59CB, \u7ED3\u675F\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"vad segments"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["asr\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,i.jsx)(e.code,{children:"{text:'', timestamp: [[100,200], [200,500]]}"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["spk\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"speaker verification/diarization"}),"\n",(0,i.jsx)(e.li,{children:"\u8F93\u51FA spk_embedding"}),"\n",(0,i.jsx)(e.li,{children:"spk_mode = punc_segment | vad_segment"}),"\n",(0,i.jsx)(e.li,{children:"\u4F9D\u8D56 timestamp"}),"\n",(0,i.jsx)(e.li,{children:"\u6CA1\u6709 spk_model \u7684\u65F6\u5019\u53EF\u4EE5\u8BBE\u7F6E sentence_timestamp=True \u8FD4\u56DE sentence \u4FE1\u606F"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["punc\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5904\u7406 ",(0,i.jsx)(e.code,{children:'result["text"]'})]}),"\n",(0,i.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,i.jsx)(e.code,{children:"{text:'', punc_array:[]}"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679C\u8BBE\u7F6E\u4E86 preset_spk_num \u4F1A\u6839\u636E spk_embedding \u505A cluster \u6765\u786E\u5B9A\u8BF4\u8BDD\u4EBA"}),"\n",(0,i.jsxs)(e.li,{children:["\u5982\u679C\u8BBE\u7F6E\u4E86 return_raw_text \u5219\u4F1A\u8BBE\u7F6E ",(0,i.jsx)(e.code,{children:'result["raw_text"]'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["params\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"batch_size_s"}),"\n",(0,i.jsx)(e.li,{children:"en_post_proc=Flase - \u82F1\u6587\u540E\u5904\u7406"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/modelscope/FunASR/blob/main/runtime/run_server.sh",children:"https://github.com/modelscope/FunASR/blob/main/runtime/run_server.sh"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/modelscope/FunASR/blob/main/runtime/websocket/bin/funasr-wss-server.cpp",children:"https://github.com/modelscope/FunASR/blob/main/runtime/websocket/bin/funasr-wss-server.cpp"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"protocol",children:"Protocol"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"interface OfflineRequestMessage {\n  mode: 'offline';\n  wav_name: string;\n  wav_format: string | 'pcm' | 'mp3' | 'mp4';\n  is_speaking: boolean; // false -> \u65AD\u53E5\u5C3E\u70B9\uFF0C\u4F8B\u5982\uFF0Cvad\u5207\u5272\u70B9\uFF0C\u6216\u8005\u4E00\u6761wav\u7ED3\u675F\n  audio_fs?: number; // pcm \u91C7\u6837\u7387\n  hotwords?: Record<string, number>; // \u70ED\u8BCD\n  itn?: boolean; // \u9ED8\u8BA4 true\n}\n\ninterface ResponseMessage {\n  mode: 'offline';\n  wav_name: string;\n  text: string;\n  is_final: boolean;\n  timestamp?: number[][]; // \u65F6\u95F4\u6233 \"[[100,200], [200,500]]\"(ms)\n  stamp_sents?: {\n    text_seg: string; // \u6B63 \u662F \u56E0 \u4E3A\n    punc: string; // ,\n    start: number;\n    end: number;\n    ts_list: number[][]; // [[430,670],[670,810],[810,1030],[1030,1130]]\n  }[];\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["mode\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"offline \u4E00\u53E5\u8BDD\u8BC6\u522B"}),"\n",(0,i.jsx)(e.li,{children:"online \u5B9E\u65F6\u8BED\u97F3\u8BC6\u522B"}),"\n",(0,i.jsx)(e.li,{children:"2pass \u5B9E\u65F6\u8BED\u97F3\u8BC6\u522B\uFF0C\u5E76\u4E14\u8BF4\u8BDD\u53E5\u5C3E\u91C7\u7528\u79BB\u7EBF\u6A21\u578B\u8FDB\u884C\u7EA0\u9519"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/modelscope/FunASR/blob/main/runtime/docs/websocket_protocol_zh.md",children:"https://github.com/modelscope/FunASR/blob/main/runtime/docs/websocket_protocol_zh.md"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"llvmlite",children:"llvmlite"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4F9D\u8D56 LLVM"}),"\n",(0,i.jsx)(e.li,{children:"llvmlite \u5BF9 LLVM \u7248\u672C\u6709\u786C\u6027\u8981\u6C42"}),"\n",(0,i.jsx)(e.li,{children:"\u5148\u5B89\u88C5 llvmlite \u518D\u5B89\u88C5 funasr"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"llvm-config --version"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/numba/llvmlite",children:"https://github.com/numba/llvmlite"})}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"apt install llvm\nuv add llvmlite\nuv add funasr\n\nuv add simplejson pillow sortedcontainers\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u53CC\u58F0\u9053",children:"\u53CC\u58F0\u9053"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/modelscope/FunASR/issues/1509",children:"https://github.com/modelscope/FunASR/issues/1509"})}),"\n"]}),"\n",(0,i.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(e.h2,{id:"importerror-cannot-import-name-hubdatasetmodulefactorywithoutscript-from-datasetsload",children:"ImportError: cannot import name HubDatasetModuleFactoryWithoutScript from datasets.load"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4F7F\u7528 datasets 2.19 \u7248\u672C"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"indexerror-list-index-out-of-range",children:"IndexError: list index out of range"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5E76\u53D1\u95EE\u9898\uFF0C\u4F7F\u7528\u591A\u4E2A worker \u7684\u65B9\u5F0F\u6765\u907F\u514D"}),"\n"]})]})}function h(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}},17776:function(n,e,s){s.d(e,{R:()=>c,x:()=>d});var r=s(7378);let i={},l=r.createContext(i);function c(n){let e=r.useContext(l);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);