"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["77575"],{21906:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>a,toc:()=>d,default:()=>p,metadata:()=>i,assets:()=>c,contentTitle:()=>l});var i=JSON.parse('{"id":"os/alpine/README","title":"Alpine","description":"- ARCH - \u67B6\u6784\u652F\u6301","source":"@site/../notes/os/alpine/README.md","sourceDirName":"os/alpine","slug":"/os/alpine/","permalink":"/notes/os/alpine/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/alpine/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1676530464000,"frontMatter":{"title":"Alpine"},"sidebar":"docs","previous":{"title":"\u64CD\u4F5C\u7CFB\u7EDF","permalink":"/notes/os/"},"next":{"title":"apk","permalink":"/notes/os/alpine/apk"}}'),r=s(86106),t=s(17776);let a={title:"Alpine"},l="Alpine",c={},d=[{value:"\u5B89\u88C5",id:"\u5B89\u88C5",level:2},{value:"\u5236\u4F5C\u78C1\u76D8\u955C\u50CF",id:"\u5236\u4F5C\u78C1\u76D8\u955C\u50CF",level:3},{value:"Mips",id:"mips",level:2},{value:"USB",id:"usb",level:2},{value:"APKINDEX",id:"apkindex",level:2},{value:"Edge",id:"edge",level:2},{value:"Kernal",id:"kernal",level:2},{value:"Mirror",id:"mirror",level:2},{value:"FAQ",id:"faq",level:2},{value:"\u624B\u52A8\u6307\u5B9A DNS",id:"\u624B\u52A8\u6307\u5B9A-dns",level:3}];function o(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"alpine",children:"Alpine"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["ARCH - \u67B6\u6784\u652F\u6301\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"x86_64"}),"\n",(0,r.jsx)(e.li,{children:"x86"}),"\n",(0,r.jsx)(e.li,{children:"armhf"}),"\n",(0,r.jsx)(e.li,{children:"armv7"}),"\n",(0,r.jsx)(e.li,{children:"aarch64"}),"\n",(0,r.jsx)(e.li,{children:"s390x"}),"\n",(0,r.jsxs)(e.li,{children:["mips64 - ",(0,r.jsx)(e.strong,{children:"mips64be"})]}),"\n",(0,r.jsx)(e.li,{children:"ppc64le"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://adelielinux.org/",children:"adelielinux"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E Alpine \u9488\u5BF9\u684C\u9762\u7684\u7CFB\u7EDF"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://code.foxkit.us/groups/adelie",children:"https://code.foxkit.us/groups/adelie"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://postmarketos.org/",children:"https://postmarketos.org/"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E Alpine \u7684\u79FB\u52A8\u64CD\u4F5C\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["GitLab \u4E0A\u5173\u4E8E ",(0,r.jsx)(e.a,{href:"https://gitlab.alpinelinux.org/alpine/aports/issues?state=closed&label_name%5B%5D=T-Security",children:"\u5B89\u5168\u7684\u95EE\u9898"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/jessfraz/apk-file",children:"jessfraz/apk-file"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Search file in package from command line"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u8BA1\u7B97\u5757\u8BBE\u5907\u5BB9\u91CF\necho $(blockdev --getsize64 /dev/sdb1)/1024/1024 | bc -l\n\n\napk add shadow\napk add bash\n# \u66F4\u6362 shell \u4E3A bash\nchsh root -s /bin/bash\n\n\n# \u5B89\u88C5 neofetch\napk add --no-cache -X http://mirrors.aliyun.com/alpine/edge/community neofetch\n# \u6709\u4E9B\u73AF\u5883\u4E0B\u6CA1\u6709 neofetch \u53EF\u4EE5\u7528screenfetch\napk add --no-cache -X http://mirrors.aliyun.com/alpine/edge/testing screenfetch\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5B89\u88C5",children:"\u5B89\u88C5"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Installation",children:"Installation"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/alpinelinux/alpine-conf",children:"alpinelinux/alpine-conf"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5236\u4F5C\u542F\u52A8\u76D8\ndd if=alpine.iso of=/dev/sdx\n\n\n\n# https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\n# \u7EDF\u4E00\u521D\u59CB\u5316\n# \u5206\u4E3A keymap,hostname,interfaces,dns,timezone,proxy,disk,ntp,cache,lbu,apkrepos \u7B49\nsetup-alpine\n\n# \u4E5F\u53EF\u4EE5\u5206\u5F00\u8BBE\u7F6E, \u5EFA\u8BAE\u5148\u8BBE\u7F6E\u7F51\u5361\u548C sshd, \u90A3\u4E48\u63A5\u4E0B\u6765\u7684\u64CD\u4F5C\u5C31\u53EF\u4EE5\u5728\u8FDC\u7A0B\u64CD\u4F5C\n# \u7F51\u5361\u5EFA\u8BAE\u4F7F\u7528\u5F15\u5BFC\u8FDB\u884C\u8BBE\u7F6E, \u5426\u5219\u9700\u8981\u624B\u52A8\u5199\u914D\u7F6E\u6587\u4EF6\nsetup-interfaces\n# \u8BBE\u7F6E\u5B8C\u7F51\u5361\u540E\u53EF\u80FD\u9700\u8981\u91CD\u542F\u7F51\u7EDC\u670D\u52A1\nservice networking restart\nsetup-sshd -c openssh\n# \u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4E0D\u5141\u8BB8 root \u8FDC\u7A0B\u767B\u9646\necho 'PermitRootLogin yes' >> /etc/ssh/sshd_config\nservice sshd reload\n# \u8BBE\u7F6E\u4E00\u4E2A\u5BC6\u7801, \u4EE5\u4FBF\u4E8E\u8FDC\u7A0B\u767B\u9646\n# passwd\necho root:PASSWORD | chpasswd\n\n# \u6CE8\u610F: \u5982\u679C\u8FDC\u7A0B\u767B\u9646\u8BF4\u5BC6\u7801\u5931\u6548, \u53EF\u80FD\u662F\u65F6\u95F4\u95EE\u9898, \u5148\u5728\u670D\u52A1\u5668\u4E0A\u5F00\u542F ntp \u540C\u6B65\u65F6\u95F4\n# \u7ACB\u5373\u540C\u6B65\u65F6\u95F4 ntpd -dn -N -p pool.ntp.org\n\n# \u8FDC\u7A0B\u8BC1\u4E66\u914D\u7F6E\u597D\u8FC7\u540E\u53EF\u4EE5\u8003\u8651\u5173\u95ED\u8FDC\u7A0B\u5BC6\u7801\u767B\u9646\necho 'PasswordAuthentication no' >> /etc/ssh/sshd_config\nservice sshd reload\n\n# \u63A5\u4E0B\u6765\u5C31\u53EF\u4EE5\u8FDC\u7A0B\u64CD\u4F5C\u4E86\nsetup-hostname -n alpine-test\n# \u4F7F\u8BBE\u7F6E\u7684\u4E3B\u673A\u540D\u751F\u6548\n/etc/init.d/hostname --quiet restart\n\nsetup-keymap us us\nsetup-ntp -c chrony\n# /etc/localtime -> /etc/zoneinfo/Asia/Shanghai\nsetup-timezone Asia/Shanghai\n\n# \u6DFB\u52A0\u4ED3\u5E93\n# \u5B89\u88C5\u65F6\u7684\u5B89\u88C5\u5305\u4F4D\u4E8E /media/sdb/apks/\necho \"http://mirrors.aliyun.com/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/main\nhttp://mirrors.aliyun.com/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/community\" > /etc/apk/repositories\n\ngrep VERSION_ID /etc/os-release | grep -Eo '\\d+\\.\\d+'\n\n# testing \u6709\u4E9B\u5C1A\u672A\u53D1\u5E03\u7684, \u6709\u65F6\u5019\u4F1A\u7528\u5230\necho \"@testing http://mirrors.aliyun.com/alpine/edge/testing\" >> /etc/apk/repositories\n\n# \u4E0A\u6D77\u4EA4\u5927\u7684\u955C\u50CF\u66F4\u65B0\u6700\u5FEB\n# http://mirrors.sjtug.sjtu.edu.cn/alpine/\necho \"http://mirrors.sjtug.sjtu.edu.cn/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/main\nhttp://mirrors.sjtug.sjtu.edu.cn/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/community\" > /etc/apk/repositories\n\n# \u6216\u8005\u76F4\u63A5\u7528 edge - \u4E0D\u63A8\u8350\necho \"http://mirrors.aliyun.com/alpine/edge/main\nhttp://mirrors.aliyun.com/alpine/edge/community\n@testing http://mirrors.aliyun.com/alpine/edge/testing\" >> /etc/apk/repositories\n\napk update\n\n\n# \u521B\u5EFA\u56DE\u7B54\u6587\u4EF6, \u7136\u540E\u53EF\u76F4\u63A5\u7F16\u8F91\nsetup-alpine -c ans\n# \u4F7F\u7528\u56DE\u7B54\u6587\u4EF6\u8FDB\u884C\u521D\u59CB\u5316\nsetup-alpine -f ans\n\n# \u5B58\u50A8\u8BBE\u7F6E\n# =======\n# \u5982\u679C\u53EA\u662F\u60F3\u76F4\u63A5\u88C5\u5230 U \u76D8, \u90A3\u4E48\u81F3\u5C11\u9700\u8981 setup-interfaces, setup-sshd(\u4ECE\u8FDC\u7A0B\u65B9\u4FBF\u64CD\u4F5C, \u53EF\u4EE5\u7C98\u8D34\u590D\u5236), \u6DFB\u52A0\u4ED3\u5E93, \u7136\u540E\u624D\u80FD setup-disk\n# \u56E0\u4E3A setup-disk \u9700\u8981\u5B89\u88C5\u4E00\u4E9B\u5305\n\n# -s 0 \u65E0\u4EA4\u6362\u533A\n# -v \u8BE6\u7EC6\u8F93\u51FA\n# -m \u78C1\u76D8\u683C\u5F0F\n# -k \u5185\u6838 vanilla, varthardend, hardended\n# https://pkgs.alpinelinux.org/packages?name=linux-*&branch=v3.7&arch=x86_64&maintainer=Natanael+Copa\n# BOOT_SIZE 100m \u542F\u52A8\u5206\u533A\u5927\u5C0F, \u4E00\u822C\u5B89\u88C5\u5B8C\u6210\u540E 20m \u5DE6\u53F3, \u9ED8\u8BA4\u4F1A\u7ED9 100\nsetup-disk -m sys -s 0 -v /dev/sda\n\n# \u4E0D\u8BE2\u95EE\nERASE_DISKS=/dev/sda setup-disk -m sys -s 0 -v /dev/sda\n\n# apk add sfdisk e2fsprogs syslinux\n\n# \u5176\u4ED6\u7684\u53EF\u9009\u53C2\u6570\n# BOOTLOADER grub \u6216 syslinux\n# MBR=/usr/share/syslinux/mbr.bin\n# SYSROOT=/mnt\n# ERASE_DISKS=/dev/sda \u53EF\u4EE5\u8BBE\u7F6E\u6210\u5199\u5165\u7684\u78C1\u76D8, \u5C31\u4E0D\u4F1A\u518D\u8FDB\u884C\u8BE2\u95EE\n# MKFS_OPTS_BOOT=\"-F\" MKFS_OPTS_VAR=\"-F\" mkfs \u91CD\u590D\u521B\u5EFA\u4E0D\u8BE2\u95EE\n# \u4F1A\u5B89\u88C5\u7684\u5305 \u6839\u636E fs \u7C7B\u578B\u4E0D\u540C\u4F1A\u6709\u4E0D\u540C\n# apk add --quiet sfdisk e2fsprogs\n# \u5B89\u88C5\u52A8\u4F5C\n# apk add --root /mnt --initdb --quiet --progress --update-cache --clean-protected --overlay-from-stdin --repository https://mirrors.ustc.edu.cn/alpine/v3.11/main --repository https://mirrors.ustc.edu.cn/alpine/v3.11/community alpine-base e2fsprogs openssh openssl syslinux acct linux-virt alpine-base\nROOTFS=btrfs BOOTFS=btrfs VARFS=btrfs DISKLABEL=alp-wen setup-disk -m sys -s 0 -v /dev/sda\n\n# \u4F7F\u7528 EFI\n# DISKLABEL \u4E3A gpt\n# BOOTLOADER \u4E3A grub\n# \u542F\u52A8\u5206\u533A\u683C\u5F0F\u4E3A vfat\nUSE_EFI=1 setup-disk -m sys -s 0 -v /dev/sdb\n"})}),"\n",(0,r.jsx)(e.p,{children:"acct linux-$KERNEL_FLAVOR alpine-base"}),"\n",(0,r.jsx)(e.p,{children:"DISKLABEL=gpt\nUSE_EFI gpt,grub,boot-vfat"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'PREFIX=\n. "$PREFIX/lib/libalpine.sh"\n. "$PREFIX/lib/dasd-functions.sh"\n\nMBR=${MBR:-"/usr/share/syslinux/mbr.bin"}\nROOTFS=${ROOTFS:-ext4}\nBOOTFS=${BOOTFS:-ext4}\nVARFS=${VARFS:-ext4}\nBOOTLOADER=${BOOTLOADER:-syslinux}\nDISKLABEL=${DISKLABEL:-dos}\n# default location for mounted root\nSYSROOT=${SYSROOT:-/mnt}\n\n# machine arch\nARCH=$(apk --print-arch)\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5236\u4F5C\u78C1\u76D8\u955C\u50CF",children:"\u5236\u4F5C\u78C1\u76D8\u955C\u50CF"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u521B\u5EFA 2g \u955C\u50CF\nqemu-img create -f qcow2 virt.qcow2 2g\n# \u4ECE cd \u542F\u52A8\u5B89\u88C5\u5230\u955C\u50CF\u76D8\n# \u8F6C\u53D1 22 \u5230\u672C\u5730 2222\nqemu-system-x86_64 -cdrom alpine-virt-3.7.0-x86_64.iso -boot b -hda virt.qcow2 -net nic -net user,hostfwd=tcp::2222-:22\n\n# \u542F\u7528\u7F51\u7EDC\necho -e '\\n\\n' | setup-interface\nrc-service networking restart\nrc-u\n# \u914D\u7F6E ssh \u8FDC\u7A0B\u767B\u9646\nsetup-sshd -c openssh\necho 'PermitRootLogin yes' >> /etc/ssh/sshd_config\nrc-service sshd restart\n# \u8BBE\u7F6E\u5BC6\u7801\u4E3A root\necho 'root:root' | chpasswd\n\n# \u53E6\u5916\u4E00\u4E2A\u7EC8\u7AEF\u4ECE\u672C\u5730 2222 \u8FDB\u5165\nssh root@127.0.0.1 -p 2222\necho \"http://mirrors.aliyun.com/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/main\nhttp://mirrors.aliyun.com/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/community\n@testing http://mirrors.aliyun.com/alpine/edge/testing\" >> /etc/apk/repositories\napk update\n# \u5B89\u88C5\u5230\u78C1\u76D8\nsetup-disk -m sys -s 0 /dev/sda\n# \u5B8C\u6BD5\u5173\u673A\npoweroff\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \u4ECE\u955C\u50CF\u542F\u52A8\nqemu-system-x86_64 -hda virt.qcow2 -net nic -net user,hostfwd=tcp::2222-:22\n\n# \u521D\u59CB\u5316\u914D\u7F6E\nsetup-hostname -n alpine-test\n/etc/init.d/hostname --quiet restart\nsetup-keymap us us\nsetup-ntp -c busybox\nsetup-timezone -z Asia/Shanghai\n# \u5E38\u7528\u5305\napk add nano busybox-extras\n\n# \u7ED3\u675F\u914D\u7F6E\npoweroff\n# \u538B\u7F29\u78C1\u76D8\n# \u53EF\u80FD\u4F1A\u6E05\u9664\u5206\u533A\u4E0A\u7684 boot \u4FE1\u606F\n# mv virt.qcow2 virt-backup.qcow2\n# qemu-img convert -O qcow2 virt-backup.qcow2 virt.qcow2\n\n# \u9644\u52A0\u914D\u7F6E - Bash\n# ============\n# \u9ED8\u8BA4\u4E3A ash, \u4FEE\u6539\u4E3A bash\napk add shadow bash\necho root | chsh root -s /bin/bash\napk add bash-completion\nsource /etc/profile.d/bash_completion.sh\n\n# \u9644\u52A0\u914D\u7F6E - man\n# ============\n# \u9ED8\u8BA4\u6CA1\u6709 manpages\n# \u5B89\u88C5\u65F6\u5982\u679C\u9700\u8981\u6587\u6863, \u53EF\u4EE5\u5B89\u88C5 \u5305\u540D-doc\napk add --no-cache man man-pages mdocml-apropos less less-doc\nexport PAGER=less\n\n# \u9644\u52A0\u914D\u7F6E - Docker\n# ============\n# \u4E00\u822C\u955C\u50CF\u90FD\u53EF\u4EE5\u628A docker \u505A\u4E0A, \u56E0\u4E3A\u975E\u5E38\u5E38\u7528\napk add docker\nrc-update add docker\nrc-service docker restart\n# \u4FEE\u6539\u955C\u50CF\ntee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://registry.docker-cn.com"]\n}\nEOF\nrc-service docker restart\n# \u9A8C\u8BC1\u914D\u7F6E\u6210\u529F\ndocker info\n\n# \u9644\u52A0\u914D\u7F6E - neofetch\n# ============\n# \u5FEB\u901F\u7684\u67E5\u770B\u5F53\u524D\u73AF\u5883\napk add --no-cache -X http://mirrors.aliyun.com/alpine/edge/community neofetch\n'})}),"\n",(0,r.jsx)(e.h2,{id:"mips",children:"Mips"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"https://bugs.alpinelinux.org/issues/5643",children:"https://bugs.alpinelinux.org/issues/5643"}),"\n",(0,r.jsx)(e.a,{href:"https://patchwork.alpinelinux.org/bundle/Lochnair/mips-port/?state=",children:"https://patchwork.alpinelinux.org/bundle/Lochnair/mips-port/?state="}),"*"]}),"\n",(0,r.jsxs)(e.p,{children:["\u641C\u7D22 mips\n",(0,r.jsx)(e.a,{href:"https://github.com/alpinelinux/aports/blob/master/main/gcc/APKBUILD",children:"https://github.com/alpinelinux/aports/blob/master/main/gcc/APKBUILD"})]}),"\n",(0,r.jsx)(e.h2,{id:"usb",children:"USB"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"usbutils-008-r0\n\nlibusb-1.0.20-r0\nlibusb-dev-1.0.20-r0\nlibusb-compat-dev-0.1.5-r3\n\nusbredir-doc-0.7-r2\nusbredir-0.7-r2\nusbredir-dev-0.7-r2\nusbredir-server-0.7-r2\n\nlibgusb-0.2.9-r1\nlibgusb-dev-0.2.9-r1\nlibgusb-doc-0.2.9-r1\n\nlibusb-compat-0.1.5-r3\nusb-modeswitch-doc-2.4.0-r0\nusbutils-doc-008-r0\n\nusb-modeswitch-2.4.0-r0\n\nusb-modeswitch-udev-2.4.0-r0\nhwdata-usb-0.282-r0\n"})}),"\n",(0,r.jsx)(e.h2,{id:"apkindex",children:"APKINDEX"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://mirrors.aliyun.com/alpine/v3.6/main/x86_64/APKINDEX.tar.gz",children:"http://mirrors.aliyun.com/alpine/v3.6/main/x86_64/APKINDEX.tar.gz"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Apkindex_format",children:"https://wiki.alpinelinux.org/wiki/Apkindex_format"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Apk_spec",children:"https://wiki.alpinelinux.org/wiki/Apk_spec"})}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"edge",children:"Edge"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/Edge",children:"https://wiki.alpinelinux.org/wiki/Edge"})}),"\n",(0,r.jsx)(e.li,{children:'"edge" is under constant development so be careful using it in production. It is possible that bugs in "edge" could cause data loss or could break your system.'}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"kernal",children:"Kernal"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"vanilla"}),"\n",(0,r.jsx)(e.li,{children:"virthardened"}),"\n",(0,r.jsxs)(e.li,{children:["hardened\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Hardening_(computing)",children:"Hardening:wiki"})}),"\n",(0,r.jsx)(e.li,{children:"Grsecurity"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5185\u6838\u76F8\u5173\u5305\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/packages?name=linux-*&branch=v3.6&repo=&arch=x86_64",children:"linux-*"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/packages?name=*hardened&branch=v3.6&repo=&arch=x86_64",children:"*-hardened"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"mirror",children:"Mirror"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://wiki.alpinelinux.org/wiki/How_to_setup_a_Alpine_Linux_mirror",children:"How to setup a Alpine Linux mirror"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"rsync://rsync.alpinelinux.org/alpine/"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"rsync://mirrors.tuna.tsinghua.edu.cn/alpine/"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/tuna/rsync",children:"https://github.com/tuna/rsync"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u6DFB\u52A0 -r iso --limit-rate=2m\nwget -np -rNP repos --cut-dirs 1 -e robots=off -X latest-stable,edge http://mirrors.aliyun.com/alpine/\n\nrsync \\\n  --archive \\\n  --update \\\n  --hard-links \\\n  --delete \\\n  --delete-after \\\n  --delay-updates \\\n  --timeout=600 \\\n  --exclude=\"*\" \\\n  --include=/mnt/disk2t/data/alpine/include.txt \\\n  rsync://rsync.alpinelinux.org/alpine/ mirror/\n\nrsync \\\n  --archive \\\n  --update \\\n  --hard-links \\\n  --delete \\\n  --delete-after \\\n  --delay-updates \\\n  --timeout=600 \\\n  rsync://mirrors.tuna.tsinghua.edu.cn/alpine/ mirror/\n\n# \u540C\u6B65\u5355\u4E2A\u76EE\u5F55\u5E76\u663E\u793A\u8FDB\u5EA6\nrsync \\\n  --archive \\\n  --update \\\n  --hard-links \\\n  --delete \\\n  --delete-after \\\n  --delay-updates \\\n  --timeout=600 \\\n  --progress \\\n  rsync://mirrors.tuna.tsinghua.edu.cn/alpine/v3.7/ mirror/v3.7/\n\n# \u53EF\u540C\u65F6\u540C\u6B65\u53E6\u5916\u4E00\u4E2A\u76EE\u5F55\u4EE5\u8FBE\u5230\u5E76\u53D1\n# --bwlimit=KBPS \u5E26\u5BBD\u9650\u5236\nrsync \\\n  --archive \\\n  --update \\\n  --hard-links \\\n  --delete \\\n  --delete-after \\\n  --delay-updates \\\n  --timeout=600 \\\n  --bwlimit=5000 \\\n  rsync://mirrors.tuna.tsinghua.edu.cn/alpine/v3.6/ mirror/v3.6/\n\nrsync --archive --update --hard-links --delete --delete-after --delay-updates --timeout=600 ~/data/alpine/ root@192.168.1.20:/mnt/disk2t/data/alpine/\n\nrsync --archive --update --hard-links --timeout=600 --progress --exclude-from .rsyncignore rsync://mirrors.tuna.tsinghua.edu.cn/alpine/ ./\n\nrsync -auHP --timeout=600 --exclude edge --exclude 'v2.*' rsync://mirrors.tuna.tsinghua.edu.cn/alpine/ /alpine/mirror/\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"/etc/periodic/hourly/alpine-mirror"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'#!/bin/sh\n# make sure we never run 2 rsync at the same time\nlockfile="/tmp/alpine-mirror.lock"\nif [ -z "$flock" ] ; then\n  exec env flock=1 flock -n $lockfile "$0" "$@"\nfi\n\nsrc=rsync://rsync.alpinelinux.org/alpine/\ndest=/var/www/localhost/htdocs/alpine/\n\n# uncomment this to exclude old v2.x branches\n#exclude="--exclude v2.*"\n\nmkdir -p "$dest"\n/usr/bin/rsync \\\n        --archive \\\n        --update \\\n        --hard-links \\\n        --delete \\\n        --delete-after \\\n        --delay-updates \\\n        --timeout=600 \\\n        $exclude \\\n        "$src" "$dest"\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"chmod +x /etc/periodic/hourly/alpine-mirror\n"})}),"\n",(0,r.jsx)(e.h2,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(e.h3,{id:"\u624B\u52A8\u6307\u5B9A-dns",children:"\u624B\u52A8\u6307\u5B9A DNS"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\u76F4\u63A5\u4FEE\u6539 ",(0,r.jsx)(e.code,{children:"/etc/resolv.conf"})]}),"\n",(0,r.jsx)(e.li,{children:"\u4FEE\u6539\u7F51\u7EDC\u914D\u7F6E"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"iface eth0 inet static\n    address 192.168.3.3\n    netmask 255.255.255.0\n    gateway 192.168.3.1\n    dns-search example.com\n    dns-nameservers 223.5.5.5 114.114.114.114\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u8BE5\u547D\u4EE4\u6765\u6E90\u4E8E openresolv\nresolvconf -u\n"})})]})}function p(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},17776:function(n,e,s){s.d(e,{R:()=>a,x:()=>l});var i=s(7378);let r={},t=i.createContext(r);function a(n){let e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);