"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["892522"],{113061:function(s,e,n){n.r(e),n.d(e,{frontMatter:()=>t,toc:()=>m,default:()=>d,metadata:()=>a,assets:()=>r,contentTitle:()=>c});var a=JSON.parse('{"id":"ai/precision","title":"\u7CBE\u5EA6","description":"- \u7CBE\u5EA6 Precision","source":"@site/../notes/ai/precision.md","sourceDirName":"ai","slug":"/ai/precision","permalink":"/notes/ai/precision","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/ai/precision.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1763343334000,"frontMatter":{"title":"\u7CBE\u5EA6"},"sidebar":"docs","previous":{"title":"tesseract","permalink":"/notes/ai/ocr/tesseract"},"next":{"title":"AI Projects","permalink":"/notes/ai/projects"}}'),l=n(486106),i=n(917776);let t={title:"\u7CBE\u5EA6"},c="\u7CBE\u5EA6",r={},m=[];function h(s){let e={annotation:"annotation",h1:"h1",header:"header",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",mtext:"mtext",semantics:"semantics",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...s.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"\u7CBE\u5EA6",children:"\u7CBE\u5EA6"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7CBE\u5EA6 Precision"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"type"}),(0,l.jsx)(e.th,{children:"byte"}),(0,l.jsx)(e.th,{style:{textAlign:"right"},children:"dynamic"}),(0,l.jsx)(e.th,{children:"\u8BAD\u7EC3\u4E2D\u5E38\u89C1\u7528\u9014"}),(0,l.jsx)(e.th,{children:"GPU\u652F\u6301\u6027"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"FP64"}),(0,l.jsx)(e.td,{children:"8"}),(0,l.jsx)(e.td,{style:{textAlign:"right"},children:"\u6781\u9AD8\uFF08~10\xb3\u2070\u2078\uFF09"}),(0,l.jsx)(e.td,{children:"\u79D1\u5B66\u8BA1\u7B97\u3001\u6781\u7AEF\u7CBE\u5EA6\u9700\u6C42\uFF0C\u6781\u5C11\u7528\u4E8EDL\u8BAD\u7EC3"}),(0,l.jsx)(e.td,{children:"\u8F83\u5F31\uFF0C\u6027\u80FD\u4F4E"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"FP32"}),(0,l.jsx)(e.td,{children:"4"}),(0,l.jsx)(e.td,{style:{textAlign:"right"},children:"\u9AD8\uFF08~10\xb3\u2078\uFF09"}),(0,l.jsx)(e.td,{children:"\u4E2D\u5C0F\u578B\u6A21\u578B\u8BAD\u7EC3\uFF0C\u6DF7\u5408\u7CBE\u5EA6\u4E2D\u7684\u5173\u952E\u64CD\u4F5C"}),(0,l.jsx)(e.td,{children:"\u5E7F\u6CDB\u652F\u6301"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"FP16"}),(0,l.jsx)(e.td,{children:"2"}),(0,l.jsx)(e.td,{style:{textAlign:"right"},children:"\u4F4E\uFF08~10\u2074\uFF09"}),(0,l.jsx)(e.td,{children:"\u5927\u6A21\u578B\u8BAD\u7EC3\uFF08\u9700\u635F\u5931\u7F29\u653E\uFF09\uFF0C\u63A8\u7406\u4F18\u5316"}),(0,l.jsx)(e.td,{children:"Tensor Core \u52A0\u901F"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"BF16"}),(0,l.jsx)(e.td,{children:"2"}),(0,l.jsx)(e.td,{style:{textAlign:"right"},children:"\u9AD8\uFF08~10\xb3\u2078\uFF09"}),(0,l.jsx)(e.td,{children:"\u5927\u6A21\u578B\u8BAD\u7EC3\u4E3B\u6D41\uFF0C\u6570\u503C\u7A33\u5B9A"}),(0,l.jsx)(e.td,{children:"A100/H100 \u4F18\u5316"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"INT8"}),(0,l.jsx)(e.td,{children:"1"}),(0,l.jsx)(e.td,{style:{textAlign:"right"},children:"\u4F4E\uFF08~10\xb2\u2075\uFF09"}),(0,l.jsx)(e.td,{children:"\u91CF\u5316\u63A8\u7406\uFF0C\u6781\u5C0F\u6A21\u578B\u8BAD\u7EC3"}),(0,l.jsx)(e.td,{children:"\u8F83\u5F31\uFF0C\u6027\u80FD\u4F4E"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"INT4"}),(0,l.jsx)(e.td,{children:"0.5"}),(0,l.jsx)(e.td,{style:{textAlign:"right"},children:"\u4F4E\uFF08~10\xb9\xb2\uFF09"}),(0,l.jsx)(e.td,{children:"\u91CF\u5316\u63A8\u7406\uFF0C\u6781\u5C0F\u6A21\u578B\u8BAD\u7EC3"}),(0,l.jsx)(e.td,{children:"\u8F83\u5F31\uFF0C\u6027\u80FD\u4F4E"})]})]})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"FP64 - Double Precision \u53CC\u7CBE\u5EA6"}),"\n",(0,l.jsx)(e.li,{children:"FP32 - Single Precision \u5355\u7CBE\u5EA6"}),"\n",(0,l.jsx)(e.li,{children:"FP16 - Half Precision \u534A\u7CBE\u5EA6"}),"\n",(0,l.jsxs)(e.li,{children:["BF16 / Bfloat16\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Brain Floating Point 16-bit"}),"\n",(0,l.jsx)(e.li,{children:"by Google Brain"}),"\n",(0,l.jsx)(e.li,{children:"\u4FDD\u7559\u4E86 FP32 \u7684\u6307\u6570\u8303\u56F4\uFF088\u4F4D\u6307\u6570\uFF09\uFF0C\u51CF\u5C11\u5C3E\u6570\uFF087\u4F4D\uFF09"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Float\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"s \u7B26\u53F7\u4F4D\uFF08Sign bit\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"e \u6307\u6570\uFF08Exponent\uFF09"}),"\n",(0,l.jsx)(e.li,{children:"m \u5C3E\u6570\uFF08Mantissa\uFF0C\u6216\u79F0\u4E3A\u6709\u6548\u6570/\u5206\u6570\uFF09"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["nf4 - Normal Float 4-bit\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"4\u4F4D\u6D6E\u70B9\u6570\u8868\u793A\uFF0C\u901A\u5E38\u7528\u4E8E\u6781\u4F4E\u7CBE\u5EA6\u7684\u91CF\u5316\u63A8\u7406"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.span,{className:"katex-display",children:(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mtext,{children:"FP"}),(0,l.jsx)(e.mo,{children:"="}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mo,{children:"\u2212"}),(0,l.jsx)(e.mn,{children:"1"}),(0,l.jsxs)(e.msup,{children:[(0,l.jsx)(e.mo,{stretchy:"false",children:")"}),(0,l.jsx)(e.mi,{children:"s"})]}),(0,l.jsx)(e.mo,{children:"\xd7"}),(0,l.jsxs)(e.msup,{children:[(0,l.jsx)(e.mn,{children:"2"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mo,{children:"\u2212"}),(0,l.jsx)(e.mtext,{children:"Bias"})]})]}),(0,l.jsx)(e.mo,{children:"\xd7"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mn,{children:"1"}),(0,l.jsx)(e.mo,{children:"+"}),(0,l.jsx)(e.mi,{children:"m"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{FP} = (-1)^s \\times 2^{e-\\text{Bias}} \\times (1 + m)"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,l.jsx)(e.span,{className:"mord text",children:(0,l.jsx)(e.span,{className:"mord",children:"FP"})}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"="}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord",children:"\u2212"}),(0,l.jsx)(e.span,{className:"mord",children:"1"}),(0,l.jsxs)(e.span,{className:"mclose",children:[(0,l.jsx)(e.span,{className:"mclose",children:")"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsx)(e.span,{className:"vlist-t",children:(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.7144em"},children:(0,l.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"s"})})]})})})})})]}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.9747em",verticalAlign:"-0.0833em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord",children:"2"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsx)(e.span,{className:"vlist-t",children:(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.8913em"},children:(0,l.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"e"}),(0,l.jsx)(e.span,{className:"mbin mtight",children:"\u2212"}),(0,l.jsx)(e.span,{className:"mord text mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"Bias"})})]})})]})})})})})]}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord",children:"1"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"+"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"m"}),(0,l.jsx)(e.span,{className:"mclose",children:")"})]})]})]})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["1 + m\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u66F4\u660E\u786E\u5730\u5206\u5F00\u9690\u542B\u4F4D\uFF081\uFF09\u548C\u5B58\u50A8\u7684\u5C0F\u6570\u90E8\u5206\uFF08m\uFF09"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.span,{className:"katex-display",children:(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mtext,{children:"FP32"}),(0,l.jsx)(e.mo,{children:"="}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mo,{children:"\u2212"}),(0,l.jsx)(e.mn,{children:"1"}),(0,l.jsxs)(e.msup,{children:[(0,l.jsx)(e.mo,{stretchy:"false",children:")"}),(0,l.jsx)(e.mi,{children:"s"})]}),(0,l.jsx)(e.mo,{children:"\xd7"}),(0,l.jsxs)(e.msup,{children:[(0,l.jsx)(e.mn,{children:"2"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mo,{children:"\u2212"}),(0,l.jsx)(e.mn,{children:"127"})]})]}),(0,l.jsx)(e.mo,{children:"\xd7"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mn,{children:"1"}),(0,l.jsx)(e.mo,{children:"+"}),(0,l.jsx)(e.mi,{children:"m"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{FP32} = (-1)^s \\times 2^{e - 127} \\times (1 + m)"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,l.jsx)(e.span,{className:"mord text",children:(0,l.jsx)(e.span,{className:"mord",children:"FP32"})}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"="}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord",children:"\u2212"}),(0,l.jsx)(e.span,{className:"mord",children:"1"}),(0,l.jsxs)(e.span,{className:"mclose",children:[(0,l.jsx)(e.span,{className:"mclose",children:")"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsx)(e.span,{className:"vlist-t",children:(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.7144em"},children:(0,l.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"s"})})]})})})})})]}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.9474em",verticalAlign:"-0.0833em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord",children:"2"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsx)(e.span,{className:"vlist-t",children:(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.8641em"},children:(0,l.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsxs)(e.span,{className:"mord mtight",children:[(0,l.jsx)(e.span,{className:"mord mathnormal mtight",children:"e"}),(0,l.jsx)(e.span,{className:"mbin mtight",children:"\u2212"}),(0,l.jsx)(e.span,{className:"mord mtight",children:"127"})]})})]})})})})})]}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord",children:"1"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"+"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"m"}),(0,l.jsx)(e.span,{className:"mclose",children:")"})]})]})]})})]})}function d(s={}){let{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,l.jsx)(e,{...s,children:(0,l.jsx)(h,{...s})}):h(s)}},917776:function(s,e,n){n.d(e,{R:()=>t,x:()=>c});var a=n(7378);let l={},i=a.createContext(l);function t(s){let e=a.useContext(i);return a.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function c(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(l):s.components||l:t(s.components),a.createElement(i.Provider,{value:e},s.children)}}}]);