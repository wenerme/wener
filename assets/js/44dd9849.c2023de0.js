"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["8890"],{84844:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>h,default:()=>d,metadata:()=>s,assets:()=>a,contentTitle:()=>r});var s=JSON.parse('{"id":"ai/ml/huggingface","title":"Hugging Face","description":"- HF_HOME","source":"@site/../notes/ai/ml/huggingface.md","sourceDirName":"ai/ml","slug":"/ai/ml/huggingface","permalink":"/notes/ai/ml/huggingface","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/ai/ml/huggingface.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1757294976000,"frontMatter":{"title":"Hugging Face"},"sidebar":"docs","previous":{"title":"GGML","permalink":"/notes/ai/ml/gguf"},"next":{"title":"JAX","permalink":"/notes/ai/ml/jax"}}'),l=i(86106),c=i(17776);let t={title:"Hugging Face"},r="Hugging Face",a={},h=[{value:"API",id:"api",level:2},{value:"Cache",id:"cache",level:2},{value:"Inference",id:"inference",level:2},{value:"modelscope",id:"modelscope",level:2},{value:"Notes",id:"notes",level:2},{value:"The model Qwen/Qwen2.5-VL-72B-Instruct is too large to be loaded automatically (146GB &gt; 10GB).",id:"the-model-qwenqwen25-vl-72b-instruct-is-too-large-to-be-loaded-automatically-146gb--10gb",level:2},{value:"You are trying to access a gated repo.",id:"you-are-trying-to-access-a-gated-repo",level:2}];function o(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"hugging-face",children:"Hugging Face"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"HF_HOME"}),"\n",(0,l.jsx)(n.li,{children:"git lfs"}),"\n",(0,l.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://huggingface.co/pricing",children:"https://huggingface.co/pricing"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["XET Storage\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://huggingface.co/xet-team",children:"https://huggingface.co/xet-team"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://xethub.com/",children:"https://xethub.com/"})}),"\n",(0,l.jsx)(n.li,{children:"transfer.xethub.hf.co - CloudFront, \u80FD\u76F4\u8054"}),"\n",(0,l.jsx)(n.li,{children:"cas-server.xethub.hf.co"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Pro ",(0,l.jsx)(n.a,{href:"https://huggingface.co/subscribe/pro",children:"https://huggingface.co/subscribe/pro"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"$9.00 / month"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"brew install huggingface-cli\npip install huggingface_hub\n\nhuggingface-cli download gpt2 config.json model.safetensors # \u4E0B\u8F7D\u5355\u4E2A\u6587\u4EF6\nhuggingface-cli download Qwen/Qwen2.5-VL-7B-Instruct        # \u4E0B\u8F7D\u6A21\u578B\n\n# ~/.cache/huggingface/stored_tokens\nhuggingface-cli login\nhuggingface-cli whoami\n\nuvx --from huggingface_hub huggingface-cli\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"--repo-type dataset"}),"\n",(0,l.jsx)(n.li,{children:"--repo-type space"}),"\n",(0,l.jsx)(n.li,{children:"--revision v1.1"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://huggingface.co/docs/huggingface_hub/en/package_reference/environment_variables",children:"https://huggingface.co/docs/huggingface_hub/en/package_reference/environment_variables"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://huggingface.co/docs/hub/en/api",children:"https://huggingface.co/docs/hub/en/api"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/huggingface/huggingface.js",children:"https://github.com/huggingface/huggingface.js"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"cache",children:"Cache"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"HF_DATASETS_CACHE"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"~/.cache/huggingface/hub"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"~/.cache/huggingface/hub/models--<username>--<modelname>/"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"blobs/"}),"\n",(0,l.jsx)(n.li,{children:"refs/"}),"\n",(0,l.jsx)(n.li,{children:"snapshots/"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://huggingface.co/docs/datasets/en/cache",children:"https://huggingface.co/docs/datasets/en/cache"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"inference",children:"Inference"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-py",children:'from huggingface_hub import InferenceClient\n\nclient = InferenceClient(\n  provider="hyperbolic",\n  api_key="hf_",\n)\n\nmessages = [\n  {\n    "role": "user",\n    "content": [\n      {\n        "type": "text",\n        "text": "Describe this image in one sentence."\n      },\n      {\n        "type": "image_url",\n        "image_url": {\n          "url": "https://cdn.britannica.com/61/93061-050-99147DCE/Statue-of-Liberty-Island-New-York-Bay.jpg"\n        }\n      }\n    ]\n  }\n]\n\ncompletion = client.chat.completions.create(\n  model="Qwen/Qwen2.5-VL-72B-Instruct",\n  messages=messages,\n  max_tokens=500,\n)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"modelscope",children:"modelscope"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u56FD\u5185\u955C\u50CF\u4E0B\u8F7D HF Repo\npip install modelscope\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"cache_dir= ~/.cache/modelscope/hub"}),"\n",(0,l.jsx)(n.li,{children:"allow_patterns"}),"\n",(0,l.jsx)(n.li,{children:"ignore_patterns"}),"\n",(0,l.jsx)(n.li,{children:"--include"}),"\n",(0,l.jsx)(n.li,{children:"--exclude"}),"\n",(0,l.jsxs)(n.li,{children:["\u6A21\u578B\u7F13\u5B58\u76EE\u5F55\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"cache_dir/MODEL_ID/THE_MODEL_FILES"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"config.json"}),"\n",(0,l.jsx)(n.li,{children:"chat_template.json"}),"\n",(0,l.jsx)(n.li,{children:"vocab.json"}),"\n",(0,l.jsx)(n.li,{children:"tokenizer.json"}),"\n",(0,l.jsx)(n.li,{children:"tokenizer_config.json"}),"\n"]}),"\n",(0,l.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,l.jsx)(n.h2,{id:"the-model-qwenqwen25-vl-72b-instruct-is-too-large-to-be-loaded-automatically-146gb--10gb",children:"The model Qwen/Qwen2.5-VL-72B-Instruct is too large to be loaded automatically (146GB > 10GB)."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"InferenceClient \u6307\u5B9A Provider"}),"\n",(0,l.jsx)(n.li,{children:"serverless inference API,"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"you-are-trying-to-access-a-gated-repo",children:"You are trying to access a gated repo."}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u540C\u610F Model \u6761\u6B3E"}),"\n",(0,l.jsx)(n.li,{children:"\u751F\u6210 Token"}),"\n",(0,l.jsx)(n.li,{children:"HF \u767B\u5F55"}),"\n",(0,l.jsx)(n.li,{children:"\u4E0B\u8F7D\u6A21\u578B"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Please enable access to public gated repositories in your fine-grained token settings to view this repository\n\nWe couldn't connect to 'https://huggingface.co' to load this file\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8C03\u6574 Token \u6743\u9650"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://huggingface.co/docs/hub/en/models-gated#access-gated-models-as-a-user",children:"https://huggingface.co/docs/hub/en/models-gated#access-gated-models-as-a-user"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-py",children:"from huggingface_hub import login\nlogin()\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Jupyter Notebook"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-py",children:"from huggingface_hub import notebook_login\nnotebook_login()\n"})})]})}function d(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},17776:function(e,n,i){i.d(n,{R:()=>t,x:()=>r});var s=i(7378);let l={},c=s.createContext(l);function t(e){let n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);