"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["339954"],{936477:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>d,toc:()=>h,default:()=>x,metadata:()=>r,assets:()=>t,contentTitle:()=>c});var r=JSON.parse('{"id":"dev/design/api/design-api-filter","title":"Filter","description":"- \u51CF\u5C11\u63A5\u53E3\u6570\u91CF - \u63D0\u5347\u5F00\u53D1\u6548\u7387","source":"@site/../notes/dev/design/api/design-api-filter.md","sourceDirName":"dev/design/api","slug":"/dev/design/api/filter","permalink":"/notes/dev/design/api/filter","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/dev/design/api/design-api-filter.md","tags":[{"inline":true,"label":"Filter","permalink":"/notes/tags/filter"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1754277663000,"frontMatter":{"tags":["Filter"]},"sidebar":"docs","previous":{"title":"FAQ","permalink":"/notes/dev/design/api/faq"},"next":{"title":"AI LLM API","permalink":"/notes/dev/design/api/llm"}}'),l=s(486106),i=s(917776);let d={tags:["Filter"]},c="Filter",t={},h=[{value:"mongodb",id:"mongodb",level:2},{value:"mikro-orm",id:"mikro-orm",level:2},{value:"hasura",id:"hasura",level:2},{value:"supabase",id:"supabase",level:2},{value:"Condition vs Filter",id:"condition-vs-filter",level:2}];function a(n){let e={a:"a",admonition:"admonition",annotation:"annotation",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"filter",children:"Filter"})}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u51CF\u5C11\u63A5\u53E3\u6570\u91CF - \u63D0\u5347\u5F00\u53D1\u6548\u7387"}),"\n",(0,l.jsx)(e.li,{children:"\u589E\u52A0\u4E1A\u52A1\u7075\u6D3B\u6027 - \u4E1A\u52A1\u53D8\u5316\u63A5\u53E3\u4E0D\u53D8"}),"\n",(0,l.jsx)(e.li,{children:"Query - Source + Selector + Filter + Sort + Pagination"}),"\n",(0,l.jsx)(e.li,{children:"Condition == Filter"}),"\n"]})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"JSON Path"}),"\n",(0,l.jsx)(e.li,{children:"XML Path/XPath"}),"\n",(0,l.jsxs)(e.li,{children:["SQL Like/DSL\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Google Charts \u67E5\u8BE2\u8BED\u8A00\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://developers.google.com/chart/interactive/docs/querylanguage",children:"https://developers.google.com/chart/interactive/docs/querylanguage"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://wener.me/notes/languages/miniquery",children:"MiniQuery"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5141\u8BB8\u524D\u7AEF\u76F4\u63A5\u4F20\u7C7B\u4F3C where \u7684\u8BED\u53E5\uFF0C\u540E\u7AEF\u91CD\u5199\u4E3A\u5B89\u5168\u7684\u67E5\u8BE2\u8FC7\u6EE4"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/wenerme/js-miniquery",children:"wenerme/js-miniquery"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["AIP-160\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"field > 1"})}),"\n",(0,l.jsx)(e.li,{children:"\u5B57\u6BB5\u5728\u5DE6\u8FB9"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Document Query Language / JSON Query DSL\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528 JSON/Object \u4F5C\u4E3A\u67E5\u8BE2\u6761\u4EF6"}),"\n",(0,l.jsx)(e.li,{children:"Apache Solr"}),"\n",(0,l.jsxs)(e.li,{children:["Druid\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://druid.apache.org/docs/latest/api-reference/json-querying-api/",children:"https://druid.apache.org/docs/latest/api-reference/json-querying-api/"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["MikroORM\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mikro-orm.io/docs/query-conditions",children:"https://mikro-orm.io/docs/query-conditions"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mikro-orm.io/docs/query-builder",children:"https://mikro-orm.io/docs/query-builder"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["CouchDB\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://docs.couchdb.org/en/stable/api/database/find.html",children:"https://docs.couchdb.org/en/stable/api/database/find.html"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["MongoDB\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/operator/query/",children:"https://www.mongodb.com/docs/manual/reference/operator/query/"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/tutorial/query-documents/",children:"https://www.mongodb.com/docs/manual/tutorial/query-documents/"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Elasticsearch\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html",children:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html",children:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/stalniy/casl",children:"https://github.com/stalniy/casl"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Query Builder\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"SDK/API - \u4E0D\u76F4\u63A5\u66B4\u9732\u6570\u636E\u7ED3\u6784"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://firebase.google.com/docs/firestore/query-data/queries",children:"https://firebase.google.com/docs/firestore/query-data/queries"})}),"\n",(0,l.jsx)(e.li,{children:"knex"}),"\n",(0,l.jsx)(e.li,{children:"QueryDSL"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["PostgREST\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"GET /people?age=gte.18&student=is.true HTTP/1.1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"age=gte.18"})," -> ",(0,l.jsx)(e.code,{children:"age > 18"})]}),"\n",(0,l.jsx)(e.li,{children:"\u901A\u8FC7\u64CD\u4F5C\u8FC7\u6EE4"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"GET /people?or=(age.lt.18,age.gt.21) HTTP/1.1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"age < 18 OR age > 21"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://learn.microsoft.com/en-us/kusto/",children:"kusto"})," query language / KQL"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/stalniy/ucast",children:"stalniy/ucast"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Universal Conditions AST"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"@ucast/js"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"@ucast/mongo2js"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"@ucast/sql"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"@ucast/mongo"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Condition\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"{field,op,value}"})}),"\n",(0,l.jsx)(e.li,{children:"Triple"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["AST\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5728 Condition \u57FA\u7840\u4E0A\u589E\u52A0\u903B\u8F91\u8FD0\u7B97\u7B26\u3001\u5206\u7EC4\u7B49"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"and"}),", ",(0,l.jsx)(e.code,{children:"or"}),", ",(0,l.jsx)(e.code,{children:"not"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Query Document / DSL\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"{ field: { $op: value } }"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"mongodb",children:"mongodb"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"Query"}),(0,l.jsx)(e.th,{children:"Desc"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u6BD4\u8F83\u8FD0\u7B97\u7B26"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$eq"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$gt"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5927\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$gte"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5927\u4E8E\u6216\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$in"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u6570\u7EC4\u4E2D\u6307\u5B9A\u7684\u4EFB\u4F55\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$lt"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5C0F\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$lte"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5C0F\u4E8E\u6216\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$ne"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u4E0D\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u6240\u6709\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$nin"})}),(0,l.jsx)(e.td,{children:"\u4E0D\u5339\u914D\u6570\u7EC4\u4E2D\u6307\u5B9A\u7684\u4EFB\u4F55\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u903B\u8F91\u8FD0\u7B97\u7B26"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$and"})}),(0,l.jsx)(e.td,{children:"\u4F7F\u7528\u903B\u8F91 AND \u8FDE\u63A5\u67E5\u8BE2\u5B50\u53E5\uFF0C\u8FD4\u56DE\u7B26\u5408\u6240\u6709\u5B50\u53E5\u6761\u4EF6\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$not"})}),(0,l.jsx)(e.td,{children:"\u53CD\u8F6C\u67E5\u8BE2\u8868\u8FBE\u5F0F\u7684\u6548\u679C\uFF0C\u8FD4\u56DE\u4E0D\u7B26\u5408\u67E5\u8BE2\u8868\u8FBE\u5F0F\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$nor"})}),(0,l.jsx)(e.td,{children:"\u4F7F\u7528\u903B\u8F91 NOR \u8FDE\u63A5\u67E5\u8BE2\u5B50\u53E5\uFF0C\u8FD4\u56DE\u4E0D\u7B26\u5408\u6240\u6709\u5B50\u53E5\u6761\u4EF6\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$or"})}),(0,l.jsx)(e.td,{children:"\u4F7F\u7528\u903B\u8F91 OR \u8FDE\u63A5\u67E5\u8BE2\u5B50\u53E5\uFF0C\u8FD4\u56DE\u7B26\u5408\u4EFB\u4E00\u5B50\u53E5\u6761\u4EF6\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u5143\u7D20\u8FD0\u7B97\u7B26"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$exists"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5177\u6709\u6307\u5B9A\u5B57\u6BB5\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$type"})}),(0,l.jsx)(e.td,{children:"\u9009\u62E9\u5B57\u6BB5\u7C7B\u578B\u4E3A\u6307\u5B9A\u7C7B\u578B\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u8BC4\u4F30\u8FD0\u7B97\u7B26"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$expr"})}),(0,l.jsx)(e.td,{children:"\u5141\u8BB8\u5728\u67E5\u8BE2\u8BED\u8A00\u4E2D\u4F7F\u7528\u805A\u5408\u8868\u8FBE\u5F0F\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$jsonSchema"})}),(0,l.jsx)(e.td,{children:"\u6839\u636E\u7ED9\u5B9A\u7684 JSON Schema \u9A8C\u8BC1\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$mod"})}),(0,l.jsx)(e.td,{children:"\u5BF9\u5B57\u6BB5\u503C\u8FDB\u884C\u6A21\u8FD0\u7B97\uFF0C\u5E76\u9009\u62E9\u5177\u6709\u6307\u5B9A\u7ED3\u679C\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$regex"})}),(0,l.jsx)(e.td,{children:"\u9009\u62E9\u503C\u5339\u914D\u6307\u5B9A\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$text"})}),(0,l.jsx)(e.td,{children:"\u6267\u884C\u6587\u672C\u641C\u7D22\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$where"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u6EE1\u8DB3 JavaScript \u8868\u8FBE\u5F0F\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u5730\u7406\u7A7A\u95F4"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$geoIntersects"})}),(0,l.jsx)(e.td,{children:"\u9009\u62E9\u4E0E GeoJSON \u51E0\u4F55\u56FE\u5F62\u76F8\u4EA4\u7684\u51E0\u4F55\u56FE\u5F62\u30022dsphere \u7D22\u5F15\u652F\u6301 $geoIntersects\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$geoWithin"})}),(0,l.jsx)(e.td,{children:"\u9009\u62E9\u8FB9\u754C GeoJSON \u51E0\u4F55\u56FE\u5F62\u5185\u7684\u51E0\u4F55\u56FE\u5F62\u30022dsphere \u548C 2d \u7D22\u5F15\u652F\u6301 $geoWithin\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$near"})}),(0,l.jsx)(e.td,{children:"\u8FD4\u56DE\u63A5\u8FD1\u67D0\u70B9\u7684\u5730\u7406\u7A7A\u95F4\u5BF9\u8C61\u3002\u9700\u8981\u5730\u7406\u7A7A\u95F4\u7D22\u5F15\u30022dsphere \u548C 2d \u7D22\u5F15\u652F\u6301 $near\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$nearSphere"})}),(0,l.jsx)(e.td,{children:"\u8FD4\u56DE\u63A5\u8FD1\u7403\u9762\u4E0A\u67D0\u70B9\u7684\u5730\u7406\u7A7A\u95F4\u5BF9\u8C61\u3002\u9700\u8981\u5730\u7406\u7A7A\u95F4\u7D22\u5F15\u30022dsphere \u548C 2d \u7D22\u5F15\u652F\u6301 $nearSphere\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u6570\u7EC4\u8FD0\u7B97\u7B26"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$all"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5305\u542B\u67E5\u8BE2\u4E2D\u6307\u5B9A\u7684\u6240\u6709\u5143\u7D20\u7684\u6570\u7EC4\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$elemMatch"})}),(0,l.jsx)(e.td,{children:"\u5982\u679C\u6570\u7EC4\u5B57\u6BB5\u4E2D\u7684\u5143\u7D20\u5339\u914D\u6240\u6709\u6307\u5B9A\u7684 $elemMatch \u6761\u4EF6\uFF0C\u5219\u9009\u62E9\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$size"})}),(0,l.jsx)(e.td,{children:"\u9009\u62E9\u6570\u7EC4\u5B57\u6BB5\u5927\u5C0F\u4E3A\u6307\u5B9A\u503C\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u4F4D\u8FD0\u7B97\u7B26"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$bitsAllClear"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u4E00\u7EC4\u4F4D\u4F4D\u7F6E\u90FD\u4E3A 0 \u7684\u6570\u5B57\u6216\u4E8C\u8FDB\u5236\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$bitsAllSet"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u4E00\u7EC4\u4F4D\u4F4D\u7F6E\u90FD\u4E3A 1 \u7684\u6570\u5B57\u6216\u4E8C\u8FDB\u5236\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$bitsAnyClear"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u4E00\u7EC4\u4F4D\u4F4D\u7F6E\u4E2D\u4EFB\u4F55\u4E00\u4F4D\u4E3A 0 \u7684\u6570\u5B57\u6216\u4E8C\u8FDB\u5236\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$bitsAnySet"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u4E00\u7EC4\u4F4D\u4F4D\u7F6E\u4E2D\u4EFB\u4F55\u4E00\u4F4D\u4E3A 1 \u7684\u6570\u5B57\u6216\u4E8C\u8FDB\u5236\u503C\u3002"})]})]})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Query & Projection\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Comparison Query - ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mi,{children:"q"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"eq, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"gt, ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"g"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"gte, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8095em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"in, ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"l"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"lt, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"lt"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"lte, ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"ne, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"nin"]}),"\n",(0,l.jsxs)(e.li,{children:["Logical Query - ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"a"}),(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{children:"d"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"and, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"an"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"not, ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"n"}),(0,l.jsx)(e.mi,{children:"o"}),(0,l.jsx)(e.mi,{children:"r"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"nor, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"or"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"or"]}),"\n",(0,l.jsxs)(e.li,{children:["Element Query - ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mi,{children:"x"}),(0,l.jsx)(e.mi,{children:"i"}),(0,l.jsx)(e.mi,{children:"s"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mi,{children:"s"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"exists, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"type"]}),"\n",(0,l.jsxs)(e.li,{children:["Evaluation Query - ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mi,{children:"x"}),(0,l.jsx)(e.mi,{children:"p"}),(0,l.jsx)(e.mi,{children:"r"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"expr, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"jsonSchema, ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"m"}),(0,l.jsx)(e.mi,{children:"o"}),(0,l.jsx)(e.mi,{children:"d"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"mod, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"m"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"o"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"regex, ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mi,{children:"x"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"text, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8095em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"where"]}),"\n",(0,l.jsx)(e.li,{children:"Geospatial Query"}),"\n",(0,l.jsxs)(e.li,{children:["Array Query - ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"a"}),(0,l.jsx)(e.mi,{children:"l"}),(0,l.jsx)(e.mi,{children:"l"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"all, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"ll"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"elemMatch, $size"]}),"\n",(0,l.jsx)(e.li,{children:"Bitwise Query"}),"\n",(0,l.jsxs)(e.li,{children:["Projection - ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsx)(e.mo,{separator:"true",children:","})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:", "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.3em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"elemMatch, $slice"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["$expr - MongoDB 3.6+, 2018+\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5B57\u6BB5\u6BD4\u8F83"}),"\n",(0,l.jsx)(e.li,{children:"\u8BA1\u7B97"}),"\n",(0,l.jsx)(e.li,{children:"\u590D\u6742\u7B5B\u9009\u903B\u8F91"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/operator/query/expr/",children:"https://www.mongodb.com/docs/manual/reference/operator/query/expr/"})}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mi,{children:"q"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"eq, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"lt, ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"l"}),(0,l.jsx)(e.mi,{children:"t"}),(0,l.jsx)(e.mi,{children:"e"}),(0,l.jsx)(e.mo,{separator:"true",children:","})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"lte, "})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"lt"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(e.span,{className:"mpunct",children:","})]})})]}),"gt, $gte"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"db.monthlyBudget.find({ $expr: { $gt: ['$spent', '$budget'] } });\n// \u641C\u7D22 / FTS\ndb.article.find({ $text: { $search: 'groceries' } });\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/operator/query/",children:"https://www.mongodb.com/docs/manual/reference/operator/query/"})}),"\n",(0,l.jsxs)(e.li,{children:["\u805A\u5408\u64CD\u4F5C ",(0,l.jsx)(e.a,{href:"https://www.mongodb.com/docs/manual/reference/operator/aggregation/",children:"https://www.mongodb.com/docs/manual/reference/operator/aggregation/"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"mikro-orm",children:"mikro-orm"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u64CD\u4F5C\u7B26"}),(0,l.jsx)(e.th,{children:"SQL"}),(0,l.jsx)(e.th,{children:"\u63CF\u8FF0"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u6BD4\u8F83"})}),(0,l.jsx)(e.td,{}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$eq"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"="})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$gt"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:">"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5927\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$gte"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:">="})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5927\u4E8E\u6216\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$in"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"IN"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u6570\u7EC4\u4E2D\u6307\u5B9A\u7684\u4EFB\u4F55\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$lt"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"<"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5C0F\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$lte"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"<="})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u5C0F\u4E8E\u6216\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$ne"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"<>"})}),(0,l.jsx)(e.td,{children:"\u5339\u914D\u4E0D\u7B49\u4E8E\u6307\u5B9A\u503C\u7684\u6240\u6709\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$nin"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"NOT IN"})}),(0,l.jsx)(e.td,{children:"\u4E0D\u5339\u914D\u6570\u7EC4\u4E2D\u6307\u5B9A\u7684\u4EFB\u4F55\u503C\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$like"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"LIKE"})}),(0,l.jsx)(e.td,{children:"\u4F7F\u7528 LIKE \u64CD\u4F5C\u7B26\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$re"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"REGEXP"})}),(0,l.jsx)(e.td,{children:"\u4F7F\u7528 REGEXP \u64CD\u4F5C\u7B26\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$fulltext"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"FULL TEXT"})}),(0,l.jsx)(e.td,{children:"\u4F7F\u7528\u9A71\u52A8\u7279\u5B9A\u7684\u5168\u6587\u641C\u7D22\u529F\u80FD\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$ilike"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"ILIKE"})}),(0,l.jsx)(e.td,{children:"\u4EC5\u9650 PostgreSQL\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$overlap"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"&&"})}),(0,l.jsx)(e.td,{children:"\u4EC5\u9650 PostgreSQL\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$contains"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"@>"})}),(0,l.jsx)(e.td,{children:"\u4EC5\u9650 PostgreSQL\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$contained"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"<@"})}),(0,l.jsx)(e.td,{children:"\u4EC5\u9650 PostgreSQL\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$hasKey"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"?"})}),(0,l.jsx)(e.td,{children:"\u4EC5\u9650 PostgreSQL\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$hasSomeKeys"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"?|"})}),(0,l.jsx)(e.td,{children:"\u4EC5\u9650 PostgreSQL\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$hasKeys"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"?&"})}),(0,l.jsx)(e.td,{children:"\u4EC5\u9650 PostgreSQL\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u903B\u8F91"})}),(0,l.jsx)(e.td,{}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$and"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"AND"})}),(0,l.jsx)(e.td,{children:"\u7528\u903B\u8F91 AND \u8FDE\u63A5\u67E5\u8BE2\u5B50\u53E5\uFF0C\u8FD4\u56DE\u7B26\u5408\u4E24\u4E2A\u5B50\u53E5\u6761\u4EF6\u7684\u6240\u6709\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$not"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"NOT"})}),(0,l.jsx)(e.td,{children:"\u53CD\u8F6C\u67E5\u8BE2\u8868\u8FBE\u5F0F\u7684\u6548\u679C\uFF0C\u8FD4\u56DE\u4E0D\u7B26\u5408\u67E5\u8BE2\u8868\u8FBE\u5F0F\u7684\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$or"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"OR"})}),(0,l.jsx)(e.td,{children:"\u7528\u903B\u8F91 OR \u8FDE\u63A5\u67E5\u8BE2\u5B50\u53E5\uFF0C\u8FD4\u56DE\u7B26\u5408\u4EFB\u4E00\u5B50\u53E5\u6761\u4EF6\u7684\u6240\u6709\u6587\u6863\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.strong,{children:"\u96C6\u5408"})}),(0,l.jsx)(e.td,{}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$some"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"= ANY"})}),(0,l.jsx)(e.td,{children:"\u67E5\u627E\u81F3\u5C11\u6709\u4E00\u6761\u8BB0\u5F55\u7B26\u5408\u6761\u4EF6\u7684\u96C6\u5408\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$none"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"<> ANY"})}),(0,l.jsx)(e.td,{children:"\u67E5\u627E\u6CA1\u6709\u4EFB\u4F55\u8BB0\u5F55\u7B26\u5408\u6761\u4EF6\u7684\u96C6\u5408\u3002"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$every"})}),(0,l.jsx)(e.td,{}),(0,l.jsx)(e.td,{children:"\u67E5\u627E\u6240\u6709\u8BB0\u5F55\u5747\u7B26\u5408\u6761\u4EF6\u7684\u96C6\u5408\u3002"})]})]})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:"const query = [\n  //\n  { [sql`(select ${1} = ${1})`]: [] },\n  { [raw('length(perex)')]: { $gt: 10000 } },\n  { [sql`lower(name)`]: name.toLowerCase() },\n  { time: sql`now()` },\n  { [raw((alias) => `lower(${alias}.name)`)]: name.toLowerCase() },\n  // \u51FD\u6570\n  { [sql.upper('title')]: 'TITLE' },\n  // \u5B57\u6BB5\u5F15\u7528\n  { foo: sql.ref('bar') },\n];\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mikro-orm.io/docs/query-conditions",children:"https://mikro-orm.io/docs/query-conditions"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mikro-orm.io/docs/raw-queries",children:"https://mikro-orm.io/docs/raw-queries"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"hasura",children:"hasura"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7C7B\u4F3C mongo \u7684\u8BED\u6CD5"}),"\n",(0,l.jsxs)(e.li,{children:["\u4F7F\u7528 ",(0,l.jsx)(e.code,{children:"_"})," \u524D\u7F00 - ",(0,l.jsx)(e.code,{children:"$"})," \u5728 graphql \u91CC\u8868\u793A\u53D8\u91CF"]}),"\n",(0,l.jsxs)(e.li,{children:["Equality - ",(0,l.jsx)(e.code,{children:"_eq"}),", ",(0,l.jsx)(e.code,{children:"_neq"})]}),"\n",(0,l.jsxs)(e.li,{children:["Greater than or less than - ",(0,l.jsx)(e.code,{children:"_gt"}),", ",(0,l.jsx)(e.code,{children:"_lt"}),", ",(0,l.jsx)(e.code,{children:"_gte"}),", ",(0,l.jsx)(e.code,{children:"_lte"})]}),"\n",(0,l.jsxs)(e.li,{children:["List based search - ",(0,l.jsx)(e.code,{children:"_in"})]}),"\n",(0,l.jsxs)(e.li,{children:["Filter or check for null - ",(0,l.jsx)(e.code,{children:"_is_null"})]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"_not"})}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"_and"}),", ",(0,l.jsx)(e.code,{children:"_or"})]}),"\n",(0,l.jsxs)(e.li,{children:["Text - ",(0,l.jsx)(e.code,{children:"_like"}),", ",(0,l.jsx)(e.code,{children:"_nlike"}),", ",(0,l.jsx)(e.code,{children:"_ilike"}),", ",(0,l.jsx)(e.code,{children:"_nilike"}),", ",(0,l.jsx)(e.code,{children:"_similar"}),", ",(0,l.jsx)(e.code,{children:"_nsimilar"}),", ",(0,l.jsx)(e.code,{children:"_regex"}),", ",(0,l.jsx)(e.code,{children:"_nregex"}),", ",(0,l.jsx)(e.code,{children:"_iregex"}),", ",(0,l.jsx)(e.code,{children:"_niregex"})]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"_cast"})," - ",(0,l.jsx)(e.code,{children:'where:{ address: {_cast: {String: {_ilike: "%bengaluru%"}}} }'})]}),"\n",(0,l.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://hasura.io/docs/3.0/graphql-api/queries/filters/index/",children:"https://hasura.io/docs/3.0/graphql-api/queries/filters/index/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"supabase",children:"supabase"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Operator\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"eq, neq, gt, gte, in, lt, lte, is, startsWith, like, ilike, regex, iregex"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://supabase.com/docs/guides/graphql/api",children:"https://supabase.com/docs/guides/graphql/api"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-graphql",children:'input BlogFilter {\n  nodeId: IDFilter\n  id: IntFilter\n  name: StringFilter\n  description: StringFilter\n  createdAt: DatetimeFilter\n  updatedAt: DatetimeFilter\n  and: [BlogFilter!]\n  or: [BlogFilter!]\n  not: BlogFilter\n}\n\n"""\n\u67E5\u8BE2\u6570\u636E\u7684\u6839\u7C7B\u578B\n"""\ntype Query {\n  """\n  \u53EF\u5206\u9875\u7684`Blog`\u7C7B\u578B\u96C6\u5408\n  """\n  blogCollection(\n    """\n    \u67E5\u8BE2\u96C6\u5408\u4E2D\u7684\u524D`n`\u4E2A\u8BB0\u5F55\n    """\n    first: Int\n\n    """\n    \u67E5\u8BE2\u96C6\u5408\u4E2D\u7684\u540E`n`\u4E2A\u8BB0\u5F55\n    """\n    last: Int\n\n    """\n    \u67E5\u8BE2\u63D0\u4F9B\u7684\u6E38\u6807\u4E4B\u524D\u7684\u96C6\u5408\u4E2D\u7684\u503C\n    """\n    before: Cursor\n\n    """\n    \u67E5\u8BE2\u63D0\u4F9B\u7684\u6E38\u6807\u4E4B\u540E\u7684\u96C6\u5408\u4E2D\u7684\u503C\n    """\n    after: Cursor\n\n    """\n    \u4ECE\u6E38\u6807\u540E\u8DF3\u8FC7n\u4E2A\u503C\u3002\u6E38\u6807\u5206\u9875\u7684\u66FF\u4EE3\u65B9\u6848\u3002\u4E0D\u652F\u6301\u5411\u540E\u5206\u9875\u3002\n    """\n    offset: Int\n\n    """\n    \u67E5\u8BE2\u96C6\u5408\u65F6\u5E94\u7528\u5230\u7ED3\u679C\u96C6\u7684\u8FC7\u6EE4\u5668\n    """\n    filter: BlogFilter\n\n    """\n    \u5E94\u7528\u5230\u96C6\u5408\u7684\u6392\u5E8F\u987A\u5E8F\n    """\n    orderBy: [BlogOrderBy!]\n  ): BlogConnection\n}\n'})}),"\n",(0,l.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,l.jsx)(e.h2,{id:"condition-vs-filter",children:"Condition vs Filter"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Condition - \u6761\u4EF6\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6761\u4EF6\u63CF\u8FF0"}),"\n",(0,l.jsx)(e.li,{children:"\u66F4\u5E7F\u6CDB"}),"\n",(0,l.jsx)(e.li,{children:"if-then-else / switch-case"}),"\n",(0,l.jsx)(e.li,{children:"\u903B\u8F91\u5224\u65AD\u3001\u51B3\u7B56\u5206\u652F\u3001\u7A0B\u5E8F\u903B\u8F91\u3001\u4E1A\u52A1\u89C4\u5219"}),"\n",(0,l.jsx)(e.li,{children:"\u4FA7\u91CD\u4E8E\u72B6\u6001\u6216\u4E1A\u52A1\u903B\u8F91"}),"\n",(0,l.jsxs)(e.li,{children:["\u5F3A\u8C03 ",(0,l.jsx)(e.strong,{children:"\u5355\u4E2A\u5BF9\u8C61"})," \u81EA\u8EAB\u72B6\u6001\u6216\u903B\u8F91\u5206\u652F"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Filter - \u8FC7\u6EE4\u5668\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6761\u4EF6\u7684\u4E00\u79CD\u5177\u4F53\u7528\u9014"}),"\n",(0,l.jsx)(e.li,{children:"\u5BF9 Collection/\u96C6\u5408 \u8FDB\u884C\u4FDD\u7559\u7B5B\u9009 - \u51CF\u5C11\u6570\u636E"}),"\n",(0,l.jsx)(e.li,{children:"\u4FA7\u91CD\u4E8E\u6570\u636E\uFF0C\u7528\u9014\u660E\u786E"}),"\n",(0,l.jsx)(e.li,{children:"\u591A\u7528\u4E8E API/RESTful/GraphQL"}),"\n"]}),"\n"]}),"\n"]})]})}function x(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},917776:function(n,e,s){s.d(e,{R:()=>d,x:()=>c});var r=s(7378);let l={},i=r.createContext(l);function d(n){let e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);