"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["12224"],{38613:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>t,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>a});var s=JSON.parse('{"id":"web/framework/wails","title":"wails","description":"- wailsapp/wails","source":"@site/../notes/web/framework/wails.md","sourceDirName":"web/framework","slug":"/web/framework/wails","permalink":"/notes/web/framework/wails","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/framework/wails.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1727602505000,"frontMatter":{"title":"wails"},"sidebar":"docs","previous":{"title":"Vue 2","permalink":"/notes/web/framework/vue/vue2"},"next":{"title":"HTML","permalink":"/notes/web/html/"}}'),l=i(86106),r=i(17776);let t={title:"wails"},a="wails",o={},d=[{value:"Binding/Bridge",id:"bindingbridge",level:2},{value:"app",id:"app",level:2},{value:"wails v3",id:"wails-v3",level:2},{value:"syso",id:"syso",level:2}];function c(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"wails",children:"wails"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/wailsapp/wails",children:"wailsapp/wails"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MIT, Go"}),"\n",(0,l.jsx)(e.li,{children:"\u57FA\u4E8E Webview \u7684\u5E94\u7528\u5C01\u88C5"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"WML"}),"\n",(0,l.jsxs)(e.li,{children:["Windows - ",(0,l.jsx)(e.a,{href:"https://developer.microsoft.com/en-us/microsoft-edge/webview2/",children:"WebView2"})]}),"\n",(0,l.jsx)(e.li,{children:"macOS - Safari"}),"\n",(0,l.jsx)(e.li,{children:"Linux - gcc,libgtk3,libwebkit"}),"\n",(0,l.jsx)(e.li,{children:"\u53EF\u4F7F\u7528 upx \u538B\u7F29, nsis \u6253\u5305"}),"\n",(0,l.jsxs)(e.li,{children:["\u5F00\u53D1\u73AF\u5883\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Vite"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.admonition,{type:"info",children:(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Roadmap ",(0,l.jsx)(e.a,{href:"https://github.com/wailsapp/wails/discussions/1484",children:"#1484"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u4E0D\u652F\u6301\u591A WebView ",(0,l.jsx)(e.a,{href:"https://github.com/wailsapp/wails/discussions/1452",children:"#1452"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u76EE\u524D\u53EA\u6709 electron \u652F\u6301"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["DnD \u83B7\u53D6\u771F\u5B9E\u6587\u4EF6\u8DEF\u5F84 ",(0,l.jsx)(e.a,{href:"https://github.com/wailsapp/wails/issues/1090",children:"#1090"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u81EA\u5347\u7EA7 ",(0,l.jsx)(e.a,{href:"https://github.com/wailsapp/wails/issues/1178",children:"#1178"})]}),"\n"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"go install github.com/wailsapp/wails/v2/cmd/wails@latest\n\nbrew install upx nsis # macOS \u5F00\u53D1\u989D\u5916\u4F9D\u8D56\nwails doctor          # \u68C0\u67E5\u7CFB\u7EDF\u73AF\u5883\n\nwails init -n my-wails -t react-ts\ncd ./my-wails/\nwails dev\n\n# -platform Download, Embed, Browser, Error\n# -clean \u6E05\u7A7A build/bin\n# -debug \u5141\u8BB8 inspect\nwails build -trimpath -upx -platform windows/amd64 -webview2 Embed -nsis\nwails build -trimpath -upx -platform darwin/amd64\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u751F\u547D\u5468\u671F\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"OnStartup"}),"\n",(0,l.jsx)(e.li,{children:"OnDomReady"}),"\n",(0,l.jsx)(e.li,{children:"OnBeforeClose"}),"\n",(0,l.jsx)(e.li,{children:"OnShutdown"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"bindingbridge",children:"Binding/Bridge"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["window.runtime\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Log{Print,Trace,Debug,Info,Warning,Error,Fatal}"}),"\n",(0,l.jsx)(e.li,{children:"Events{On,OnMultiple,Off,Once,Emit}"}),"\n",(0,l.jsx)(e.li,{children:"Window{Reload,ReloadApp,SetSystemDefaultTheme,SetLightTheme,SetDarkTheme}"}),"\n",(0,l.jsx)(e.li,{children:"Window Center/Fullscreen/Maximise/ToggleMaximise/Unmaximise/Minimise/Unminimise"}),"\n",(0,l.jsx)(e.li,{children:"Window Get/Set Size/MaxSize/MinSize/Position"}),"\n",(0,l.jsx)(e.li,{children:"Window Hide/Show"}),"\n",(0,l.jsx)(e.li,{children:"Window SetRGBA"}),"\n",(0,l.jsx)(e.li,{children:"BrowserOpenURL"}),"\n",(0,l.jsx)(e.li,{children:"Environment"}),"\n",(0,l.jsx)(e.li,{children:"Quit - \u9000\u51FA\u5E94\u7528"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Go Runtime\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Dialog"}),"\n",(0,l.jsx)(e.li,{children:"Menu"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:"export function Greet(arg1) {\n  return window['go']['main']['App']['Greet'](arg1);\n}\n"})}),"\n",(0,l.jsx)(e.h2,{id:"app",children:"app"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u6CE8\u5165\u5185\u5BB9\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"/wails/runtime.js"}),"\n",(0,l.jsx)(e.li,{children:"/wails/ipc.js"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"<div data-wails-drag>"})," -> ",(0,l.jsx)(e.code,{children:'style="--wails-dragable:drag"'}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:'style="--wails-draggable:no-drag"'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-html",children:'\x3c!-- noautoinjectruntime, noautoinjectipc, noautoinject --\x3e\n<meta name="wails-options" content="[options]" />\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:"window._wails;\nwindow.wails;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/wailsapp/wails/tree/v3-alpha/v3/internal/runtime/desktop",children:"https://github.com/wailsapp/wails/tree/v3-alpha/v3/internal/runtime/desktop"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"wails-v3",children:"wails v3"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["v3\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u58F0\u660E\u5F0F -> \u8FC7\u7A0B\u5F0F"}),"\n",(0,l.jsx)(e.li,{children:"\u591A\u7A97\u53E3"}),"\n",(0,l.jsx)(e.li,{children:"\u96C6\u6210 \u7CFB\u7EDF\u6258\u76D8"}),"\n",(0,l.jsx)(e.li,{children:"\u4F18\u5316 bindings \u5B9E\u73B0\u548C\u751F\u6210\u903B\u8F91"}),"\n",(0,l.jsx)(e.li,{children:"\u4F7F\u7528 taskfile \u6784\u5EFA"}),"\n",(0,l.jsx)(e.li,{children:"\u4F18\u5316\u4E8B\u4EF6"}),"\n",(0,l.jsxs)(e.li,{children:["WML - Wails Markup Language\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6709\u70B9\u7C7B\u4F3C htmx"}),"\n",(0,l.jsxs)(e.li,{children:["element \u7279\u6B8A\u5C5E\u6027\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"wlm-window"})," - \u64CD\u4F5C\u7A97\u53E3\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Center,Close,Minimize,Maximize,UnMaximize,FullScreen,UnFullScreen,Restore"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"wlm-event"})," - emit \u4E8B\u4EF6\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"wlm-trigger"})," - \u89E6\u53D1\u6761\u4EF6\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F8B\u5982 mouseover"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/wailsapp/wails/tree/v3-alpha",children:"https://github.com/wailsapp/wails/tree/v3-alpha"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://v3alpha.wails.io/",children:"https://v3alpha.wails.io/"})}),"\n",(0,l.jsxs)(e.li,{children:["events\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4E09\u79CD\u7C7B\u578B\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"ApplicationEvent"}),"\n",(0,l.jsx)(e.li,{children:"WindowEvent"}),"\n",(0,l.jsx)(e.li,{children:"CustomEvent - \u5B57\u7B26\u4E32"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"ApplicationEvent, WindowEvent \u548C js \u4EA4\u4E92\u7684\u65F6\u5019\u4F1A\u505A \u5B57\u7B26\u4E32 uint \u7684 mapping"}),"\n",(0,l.jsxs)(e.li,{children:["events.Common.ApplicationStarted\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"events.Mac.ApplicationDidFinishLaunching"}),"\n",(0,l.jsx)(e.li,{children:"events.Windows.ApplicationStarted"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["events.Common.WindowRuntimeReady\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"WebView runtime"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"go install -v github.com/wailsapp/wails/v3/cmd/wails3@latest\n\nwails3 init -n my-app\ncd my-app\nwails3 build\n./bin/my-app\n"})}),"\n",(0,l.jsx)(e.h2,{id:"syso",children:"syso"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4F7F\u7528 ",(0,l.jsx)(e.a,{href:"https://github.com/tc-hib/winres",children:"tc-hib/winres"})]}),"\n",(0,l.jsxs)(e.li,{children:["info.json\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"res.SetVersionInfo"}),"\n",(0,l.jsx)(e.li,{children:"RT_VERSION"}),"\n",(0,l.jsxs)(e.li,{children:["langId\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://learn.microsoft.com/en-us/windows/win32/intl/language-identifiers",children:"https://learn.microsoft.com/en-us/windows/win32/intl/language-identifiers"})}),"\n",(0,l.jsx)(e.li,{children:"GetUserDefaultLocaleName"}),"\n",(0,l.jsx)(e.li,{children:"GetSystemDefaultLocaleName"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/cloudfoundry-attic/jibber_jabber",children:"https://github.com/cloudfoundry-attic/jibber_jabber"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["wails.exe.manifest\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/tc-hib/winres/blob/master/manifest.go",children:"https://github.com/tc-hib/winres/blob/master/manifest.go"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",metastring:'title="info.json"',children:'{\n  "fixed": {\n    "file_version": "",\n    "product_version": "",\n    "flags": "", // debug, prerelease, patched, privatebuild, specialbuild\n    "type": "", // app, dll\n    "timestamp": ""\n  },\n  "info": {\n    // langID\n    "000": {\n      "file_version": "",\n      "product_version": "",\n      "flags": "",\n      "type": "",\n      "KEY": "Value"\n    }\n  }\n}\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# wails3 generate syso -arch {{.ARCH}} -icon icon.ico -manifest wails.exe.manifest -info info.json -out ../wails.syso\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'// AppManifest describes an application manifest.\n//\n// Its zero value corresponds to the most common case.\ntype AppManifest struct {\n	Identity                          AssemblyIdentity `json:"identity"`\n	Description                       string           `json:"description"`\n	Compatibility                     SupportedOS      `json:"minimum-os"`\n	ExecutionLevel                    ExecutionLevel   `json:"execution-level"`\n	UIAccess                          bool             `json:"ui-access"` // Require access to other applications\' UI elements\n	AutoElevate                       bool             `json:"auto-elevate"`\n	DPIAwareness                      DPIAwareness     `json:"dpi-awareness"`\n	DisableTheming                    bool             `json:"disable-theming"`\n	DisableWindowFiltering            bool             `json:"disable-window-filtering"`\n	HighResolutionScrollingAware      bool             `json:"high-resolution-scrolling-aware"`\n	UltraHighResolutionScrollingAware bool             `json:"ultra-high-resolution-scrolling-aware"`\n	LongPathAware                     bool             `json:"long-path-aware"`\n	PrinterDriverIsolation            bool             `json:"printer-driver-isolation"`\n	GDIScaling                        bool             `json:"gdi-scaling"`\n	SegmentHeap                       bool             `json:"segment-heap"`\n	UseCommonControlsV6               bool             `json:"use-common-controls-v6"` // Application requires Common Controls V6 (V5 remains the default)\n}\n\n// AssemblyIdentity defines the side-by-side assembly identity of the executable.\n//\n// It should not be needed unless another assembly depends on this one.\n//\n// If the Name field is empty, the <assemblyIdentity> element will be omitted.\ntype AssemblyIdentity struct {\n	Name    string\n	Version [4]uint16\n}\n'})})]})}function h(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(c,{...n})}):c(n)}},17776:function(n,e,i){i.d(e,{R:()=>t,x:()=>a});var s=i(7378);let l={},r=s.createContext(l);function t(n){let e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);