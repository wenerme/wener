"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["14488"],{70116:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>a,toc:()=>d,default:()=>u,metadata:()=>s,assets:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"queue/nats/nats-kv","title":"KV","description":"- \u57FA\u4E8E JetStream \u7684 KV \u5B58\u50A8","source":"@site/../notes/queue/nats/nats-kv.md","sourceDirName":"queue/nats","slug":"/queue/nats/kv","permalink":"/notes/queue/nats/kv","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/queue/nats/nats-kv.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1702882608000,"frontMatter":{"title":"KV"},"sidebar":"docs","previous":{"title":"Nats on K8S","permalink":"/notes/queue/nats/k8s"},"next":{"title":"Objectstore","permalink":"/notes/queue/nats/objectstore"}}'),i=t(86106),r=t(17776);let a={title:"KV"},l="NATS KV",c={},d=[];function o(e){let n={a:"a",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nats-kv",children:"NATS KV"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u57FA\u4E8E JetStream \u7684 KV \u5B58\u50A8"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://pkg.go.dev/github.com/nats-io/nats.go#KeyValue",children:"https://pkg.go.dev/github.com/nats-io/nats.go#KeyValue"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/nats-io/nats-architecture-and-design/blob/main/adr/ADR-8.md",children:"https://github.com/nats-io/nats-architecture-and-design/blob/main/adr/ADR-8.md"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"read in-memory cache"}),"\n",(0,i.jsxs)(n.li,{children:["key ",(0,i.jsx)(n.code,{children:"\\A[-/_=\\.a-zA-Z0-9]+\\z"})," - \u4E0D\u80FD ",(0,i.jsx)(n.code,{children:"."})," \u5F00\u5934\u6216\u7ED3\u5C3E"]}),"\n",(0,i.jsxs)(n.li,{children:["bucket ",(0,i.jsx)(n.code,{children:"\\A[a-zA-Z0-9_-]+\\z"})]}),"\n",(0,i.jsxs)(n.li,{children:["bucket\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["main ",(0,i.jsx)(n.code,{children:"KV_<Bucket Name>"})]}),"\n",(0,i.jsxs)(n.li,{children:["ingest subject ",(0,i.jsx)(n.code,{children:"$KV.<Bucket Name>.>"})]}),"\n",(0,i.jsx)(n.li,{children:"max_msgs_per_subject - \u5386\u53F2\u7248\u672C\u6570 - \u6700\u5927 64"}),"\n",(0,i.jsx)(n.li,{children:"rollup_hdrs - rollup \u5220\u9664"}),"\n",(0,i.jsx)(n.li,{children:"max_age - TTL"}),"\n",(0,i.jsx)(n.li,{children:"max_msg_size - value size"}),"\n",(0,i.jsx)(n.li,{children:"max_bytes - bucket size"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["$KV.CONFIGURATION.auth.username\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"io.nats.jetstream.api.v1.stream_msg_get_request"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nats kv\n"})})]})}function u(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},17776:function(e,n,t){t.d(n,{R:()=>a,x:()=>l});var s=t(7378);let i={},r=s.createContext(i);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);