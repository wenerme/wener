"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["654527"],{222569:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>a,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>c});var s=JSON.parse('{"id":"java/osgi","title":"OSGi (Open Services Gateway initiative)","description":"- Core Concepts: Bundles, Services, Life-cycle, Modules.","source":"@site/../notes/java/osgi.md","sourceDirName":"java","slug":"/java/osgi","permalink":"/notes/java/osgi","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/java/osgi.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"OSGi (Open Services Gateway initiative)"},"sidebar":"docs","previous":{"title":"Apache Wicket","permalink":"/notes/java/lib/wicket"},"next":{"title":"\u751F\u4EA7\u529B","permalink":"/notes/java/productive"}}'),r=i(486106),l=i(917776);let t={title:"OSGi (Open Services Gateway initiative)"},c="OSGi (Open Services Gateway initiative)",o={},a=[{value:"Overview",id:"overview",level:2},{value:"Core Layers",id:"core-layers",level:3},{value:"MANIFEST.MF Structure",id:"manifestmf-structure",level:2},{value:"Key Headers",id:"key-headers",level:2},{value:"Pros &amp; Cons",id:"pros--cons",level:2}];function d(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"osgi-open-services-gateway-initiative",children:"OSGi (Open Services Gateway initiative)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Core Concepts"}),": Bundles, Services, Life-cycle, Modules."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implementations"}),": Eclipse Equinox, Apache Felix, Knopflerfish."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"OSGi \u662F Java \u7684\u52A8\u6001\u6A21\u5757\u5316\u7CFB\u7EDF\u3002\u5B83\u5B9A\u4E49\u4E86\u4E00\u4E2A\u67B6\u6784\uFF0C\u7528\u4E8E\u4EE5\u6A21\u5757\u5316\u65B9\u5F0F\u5F00\u53D1\u3001\u90E8\u7F72\u548C\u7BA1\u7406\u5E94\u7528\u7A0B\u5E8F\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"core-layers",children:"Core Layers"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Module Layer (Bundles)"}),": \u5B9A\u4E49\u4E86\u6A21\u5757\uFF08Bundle\uFF09\u53CA\u5176\u4F9D\u8D56\u5173\u7CFB\uFF08Import/Export Package\uFF09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lifecycle Layer"}),": \u7BA1\u7406 Bundle \u7684\u751F\u547D\u5468\u671F\uFF08Installed, Resolved, Starting, Active, Stopping, Uninstalled\uFF09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service Layer"}),": \u63D0\u4F9B\u4E86\u4E00\u79CD\u53D1\u5E03\u3001\u67E5\u627E\u548C\u7ED1\u5B9A\u670D\u52A1\u7684\u52A8\u6001\u6A21\u578B\uFF08Service Registry\uFF09\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"manifestmf-structure",children:"MANIFEST.MF Structure"}),"\n",(0,r.jsxs)(n.p,{children:["OSGi Bundle \u672C\u8D28\u4E0A\u662F\u4E00\u4E2A\u5E26\u6709\u7279\u5B9A\u5143\u6570\u636E\u7684 Jar \u5305\uFF0C\u5143\u6570\u636E\u4F4D\u4E8E ",(0,r.jsx)(n.code,{children:"META-INF/MANIFEST.MF"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-manifest",children:'Manifest-Version: 1.0\nBundle-ManifestVersion: 2\nBundle-Name: My OSGi Bundle\nBundle-SymbolicName: com.example.mybundle\nBundle-Version: 1.0.0\nBundle-Activator: com.example.mybundle.Activator\nBundle-Vendor: My Company\n# \u5BFC\u51FA\u7684\u5305\uFF0C\u4F9B\u5176\u4ED6 Bundle \u4F7F\u7528\nExport-Package: com.example.service;version="1.0.0"\n# \u5BFC\u5165\u7684\u5305\uFF0C\u5F53\u524D Bundle \u9700\u8981\u7684\u4F9D\u8D56\nImport-Package: org.osgi.framework;version="1.3.0",\n javax.servlet;version="2.5.0"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"key-headers",children:"Key Headers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bundle-SymbolicName"}),": Bundle \u7684\u552F\u4E00\u6807\u8BC6\u7B26\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bundle-Version"}),": \u7248\u672C\u53F7 (Major.Minor.Micro.Qualifier)\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Import-Package"}),": \u58F0\u660E\u4F9D\u8D56\u7684\u5305\u3002OSGi \u6700\u5F3A\u5927\u7684\u7279\u6027\u4E4B\u4E00\uFF0C\u53EA\u5BFC\u5165\u9700\u8981\u7684\u5305\u800C\u975E\u6574\u4E2A Jar\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Export-Package"}),": \u58F0\u660E\u5BF9\u5916\u66B4\u9732\u7684\u5305\u3002\u672A\u5BFC\u51FA\u7684\u5305\u5BF9\u5176\u4ED6 Bundle \u4E0D\u53EF\u89C1\uFF08\u5B9E\u73B0\u9690\u85CF\uFF09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bundle-Activator"}),": \u53EF\u9009\u3002\u6307\u5B9A\u4E00\u4E2A\u5B9E\u73B0\u4E86 ",(0,r.jsx)(n.code,{children:"BundleActivator"})," \u63A5\u53E3\u7684\u7C7B\uFF0C\u7528\u4E8E\u5728 Bundle \u542F\u52A8\u548C\u505C\u6B62\u65F6\u6267\u884C\u4EE3\u7801\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pros--cons",children:"Pros & Cons"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u52A8\u6001\u6027"}),": \u8FD0\u884C\u65F6\u5B89\u88C5\u3001\u66F4\u65B0\u3001\u5378\u8F7D\u6A21\u5757\u800C\u65E0\u9700\u91CD\u542F JVM\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u9694\u79BB\u6027"}),": \u4E25\u683C\u7684\u7C7B\u52A0\u8F7D\u9694\u79BB\uFF0C\u89E3\u51B3 Jar Hell \u95EE\u9898\uFF08\u4E0D\u540C\u6A21\u5757\u53EF\u4F9D\u8D56\u540C\u4E00\u5E93\u7684\u4E0D\u540C\u7248\u672C\uFF09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u670D\u52A1\u5316"}),": \u9762\u5411\u63A5\u53E3\u7F16\u7A0B\uFF0C\u677E\u8026\u5408\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u590D\u6742\u6027"}),': \u7C7B\u52A0\u8F7D\u673A\u5236\u590D\u6742\uFF0C\u5373 "Classloading Hell"\u3002']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u751F\u6001"}),": \u8BB8\u591A\u73B0\u4EE3 Java \u6846\u67B6\uFF08\u5982 Spring Boot\uFF09\u8F6C\u5411\u4E86 fat-jar \u6216\u4E91\u539F\u751F\u6A21\u5F0F\uFF0C\u51CF\u5C11\u4E86\u5BF9 OSGi \u7684\u4F9D\u8D56\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4FB5\u5165\u6027"}),": \u4EE3\u7801\u53EF\u80FD\u9700\u8981\u9002\u914D OSGi \u73AF\u5883\uFF08\u5C3D\u7BA1 Declarative Services \u51CF\u8F7B\u4E86\u8FD9\u4E00\u70B9\uFF09\u3002"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},917776:function(e,n,i){i.d(n,{R:()=>t,x:()=>c});var s=i(7378);let r={},l=s.createContext(r);function t(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);