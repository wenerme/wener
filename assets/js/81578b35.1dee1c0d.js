"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["96677"],{78699:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>i,toc:()=>d,default:()=>o,metadata:()=>r,assets:()=>c,contentTitle:()=>t});var r=JSON.parse('{"id":"devops/kubernetes/ops/helm","title":"HELM \u5305\u7BA1\u7406\u5668","description":"- helm/helm \u662F\u4EC0\u4E48","source":"@site/../notes/devops/kubernetes/ops/helm.md","sourceDirName":"devops/kubernetes/ops","slug":"/devops/kubernetes/ops/helm","permalink":"/notes/devops/kubernetes/ops/helm","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/kubernetes/ops/helm.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1709090151000,"frontMatter":{"title":"HELM \u5305\u7BA1\u7406\u5668"},"sidebar":"docs","previous":{"title":"Traefik Ingress","permalink":"/notes/devops/kubernetes/network/traefik-ingress"},"next":{"title":"HELM2 - \u4E0D\u63A8\u8350","permalink":"/notes/devops/kubernetes/ops/helm2"}}'),l=s(86106),h=s(17776);let i={title:"HELM \u5305\u7BA1\u7406\u5668"},t="Helm",c={},d=[{value:"\u8DEF\u5F84",id:"\u8DEF\u5F84",level:2},{value:"\u5E38\u7528\u4ED3\u5E93",id:"\u5E38\u7528\u4ED3\u5E93",level:2},{value:"\u4ED3\u5E93",id:"\u4ED3\u5E93",level:2},{value:"index.yaml",id:"indexyaml",level:2},{value:"local",id:"local",level:3},{value:"chartmuseum",id:"chartmuseum",level:3},{value:"registry",id:"registry",level:3},{value:"repo",id:"repo",level:3},{value:"Helm \u6A21\u677F",id:"helm-\u6A21\u677F",level:2},{value:"Helm Operator",id:"helm-operator",level:2},{value:"oci registry vs chart repository",id:"oci-registry-vs-chart-repository",level:2},{value:"helm repo index merge",id:"helm-repo-index-merge",level:2},{value:"unpacked charts cannot be verified",id:"unpacked-charts-cannot-be-verified",level:2}];function a(e){let n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,h.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"helm",children:"Helm"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://github.com/helm/helm",children:"helm/helm"})," \u662F\u4EC0\u4E48\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Kubernetes \u4E0A\u7684\u5305\u7BA1\u7406\u5668"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://helm.sh/",children:"helm.sh"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://helm.sh/docs/helm/helm",children:"\u73AF\u5883\u53D8\u91CF\u5217\u8868"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["nexus \u53EF\u901A\u8FC7\u63D2\u4EF6\u652F\u6301 helm ",(0,l.jsx)(n.a,{href:"https://github.com/sonatype-nexus-community/nexus-repository-helm",children:"sonatype-nexus-community/nexus-repository-helm"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u6CE8\u610F\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"3.0 \u8FC7\u540E\u6CA1\u6709 tiller \u4E86"}),"\n",(0,l.jsxs)(n.li,{children:["HELM \u53EF\u4EE5\u5355\u7EAF\u7684\u4F5C\u4E3A\u6A21\u677F\u5F15\u64CE\u6765\u4F7F\u7528 - \u4F46\u662F\u5931\u53BB\u4E86 helm \u7BA1\u7406\u6CE8\u518C\u5E94\u7528\u7684\u80FD\u529B\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5982\u679C\u7528\u4F5C\u6A21\u677F\u5F15\u64CE\uFF0C\u90A3\u8FD8\u53EF\u4EE5\u9009\u62E9 Kustomize, k8comp, kdeploy, ktmpl, kuku, jinja, sed, awk, gotpl"}),"\n",(0,l.jsx)(n.li,{children:"\u5931\u53BB\u7684\u80FD\u529B\uFF1A \u6E05\u5355\u5206\u7EC4\u3001\u5E94\u7528\u6216\u5305\u4F9D\u8D56\u3001\u67E5\u770B\u96C6\u7FA4\u5B89\u88C5\u5E94\u7528\u3001\u6CE8\u518C\u5E94\u7528\u3001\u5E94\u7528\u7248\u672C\u56DE\u6EDA"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"\u4ED3\u5E93\u4E0D\u662F\u5FC5\u8981\u7684\uFF0C\u4E00\u4E2A helm charts \u5C31\u662F\u4E00\u4E2A tgz"}),"\n",(0,l.jsx)(n.li,{children:"\u76F8\u540C\u7248\u672C\u53EF\u91CD\u590D\u5B89\u88C5\uFF0Crevision \u4F1A\u6709\u53D8\u5316\uFF0C\u672C\u5730\u5F00\u53D1\u65F6\u7ECF\u5E38\u8FD9\u6837"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://jfrog.com/blog/helm-charts-best-practices/",children:"Helm Charts Best Practices"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://codefresh.io/docs/docs/new-helm/helm-best-practices/",children:"HELM Best practices"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://helm.sh/docs/topics/charts/#the-chartyaml-file",children:"Chart.yaml"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/arttor/helmify",children:"arttor/helmify"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"brew install helm\n\n# \u5BA2\u6237\u7AEF\u7248\u672C\nhelm version\n\nhelm repo add stable http://mirror.azure.cn/kubernetes/charts/\nhelm search repo stable\n\nhelm show values stable/nextcloud\nhelm pull stable/nextcloud\nhelm pull stable/nextcloud --untar\n\n# \u5B89\u88C5\u672C\u5730 chart\nhelm install --namespace apisix -f values.yaml apisix ./\n\nhelm create my-chart\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u8DEF\u5F84",children:"\u8DEF\u5F84"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7CFB\u7EDF"}),(0,l.jsx)(n.th,{children:"\u7F13\u5B58"}),(0,l.jsx)(n.th,{children:"\u914D\u7F6E"}),(0,l.jsx)(n.th,{children:"\u6570\u636E"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Linux"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$HOME/.cache/helm"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$HOME/.config/helm"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$HOME/.local/share/helm"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"macOS"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$HOME/Library/Caches/helm"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$HOME/Library/Preferences/helm"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"$HOME/Library/helm"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Windows"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"%TEMP%\\helm"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"%APPDATA%\\helm"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"%APPDATA%\\helm"})})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["/\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["cache/\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"archive/"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"plugins/"}),"\n",(0,l.jsxs)(n.li,{children:["repository/\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"repositories.lock"}),"\n",(0,l.jsx)(n.li,{children:"repositories.yaml"}),"\n",(0,l.jsxs)(n.li,{children:["cache/\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"${NAME}-index.yaml"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["local/\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"index.yaml"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"starters/"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5E38\u7528\u4ED3\u5E93",children:"\u5E38\u7528\u4ED3\u5E93"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"NAME"}),(0,l.jsx)(n.th,{children:"URL"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["wener",(0,l.jsx)(n.br,{}),"offcial collection"]}),(0,l.jsxs)(n.td,{children:[(0,l.jsx)(n.a,{href:"https://wenerme.github.io/charts",children:"https://wenerme.github.io/charts"}),(0,l.jsx)(n.br,{}),(0,l.jsx)(n.a,{href:"https://charts.wener.tech/",children:"https://charts.wener.tech/"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"traefik"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"https://containous.github.io/traefik-helm-chart",children:"https://containous.github.io/traefik-helm-chart"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"jetstack"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"https://charts.jetstack.io",children:"https://charts.jetstack.io"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"hashicorp"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"https://helm.releases.hashicorp.com",children:"https://helm.releases.hashicorp.com"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"harbor"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"https://helm.goharbor.io",children:"https://helm.goharbor.io"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"bitnami"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"https://charts.bitnami.com/bitnami",children:"https://charts.bitnami.com/bitnami"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Deprecaed"}),(0,l.jsx)(n.td,{children:"\u26A0\uFE0F"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"stable"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"https://kubernetes-charts.storage.googleapis.com/",children:"https://kubernetes-charts.storage.googleapis.com/"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"incubator"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"https://kubernetes-charts-incubator.storage.googleapis.com",children:"https://kubernetes-charts-incubator.storage.googleapis.com"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["stable",(0,l.jsx)(n.br,{}),"azure mirror"]}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"http://mirror.azure.cn/kubernetes/charts/",children:"http://mirror.azure.cn/kubernetes/charts/"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["incubator",(0,l.jsx)(n.br,{}),"azure mirror"]}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.a,{href:"http://mirror.azure.cn/kubernetes/charts-incubator/",children:"http://mirror.azure.cn/kubernetes/charts-incubator/"})})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/bitnami/charts",children:"bitnami/charts"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/banzaicloud/banzai-charts",children:"banzaicloud/banzai-charts"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/helm/charts",children:"helm/charts"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u4ED3\u5E93",children:"\u4ED3\u5E93"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://helm.sh/docs/topics/chart_repository",children:"The Chart Repository Guide"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"HTTP"}),"\n",(0,l.jsx)(n.li,{children:"\u63D0\u4F9B index.yaml \u8BBF\u95EE"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://github.com/helm/chartmuseum",children:"helm/chartmuseum"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Golang chart \u4ED3\u5E93"}),"\n",(0,l.jsxs)(n.li,{children:["\u652F\u6301\u8F83\u591A\u540E\u7AEF - \u4E3B\u8981\u7684\u6709\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"S3"}),"\n",(0,l.jsx)(n.li,{children:"\u963F\u91CC\u4E91 OSS"}),"\n",(0,l.jsx)(n.li,{children:"Minio"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"\u652F\u6301\u4E0A\u4F20"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/helm/chartmuseum#basic-auth",children:"\u652F\u6301\u8BA4\u8BC1"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Helm \u652F\u6301 ",(0,l.jsx)(n.a,{href:"https://helm.sh/docs/topics/registries/",children:"Registry"})," \u6765\u5B58\u50A8 charts\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u63A8\u9001\u9047\u5230\u95EE\u9898 - insufficient_scope: authorization failed ",(0,l.jsx)(n.a,{href:"https://github.com/helm/helm/issues/6214",children:"#6214"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u4E0D\u80FD\u63A8\u9001\u5230 docker hub ",(0,l.jsx)(n.a,{href:"https://github.com/helm/helm/issues/5861",children:"#5861"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"indexyaml",children:"index.yaml"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://helm.sh/docs/topics/chart_repository/",children:"https://helm.sh/docs/topics/chart_repository/"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"local",children:"local"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm repo reindex local-repo\n"})}),"\n",(0,l.jsx)(n.h3,{id:"chartmuseum",children:"chartmuseum"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u672C\u5730\u5B58\u50A8\ndocker run --rm -it \\\n  -p 8080:8080 \\\n  -e DEBUG=1 \\\n  -e STORAGE=local \\\n  -e STORAGE_LOCAL_ROOTDIR=/charts \\\n  -v $(pwd)/charts:/charts \\\n  --name chartmuseum chartmuseum/chartmuseum:latest\n\n# UI\n# https://github.com/chartmuseum/ui\ndocker run --rm -it \\\n  -p 80:8080 \\\n  -e CHART_MUSESUM_URL: http://chartmuseum:8080 \\\n  --link chartmuseum:chartmuseum \\\n  --name chartmuseumui idobry/chartmuseumui:latest\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Aliyun OSS\n# ALIBABA_CLOUD_ACCESS_KEY_ID\n# ALIBABA_CLOUD_ACCESS_KEY_SECRET\nchartmuseum --debug --port=8080 \\\n  --storage="alibaba" \\\n  --storage-alibaba-bucket="my-oss-bucket" \\\n  --storage-alibaba-prefix="" \\\n  --storage-alibaba-endpoint="oss-cn-beijing.aliyuncs.com"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"registry",children:"registry"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# < 3.8.0\nexport HELM_EXPERIMENTAL_OCI=1\n\nhelm registry login -u myuser index.docker.io\n\n# \u63A8\u9001\u5230\u670D\u52A1\u5668\nhelm push argo-cd-5.45.1.tgz oci://index.docker.io/wcharts/\nhelm pull oci://index.docker.io/wcharts/argo-cd:5.45.1\n\n# \u63A8\u9001\u65B0\u7684 tgz\n# https://hub.docker.com/u/wcharts\n# ls -tr -l --time-style=+\"%Y-%m-%d %H:%M:%S\" | awk '{print $6, $7, $8}' | tail # \u6700\u65B0\u7684\nLAST=$(ls -lt | grep ^- | head -n1 | awk '{print $NF}')\ngit pull\n# https://hub.docker.com/r/wcharts/sealed-secrets/tags\nfind . -iname '*.tgz' -newer $LAST | xargs -I {} -n 1 helm push {} oci://index.docker.io/wcharts\n\nfind . -type f -newermt 2017-09-24\nfind . -type f -newerat 2017-09-25\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"name: argocd\napiVersion: v2\ndependencies:\n  - name: argo-cd\n    version: 5.45.1\n    repository: oci://registry-1.docker.io/wcharts\n\nversion: 1.0.0\n"})}),"\n",(0,l.jsx)(n.h3,{id:"repo",children:"repo"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm repo add --username=admin myrepo https://xx.xx.xx.xx\n# helm plugin install https://github.com/chartmuseum/helm-push\nhelm push hello-helm-0.1.0.tgz myrepo\n"})}),"\n",(0,l.jsx)(n.h2,{id:"helm-\u6A21\u677F",children:"Helm \u6A21\u677F"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://pkg.go.dev/text/template",children:"https://pkg.go.dev/text/template"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://masterminds.github.io/sprig/",children:"https://masterminds.github.io/sprig/"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# https://helm.sh/docs/chart_template_guide/\nhelm install --debug --dry-run goodly-guppy ./mychart\n\n# \u6E32\u67D3\u5355\u4E2A\u6A21\u677F - \u7528\u4E8E\u6D4B\u8BD5\u6392\u67E5\u95EE\u9898\nhelm template ./mychart --show-only templates/values.yaml > values.yaml\n# \u6E32\u67D3\u6574\u4E2A chart\nhelm template ./mychart\n"})}),"\n",(0,l.jsx)(n.h2,{id:"helm-operator",children:"Helm Operator"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/fluxcd/helm-operator",children:"fluxcd/helm-operator"})}),"\n"]}),"\n",(0,l.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,l.jsx)(n.h2,{id:"oci-registry-vs-chart-repository",children:"oci registry vs chart repository"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["OCI\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5B9E\u9A8C\u9636\u6BB5"}),"\n",(0,l.jsx)(n.li,{children:"\u53EF\u76F4\u63A5\u4F7F\u7528\u73B0\u6709 Docker \u4ED3\u5E93\u57FA\u7840\u8BBE\u65BD"}),"\n",(0,l.jsx)(n.li,{children:"\u4ED3\u5E93\u65B9\u53EF\u80FD\u5BF9 chart \u652F\u6301\u8FD8\u4E0D\u662F\u5F88\u597D - Chart \u5143\u4FE1\u606F\u53EF\u80FD\u5C55\u73B0\u4E0D\u5B8C\u5584"}),"\n",(0,l.jsx)(n.li,{children:"\u90E8\u5206\u4ED3\u5E93\u8FD8\u4E0D\u652F\u6301"}),"\n",(0,l.jsx)(n.li,{children:"Helm 3+"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Repo\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Helm 2+"}),"\n",(0,l.jsx)(n.li,{children:"\u7B80\u5355\u6613\u7406\u89E3 - HTTP \u9759\u6001\u6587\u4EF6\u670D\u52A1 - \u63D0\u4F9B index.yaml \u4F5C\u4E3A\u7D22\u5F15"}),"\n",(0,l.jsx)(n.li,{children:"\u73B0\u6709\u4ED3\u5E93\u529F\u80FD\u76F8\u5BF9\u5B8C\u5584"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"helm-repo-index-merge",children:"helm repo index merge"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["helm repo index --merge \u9700\u8981\u4E0D\u540C\u7684\u76EE\u5F55\u624D\u80FD\u751F\u6548\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/helm/helm/issues/4482",children:"#4482"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u65B9\u6848A: copy \u76EE\u5F55\ncp -r charts last\n# update charts\nhelm repo index --merge last/index.yaml charts\n\n# \u65B9\u6848B: \u5B58\u50A8\u5728\u522B\u7684\u4F4D\u7F6E\nhelm repo index --merge charts/index.yaml newer\nrsync newer/ charts/\n"})}),"\n",(0,l.jsx)(n.h2,{id:"unpacked-charts-cannot-be-verified",children:"unpacked charts cannot be verified"})]})}function o(e={}){let{wrapper:n}={...(0,h.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},17776:function(e,n,s){s.d(n,{R:()=>i,x:()=>t});var r=s(7378);let l={},h=r.createContext(l);function i(e){let n=r.useContext(h);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),r.createElement(h.Provider,{value:n},e.children)}}}]);