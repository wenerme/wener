"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["500433"],{552120:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>s,toc:()=>d,default:()=>h,metadata:()=>t,assets:()=>c,contentTitle:()=>o});var t=JSON.parse('{"id":"os/virt/libvirt-api","title":"Libvirt API","description":"- API Reference","source":"@site/../notes/os/virt/libvirt-api.md","sourceDirName":"os/virt","slug":"/os/virt/libvirt-api","permalink":"/notes/os/virt/libvirt-api","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/virt/libvirt-api.md","tags":[{"inline":true,"label":"API","permalink":"/notes/tags/api"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1770607102000,"frontMatter":{"title":"Libvirt API","tags":["API"]},"sidebar":"docs","previous":{"title":"Libvirt Daemon","permalink":"/notes/os/virt/libvirt/libvirtd"},"next":{"title":"lima","permalink":"/notes/os/virt/lima"}}'),r=i(486106),l=i(917776);let s={title:"Libvirt API",tags:["API"]},o="Libvirt API",c={},d=[{value:"\u6838\u5FC3\u6982\u5FF5",id:"\u6838\u5FC3\u6982\u5FF5",level:2},{value:"Go \u793A\u4F8B",id:"go-\u793A\u4F8B",level:2},{value:"Java \u793A\u4F8B",id:"java-\u793A\u4F8B",level:2},{value:"\u53C2\u8003",id:"\u53C2\u8003",level:2}];function a(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"libvirt-api",children:"Libvirt API"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://libvirt.org/html/libvirt-libvirt-domain.html",children:"API Reference"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://libvirt.org/internals/rpc.html",children:"RPC Protocol"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E XDR (External Data Representation) \u5E8F\u5217\u5316"}),"\n",(0,r.jsx)(e.li,{children:"SunRPC/ONCRPC \u534F\u8BAE"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5BA2\u6237\u7AEF\u5E93\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Go: ",(0,r.jsx)(e.a,{href:"https://github.com/libvirt/libvirt-go",children:"libvirt/libvirt-go"})," (CGO), ",(0,r.jsx)(e.a,{href:"https://github.com/digitalocean/go-libvirt",children:"digitalocean/go-libvirt"})," (\u7EAF Go)"]}),"\n",(0,r.jsxs)(e.li,{children:["Java: ",(0,r.jsx)(e.a,{href:"https://libvirt.org/java.html",children:"libvirt-java"})]}),"\n",(0,r.jsxs)(e.li,{children:["Python: ",(0,r.jsx)(e.a,{href:"https://pypi.org/project/libvirt-python/",children:"libvirt-python"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u6838\u5FC3\u6982\u5FF5",children:"\u6838\u5FC3\u6982\u5FF5"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5BF9\u8C61"}),(0,r.jsx)(e.th,{children:"\u8BF4\u660E"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"virConnectPtr"})}),(0,r.jsx)(e.td,{children:"Hypervisor \u8FDE\u63A5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"virDomainPtr"})}),(0,r.jsx)(e.td,{children:"\u865A\u62DF\u673A (\u8FD0\u884C\u4E2D\u6216\u5DF2\u5B9A\u4E49)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"virNetworkPtr"})}),(0,r.jsx)(e.td,{children:"\u865A\u62DF\u7F51\u7EDC"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"virStoragePool"})}),(0,r.jsx)(e.td,{children:"\u5B58\u50A8\u6C60"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"virStorageVol"})}),(0,r.jsx)(e.td,{children:"\u5B58\u50A8\u5377"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"go-\u793A\u4F8B",children:"Go \u793A\u4F8B"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n	"fmt"\n	"net"\n	"time"\n\n	"github.com/digitalocean/go-libvirt"\n)\n\nfunc main() {\n	// Unix socket \u8FDE\u63A5\n	c, err := net.DialTimeout("unix", "/var/run/libvirt/libvirt-sock", 2*time.Second)\n	if err != nil {\n		panic(err)\n	}\n\n	l := libvirt.New(c)\n	if err := l.Connect(); err != nil {\n		panic(err)\n	}\n	defer l.Disconnect()\n\n	v, _ := l.Version()\n	fmt.Println("Version:", v)\n\n	domains, _, _ := l.ConnectListAllDomains(1, 0)\n	for _, d := range domains {\n		fmt.Printf("%d %s %x\\n", d.ID, d.Name, d.UUID)\n	}\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"java-\u793A\u4F8B",children:"Java \u793A\u4F8B"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'import org.libvirt.Connect;\nimport org.libvirt.ConnectAuthDefault;\n\npublic class LibvirtExample {\n    public static void main(String[] args) throws Exception {\n        Connect conn = new Connect("qemu:///system", new ConnectAuthDefault(), 0);\n        System.out.println("Hypervisor: " + conn.getType());\n        System.out.println("Version: " + conn.getLibVirVersion());\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u53C2\u8003",children:"\u53C2\u8003"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/libvirt/libvirt",children:"libvirt/libvirt"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/libvirt/libvirt/blob/master/src/remote/remote_protocol.x",children:"remote_protocol.x"})," - RPC \u534F\u8BAE\u5B9A\u4E49"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://libosinfo.org/",children:"libosinfo"})," - OS \u4FE1\u606F\u5E93"]}),"\n"]})]})}function h(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},917776:function(n,e,i){i.d(e,{R:()=>s,x:()=>o});var t=i(7378);let r={},l=t.createContext(r);function s(n){let e=t.useContext(l);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);