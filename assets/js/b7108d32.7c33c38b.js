"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["76831"],{96512:function(e,d,n){n.r(d),n.d(d,{frontMatter:()=>r,toc:()=>c,default:()=>m,metadata:()=>s,assets:()=>l,contentTitle:()=>a});var s=JSON.parse('{"id":"devops/storage/block/mdadm","title":"mdadm","description":"- Guide to mdadm","source":"@site/../notes/devops/storage/block/mdadm.md","sourceDirName":"devops/storage/block","slug":"/devops/storage/block/mdadm","permalink":"/notes/devops/storage/block/mdadm","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/storage/block/mdadm.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1693463269000,"frontMatter":{"title":"mdadm"},"sidebar":"docs","previous":{"title":"LVM","permalink":"/notes/devops/storage/block/lvm"},"next":{"title":"NBD","permalink":"/notes/devops/storage/block/nbd"}}'),i=n(86106),t=n(17776);let r={title:"mdadm"},a="Multi Device Administration",l={},c=[{value:"RAID \u6587\u4EF6\u7CFB\u7EDF",id:"raid-\u6587\u4EF6\u7CFB\u7EDF",level:2}];function o(e){let d={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.header,{children:(0,i.jsx)(d.h1,{id:"multi-device-administration",children:"Multi Device Administration"})}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsx)(d.li,{children:(0,i.jsx)(d.a,{href:"https://raid.wiki.kernel.org/index.php/A_guide_to_mdadm",children:"Guide to mdadm"})}),"\n",(0,i.jsx)(d.li,{children:(0,i.jsx)(d.a,{href:"https://wiki.mikejung.biz/Software_RAID",children:"Software RAID"})}),"\n",(0,i.jsxs)(d.li,{children:[(0,i.jsx)(d.a,{href:"https://raid.wiki.kernel.org",children:"Linux Raid"}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsx)(d.li,{children:(0,i.jsx)(d.a,{href:"https://raid.wiki.kernel.org/index.php/RAID_setup",children:"RAID setup"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(d.li,{children:(0,i.jsx)(d.a,{href:"https://wiki.archlinux.org/index.php/Software_RAID_and_LVM",children:"Software RAID and LVM"})}),"\n"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-bash",children:"# \u7EBF\u6027\u6A21\u5F0F\n# \u5408\u5E76\u4E24\u4E2A\u5206\u533A\uFF0C\u5206\u533A\u5927\u5C0F\u4EFB\u610F\nmdadm --create --verbose /dev/md0 --level=linear --raid-devices=2 /dev/sda1 /dev/sdb2\n\n# RAID 0\n# stripe \u6A21\u5F0F\uFF0C\u5207\u5206\u6570\u636E\u6563\u843D\u5230\u4E2A\u4E2A\u78C1\u76D8\uFF0C\u5229\u7528\u5E76\u53D1\u8BBF\u95EE\u80FD\u529B\uFF0C\u6BCF\u4E2A\u5206\u533A\u5927\u5C0F\u76F8\u8FD1\n# --spare-devices=1 /dev/sdd1 \u6307\u5B9A\u4E86\u4E00\u4E2A\u7A7A\u95F2\u76D8\nmdadm --create --verbose /dev/md0 --level=mirror --raid-devices=2 /dev/sdb1 /dev/sdc1 --spare-devices=1 /dev/sdd1\n\n# RAID 4/5/6\n# \u9ED8\u8BA4\u5757\u5927\u5C0F 128k \u8BFB\u5199\u573A\u666F\u4E0D\u540C\uFF0C\u5BF9\u6027\u80FD\u5F71\u54CD\u4E0D\u540C\nmdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sdb1 /dev/sdc1 /dev/sdd1 --spare-devices=1 /dev/sde1\n\nmdadm --create --verbose /dev/md/main --level=6 --raid-devices=8 /dev/sd{a,b,c,d,e,f,g,h} --assume-clean\n\n# \u67E5\u770B\u91CD\u6784\u72B6\u6001\ncat /proc/mdstat\n# \u626B\u63CF\u751F\u6210\u914D\u7F6E\u6587\u4EF6\nmdadm --detail --scan >> /etc/mdadm/mdadm.conf\n\n# \u626B\u63CF\u73B0\u6709 raid \u914D\u7F6E\nmdadm --assemble --scan\n# \u626B\u63CF\u6307\u5B9A\u7684\nmdadm --scan --assemble --uuid=a26bf396:31389f83:0df1722d:f404fe4c\n\n# \u505C\u6B62\nmdadm --stop /dev/md0\n"})}),"\n",(0,i.jsx)(d.h2,{id:"raid-\u6587\u4EF6\u7CFB\u7EDF",children:"RAID \u6587\u4EF6\u7CFB\u7EDF"}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:["\u8003\u91CF\u70B9\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsx)(d.li,{children:"\u652F\u6301\u5728\u7EBF\u6269\u7F29\u5BB9"}),"\n",(0,i.jsx)(d.li,{children:"\u652F\u6301 stride \u548C stripe-width \u6765\u4F18\u5316\u6027\u80FD"}),"\n",(0,i.jsx)(d.li,{children:"RAID \u5757\u5927\u5C0F\u662F\u6027\u80FD\u5173\u952E"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(d.li,{children:"\u4E00\u822C\u4E3A\u4E86\u652F\u6491\u7075\u6D3B\u6269\u7F29\u5BB9\u4F1A\u4F7F\u7528 LVM"}),"\n",(0,i.jsx)(d.li,{children:"\u9009\u62E9 FS \u8FD8\u9700\u8981\u8003\u8651\u662F\u5426\u652F\u6301\u6821\u9A8C"}),"\n",(0,i.jsx)(d.li,{children:"XFS \u662F\u76F8\u5BF9\u6BD4\u8F83\u597D\u7684\u9009\u62E9"}),"\n"]})]})}function m(e={}){let{wrapper:d}={...(0,t.R)(),...e.components};return d?(0,i.jsx)(d,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},17776:function(e,d,n){n.d(d,{R:()=>r,x:()=>a});var s=n(7378);let i={},t=s.createContext(i);function r(e){let d=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function a(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:d},e.children)}}}]);