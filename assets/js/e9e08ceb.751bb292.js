"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["627161"],{774955:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>t,toc:()=>c,default:()=>h,metadata:()=>i,assets:()=>l,contentTitle:()=>o});var i=JSON.parse('{"id":"hardware/sbc/rpi/rpi-faq","title":"Raspberry Pi FAQ & Troubleshooting (\u5E38\u89C1\u95EE\u9898)","description":"A collection of common issues, error messages, and solutions for Raspberry Pi hardware and software.","source":"@site/../notes/hardware/sbc/rpi/rpi-faq.md","sourceDirName":"hardware/sbc/rpi","slug":"/hardware/sbc/rpi/faq","permalink":"/notes/hardware/sbc/rpi/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/hardware/sbc/rpi/rpi-faq.md","tags":[{"inline":true,"label":"Hardware","permalink":"/notes/tags/hardware"},{"inline":true,"label":"RaspberryPi","permalink":"/notes/tags/raspberry-pi"},{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"},{"inline":true,"label":"Troubleshooting","permalink":"/notes/tags/troubleshooting"},{"inline":true,"label":"Linux","permalink":"/notes/tags/linux"},{"inline":true,"label":"Firmware","permalink":"/notes/tags/firmware"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"Raspberry Pi FAQ & Troubleshooting (\u5E38\u89C1\u95EE\u9898)","tags":["Hardware","RaspberryPi","FAQ","Troubleshooting","Linux","Firmware"]},"sidebar":"docs","previous":{"title":"Circle Bare Metal C++ Environment for Raspberry Pi","permalink":"/notes/hardware/sbc/rpi/circle"},"next":{"title":"Raspberry Pi Glossary & Terminology","permalink":"/notes/hardware/sbc/rpi/glossary"}}'),s=n(486106),a=n(917776);let t={title:"Raspberry Pi FAQ & Troubleshooting (\u5E38\u89C1\u95EE\u9898)",tags:["Hardware","RaspberryPi","FAQ","Troubleshooting","Linux","Firmware"]},o="Raspberry Pi FAQ & Troubleshooting",l={},c=[{value:"Power &amp; Throttling Issues",id:"power--throttling-issues",level:2},{value:"Lightning Bolt Icon (Under-voltage)",id:"lightning-bolt-icon-under-voltage",level:3},{value:"Raspberry Pi 4 USB-C Design Flaw",id:"raspberry-pi-4-usb-c-design-flaw",level:3},{value:"Networking &amp; Connectivity",id:"networking--connectivity",level:2},{value:"No <code>wlan0</code> Interface",id:"no-wlan0-interface",level:3},{value:"Regulatory Database Error",id:"regulatory-database-error",level:3},{value:"brcmfmac: <code>brcmf_set_channel: set chanspec 0x100e fail, reason -52</code>",id:"brcmfmac-brcmf_set_channel-set-chanspec-0x100e-fail-reason--52",level:3},{value:"System Performance &amp; Stability",id:"system-performance--stability",level:2},{value:"Improving SSH/Entropy Performance",id:"improving-sshentropy-performance",level:3},{value:"Kernel Hangs: <code>vchiq-keep/0</code> blocked",id:"kernel-hangs-vchiq-keep0-blocked",level:3},{value:"Configuration &amp; Peripherals",id:"configuration--peripherals",level:2},{value:"Enabling SPI &amp; I2C",id:"enabling-spi--i2c",level:3},{value:"USB Keyboard Not Working (RPi 4)",id:"usb-keyboard-not-working-rpi-4",level:3}];function d(e){let r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"raspberry-pi-faq--troubleshooting",children:"Raspberry Pi FAQ & Troubleshooting"})}),"\n",(0,s.jsx)(r.p,{children:"A collection of common issues, error messages, and solutions for Raspberry Pi hardware and software."}),"\n",(0,s.jsx)(r.h2,{id:"power--throttling-issues",children:"Power & Throttling Issues"}),"\n",(0,s.jsx)(r.h3,{id:"lightning-bolt-icon-under-voltage",children:"Lightning Bolt Icon (Under-voltage)"}),"\n",(0,s.jsx)(r.p,{children:"This indicates your power supply is dropping below 4.63V."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Diagnostics"}),": Run ",(0,s.jsx)(r.code,{children:"vcgencmd get_throttled"})," to check the status code (see ",(0,s.jsx)(r.a,{href:"/notes/hardware/sbc/rpi/vcgencmd",children:"vcgencmd Guide"})," for details)."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Solution"}),": Use a high-quality 5V/3A power supply and a thick USB cable."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"raspberry-pi-4-usb-c-design-flaw",children:"Raspberry Pi 4 USB-C Design Flaw"}),"\n",(0,s.jsx)(r.p,{children:'Early RPi 4 models have a non-compliant USB-C implementation that prevents them from powering up when using "smart" or E-marked cables (like Apple\'s USB-C cables).'}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Solution"}),': Use a basic, "dumb" USB-C cable or the official Raspberry Pi power supply.']}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://arstechnica.com/gadgets/2019/07/raspberry-pi-4-uses-incorrect-usb-c-design-wont-work-with-some-chargers/",children:"Ars Technica: Raspberry Pi 4 uses incorrect USB-C design"})}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"networking--connectivity",children:"Networking & Connectivity"}),"\n",(0,s.jsxs)(r.h3,{id:"no-wlan0-interface",children:["No ",(0,s.jsx)(r.code,{children:"wlan0"})," Interface"]}),"\n",(0,s.jsx)(r.p,{children:"If the WiFi interface is missing:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'lshw -short\ndmesg | grep -i "brcmfmac\\|firmware"\nsudo modprobe brcmfmac\n'})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Potential Kernel Bug"}),": For some users, disabling specific features in the Broadcom driver helps:\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-txt",metastring:'title="/etc/modprobe.d/brcmfmac.conf"',children:"options brcmfmac feature_disable=0x82000\n"})}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/RaspAP/raspap-webgui/discussions/1606",children:"Relevant Discussion (GitHub)"})}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"regulatory-database-error",children:"Regulatory Database Error"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"platform regulatory.0: Direct firmware load for regulatory.db failed with error -2"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Cause"}),": Missing wireless regulatory database files."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Solution (Alpine Linux)"}),": ",(0,s.jsx)(r.code,{children:"apk add wireless-regdb"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(r.h3,{id:"brcmfmac-brcmf_set_channel-set-chanspec-0x100e-fail-reason--52",children:["brcmfmac: ",(0,s.jsx)(r.code,{children:"brcmf_set_channel: set chanspec 0x100e fail, reason -52"})]}),"\n",(0,s.jsxs)(r.p,{children:["Common when trying to set a channel not supported by the current region or hardware. Ensure your country code is set correctly in ",(0,s.jsx)(r.code,{children:"raspi-config"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"system-performance--stability",children:"System Performance & Stability"}),"\n",(0,s.jsx)(r.h3,{id:"improving-sshentropy-performance",children:"Improving SSH/Entropy Performance"}),"\n",(0,s.jsx)(r.p,{children:"Raspberry Pi lacks a hardware random number generator in some older models, which can make SSH connection establishment slow."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Use haveged to generate entropy\napk add haveged\nrc-update add haveged\nservice haveged start\n"})}),"\n",(0,s.jsxs)(r.h3,{id:"kernel-hangs-vchiq-keep0-blocked",children:["Kernel Hangs: ",(0,s.jsx)(r.code,{children:"vchiq-keep/0"})," blocked"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.code,{children:"INFO: task vchiq-keep/0:427 blocked for more than 362 seconds."})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Context"}),": VCHIQ (Video Core Image Queue) is the interface between the ARM CPU and the VideoCore GPU firmware. This often indicates a hang in the GPU firmware or a memory management issue (CMA)."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Troubleshooting"}),": Try increasing ",(0,s.jsx)(r.code,{children:"gpu_mem"})," in ",(0,s.jsx)(r.code,{children:"config.txt"})," or checking for power/voltage issues that might cause the GPU firmware to crash."]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"configuration--peripherals",children:"Configuration & Peripherals"}),"\n",(0,s.jsx)(r.h3,{id:"enabling-spi--i2c",children:"Enabling SPI & I2C"}),"\n",(0,s.jsx)(r.p,{children:"Ensure these are enabled in your hardware configuration:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-txt",metastring:'title="/boot/config.txt"',children:"dtparam=spi=on\ndtparam=i2c_arm=on\n"})}),"\n",(0,s.jsx)(r.h3,{id:"usb-keyboard-not-working-rpi-4",children:"USB Keyboard Not Working (RPi 4)"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Cause"}),": Often caused by insufficient power or USB current limits."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Solution"}),": Increase USB current limit (if supported by firmware):\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'echo "max_usb_current=1" | sudo tee -a /boot/config.txt\n'})}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},917776:function(e,r,n){n.d(r,{R:()=>t,x:()=>o});var i=n(7378);let s={},a=i.createContext(s);function t(e){let r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:r},e.children)}}}]);