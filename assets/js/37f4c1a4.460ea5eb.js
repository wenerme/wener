"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["242949"],{124947:function(n,e,d){d.r(e),d.d(e,{frontMatter:()=>t,toc:()=>h,default:()=>a,metadata:()=>s,assets:()=>c,contentTitle:()=>i});var s=JSON.parse('{"id":"service/auth/ldap/ldap-cli","title":"LDAP Command line","description":"- ldapmodify","source":"@site/../notes/service/auth/ldap/ldap-cli.md","sourceDirName":"service/auth/ldap","slug":"/service/auth/ldap/cli","permalink":"/notes/service/auth/ldap/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/ldap/ldap-cli.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1661507210000,"frontMatter":{"title":"LDAP Command line"},"sidebar":"docs","previous":{"title":"LDAP Awesome","permalink":"/notes/service/auth/ldap/awesome"},"next":{"title":"LDAP FAQ","permalink":"/notes/service/auth/ldap/faq"}}'),r=d(486106),l=d(917776);let t={title:"LDAP Command line"},i="ldap cli",c={},h=[{value:"modify",id:"modify",level:2}];function x(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"ldap-cli",children:"ldap cli"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"ldapmodify"}),"\n",(0,r.jsxs)(e.li,{children:["ldapadd -> ",(0,r.jsx)(e.code,{children:"ldapmodify -a"})]}),"\n",(0,r.jsx)(e.li,{children:"modifyDN -> rename"}),"\n",(0,r.jsx)(e.li,{children:"/etc/openldap/ldap.conf"}),"\n",(0,r.jsxs)(e.li,{children:["filter - ",(0,r.jsx)(e.a,{href:"https://www.rfc-editor.org/rfc/rfc2254.html",children:"RFC2254"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"attribute/value assertion"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"(k=v)"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"(&(k=v)(k2=v2))"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"(k=*)"})," - \u5B58\u5728 k"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"="}),",",(0,r.jsx)(e.code,{children:"<="}),",",(0,r.jsx)(e.code,{children:">="}),",",(0,r.jsx)(e.code,{children:"~="})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"!"}),",",(0,r.jsx)(e.code,{children:"|"}),",",(0,r.jsx)(e.code,{children:"&"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"*"})," \u901A\u914D\u7B26"]}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"common"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-c"}),(0,r.jsx)(e.td,{children:"ignore error"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-D binddn"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-f file"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-h host"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-H ldapuri"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-n"}),(0,r.jsx)(e.td,{children:"dry run"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-p port"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-P protocol"}),(0,r.jsx)(e.td,{children:"2,3"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-v"}),(0,r.jsx)(e.td,{children:"verbose"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-W"}),(0,r.jsx)(e.td,{children:"ask password"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-w passwd"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-x"}),(0,r.jsx)(e.td,{children:"simple auth instead of SASL"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-y passwdfile"}),(0,r.jsx)(e.td,{})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-conf",metastring:'title="/etc/openldap/ldap.conf"',children:"BASE dc=wener,dc=me\nURI ldap://ip\nTLS_CACERTDIR /etc/openldap/certs\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"ldapsearch"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-u"}),(0,r.jsx)(e.td,{children:"output dn"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-t"}),(0,r.jsx)(e.td,{children:"binary to file"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-tt"}),(0,r.jsx)(e.td,{children:"all values to file"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-T path"}),(0,r.jsx)(e.td,{children:"TMPDIR"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-F prefix"}),(0,r.jsx)(e.td,{children:"URL prefix for temporary files"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-A"}),(0,r.jsx)(e.td,{children:"attributes only"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-L"}),(0,r.jsx)(e.td,{children:"output LDIFv1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-LL"}),(0,r.jsx)(e.td,{children:"output LDIFv1 without comment"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-LLL"}),(0,r.jsx)(e.td,{children:"output LDIFv1 without comment & version"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-S sort-attr"}),(0,r.jsx)(e.td,{children:"sort by attr"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-b base"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-s scope"}),(0,r.jsxs)(e.td,{children:["base,one,",(0,r.jsx)(e.strong,{children:"sub"}),",children"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-a alias-deref"}),(0,r.jsx)(e.td,{children:"never,always,search,find"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-l timelimit"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-z sizelimit"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-M"}),(0,r.jsx)(e.td,{children:"DSA IT"})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u4FEE\u6539\u5BC6\u7801 - \u53EA\u80FD\u4FEE\u6539\u81EA\u5DF1\u7684\n# LDAPv3 Password Modify (RFC 3062)\nldappasswd -x -D uid=admin,ou=users,dc=wener,dc=me -w secret -s new\n\n# namingContexts\nldapsearch -LLL -x -b '' -s base '(objectClass=*)' namingContexts\n\n# \u751F\u6210\u5BC6\u7801\n# -m module.so\nslappasswd -h {SSHA} -s secret\n"})}),"\n",(0,r.jsx)(e.h2,{id:"modify",children:"modify"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["changetype\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["modify\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"replace: attr"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["add\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"add: attr"}),"\n",(0,r.jsx)(e.li,{children:"\u591A\u503C\u5C5E\u6027\u503C\u4E0D\u80FD\u76F8\u540C"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["delete\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"delete: attr - \u672A\u6307\u5B9A\u5219\u5220\u9664 entry"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"-"})," \u5206\u9694 \u591A\u4E2A\u64CD\u4F5C"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ldif",children:"dn: cn=ToModify,dc=example,dc=com\nchangetype: modify\nreplace: mail\nmail: new@email.com\n-\nchangetype: add\nadd: foo\nfoo: bar\n-\nchangetype: delete\ndelete: unneededEntry\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"RFC 4511 LDAP: the protocol"}),"\n",(0,r.jsx)(e.li,{children:"RFC 4512 LDAP: directory information models"}),"\n"]})]})}function a(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(x,{...n})}):x(n)}},917776:function(n,e,d){d.d(e,{R:()=>t,x:()=>i});var s=d(7378);let r={},l=s.createContext(r);function t(n){let e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);