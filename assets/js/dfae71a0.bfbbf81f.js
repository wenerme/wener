"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["469429"],{479517:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>t,toc:()=>o,default:()=>h,metadata:()=>r,assets:()=>l,contentTitle:()=>c});var r=JSON.parse('{"id":"ai/service/codex","title":"Codex","description":"- openai/codex","source":"@site/../notes/ai/service/codex.md","sourceDirName":"ai/service","slug":"/ai/service/codex","permalink":"/notes/ai/service/codex","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/ai/service/codex.md","tags":[{"inline":true,"label":"Agent","permalink":"/notes/tags/agent"},{"inline":true,"label":"CLI","permalink":"/notes/tags/cli"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1762147430000,"frontMatter":{"title":"Codex","tags":["Agent","CLI"]},"sidebar":"docs","previous":{"title":"Codex CLI \u81EA\u5B9A\u4E49\u6A21\u578B\u4F7F\u7528\u6307\u5357","permalink":"/notes/ai/service/codex-custom-model-guide"},"next":{"title":"dify","permalink":"/notes/ai/service/dify"}}'),i=s(486106),d=s(917776);let t={title:"Codex",tags:["Agent","CLI"]},c="Codex",l={},o=[{value:"\u914D\u7F6E",id:"config",level:2},{value:"auth.json",id:"authjson",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"codex",children:"Codex"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"httpss://github.com/openai/codex",children:"openai/codex"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm i -g @openai/codex\nbrew install codex\n\ncodex --version\n\n# OPENAI_API_KEY \u7B2C\u4E00\u6B21\u4F1A\u5199\u5165 auth.json \uFF0C\u4E4B\u540E\u9700\u8981\u4FEE\u6539 auth.json\nOPENAI_BASE_URL=https://api.openai.com/v1 OPENAI_API_KEY=sk-proj-1234567890 codex --model deepseek-v3.2-exp\n\n# \u4F7F\u7528\u81EA\u5B9A\u4E49 provider\uFF0C\u73AF\u5883\u53D8\u91CF\u5B9A\u4E49 env_key\nMY_PROVIDER_KEY=xyz codex\n# \u4F7F\u7528\u5185\u7F6E OPENAI provider\uFF0C\u73AF\u5883\u53D8\u91CF\u5B9A\u4E49 base_url\nOPENAI_BASE_URL=xyz codex\n\n# ~/.codex/log/codex-tui.log\nRUST_LOG=debug codex\n# \u4F1A\u5305\u542B request\nRUST_LOG=trace codex\n"})}),"\n",(0,i.jsx)(n.h2,{id:"config",children:"\u914D\u7F6E"}),"\n",(0,i.jsx)(n.p,{children:"Codex \u652F\u6301\u591A\u79CD\u8BBE\u7F6E\u914D\u7F6E\u503C\u7684\u673A\u5236\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u7279\u5B9A\u4E8E\u914D\u7F6E\u7684\u547D\u4EE4\u884C\u6807\u5FD7\uFF0C\u4F8B\u5982 ",(0,i.jsx)(n.code,{children:"--model o3"}),"\uFF08\u6700\u9AD8\u4F18\u5148\u7EA7\uFF09\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u901A\u7528 ",(0,i.jsx)(n.code,{children:"-c"}),"/",(0,i.jsx)(n.code,{children:"--config"})," \u6807\u5FD7\uFF0C\u63A5\u53D7 ",(0,i.jsx)(n.code,{children:"key=value"})," \u5BF9\uFF0C\u4F8B\u5982 ",(0,i.jsx)(n.code,{children:'--config model="o3"'}),"\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"CODEX_HOME=~/.codex"}),"\n",(0,i.jsx)(n.li,{children:"$CODEX_HOME/config.toml"}),"\n",(0,i.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/openai/codex/issues/2760",children:"https://github.com/openai/codex/issues/2760"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'model=gpt-5-codex #  \u6A21\u578B\nmodel_provider=openai\n# \u6279\u51C6\u7B56\u7565\n# untrusted, on-failure, on-request, never\napproval_policy=untrusted\n# \u6C99\u7BB1\u7B56\u7565\n# read-only, workspace-write, danger-full-access\nsandbox_mode=read-only\n\n# \u542F\u7528\u7684 profile\nprofiles=o3\n\n# MCP \u670D\u52A1\u5668\nmcp_servers=mcp-server\n\n# \u4F20\u9012\u7ED9\u5B50\u8FDB\u7A0B\u7684\u73AF\u5883\u53D8\u91CF\nshell_environment_policy=inherit=all\n\n# \u5185\u7F6E openai provider\n[model_providers.openai]\nname = "OpenAI"\n# OPENAI_BASE_URL\nbase_url = "https://api.openai.com/v1"\nenv_key = "OPENAI_API_KEY"\n# \u4F7F\u7528 v1/chat/completions \u8FD8\u662F v1/responses\n# chat, responses\nwire_api = "chat"\n\n# \u8BF7\u6C42\u914D\u7F6E\nquery_params = {}\nhttp_headers = {  }\n\nenv_http_headers = { "OpenAI-Organization" = "OPENAI_ORGANIZATION", "OpenAI-Project" = "OPENAI_PROJECT" }\n\nrequest_max_retries = 4\nstream_max_retries = 5\n# \u7B49\u5F85 stream \u54CD\u5E94\u7684\u65F6\u95F4\nstream_idle_timeout_ms = 300000\n\n[model_providers.ollama]\nname = "Ollama"\nbase_url = "http://localhost:11434/v1"\n\n[model_providers.azure]\nname = "Azure"\nbase_url = "https://YOUR_PROJECT_NAME.openai.azure.com/openai"\nenv_key = "AZURE_OPENAI_API_KEY"\nquery_params = { api-version = "2025-04-01-preview" }\nwire_api = "responses"\n'})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u53D8\u91CF"}),(0,i.jsx)(n.th,{children:"\u63CF\u8FF0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPENAI_API_KEY"})}),(0,i.jsx)(n.td,{children:"\u60A8\u7684 OpenAI API \u5BC6\u94A5\u3002"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CODEX_HOME"})}),(0,i.jsxs)(n.td,{children:["\u7528\u4E8E\u65E5\u5FD7\u3001\u914D\u7F6E\u548C\u5176\u4ED6\u6570\u636E\u7684\u76EE\u5F55\u3002\u9ED8\u8BA4\u4E3A ",(0,i.jsx)(n.code,{children:"~/.codex"}),"\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CODEX_API_KEY"})}),(0,i.jsxs)(n.td,{children:["API \u5BC6\u94A5\uFF0C\u4EC5\u5728 ",(0,i.jsx)(n.code,{children:"codex exec"})," \u4E2D\u652F\u6301\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RUST_LOG"})}),(0,i.jsxs)(n.td,{children:["\u914D\u7F6E\u65E5\u5FD7\u8BB0\u5F55\u884C\u4E3A (\u4F8B\u5982, ",(0,i.jsx)(n.code,{children:"codex_core=info,codex_tui=info"}),")\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<PROVIDER>_API_KEY"})}),(0,i.jsxs)(n.td,{children:["\u7279\u5B9A\u63D0\u4F9B\u7A0B\u5E8F\u7684 API \u5BC6\u94A5 (\u4F8B\u5982, ",(0,i.jsx)(n.code,{children:"MISTRAL_API_KEY"}),")\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<PROVIDER>_BASE_URL"})}),(0,i.jsx)(n.td,{children:"\u81EA\u5B9A\u4E49\u63D0\u4F9B\u7A0B\u5E8F\u7684\u57FA\u7840 URL\u3002"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RUST_LOG"})}),(0,i.jsxs)(n.td,{children:["\u914D\u7F6E\u65E5\u5FD7\u8BB0\u5F55\u884C\u4E3A (\u4F8B\u5982, ",(0,i.jsx)(n.code,{children:"codex_core=info,codex_tui=info"}),")\u3002"]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"authjson",children:"auth.json"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"OPENAI_API_KEY"}),"\n",(0,i.jsxs)(n.li,{children:["tokens\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["id_token\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"email"}),"\n",(0,i.jsxs)(n.li,{children:["chatgpt_plan_type\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Free, Plus, Pro, Team, Business, Enterprise, Edu"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"raw_jwt"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"access_token"}),"\n",(0,i.jsx)(n.li,{children:"refresh_token"}),"\n",(0,i.jsx)(n.li,{children:"account_id"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"last_refresh"}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},917776:function(e,n,s){s.d(n,{R:()=>t,x:()=>c});var r=s(7378);let i={},d=r.createContext(i);function t(e){let n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);