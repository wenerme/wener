"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["27161"],{74955:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>l,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>c,contentTitle:()=>t});var s=JSON.parse('{"id":"hardware/sbc/rpi/rpi-faq","title":"\u6811\u8393\u6D3E\u5E38\u89C1\u95EE\u9898","description":"- \u5982\u679C\u4E0D\u9700\u8981\u4E5F\u53EF\u4EE5 blacklist","source":"@site/../notes/hardware/sbc/rpi/rpi-faq.md","sourceDirName":"hardware/sbc/rpi","slug":"/hardware/sbc/rpi/faq","permalink":"/notes/hardware/sbc/rpi/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/hardware/sbc/rpi/rpi-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1759516997000,"frontMatter":{"title":"\u6811\u8393\u6D3E\u5E38\u89C1\u95EE\u9898","tags":["FAQ"]},"sidebar":"docs","previous":{"title":"Raspberry Pi Awesome","permalink":"/notes/hardware/sbc/rpi/awesome"},"next":{"title":"vcgencmd","permalink":"/notes/hardware/sbc/rpi/vcgencmd"}}'),a=n(86106),i=n(17776);let l={title:"\u6811\u8393\u6D3E\u5E38\u89C1\u95EE\u9898",tags:["FAQ"]},t="Raspberry Pi \u5E38\u89C1\u95EE\u9898",c={},d=[{value:"\u95EA\u7535\u6807\u5FD7",id:"\u95EA\u7535\u6807\u5FD7",level:2},{value:"\u6811\u8393\u6D3E 4B \u952E\u76D8\u4E0D\u5DE5\u4F5C",id:"\u6811\u8393\u6D3E-4b-\u952E\u76D8\u4E0D\u5DE5\u4F5C",level:2},{value:"\u6811\u8393\u6D3E 4 TypeC \u8BBE\u8BA1\u7F3A\u9677",id:"\u6811\u8393\u6D3E-4-typec-\u8BBE\u8BA1\u7F3A\u9677",level:2},{value:"\u6CA1\u6709 wlan0",id:"\u6CA1\u6709-wlan0",level:2},{value:"platform regulatory.0: Direct firmware load for regulatory.db failed with error -2",id:"platform-regulatory0-direct-firmware-load-for-regulatorydb-failed-with-error--2",level:2},{value:"task vchiq-keep/0:427 blocked for more than 362 seconds.",id:"task-vchiq-keep0427-blocked-for-more-than-362-seconds",level:2},{value:"brcmf_set_channel: set chanspec 0x100e fail, reason -52",id:"brcmf_set_channel-set-chanspec-0x100e-fail-reason--52",level:2}];function o(e){let r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"raspberry-pi-\u5E38\u89C1\u95EE\u9898",children:"Raspberry Pi \u5E38\u89C1\u95EE\u9898"})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"# SPI & i2c\nls /dev/i2c-*\nls /dev/spidev*\n\n# \u4F7F\u7528 haveged \u751F\u6210\u968F\u673A\u6570\uFF0C\u63D0\u9AD8\u968F\u673A\u6570\u751F\u6210\u901F\u5EA6\uFF0C\u5F71\u54CD SSH \u7B49\u670D\u52A1\u7684\u6027\u80FD\napk add haveged\nrc-update add haveged\nservice haveged start\n\napk add raspberrypi-utils-vcgencmd\nvcgencmd get_throttled # \u5224\u65AD\u662F\u5426\u88AB\u9650\u9891 - \u7535\u91CF\u4E0D\u8DB3\n"})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-txt",metastring:'title="/boot/config.txt"',children:"dtparam=spi=on\ndtparam=i2c_arm=on\n"})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\u5982\u679C\u4E0D\u9700\u8981\u4E5F\u53EF\u4EE5 blacklist\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"i2c_bcm2835"}),"\n",(0,a.jsx)(r.li,{children:"spi_bcm2835"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"\u95EA\u7535\u6807\u5FD7",children:"\u95EA\u7535\u6807\u5FD7"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"\u7535\u6E90\u4E0D\u8DB3\u8B66\u544A"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"vcgencmd get_throttled\n"})}),"\n",(0,a.jsx)(r.h2,{id:"\u6811\u8393\u6D3E-4b-\u952E\u76D8\u4E0D\u5DE5\u4F5C",children:"\u6811\u8393\u6D3E 4B \u952E\u76D8\u4E0D\u5DE5\u4F5C"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"\u53EF\u80FD\u662F\u56E0\u4E3A\u4F9B\u7535\u4E0D\u8DB3\u5BFC\u81F4"}),"\n",(0,a.jsx)(r.li,{children:"\u6216\u8005\u4F7F\u7528 ssh \u8BBF\u95EE"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"echo max_usb_current=1 >> /boot/config.txt\n"})}),"\n",(0,a.jsx)(r.h2,{id:"\u6811\u8393\u6D3E-4-typec-\u8BBE\u8BA1\u7F3A\u9677",children:"\u6811\u8393\u6D3E 4 TypeC \u8BBE\u8BA1\u7F3A\u9677"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"\u7528\u4E0D\u5E26 Emark Cable \u7684\u666E\u901A USB-C \u7EBF\u7F06\u6765\u4F9B\u7535"}),"\n",(0,a.jsx)(r.li,{children:"\u82F9\u679C\u7684 TypeC \u7EBF\u4E0D\u884C"}),"\n",(0,a.jsx)(r.li,{children:"\u6700\u9AD8 15W - 5V3A"}),"\n",(0,a.jsxs)(r.li,{children:["\u53C2\u8003\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://arstechnica.com/gadgets/2019/07/raspberry-pi-4-uses-incorrect-usb-c-design-wont-work-with-some-chargers/",children:"Raspberry Pi admits to faulty USB-C design on the Pi 4"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"\u6CA1\u6709-wlan0",children:"\u6CA1\u6709 wlan0"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:'lshw -short\ndmesg | grep -i "brcmfmac\\|firmware"\nmodprobe brcmfmac\n'})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\u53EF\u80FD kernel bug\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://github.com/RaspAP/raspap-webgui/discussions/1606",children:"https://github.com/RaspAP/raspap-webgui/discussions/1606"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-txt",metastring:'title="/etc/modprobe.d/brcmfmac.conf"',children:"options brcmfmac feature_disable=0x82000\n"})}),"\n",(0,a.jsx)(r.h2,{id:"platform-regulatory0-direct-firmware-load-for-regulatorydb-failed-with-error--2",children:"platform regulatory.0: Direct firmware load for regulatory.db failed with error -2"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{children:"platform regulatory.0: Direct firmware load for regulatory.db failed with error -2\ncfg80211: failed to load regulatory.db\n"})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"apk add wireless-regdb\n"})}),"\n",(0,a.jsx)(r.h2,{id:"task-vchiq-keep0427-blocked-for-more-than-362-seconds",children:"task vchiq-keep/0:427 blocked for more than 362 seconds."}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{children:'INFO: task vchiq-keep/0:427 blocked for more than 362 seconds.\n      Not tainted 6.12.31-0-rpi #1-Alpine\n"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.\ntask:vchiq-keep/0    state:D stack:0     pid:427   tgid:427   ppid:2      flags:0x00000008\nCall trace:\n __switch_to+0xe8/0x140\n __schedule+0x38c/0xb64\n schedule+0x34/0x134\n schedule_preempt_disabled+0x24/0x40\n kthread+0xbc/0x120\n ret_from_fork+0x10/0x20\n'})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"VCHIQ (Video Core Image Queue)"}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"brcmf_set_channel-set-chanspec-0x100e-fail-reason--52",children:"brcmf_set_channel: set chanspec 0x100e fail, reason -52"})]})}function h(e={}){let{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},17776:function(e,r,n){n.d(r,{R:()=>l,x:()=>t});var s=n(7378);let a={},i=s.createContext(a);function l(e){let r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);