"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["23666"],{44550:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>o,toc:()=>l,default:()=>c,metadata:()=>s,assets:()=>d,contentTitle:()=>a});var s=JSON.parse('{"id":"os/macos/macos-network","title":"macOS Network","description":"| command      | desc                                 |","source":"@site/../notes/os/macos/macos-network.md","sourceDirName":"os/macos","slug":"/os/macos/network","permalink":"/notes/os/macos/network","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/macos/macos-network.md","tags":[{"inline":true,"label":"Network","permalink":"/notes/tags/network"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1741576659000,"frontMatter":{"title":"macOS Network","tags":["Network"]},"sidebar":"docs","previous":{"title":"macOS \u672F\u8BED\u8868","permalink":"/notes/os/macos/glossary"},"next":{"title":"macOS Version","permalink":"/notes/os/macos/version"}}'),i=t(86106),r=t(17776);let o={title:"macOS Network",tags:["Network"]},a="macOS Network",d={},l=[{value:"ifconfig",id:"ifconfig",level:2}];function h(e){let n={code:"code",del:"del",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"macos-network",children:"macOS Network"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo networksetup -listallnetworkservices        # \u5217\u51FA\u6240\u6709\u7F51\u7EDC\u670D\u52A1\nsudo networksetup -listnetworkserviceorder       # \u4F18\u5148\u7EA7\nsudo networksetup -getdnsservers Wi-Fi           # \u83B7\u53D6 DNS\nsudo networksetup -setdnsservers Wi-Fi 127.0.0.1 # \u8BBE\u7F6E DNS\n\nscutil --dns # \u67E5\u770B DNS \u914D\u7F6E\n\n# flush dns cache\nsudo killall -HUP mDNSResponder\nsudo dscacheutil -flushcache\n\nnetstat -rn\n# route [-dnqtv] command [[modifiers] args]\nroute -n get default # \u83B7\u53D6\u9ED8\u8BA4\u8DEF\u7531\n\n# ip ro get 1.1.1.1\nroute -n get 1.1.1.1\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"command"}),(0,i.jsx)(n.th,{children:"desc"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ifconfig"}),(0,i.jsx)(n.td,{children:"\u663E\u793A\u548C\u914D\u7F6E\u7F51\u7EDC\u63A5\u53E3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"networksetup"}),(0,i.jsx)(n.td,{children:"\u7F51\u7EDC\u914D\u7F6E"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"netstat"}),(0,i.jsx)(n.td,{children:"\u663E\u793A\u8DEF\u7531\u8868\u3001\u7F51\u7EDC\u8FDE\u63A5\u3001\u63A5\u53E3\u7EDF\u8BA1\u7B49\u4FE1\u606F"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"route"}),(0,i.jsx)(n.td,{children:"\u8DEF\u7531\u8868\u7BA1\u7406"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"pf"}),(0,i.jsx)(n.td,{children:"\u9632\u706B\u5899, Packet filter"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.del,{children:"ipfw"})}),(0,i.jsx)(n.td,{children:"IP Firewall"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"tcpdump"}),(0,i.jsx)(n.td,{children:"\u5305\u5206\u6790\u5DE5\u5177"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"dtrace"}),(0,i.jsx)(n.td,{children:"\u8DDF\u8E2A\u5DE5\u5177"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"systat"}),(0,i.jsx)(n.td,{children:"\u5B9E\u65F6\u7EDF\u8BA1\u5DE5\u5177"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scutil"}),(0,i.jsx)(n.td,{children:"System configuration"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"lsof"}),(0,i.jsx)(n.td,{children:"List open files/ports"})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["ipfw -> pf\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"macOS 10.7+"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ifconfig",children:"ifconfig"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ifconfig [-L] [-m] [-r] INTERFACE [create] [ADDRESS_FAMILY] [ADDRESS [DEST_ADDRESS]] [PARAMETERS]\nifconfig INTERFACE destroy\nifconfig -a [-L] [-d] [-m] [-r] [-u] [-v] [ADDRESS_FAMILY]\nifconfig -l [-d] [-u] [ADDRESS_FAMILY]\nifconfig [-L] [-d] [-m] [-r] [-u] [-v] [-C]\nifconfig INTERFACE vlan VLAN-TAG vlandev IFACE\nifconfig INTERFACE -vlandev IFACE\nifconfig INTERFACE bonddev IFACE\nifconfig INTERFACE -bonddev IFACE\nifconfig INTERFACE bondmode lacp | static\nifconfig -X PATTERN [PARAMETERS]\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["ADDRESS_FAMILY\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"inet, inet6, link"}),"\n",(0,i.jsx)(n.li,{children:"ether, lladdr -> link"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"netstat",children:"netstat"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"netstat -nr # \u8DEF\u7531\u8868\n"})}),"\n",(0,i.jsx)(n.h1,{id:"route",children:"route"}),"\n",(0,i.jsx)(n.p,{children:"\u8DEF\u7531\u8868\u7BA1\u7406\u5DE5\u5177"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"routed(8) - \u7CFB\u7EDF\u8DEF\u7531\u8868\u7BA1\u7406\u5B88\u62A4\u8FDB\u7A0B"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"route [-dnqtv] command [[modifiers] args]\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"flag"}),(0,i.jsx)(n.th,{children:"for"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-d"}),(0,i.jsx)(n.td,{children:"debug-only, dry-run"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-n"}),(0,i.jsx)(n.td,{children:"number, \u4E0D resolve name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-t"}),(0,i.jsx)(n.td,{children:"test-only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-v"}),(0,i.jsx)(n.td,{children:"verbose"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"-q"}),(0,i.jsx)(n.td,{children:"quiet"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"     add         Add a route.\n     flush       Remove all routes.\n     delete      Delete a specific route.\n     change      Change aspects of a route (such as its gateway).\n     get         Lookup and display the route for a destination.\n     monitor     Continuously report any changes to the routing information\n                 base, routing lookup misses, or suspected network partition-\n                 ings.\n\n     The monitor command has the syntax:\n\n           route [-n] monitor\n\n     The flush command has the syntax:\n\n           route [-n] flush [family]\n\n     If the flush command is specified, route will ``flush'' the routing\n     tables of all gateway entries.  When the address family may is specified\n     by any of the -osi, -xns, -atalk, -inet6, or -inet modifiers, only routes\n     having destinations with addresses in the delineated family will be\n     deleted.\n\n     The other commands have the following syntax:\n\n           route [-n] command [-net | -host] [-ifscope boundif] destination\n           gateway [netmask]\n\n     where destination is the destination host or network, gateway is the\n     next-hop intermediary via which packets should be routed.  Routes to a\n     particular host may be distinguished from those to a network by inter-\n     preting the Internet address specified as the destination argument.  The\n     optional modifiers -net and -host force the destination to be interpreted\n     as a network or a host, respectively.  Otherwise, if the destination has\n     a ``local address part'' of INADDR_ANY (0.0.0.0), or if the destination\n     is the symbolic name of a network, then the route is assumed to be to a\n     network; otherwise, it is presumed to be a route to a host.  Optionally,\n     the destination could also be specified in the net/bits format.\n\n     For example, 128.32 is interpreted as -host 128.0.0.32; 128.32.130 is\n     interpreted as -host 128.32.0.130; -net 128.32 is interpreted as\n     128.32.0.0; -net 128.32.130 is interpreted as 128.32.130.0; and\n     192.168.64/20 is interpreted as -net 192.168.64 -netmask 255.255.240.0.\n\n     A destination of default is a synonym for -net 0.0.0.0, which is the\n     default route.\n\n     If the destination is directly reachable via an interface requiring no\n     intermediary system to act as a gateway, the -interface modifier should\n     be specified; the gateway given is the address of this host on the common\n     network, indicating the interface to be used for transmission.  Alter-\n     nately, if the interface is point to point the name of the interface\n     itself may be given, in which case the route remains valid even if the\n     local or remote addresses change.\n\n     For AF_INET and AF_INET6, the -ifscope modifier specifies the additional\n     property of the route related to the interface scope derived from inter-\n     face boundif.  Such property allows for the presence of multiple route\n     entries with the same destination, where each route is associated with a\n     unique interface.  This modifier is required in order to manipulate route\n     entries marked with the RTF_IFSCOPE flag.\n\n     The optional modifier -link specify that all subsequent addresses are\n     specified as link-level addresses, and the names must be numeric specifi-\n     cations rather than symbolic names.\n\n     The optional -netmask modifier is intended to achieve the effect of an\n     OSI ESIS redirect with the netmask option, or to manually add subnet\n     routes with netmasks different from that of the implied network interface\n     (as would otherwise be communicated using the OSPF or ISIS routing proto-\n     cols).  One specifies an additional ensuing address parameter (to be\n     interpreted as a network mask).  The implicit network mask generated in\n     the AF_INET case can be overridden by making sure this option follows the\n     destination parameter.\n\n     For AF_INET6, the -prefixlen qualifier is available instead of the -mask\n     qualifier because non-continuous masks are not allowed in IPv6.  For\n     example, -prefixlen 32 specifies network mask of\n     ffff:ffff:0000:0000:0000:0000:0000:0000 to be used.  The default value of\n     prefixlen is 64 to get along with the aggregatable address.  But 0 is\n     assumed if default is specified.  Note that the qualifier works only for\n     AF_INET6 address family.\n\n     Routes have associated flags which influence operation of the protocols\n     when sending to destinations matched by the routes.  These flags may be\n     set (or sometimes cleared) by indicating the following corresponding mod-\n     ifiers:\n\n     -cloning   RTF_CLONING    - generates a new route on use\n     -xresolve  RTF_XRESOLVE   - emit mesg on use (for external lookup)\n     -iface    ~RTF_GATEWAY    - destination is directly reachable\n     -static    RTF_STATIC     - manually added route\n     -nostatic ~RTF_STATIC     - pretend route added by kernel or daemon\n     -reject    RTF_REJECT     - emit an ICMP unreachable when matched\n     -blackhole RTF_BLACKHOLE  - silently discard pkts (during updates)\n     -proto1    RTF_PROTO1     - set protocol specific routing flag #1\n     -proto2    RTF_PROTO2     - set protocol specific routing flag #2\n     -llinfo    RTF_LLINFO     - validly translates proto addr to link addr\n\n     The optional modifiers -rtt, -rttvar, -sendpipe, -recvpipe, -mtu,\n     -hopcount, -expire, and -ssthresh provide initial values to quantities\n     maintained in the routing entry by transport level protocols, such as TCP\n     or TP4.  These may be individually locked by preceding each such modifier\n     to be locked by the -lock meta-modifier, or one can specify that all\n     ensuing metrics may be locked by the -lockrest meta-modifier.\n\n     In a change or add command where the destination and gateway are not suf-\n     ficient to specify the route (as in the ISO case where several interfaces\n     may have the same address), the -ifp or -ifa modifiers may be used to\n     determine the interface or interface address.\n\n     The optional -proxy modifier specifies that the RTF_LLINFO routing table\n     entry is the ``published (proxy-only)'' ARP entry, as reported by arp(8).\n\n     All symbolic names specified for a destination or gateway are looked up\n     first as a host name using gethostbyname(3).  If this lookup fails,\n     getnetbyname(3) is then used to interpret the name as that of a network.\n\n     Route uses a routing socket and the new message types RTM_ADD,\n     RTM_DELETE, RTM_GET, and RTM_CHANGE.  As such, only the super-user may\n     modify the routing tables.\n\nDIAGNOSTICS\n     add [host | network ] %s: gateway %s flags %x  The specified route is\n     being added to the tables.  The values printed are from the routing table\n     entry supplied in the ioctl(2) call.  If the gateway address used was not\n     the primary address of the gateway (the first one returned by\n     gethostbyname(3)), the gateway address is printed numerically as well as\n     symbolically.\n\n     delete [ host | network ] %s: gateway %s flags %x  As above, but when\n     deleting an entry.\n\n     %s %s done  When the flush command is specified, each routing table entry\n     deleted is indicated with a message of this form.\n\n     Network is unreachable  An attempt to add a route failed because the\n     gateway listed was not on a directly-connected network.  The next-hop\n     gateway must be given.\n\n     not in table  A delete operation was attempted for an entry which wasn't\n     present in the tables.\n\n     routing table overflow  An add operation was attempted, but the system\n     was low on resources and was unable to allocate memory to create the new\n     entry.\n\n     gateway uses the same route  A change operation resulted in a route whose\n     gateway uses the same route as the one being changed.  The next-hop gate-\n     way should be reachable through a different route.\n\n     The route utility exits 0 on success, and >0 if an error occurs.\n\nSEE ALSO\n     netintro(4), route(4), arp(8), routed(8)\n\nHISTORY\n     The route command appeared in 4.2BSD.\n\nBUGS\n     The first paragraph may have slightly exaggerated routed(8)'s abilities.\n\n4.4BSD                           June 8, 2001                           4.4BSD\n"})})]})}function c(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},17776:function(e,n,t){t.d(n,{R:()=>o,x:()=>a});var s=t(7378);let i={},r=s.createContext(i);function o(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);