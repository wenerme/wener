"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["24319"],{7885:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>l,toc:()=>c,default:()=>d,metadata:()=>t,assets:()=>a,contentTitle:()=>o});var t=JSON.parse('{"id":"web/react/react-router","title":"Remix Router","description":"- remix-run/react-router","source":"@site/../notes/web/react/react-router.md","sourceDirName":"web/react","slug":"/web/react/router","permalink":"/notes/web/react/router","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/react/react-router.md","tags":[{"inline":true,"label":"Router","permalink":"/notes/tags/router"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1725936322000,"frontMatter":{"title":"Remix Router","tags":["Router"]},"sidebar":"docs","previous":{"title":"react-reconciler","permalink":"/notes/web/react/reconciler"},"next":{"title":"react-spectrum","permalink":"/notes/web/react/spectrum"}}'),i=r(86106),s=r(17776);let l={title:"Remix Router",tags:["Router"]},o="Remix Router",a={},c=[{value:"Notes",id:"notes",level:2},{value:"@remix-run/router",id:"remix-runrouter",level:2},{value:"Router",id:"router",level:2},{value:"RouterState",id:"routerstate",level:2},{value:"React Router v7",id:"react-router-v7",level:2},{value:"React Router v6",id:"react-router-v6",level:2},{value:"Switch vs Route",id:"switch-vs-route",level:2},{value:"A history only accepts one active listener",id:"a-history-only-accepts-one-active-listener",level:2}];function h(e){let n={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"remix-router",children:"Remix Router"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router",children:"remix-run/react-router"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"npm:react-router -> @remix-run/router"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.del,{children:(0,i.jsx)(n.a,{href:"https://github.com/remix-run/history",children:"remix-run/history"})})," \u5408\u5E76\u5230\u4E86 @remix-run/router"]}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 ReactDOM \u548C ReactNative"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 MemoryRouter"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 HashRouter \u548C BrowserRouter"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 Full-Stack"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 Form"}),"\n",(0,i.jsxs)(n.li,{children:["remix \u6838\u5FC3\u7684\u8DEF\u7531\u903B\u8F91\u4E5F\u6709 @remix/router \u5B9E\u73B0\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u57FA\u4E8E\u6587\u4EF6\u8DEF\u7531"}),"\n",(0,i.jsx)(n.li,{children:"\u751F\u6210\u8DEF\u7531\u8868"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u56E0\u4E3A\u540C\u65F6\u517C\u5BB9\u652F\u6301 ReactDOM\u3001ReactNative\u3001Remix Run - \u56E0\u6B64\u727A\u7272\u4E86\u5F88\u591A\u5355\u4E2A\u5E73\u53F0\u7684\u9AD8\u7EA7\u7279\u6027\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u73B0\u5728\uFF082024\u5E74\uFF09\u91CD\u5FC3\u5728 remix run - \u56E0\u6B64\u4E3B\u8981\u5728 ssr/Server Component \u7B49\u6570\u636E\u670D\u52A1\u76F8\u5173\u90E8\u5206"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u80FD\u5D4C\u5957 Router"}),"\n",(0,i.jsx)(n.li,{children:"children \u7EDD\u5BF9\u8DEF\u5F84\u9700\u8981\u5305\u542B parent \u524D\u7F00"}),"\n",(0,i.jsxs)(n.li,{children:["NavLink \u4F7F\u7528 routerState \u4F1A\u6BCF\u6B21 rerender\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/blob/f722d7fda7a5aff1d90fdc2d8cf51f14f7870376/packages/react-router-dom/index.tsx#L427-L501",children:"react-router-dom/index.tsx#L427-L501"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["useNavigate \u4F1A rerender ",(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/7634",children:"#7634"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u65E0\u6CD5\u83B7\u53D6\u5230 history - \u9664\u975E\u81EA\u5DF1\u505A\u4E0A\u4E0B\u6587\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"useContext(UNSAFE_NavigationContext).navigator as History"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"unsafe \u65B9\u5F0F\u83B7\u53D6 history"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"createHashRouter \u548C createBrowserRouter \u90FD\u65E0\u6CD5\u81EA\u5DF1\u4F20\u9012 history"}),"\n",(0,i.jsxs)(n.li,{children:["history \u53EA\u80FD\u505A\u4E00\u6B21 listen - \u56E0\u6B64\u62FF\u5230\u4E86\u610F\u4E49\u4E5F\u4E0D\u5927\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"v6.4+"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["useSearchParams \u4F1A\u5BFC\u81F4\u4EFB\u610F\u53C2\u6570\u53D8\u5316\u90FD\u4F1A rerender - \u65E0\u6CD5\u53EA\u76D1\u542C\u4E00\u4E2A\u53C2\u6570\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53EA\u80FD\u5C1D\u8BD5\u901A\u8FC7 history \u91CD\u65B0\u5C01\u88C5"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/discussions/9851",children:"https://github.com/remix-run/react-router/discussions/9851"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6CA1\u6709\u8FC7\u591A\u66B4\u9732 low-level \u63A5\u53E3\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5BFC\u81F4\u90E8\u5206\u7279\u6B8A\u529F\u80FD\u4E0D\u597D\u5B9E\u73B0"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm add react-router-dom\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// for https://github.com/HTTPArchive/wappalyzer\nwindow.__remixContext; // Remix \u5168\u5C40\u68C0\u6D4B\nwindow.__reactRouterVersion; // ReactRouter\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CWV - Core Web Vitals"}),"\n",(0,i.jsxs)(n.li,{children:["Path\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"*"})," - \u5904\u7406 NotFound"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:":handle"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"const { handle } = useParams()"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsx)(n.admonition,{title:"v6",type:"caution",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/7634",children:"react-router#7634"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"useNavigate \u4F1A\u5BFC\u81F4 rerender"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/8139",children:"react-router#8139"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"usePrompt & useBlocker"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/8254",children:"react-router#8254"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"path regex"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/8381",children:"react-router#8381"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Optional routing parameters in v6"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Router - \u4E0D\u80FD\u5D4C\u5957\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["NavigationContext - { basename, navigator, static }\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"useNavigate"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["LocationContext - { location, navigationType }\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"useLocation"}),"\n",(0,i.jsx)(n.li,{children:"useNavigationType"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"stripBasename - \u5B9E\u73B0 basename \u80FD\u529B"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Routes\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"createRoutesFromChildren"}),"\n",(0,i.jsxs)(n.li,{children:["useRoutes - \u652F\u6301\u81EA\u5B9A\u4E49 location - \u9ED8\u8BA4\u4F7F\u7528\u4E0A\u4E0B\u6587 location\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"matchRoutes - \u5339\u914D\u79FB\u9664 parentPathnameBase"}),"\n",(0,i.jsxs)(n.li,{children:["renderMatches\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"RouteContext - { outlet, matches }"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["matchRoutes\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["flattenRoutes\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["computeScore\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"segments.length +"}),"\n",(0,i.jsxs)(n.li,{children:["splatPenalty=-1 - ",(0,i.jsx)(n.code,{children:"*"})]}),"\n",(0,i.jsxs)(n.li,{children:["indexRouteValue=2 - ",(0,i.jsx)(n.code,{children:"index: true"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"index \u8DEF\u7531\u4E0D\u80FD\u6709 children"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["dynamicSegmentValue=3 - ",(0,i.jsx)(n.code,{children:":id"})]}),"\n",(0,i.jsxs)(n.li,{children:["emptySegmentValue=1 - ",(0,i.jsx)(n.code,{children:'""'})]}),"\n",(0,i.jsxs)(n.li,{children:["staticSegmentValue=10 - ",(0,i.jsx)(n.code,{children:"/user"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"rankRouteBranches"}),"\n",(0,i.jsx)(n.li,{children:"matchRouteBranch"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Context\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"DataRouterContext"}),"\n",(0,i.jsxs)(n.li,{children:["DataRouterStateContext - ",(0,i.jsx)(n.code,{children:"Router['state']"})]}),"\n",(0,i.jsx)(n.li,{children:"LocationContext"}),"\n",(0,i.jsx)(n.li,{children:"NavigationContext"}),"\n",(0,i.jsx)(n.li,{children:"RouteContext"}),"\n",(0,i.jsx)(n.li,{children:"RouteErrorContext"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["createMemoryRouter\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"-> createRouter+createMemoryHistory"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/blob/main/packages/react-router/index.ts",children:"https://github.com/remix-run/react-router/blob/main/packages/react-router/index.ts"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"interface DataRouterContextObject extends Omit<NavigationContextObject, 'future'> {\n  router: Router;\n  staticContext?: StaticHandlerContext;\n}\n\ninterface NavigationContextObject {\n  basename: string;\n  navigator: Navigator;\n  static: boolean;\n  future: {\n    v7_relativeSplatPath: boolean;\n  };\n}\n\ninterface RouteContextObject {\n  outlet: React.ReactElement | null;\n  matches: RouteMatch[];\n  isDataRoute: boolean;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"remix-runrouter",children:"@remix-run/router"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"history + Router"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/blob/main/packages/router/router.ts",children:"https://github.com/remix-run/react-router/blob/main/packages/router/router.ts"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"router",children:"Router"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/**\n * A Router instance manages all navigation and data loading/mutations\n */\nexport interface Router {\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the basename for the router\n   */\n  get basename(): RouterInit['basename'];\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the future config for the router\n   */\n  get future(): FutureConfig;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the current state of the router\n   */\n  get state(): RouterState;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the routes for this router instance\n   */\n  get routes(): AgnosticDataRouteObject[];\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the window associated with the router\n   */\n  get window(): RouterInit['window'];\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Initialize the router, including adding history listeners and kicking off\n   * initial data fetches.  Returns a function to cleanup listeners and abort\n   * any in-progress loads\n   */\n  initialize(): Router;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Subscribe to router.state updates\n   *\n   * @param fn function to call with the new state\n   */\n  subscribe(fn: RouterSubscriber): () => void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Enable scroll restoration behavior in the router\n   *\n   * @param savedScrollPositions Object that will manage positions, in case\n   *                             it's being restored from sessionStorage\n   * @param getScrollPosition    Function to get the active Y scroll position\n   * @param getKey               Function to get the key to use for restoration\n   */\n  enableScrollRestoration(\n    savedScrollPositions: Record<string, number>,\n    getScrollPosition: GetScrollPositionFunction,\n    getKey?: GetScrollRestorationKeyFunction,\n  ): () => void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Navigate forward/backward in the history stack\n   * @param to Delta to move in the history stack\n   */\n  navigate(to: number): Promise<void>;\n\n  /**\n   * Navigate to the given path\n   * @param to Path to navigate to\n   * @param opts Navigation options (method, submission, etc.)\n   */\n  navigate(to: To | null, opts?: RouterNavigateOptions): Promise<void>;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Trigger a fetcher load/submission\n   *\n   * @param key     Fetcher key\n   * @param routeId Route that owns the fetcher\n   * @param href    href to fetch\n   * @param opts    Fetcher options, (method, submission, etc.)\n   */\n  fetch(key: string, routeId: string, href: string | null, opts?: RouterFetchOptions): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Trigger a revalidation of all current route loaders and fetcher loads\n   */\n  revalidate(): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Utility function to create an href for the given location\n   * @param location\n   */\n  createHref(location: Location | URL): string;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Utility function to URL encode a destination path according to the internal\n   * history implementation\n   * @param to\n   */\n  encodeLocation(to: To): Path;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Get/create a fetcher for the given key\n   * @param key\n   */\n  getFetcher<TData = any>(key: string): Fetcher<TData>;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Delete the fetcher for a given key\n   * @param key\n   */\n  deleteFetcher(key: string): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Cleanup listeners and abort any in-progress loads\n   */\n  dispose(): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Get a navigation blocker\n   * @param key The identifier for the blocker\n   * @param fn The blocker function implementation\n   */\n  getBlocker(key: string, fn: BlockerFunction): Blocker;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Delete a navigation blocker\n   * @param key The identifier for the blocker\n   */\n  deleteBlocker(key: string): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * HMR needs to pass in-flight route updates to React Router\n   * TODO: Replace this with granular route update APIs (addRoute, updateRoute, deleteRoute)\n   */\n  _internalSetRoutes(routes: AgnosticRouteObject[]): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Internal fetch AbortControllers accessed by unit tests\n   */\n  _internalFetchControllers: Map<string, AbortController>;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Internal pending DeferredData instances accessed by unit tests\n   */\n  _internalActiveDeferreds: Map<string, DeferredData>;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"routerstate",children:"RouterState"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/**\n * State maintained internally by the router.  During a navigation, all states\n * reflect the the \"old\" location unless otherwise noted.\n */\nexport interface RouterState {\n  /**\n   * The action of the most recent navigation\n   */\n  historyAction: HistoryAction;\n\n  /**\n   * The current location reflected by the router\n   */\n  location: Location;\n\n  /**\n   * The current set of route matches\n   */\n  matches: AgnosticDataRouteMatch[];\n\n  /**\n   * Tracks whether we've completed our initial data load\n   */\n  initialized: boolean;\n\n  /**\n   * Current scroll position we should start at for a new view\n   *  - number -> scroll position to restore to\n   *  - false -> do not restore scroll at all (used during submissions)\n   *  - null -> don't have a saved position, scroll to hash or top of page\n   */\n  restoreScrollPosition: number | false | null;\n\n  /**\n   * Indicate whether this navigation should skip resetting the scroll position\n   * if we are unable to restore the scroll position\n   */\n  preventScrollReset: boolean;\n\n  /**\n   * Tracks the state of the current navigation\n   */\n  navigation: Navigation;\n\n  /**\n   * Tracks any in-progress revalidations\n   */\n  revalidation: RevalidationState;\n\n  /**\n   * Data from the loaders for the current matches\n   */\n  loaderData: RouteData;\n\n  /**\n   * Data from the action for the current matches\n   */\n  actionData: RouteData | null;\n\n  /**\n   * Errors caught from loaders for the current matches\n   */\n  errors: RouteData | null;\n\n  /**\n   * Map of current fetchers\n   */\n  fetchers: Map<string, Fetcher>;\n\n  /**\n   * Map of current blockers\n   */\n  blockers: Map<string, Blocker>;\n}\n"})}),"\n",(0,i.jsx)(n.h1,{id:"version",children:"Version"}),"\n",(0,i.jsx)(n.h2,{id:"react-router-v7",children:"React Router v7"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"react-router v7 & remix.run v3"}),"\n",(0,i.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://remix.run/blog/merging-remix-and-react-router",children:"Merging Remix and React Router"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"react-router-v6",children:"React Router v6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u66FF\u4EE3 React Router v3,v4,v5, Reach Router"}),"\n",(0,i.jsxs)(n.li,{children:["\u652F\u6301 \u5D4C\u5957\u8DEF\u7531\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<Outlet/>"})," \u6E32\u67D3\u4E0B\u4E00\u4E2A\u5339\u914D"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 \u76F8\u5BF9\u8DEF\u5F84"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 basename - \u8DEF\u7531\u66F4\u52A0\u901A\u7528\uFF0C\u65B9\u4FBF\u5D4C\u5957"}),"\n",(0,i.jsxs)(n.li,{children:["\u5185\u7F6E RouterObject - \u76F4\u63A5 JS \u914D\u7F6E\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"useRoutes"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"\u7EAF Hook \u91CD\u5199 - \u8981\u6C42 React 16.8+"}),"\n",(0,i.jsxs)(n.li,{children:["\u4E0D\u518D\u9700\u8981 exact - \u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"*"})," \u8FDB\u884C\u4EFB\u610F\u5339\u914D"]}),"\n",(0,i.jsx)(n.li,{children:"element \u66FF\u4EE3 component \u548C render"}),"\n",(0,i.jsx)(n.li,{children:"\u57FA\u4E8E rank \u7684\u8DEF\u7531\u4F18\u5148\u7EA7"}),"\n",(0,i.jsxs)(n.li,{children:["\u4E0D\u518D\u4F7F\u7528 path-to-regexp - \u56E0\u6B64\u8DEF\u5F84\u5199\u6CD5\u4F1A\u6709\u533A\u522B\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/remix-run/react-router/discussions/8132",children:"https://github.com/remix-run/react-router/discussions/8132"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://reactrouter.com/docs/en/v6/getting-started/faq#what-happened-to-regexp-routes-paths",children:"What Happened to Regexp Routes Paths?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u65E0\u6CD5 Rank \u8DEF\u5F84"}),"\n",(0,i.jsxs)(n.li,{children:["bundle size \u8F83\u5927- 1/3 of react-router\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"path-to-regexp 6kB/2.2kB"}),"\n",(0,i.jsxs)(n.li,{children:["react-router - 11kB/4kB\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"history - 6kB/2kB"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"react-router-dom + 7kB/2kB"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://remix.run/blog/react-router-v6",children:"https://remix.run/blog/react-router-v6"})}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6682\u4E0D\u652F\u6301 Prompt"}),"\n",(0,i.jsxs)(n.li,{children:["\u4E0D\u518D\u66B4\u9732 history - \u4F7F\u7528\u4E0A\u6709\u5F88\u591A\u4E0D\u65B9\u4FBF\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53EF\u4F7F\u7528 unstable_HistoryRouter \u81EA\u5DF1\u63D0\u4F9B history"}),"\n",(0,i.jsx)(n.li,{children:"\u53EF\u80FD\u5B58\u5728\u5F15\u5165\u4E0D\u540C\u7248\u672C history \u5BFC\u81F4\u51B2\u7A81\u7684\u95EE\u9898"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://reactrouter.com/docs/en/v6/upgrading/v5#upgrade-to-react-router-v6",children:"https://reactrouter.com/docs/en/v6/upgrading/v5#upgrade-to-react-router-v6"})}),"\n",(0,i.jsx)(n.li,{children:"Switch -> Routes"}),"\n",(0,i.jsx)(n.li,{children:"Redirect -> Navigate"}),"\n",(0,i.jsxs)(n.li,{children:["Link \u79FB\u9664 component \u719F\u6089\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u63A8\u8350\u4F7F\u7528\u9ED8\u8BA4 ",(0,i.jsx)(n.code,{children:"<a>"})]}),"\n",(0,i.jsx)(n.li,{children:"\u4F7F\u7528 useLinkClickHandler \u6784\u5EFA\u81EA\u5B9A\u4E49 Link"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["useHistory -> useNavigate,useSearchParams\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u63A5\u53E3\u4E0D\u4E00\u6837"}),"\n",(0,i.jsx)(n.li,{children:"useHistory \u8FD4\u56DE history \u5B9E\u4F8B"}),"\n",(0,i.jsx)(n.li,{children:"useNavigate \u8FD4\u56DE\u5C01\u88C5\u540E\u8F85\u52A9\u65B9\u6CD5"}),"\n",(0,i.jsx)(n.li,{children:"\u66F4\u597D\u7684\u652F\u6301 React suspense - useTransition"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<NavLink exact />"})," -> ",(0,i.jsx)(n.code,{children:"<NavLink end />"})]}),"\n",(0,i.jsx)(n.li,{children:"useRouteMatch -> useMatch"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["2024-06-24 v6.24 \u652F\u6301 Laze Route Discovery/Fog of War\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8DEF\u7531\u6CA1\u627E\u5230\u65F6\u8C03\u7528 ",(0,i.jsx)(n.code,{children:"unstable_patchRoutesOnMiss({ path, patch })"}),", \u5728 createBrowserRouter \u6307\u5B9A\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u901A\u8FC7 patch \u5BF9 router \u8FDB\u884C\u8865\u4E01"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"\u4E5F\u53EF\u4EE5\u8003\u8651\u5728 route \u7684 handle \u589E\u52A0 \u81EA\u5B9A\u4E49\u903B\u8F91\uFF0C\u7136\u540E\u5728 onMiss \u65F6\u53D1\u73B0\u8FDB\u884C\u8C03\u7528"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://reactrouter.com/en/main/routers/create-browser-router#optsunstable_patchroutesonmiss",children:"https://reactrouter.com/en/main/routers/create-browser-router#optsunstable_patchroutesonmiss"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["2023-10-31 v6.18 \u589E\u52A0 Fetcher\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"useFetcher, useFetchers"}),"\n",(0,i.jsx)(n.li,{children:"Form, useSubmit \u589E\u52A0 navigate/fetcherKey \u53EF\u6307\u5411 fetcher"}),"\n",(0,i.jsx)(n.li,{children:"future.v7_fetcherPersist \u53EF\u4EE5\u907F\u514D\u5728 unmount \u65F6\u6E05\u9664 fetcher \u72B6\u6001"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["2023-10-31 v6.15 \u589E\u52A0 redirectDocument \u5728 loader/action \u89E6\u53D1 reload\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"v7 \u53EF\u80FD\u4F1A\u9ED8\u8BA4\u4E3A json"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"2023-06-23 v6.14 Form \u63D0\u4EA4\u652F\u6301 json/text, \u901A\u8FC7 encType \u8BBE\u7F6E"}),"\n",(0,i.jsx)(n.li,{children:"2023-06-06 v6.12 \u652F\u6301 React.startTransition, \u589E\u52A0 future.v7_startTransition"}),"\n",(0,i.jsxs)(n.li,{children:["2023-03-10 v6.9 \u589E\u52A0 route.lazy, route.Component, route.ErrorBoundary\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53EF lazy \u7684\u5185\u5BB9 loader, action, element/Component, errorElement/ErrorBoundary, shouldRevalidate, handle"}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u53EF\u4EE5 lazy \u7684\u5185\u5BB9 path, index, children"}),"\n",(0,i.jsx)(n.li,{children:"\u5728 loading, submitting \u4F1A\u52A0\u8F7D lazy \u7684\u5185\u5BB9"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["2023-01-26 v6.8 \u5141\u8BB8 ",(0,i.jsx)(n.code,{children:"<Link to>"})," \u4E3A\u5916\u90E8 url"]}),"\n",(0,i.jsxs)(n.li,{children:["2023-01-18 v6.7 \u589E\u52A0 unstable_useBlocker/unstable_usePrompt, ",(0,i.jsx)(n.code,{children:"<Form preventScrollReset>"})]}),"\n",(0,i.jsxs)(n.li,{children:["2022-12-16 v6.5 \u652F\u6301 ",(0,i.jsx)(n.code,{children:"?"})," \u8868\u793A\u53EF\u9009 ",(0,i.jsx)(n.code,{children:":lang?/about/us?"})]}),"\n",(0,i.jsxs)(n.li,{children:["2022-09-13 v6.4 \u589E\u52A0 Remix Data APIs ",(0,i.jsx)(n.code,{children:"<RouterProvider>"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5C06 remix \u7684 Data APIs \u96C6\u6210\u5230 react-router \u4E2D"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://remix.run/blog/react-routering-remix",children:"https://remix.run/blog/react-routering-remix"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(n.h2,{id:"switch-vs-route",children:"Switch vs Route"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<Switch>"})," \u53EA\u6E32\u67D3\u4E00\u4E2A\u8DEF\u7531. \u800C ",(0,i.jsx)(n.code,{children:"<Route>"})," \u4F1A\u6E32\u67D3\u6240\u6709\u5339\u914D\u7684\u8DEF\u7531\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"a-history-only-accepts-one-active-listener",children:"A history only accepts one active listener"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"v6 \u7684 History \u53EA\u80FD\u88AB router \u76D1\u542C"}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},17776:function(e,n,r){r.d(n,{R:()=>l,x:()=>o});var t=r(7378);let i={},s=t.createContext(i);function l(e){let n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);