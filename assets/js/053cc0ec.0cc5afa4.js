"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["79870"],{60121:function(n,e,r){r.r(e),r.d(e,{frontMatter:()=>l,toc:()=>t,default:()=>a,metadata:()=>i,assets:()=>o,contentTitle:()=>d});var i=JSON.parse('{"id":"devops/container/container-faq","title":"\u5BB9\u5668\u5E38\u89C1\u95EE\u9898","description":"docker vs containerd","source":"@site/../notes/devops/container/container-faq.md","sourceDirName":"devops/container","slug":"/devops/container/faq","permalink":"/notes/devops/container/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/container/container-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1759894156000,"frontMatter":{"title":"\u5BB9\u5668\u5E38\u89C1\u95EE\u9898","hide_title":true,"tags":["FAQ"]},"sidebar":"docs","previous":{"title":"Container Awesome","permalink":"/notes/devops/container/awesome"},"next":{"title":"Container Image","permalink":"/notes/devops/container/image"}}'),s=r(86106),c=r(17776);let l={title:"\u5BB9\u5668\u5E38\u89C1\u95EE\u9898",hide_title:!0,tags:["FAQ"]},d="\u5BB9\u5668\u5E38\u89C1\u95EE\u9898",o={},t=[{value:"docker vs containerd",id:"docker-vs-containerd",level:2},{value:"LXC vs LXD vs Docker",id:"lxc-vs-lxd-vs-docker",level:2},{value:"GUI in Container",id:"gui-in-container",level:2},{value:"Docker Remote",id:"docker-remote",level:2},{value:"Resource in container",id:"resource-in-container",level:2}];function h(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,c.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u5BB9\u5668\u5E38\u89C1\u95EE\u9898",children:"\u5BB9\u5668\u5E38\u89C1\u95EE\u9898"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \u901A\u8FC7 ssh \u4F20\u8F93\u955C\u50CF - \u4E0D\u80FD\u5206\u5C42\u53EA\u80FD\u5168\u91CF\ndocker save myimage:tag | ssh user@remote 'docker load'\n"})}),"\n",(0,s.jsx)(e.h2,{id:"docker-vs-containerd",children:"docker vs containerd"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["docker\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5E95\u5C42\u4F7F\u7528 containerd"}),"\n",(0,s.jsx)(e.li,{children:"\u7BA1\u7406 volume\u3001\u7F51\u7EDC\u3001swarm\u3001service \u7B49"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["containerd\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u66B4\u9732\u4E3A unix socket"}),"\n",(0,s.jsx)(e.li,{children:"grpc \u63A5\u53E3"}),"\n",(0,s.jsx)(e.li,{children:"\u5C01\u88C5\u5BB9\u5668\u8FD0\u884C\u65F6\u4E3A\u7EDF\u4E00\u63A5\u53E3"}),"\n",(0,s.jsx)(e.li,{children:"Linux \u5E95\u5C42\u4F7F\u7528 runc"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["containerd-shim\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"docker \u542F\u52A8\u7684\u6BCF\u4E2A\u5BB9\u5668\u7684\u7236\u8FDB\u7A0B"}),"\n",(0,s.jsx)(e.li,{children:"\u4E0D\u5BF9 docker \u76F4\u63A5\u4F9D\u8D56\uFF0C\u5141\u8BB8\u5347\u7EA7 docker \u5B88\u62A4\u8FDB\u7A0B"}),"\n",(0,s.jsx)(e.li,{children:"\u7EF4\u62A4 STDIO \u548C fds"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u6CE8\u610F\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u56E0\u4E3A docker \u7EDF\u4E00\u7BA1\u7406\uFF0C\u9000\u51FA\u548C\u6E05\u7406\u90FD\u6BD4\u8F83\u65B9\u4FBF"}),"\n",(0,s.jsx)(e.li,{children:"conatinerd \u53EF\u80FD\u9700\u8981\u624B\u52A8\u6E05\u7406\u6B8B\u4F59\u7684 shim"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"lxc-vs-lxd-vs-docker",children:"LXC vs LXD vs Docker"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Docker\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4E00\u822C\u7528\u4E8E\u9694\u79BB\u8FD0\u884C\u5355\u8FDB\u7A0B\u65E0\u72B6\u6001\u5E94\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u4E0D\u4F1A\u8003\u8651 init, supervisor, syslog, cron \u7B49\u573A\u666F"}),"\n",(0,s.jsxs)(e.li,{children:["\u63D0\u4F9B\u4E86\u7279\u522B\u591A\u7684\u7BA1\u7406\u529F\u80FD\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6253\u5305"}),"\n",(0,s.jsx)(e.li,{children:"\u6784\u5EFA"}),"\n",(0,s.jsx)(e.li,{children:"\u7F51\u7EDC\u63D2\u4EF6"}),"\n",(0,s.jsx)(e.li,{children:"\u5B58\u50A8\u63D2\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u6709\u6700\u5B8C\u6574\u7684\u751F\u6001"}),"\n",(0,s.jsx)(e.li,{children:"\u955C\u50CF\u901A\u5E38\u56F4\u7ED5\u5E94\u7528\uFF0C\u751A\u81F3\u53EF\u80FD\u53EA\u662F\u5355\u5E94\u7528\u53EF\u6267\u884C\u6587\u4EF6"}),"\n",(0,s.jsx)(e.li,{children:"\u9ED8\u8BA4\u8FD0\u884C\u5E94\u7528"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["LXD\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7C7B\u4F3C\u4E8E Docker \u901A\u8FC7 Daemon/\u5B88\u62A4\u8FDB\u7A0B \u57FA\u4E8E liblxc \u66B4\u9732 REST \u63A5\u53E3\u63D0\u4F9B\u7BA1\u7406\u5BB9\u5668\u529F\u80FD"}),"\n",(0,s.jsx)(e.li,{children:"\u5728 liblxc \u4E4B\u4E0A\u63D0\u4F9B\u4E00\u4E9B\u989D\u5916\u80FD\u529B"}),"\n",(0,s.jsx)(e.li,{children:"\u4E0E VMWare, KVM \u6280\u672F\u7ADE\u4E89 - \u4F5C\u4E3A Hypervisor"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["LXC\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5185\u6838\u66B4\u9732\u5230\u7528\u6237\u7A7A\u95F4\u7684\u63A5\u53E3"}),"\n",(0,s.jsx)(e.li,{children:"\u63D0\u4F9B\u5BB9\u5668\u6240\u9700\u7279\u6027\u548C\u80FD\u529B"}),"\n",(0,s.jsx)(e.li,{children:"\u63D0\u4F9B\u7B80\u5355\u7684\u5DE5\u5177\u6765\u521B\u5EFA\u548C\u7BA1\u7406\u7CFB\u7EDF\u5E94\u7528\u5BB9\u5668"}),"\n",(0,s.jsx)(e.li,{children:"VE - Virtual Environment - \u865A\u62DF\u73AF\u5883 - \u4E00\u4E2A\u9694\u79BB\u7684 OS \u5BB9\u5668"}),"\n",(0,s.jsx)(e.li,{children:"\u901A\u8FC7\u767B\u9646\u8FDB\u5165"}),"\n",(0,s.jsx)(e.li,{children:"\u6709\u6B63\u5E38\u7684 init, supervisor, syslog, cron"}),"\n",(0,s.jsxs)(e.li,{children:["\u66F4\u7C7B\u4F3C\u4E8E chroot \u5C42\u7684\u6280\u672F\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u72EC\u7ACB\u7684\u8FDB\u7A0B\u548C\u7F51\u7EDC\u7A7A\u95F4"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u56E0\u4E3A\u66F4\u5E95\u5C42\uFF0C\u6240\u4EE5\u914D\u7F6E\u548C\u4F7F\u7528\u4F1A\u66F4\u96BE"}),"\n",(0,s.jsx)(e.li,{children:"\u955C\u50CF\u901A\u5E38\u662F\u4E00\u4E2A OS"}),"\n",(0,s.jsxs)(e.li,{children:["\u9ED8\u8BA4\u8FD0\u884C ",(0,s.jsx)(e.code,{children:"/sbin/init"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://archives.flockport.com/lxc-vs-docker",children:"lxc-vs-docker"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://linuxhint.com/lxd-vs-docker",children:"lxd-vs-docker"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.inovex.de/blog/containers-docker-containerd-nabla-kata-firecracker/",children:"Docker vs. containerd vs. Nabla vs. Kata vs. Firecracker"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"gui-in-container",children:"GUI in Container"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["x11vnc\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53EF\u901A\u8FC7 web \u8BBF\u95EE"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/LibVNC/x11vnc",children:"https://github.com/LibVNC/x11vnc"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["xvfb\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u65E0\u952E\u76D8\u9F20\u6807"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.x.org/releases/X11R7.6/doc/man/man1/Xvfb.1.xhtml",children:"https://www.x.org/releases/X11R7.6/doc/man/man1/Xvfb.1.xhtml"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/ponty/framebuffer-vncserver",children:"ponty/framebuffer-vncserver"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://hub.docker.com/u/x11vnc",children:"https://hub.docker.com/u/x11vnc"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"vscode-desktop"}),"\n",(0,s.jsxs)(e.li,{children:["docker-desktop\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"x11vnc/docker-desktop:zh_CN ~450MB"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"desktop"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"docker run -it --rm -p 6080:6080 x11vnc/inkscape-desktop\n"})}),"\n",(0,s.jsx)(e.h2,{id:"docker-remote",children:"Docker Remote"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7528\u6237\u7EF4\u5EA6 sock \u4F4D\u7F6E unix://$HOME/.docker/run/docker.sock"}),"\n",(0,s.jsx)(e.li,{children:"\u63A8\u8350\u4F7F\u7528 ssh \u8F6C\u53D1 sock - \u5B89\u5168"}),"\n",(0,s.jsx)(e.li,{children:"podman \u4F7F\u7528 CONTAINER_HOST"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",metastring:'title="\u5BA2\u6237\u7AEF"',children:"DOCKER_HOST=tcp://192.168.0.1:2375 docker info # \u5355\u6B21\u8BF7\u6C42\u4FEE\u6539\nexport DOCKER_HOST=tcp://192.168.0.1:2375      # export \u540E\u6301\u7EED\u4F7F\u7528\n\nssh -L /var/run/docker.sock:/var/run/docker.sock remote          # \u8F6C\u53D1 sock \u5230 docker \u9ED8\u8BA4 sock \u4F4D\u7F6E - \u7CFB\u7EDF\u7EA7\u53EF\u80FD\u6743\u9650\u4E0D\u591F\nssh -L $HOME/.docker/run/docker.sock:/var/run/docker.sock remote # \u8F6C\u53D1\u8FDC\u7A0B docker \u5230\u7528\u6237\u76EE\u5F55 sock - \u4E0D\u9700\u8981\u90A3\u4E48\u9AD8\u7684\u6743\u9650\nDOCKER_HOST=unix://$HOME/.docker/run/docker.sock docker info     # \u6D4B\u8BD5\n\ndocker context list                                                           # \u53EF\u7BA1\u7406\u591A\u4E2A\u8FDE\u63A5\u4E0A\u4E0B\u6587\ndocker context create --docker host=unix://$HOME/.docker/run/docker.sock test # \u521B\u5EFA\u4E0A\u4E0B\u6587\ndocker context use test                                                       # \u5168\u5C40\u4FEE\u6539\u4E0A\u4E0B\u6587\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",metastring:'title="\u670D\u52A1\u7AEF"',children:"dockerd -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375 # \u5982\u679C\u9700\u8981\u66B4\u9732\u7AEF\u53E3 - \u9ED8\u8BA4\u53EA\u6709 sock\n"})}),"\n",(0,s.jsx)(e.h2,{id:"resource-in-container",children:"Resource in container"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://ops.tips/blog/why-top-inside-container-wrong-memory/",children:"https://ops.tips/blog/why-top-inside-container-wrong-memory/"})}),"\n"]})]})}function a(n={}){let{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},17776:function(n,e,r){r.d(e,{R:()=>l,x:()=>d});var i=r(7378);let s={},c=i.createContext(s);function l(n){let e=i.useContext(c);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),i.createElement(c.Provider,{value:e},n.children)}}}]);