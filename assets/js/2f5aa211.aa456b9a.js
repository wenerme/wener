"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["87767"],{26972:function(n,e,t){t.r(e),t.d(e,{frontMatter:()=>r,toc:()=>o,default:()=>x,metadata:()=>c,assets:()=>i,contentTitle:()=>d});var c=JSON.parse('{"id":"platform/tencent/cloud/tencent-cloud-log","title":"\u817E\u8BAF\u4E91\u65E5\u5FD7\u670D\u52A1","description":"- CLS - Cloud Log Service","source":"@site/../notes/platform/tencent/cloud/tencent-cloud-log.md","sourceDirName":"platform/tencent/cloud","slug":"/platform/tencent/cloud/log","permalink":"/notes/platform/tencent/cloud/log","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/platform/tencent/cloud/tencent-cloud-log.md","tags":[{"inline":true,"label":"Logging","permalink":"/notes/tags/logging"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1757899636000,"frontMatter":{"tags":["Logging"]},"sidebar":"docs","previous":{"title":"\u817E\u8BAF\u4E91","permalink":"/notes/platform/tencent/cloud/"},"next":{"title":"Tencent FAQ","permalink":"/notes/platform/tencent/faq"}}'),l=t(86106),s=t(17776);let r={tags:["Logging"]},d="\u817E\u8BAF\u4E91\u65E5\u5FD7\u670D\u52A1",i={},o=[{value:"LogParseFailure",id:"logparsefailure",level:2}];function h(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"\u817E\u8BAF\u4E91\u65E5\u5FD7\u670D\u52A1",children:"\u817E\u8BAF\u4E91\u65E5\u5FD7\u670D\u52A1"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"CLS - Cloud Log Service"}),"\n",(0,l.jsx)(e.li,{children:"\u67E5\u8BE2\u8BED\u6CD5\u652F\u6301 CQL, Lucene, SQL"}),"\n",(0,l.jsxs)(e.li,{children:["\u670D\u52A1\u5730\u5740\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"cls.intl.tencentcloudapi.com"}),"\n",(0,l.jsxs)(e.li,{children:["\u56FD\u5185 ",(0,l.jsx)(e.code,{children:"https://${region}.cls.tencentcs.com/"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u6D77\u5916 ",(0,l.jsx)(e.code,{children:"https://${region}.cls.tencentyun.com/"})]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"cls.${region}.tencentcloudapi.com"})}),"\n",(0,l.jsxs)(e.li,{children:["\u5C31\u8FD1\u4F4D\u7F6E cls.tencentcloudapi.com\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u975E\u91D1\u878D\u533A\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u534E\u4E1C\u5730\u533A\uFF08\u4E0A\u6D77\u91D1\u878D\uFF09 cls.ap-shanghai-fsi.tencentcloudapi.com"}),"\n",(0,l.jsx)(e.li,{children:"\u534E\u5357\u5730\u533A\uFF08\u6DF1\u5733\u91D1\u878D\uFF09 cls.ap-shenzhen-fsi.tencentcloudapi.com"}),"\n",(0,l.jsx)(e.li,{children:"\u91D1\u878D\u533A\u548C\u975E\u91D1\u878D\u533A\u662F\u9694\u79BB\u4E0D\u4E92\u901A\u7684"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u63D0\u4F9B Elasticsearch \u517C\u5BB9\u7684\u67E5\u8BE2\u63A5\u53E3\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"https://${region}.cls.tencentcs.com/elasticsearch/"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"https://${region}.cls.tencentyun.com/elasticsearch/"})}),"\n",(0,l.jsx)(e.li,{children:"Basic Auth SecretId:SecretKey"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://cloud.tencent.com/document/product/614",children:"https://cloud.tencent.com/document/product/614"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://cloud.tencent.com/document/product/614/47044",children:"https://cloud.tencent.com/document/product/614/47044"})}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"attr"}),(0,l.jsx)(e.th,{children:"for"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__FILENAME__"})}),(0,l.jsx)(e.td,{children:"\u6587\u4EF6\u540D"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__HOSTNAME__"})}),(0,l.jsx)(e.td,{children:"\u4E3B\u673A\u540D"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__INDEX_STATUS__"})}),(0,l.jsx)(e.td,{children:"\u7D22\u5F15\u72B6\u6001"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__PKGID__"})}),(0,l.jsx)(e.td,{children:"\u5305 ID"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__PKG_LOGID__"})}),(0,l.jsx)(e.td,{children:"\u5305\u65E5\u5FD7 ID"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__RAWLOG__"})}),(0,l.jsx)(e.td,{children:"\u539F\u59CB\u65E5\u5FD7"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__SOURCE__"})}),(0,l.jsx)(e.td,{children:"\u6765\u6E90"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__TIMESTAMP__"})}),(0,l.jsx)(e.td,{children:"\u65F6\u95F4\u6233"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__TAG__"})}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"__CONTENT__"})}),(0,l.jsx)(e.td,{})]})]})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"CQL"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"(level:ERROR OR level:WARNING) AND pid:1234\n\nkey:* # \u5B57\u6BB5\u5B58\u5728\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Lucene"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"timeCost>=20 AND timeCost<=30\nwarning OR error\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"SQL"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"status:4* | SELECT count(*) as error_count, avg(request_time) as avg_latency\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["approx_distinct\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4F30\u7B97 distinct \u503C"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"__TIMESTAMP__"})}),"\n",(0,l.jsx)(e.li,{children:"ip_to_province"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"request_body:* | SELECT json_extract_scalar(request_body, '$.model') AS model\n"})}),"\n",(0,l.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,l.jsx)(e.h2,{id:"logparsefailure",children:"LogParseFailure"})]})}function x(n={}){let{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},17776:function(n,e,t){t.d(e,{R:()=>r,x:()=>d});var c=t(7378);let l={},s=c.createContext(l);function r(n){let e=c.useContext(s);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),c.createElement(s.Provider,{value:e},n.children)}}}]);