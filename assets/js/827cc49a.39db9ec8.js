"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["73261"],{15742:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>r,toc:()=>d,default:()=>u,metadata:()=>s,assets:()=>o,contentTitle:()=>c});var s=JSON.parse('{"id":"service/network/tunnel/inlets","title":"inlets \u901A\u9053","description":"- \u4E0D\u652F\u6301 gRPC","source":"@site/../notes/service/network/tunnel/inlets.md","sourceDirName":"service/network/tunnel","slug":"/service/network/tunnel/inlets","permalink":"/notes/service/network/tunnel/inlets","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/tunnel/inlets.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1726657654000,"frontMatter":{"title":"inlets \u901A\u9053"},"sidebar":"docs","previous":{"title":"Tunnel","permalink":"/notes/service/network/tunnel/"},"next":{"title":"localtunnel","permalink":"/notes/service/network/tunnel/localtunnel"}}'),t=l(86106),i=l(17776);let r={title:"inlets \u901A\u9053"},c="inlets",o={},d=[{value:"kubernetes operator",id:"kubernetes-operator",level:2},{value:"Notes",id:"notes",level:2}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"inlets",children:"inlets"})}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4E0D\u652F\u6301 ",(0,t.jsx)(n.strong,{children:"gRPC"})]}),"\n",(0,t.jsx)(n.li,{children:"\u5F00\u6E90\u7248\u672C\u9650\u5236\u975E\u5E38\u591A\uFF0C\u4E0D\u5EFA\u8BAE\u4F7F\u7528"}),"\n"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["inlets - L7 HTTP/HTTPS \u901A\u9053\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"MIT, Go"}),"\n",(0,t.jsx)(n.li,{children:"\u53CD\u5411\u901A\u9053 \u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF - \u7C7B\u4F3C ngrok, argo tunnel"}),"\n",(0,t.jsx)(n.li,{children:"\u4E00\u4E2A\u8FDB\u7A0B\u4E00\u4E2A tunnel"}),"\n",(0,t.jsx)(n.li,{children:"\u81EA\u52A8\u91CD\u8FDE"}),"\n",(0,t.jsx)(n.li,{children:"\u652F\u6301 ws \u548C wss \u901A\u8BAF"}),"\n",(0,t.jsx)(n.li,{children:"\u652F\u6301 http, https, ws \u901A\u9053"}),"\n",(0,t.jsxs)(n.li,{children:["\u9ED8\u8BA4\u5F00\u542F CORS - ",(0,t.jsx)(n.code,{children:"--disable-transport-wrapping"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["inlets-pro - L4 \u901A\u9053 - \u5546\u4E1A\u6388\u6743\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u652F\u6301 TCP \u81EA\u52A8 TLS \u52A0\u5BC6"}),"\n",(0,t.jsxs)(n.li,{children:["\u26A0\uFE0F \u4E2A\u4EBA 2 \u901A\u9053 180/\u5E74\uFF0C\u5546\u4E1A 5 \u901A\u9053 1860/\u5E74 \u989D\u5916\u901A\u9053 20/\u6708\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4E2A\u4EBA\u8BA4\u4E3A\u4E0D\u503C\u5F97 - \u5982\u679C\u4F7F\u7528\u8F83\u591A\u5EFA\u8BAE\u81EA\u884C\u5B9E\u73B0"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/inlets/inletsctl",children:"inlets/inletsctl"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u81EA\u52A8\u5B89\u88C5\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# macOS\nbrew install inlets\n\n# \u670D\u52A1\u7AEF\n# http://localhost:8000\n# -t \u53EF\u8BBE\u7F6E Token\ninlets server\n\n# \u5BA2\u6237\u7AEF\npython -m SimpleHTTPServer 8123\n# \u542F\u52A8\u540E\u8BBF\u95EE localhost:8000 \u5373\u53EF\n# remote \u4F7F\u7528 ws \u534F\u8BAE\ninlets client --remote 127.0.0.1:8000 --upstream http://127.0.0.1:8123\n"})}),"\n",(0,t.jsx)(n.h2,{id:"kubernetes-operator",children:"kubernetes operator"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/inlets/inlets-operator",children:"inlets/inlets-operator"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4F7F\u7528 websocket \u8FDB\u884C tunnel\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u7C7B\u4F3C\u9879\u76EE ",(0,t.jsx)(n.a,{href:"https://github.com/google/huproxy",children:"google/huproxy"})," - \u975E\u5E38\u7B80\u5355\uFF0C\u597D\u7406\u89E3"]}),"\n",(0,t.jsxs)(n.li,{children:["\u4F7F\u7528 ",(0,t.jsx)(n.a,{href:"https://github.com/rancher/remotedialer",children:"rancher/remotedialer"})," \u5B9E\u73B0 TCP over HTTP WebSocket"]}),"\n",(0,t.jsx)(n.li,{children:"\u901A\u8FC7 client \u53D1\u8D77 dial\uFF0C\u901A\u8FC7 ws \u5EFA\u7ACB\u901A\u9053"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["HTTP \u5934\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"x-inlets-id"})," - \u5BA2\u6237\u7AEF uuid"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"x-inlets-upstream"})," - \u9700\u8981\u5BA2\u6237\u7AEF\u8BF7\u6C42\u7684\u4E0A\u6E38"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u6CA1\u6709\u5904\u7406 http2\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"pro \u6709"}),"\n",(0,t.jsx)(n.li,{children:"\u56E0\u6B64\u65E0\u6CD5\u4F7F\u7528 grpc2"}),"\n",(0,t.jsxs)(n.li,{children:["\u68C0\u6D4B http2 \u652F\u6301 ",(0,t.jsx)(n.code,{children:"curl -sI https://curl.haxx.se -o/dev/null -w '%{http_version}\\n'"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8DEF\u7531\u903B\u8F91\u5728 ",(0,t.jsx)(n.code,{children:"pkg/router"})]}),"\n",(0,t.jsxs)(n.li,{children:["server\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/"})," - \u524D\u7AEF\u4EE3\u7406"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/tunnel"})," - client \u8FC7\u6765\u7684\u901A\u9053"]}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},17776:function(e,n,l){l.d(n,{R:()=>r,x:()=>c});var s=l(7378);let t={},i=s.createContext(t);function r(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);