"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["81918"],{84236:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>r,toc:()=>p,default:()=>o,metadata:()=>l,assets:()=>a,contentTitle:()=>c});var l=JSON.parse('{"id":"os/linux/network/wpa_supplicant","title":"wpa_supplicant","description":"WPA_supplicant","source":"@site/../notes/os/linux/network/wpa_supplicant.md","sourceDirName":"os/linux/network","slug":"/os/linux/network/wpa_supplicant","permalink":"/notes/os/linux/network/wpa_supplicant","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/network/wpa_supplicant.md","tags":[{"inline":true,"label":"WiFi","permalink":"/notes/tags/wi-fi"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1759287316000,"frontMatter":{"tags":["WiFi"]},"sidebar":"docs","previous":{"title":"WLAN","permalink":"/notes/os/linux/network/wlan"},"next":{"title":"NTP","permalink":"/notes/os/linux/ntp"}}'),s=i(86106),t=i(17776);let r={tags:["WiFi"]},c,a={},p=[{value:"WPA_supplicant",id:"wpa_supplicant",level:2},{value:"wpa_cli",id:"wpa_cli",level:2},{value:"wpa_supplicant.conf",id:"wpa_supplicantconf",level:2},{value:"Failed to connect to non-global ctrl_ifname: (nil) error: No error information",id:"failed-to-connect-to-non-global-ctrl_ifname-nil-error-no-error-information",level:2}];function d(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"wpa_supplicant",children:"WPA_supplicant"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://raspberrypi.stackexchange.com/q/11631/38420",children:"How to setup multiple WiFi networks?"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://wiki.archlinux.org/index.php/WPA_supplicant",children:"WPA_supplicant"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["man ",(0,s.jsx)(e.a,{href:"https://linux.die.net/man/8/wpa_supplicant",children:"wpa_supplicant"})]}),"\n",(0,s.jsxs)(e.li,{children:["man ",(0,s.jsx)(e.a,{href:"https://linux.die.net/man/5/wpa_supplicant.conf",children:"wpa_supplicant.conf"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["man ",(0,s.jsx)(e.a,{href:"https://linux.die.net/man/8/iwconfig",children:"iwconfig"})]}),"\n",(0,s.jsxs)(e.li,{children:["man ",(0,s.jsx)(e.a,{href:"https://linux.die.net/man/8/iwlist",children:"iwlist"})]}),"\n",(0,s.jsxs)(e.li,{children:["ifupdown-ng\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/ifupdown-ng/ifupdown-ng/blob/main/executor-scripts/linux/wifi",children:"https://github.com/ifupdown-ng/ifupdown-ng/blob/main/executor-scripts/linux/wifi"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["/etc/init.d/wpa_supplicant\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"/sbin/wpa_supplicant"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["/etc/init.d/wpa_cli\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"/sbin/wpa_cli"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://man.archlinux.org/man/wpa_cli.8",children:"https://man.archlinux.org/man/wpa_cli.8"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://man.archlinux.org/man/wpa_supplicant.conf.5.en",children:"https://man.archlinux.org/man/wpa_supplicant.conf.5.en"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://man.archlinux.org/man/wpa_supplicant.8.en",children:"https://man.archlinux.org/man/wpa_supplicant.8.en"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"sudo apk add wireless-tools\n\n# \u542F\u7528\u7F51\u5361\nifconfig wlan0 up\n# \u626B\u63CF\u70ED\u70B9\niwlist scan\n# \u751F\u6210\u914D\u7F6E\u6587\u4EF6 wpa.conf\nwpa_passphrase \u70ED\u70B9\u540D\u5B57 \u5BC6\u7801 > wpa.conf\n# \u53EF\u6DFB\u52A0\u591A\u4E2A\u914D\u7F6E\nwpa_passphrase \u70ED\u70B9\u540D\u5B57 \u5BC6\u7801 >> wpa.conf\n\n# \u5C06\u914D\u7F6E\u653E\u5230\u670D\u52A1\u914D\u7F6E\u4E0B\nmkdir -p /etc/wpa_supplicant\nchmod 750 /etc/wpa_supplicant\ncp wpa.conf /etc/wpa_supplicant/wpa_supplicant.conf\n\n# \u542F\u52A8 wpa \u670D\u52A1\nrc-service wpa_supplicant start\n# \u5F00\u673A\u542F\u52A8\nrc-update add wpa_supplicant boot\n\n# \u4FEE\u6539\u7F51\u7EDC\u914D\u7F6E, \u6DFB\u52A0 wlan0\n# auto wlan0\n# iface wlan0 inet dhcp\nnano /etc/network/interface\n\nwpa_cli -i wlan0 reconfigure\n\n# \u8C03\u8BD5\n# ===============\n# \u5728\u524D\u53F0\u8FD0\u884C\u4EE5\u4FBF\u8C03\u8BD5\nwpa_supplicant -Dwext -iwlan0 -c wpa.conf\n# busybox \u81EA\u5E26\u4E86 udhcpc\nudhcpc -fqi wlan0\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"driver"}),(0,s.jsx)(e.th,{children:"description"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"nl80211"}),(0,s.jsx)(e.td,{children:"modern Linux nl80211/cfg80211 netlink-based interface"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"wext"}),(0,s.jsx)(e.td,{children:"legacy Linux ioctl-based interface (older hardware/drivers)."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"wired"}),(0,s.jsx)(e.td,{children:"wpa_supplicant wired Ethernet driver."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"macsec_linux"}),(0,s.jsx)(e.td,{children:"MACsec Ethernet driver for Linux."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"roboswitch"}),(0,s.jsx)(e.td,{children:"wpa_supplicant Broadcom switch driver."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"none"}),(0,s.jsx)(e.td,{children:"No driver (RADIUS server / WPS ER only)."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"bsd"}),(0,s.jsx)(e.td,{children:"BSD 802.11 support (Atheros, etc.)."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ndis"}),(0,s.jsx)(e.td,{children:"Windows NDIS driver."})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"wpa_cli",children:"wpa_cli"}),"\n",(0,s.jsx)(e.h2,{id:"wpa_supplicantconf",children:"wpa_supplicant.conf"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"/etc/wpa_supplicant/wpa_supplicant.conf"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'ctrl_interface=/run/wpa_supplicant\nupdate_config=1\n\nnetwork={\n	ssid="SSID"\n	psk="PSK"\n	priority=10\n}\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"chmod 600 /etc/wpa_supplicant/wpa_supplicant.conf\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["ssid\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u542B\u4E49\uFF1A\u76EE\u6807\u65E0\u7EBF\u7F51\u7EDC\u540D\u79F0\uFF08SSID\uFF09\u3002"}),"\n",(0,s.jsx)(e.li,{children:'\u683C\u5F0F\uFF1A\u5B57\u7B26\u4E32\uFF1B\u82E5\u542B\u7A7A\u683C\u6216\u7279\u6B8A\u5B57\u7B26\u8BF7\u7528\u53CC\u5F15\u53F7\uFF08\u4F8B\u5982\uFF1A"My WiFi"\uFF09\uFF1B\u5927\u5C0F\u5199\u654F\u611F\u3002'}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["psk\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u542B\u4E49\uFF1AWPA/WPA2 \u9884\u5171\u4EAB\u5BC6\u94A5\uFF08\u5BC6\u7801\uFF09\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u683C\u5F0F\uFF1A\u660E\u6587\u5BC6\u7801 8\u201363 \u5B57\u7B26\uFF08\u9700\u53CC\u5F15\u53F7\uFF09\u6216 64 \u4F4D\u5341\u516D\u8FDB\u5236\u54C8\u5E0C\uFF08\u4E0D\u52A0\u5F15\u53F7\uFF09\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["priority\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u542B\u4E49\uFF1A\u7F51\u7EDC\u4F18\u5148\u7EA7\uFF0C\u503C\u8D8A\u5927\u4F18\u5148\u8FDE\u63A5\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u683C\u5F0F\uFF1A\u6574\u6570\uFF08\u6B63\u8D1F\u5747\u53EF\uFF09\uFF0C\u9ED8\u8BA4\u901A\u5E38\u4E3A 0\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://gist.github.com/penguinpowernz/ce4ed0e64ce0fa99a5e335c1a4c954b3",children:"https://gist.github.com/penguinpowernz/ce4ed0e64ce0fa99a5e335c1a4c954b3"})}),"\n"]}),"\n",(0,s.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,s.jsx)(e.h2,{id:"failed-to-connect-to-non-global-ctrl_ifname-nil-error-no-error-information",children:"Failed to connect to non-global ctrl_ifname: (nil) error: No error information"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6CE8\u610F\u914D\u7F6E ctrl_interface=/run/wpa_supplicant"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"wpa_cli -i wlan0 reconfigure\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Failed to connect to non-global ctrl_ifname: wlan0  error: No such file or directory\n"})})]})}function o(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},17776:function(n,e,i){i.d(e,{R:()=>r,x:()=>c});var l=i(7378);let s={},t=l.createContext(s);function r(n){let e=l.useContext(t);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),l.createElement(t.Provider,{value:e},n.children)}}}]);