"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["89028"],{29888:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>r,toc:()=>o,default:()=>x,metadata:()=>l,assets:()=>d,contentTitle:()=>t});var l=JSON.parse('{"id":"devops/container/lxd","title":"LXD","description":"- -> lxc/incus","source":"@site/../notes/devops/container/lxd.md","sourceDirName":"devops/container","slug":"/devops/container/lxd","permalink":"/notes/devops/container/lxd","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/container/lxd.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1718079305000,"frontMatter":{"title":"LXD","hide_title":true},"sidebar":"docs","previous":{"title":"Linux Container","permalink":"/notes/devops/container/lxc"},"next":{"title":"nerdctl","permalink":"/notes/devops/container/nerdctl"}}'),s=i(86106),c=i(17776);let r={title:"LXD",hide_title:!0},t="LXD",d={},o=[{value:"KVM in LXC/LXD",id:"kvm-in-lxclxd",level:2}];function a(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"lxd",children:"LXD"})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["-> ",(0,s.jsx)(e.a,{href:"https://github.com/lxc/incus",children:"lxc/incus"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Apache 2.0"}),"\n",(0,s.jsx)(e.li,{children:"community fork of Canonical's LXD"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/lxc/lxd",children:"lxc/lxd"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/canonical/lxd",children:"canonical/lxd"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"AGPL-3.0"}),", Go"]}),"\n",(0,s.jsx)(e.li,{children:"canonical \u4ECE Linux Container community takeover, \u4FEE\u6539 License \u4E3A AGPLv3"}),"\n",(0,s.jsx)(e.li,{children:"\u5BF9 LXC \u7684\u5C01\u88C5 - \u7BA1\u7406\u5BB9\u5668\u8FD0\u884C"}),"\n",(0,s.jsx)(e.li,{children:"\u8FD0\u884C daemon \u66B4\u9732 rest \u63A5\u53E3"}),"\n",(0,s.jsx)(e.li,{children:"\u652F\u6301 kvm"}),"\n",(0,s.jsx)(e.li,{children:"\u80FD\u7BA1\u7406 LXC \u548C QEMU"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["lxd package ",(0,s.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/contents?branch=edge&name=lxd&arch=x86_64&repo=testing",children:"content"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://images.linuxcontainers.org/",children:"images.linuxcontainers.org"})," - Image server for LXC and LXD"]}),"\n",(0,s.jsxs)(e.li,{children:["vs LXC\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u56E0\u4E3A\u6709\u4E86 daemon \u56E0\u6B64\u66F4\u65B9\u4FBF\u7BA1\u7406\u4F7F\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u4F7F\u7528 Go \u5B9E\u73B0"}),"\n",(0,s.jsxs)(e.li,{children:["lxc \u547D\u4EE4\u5305\u542B\u4E86\u5F88\u591A\u529F\u80FD\u800C\u4E0D\u662F\u4E4B\u524D ",(0,s.jsx)(e.code,{children:"lxc-*"})," \u4E4B\u7C7B\u7684\u547D\u4EE4"]}),"\n",(0,s.jsx)(e.li,{children:"lxd \u5B89\u88C5\u540E 150MB\uFF0Clxc \u5B89\u88C5\u540E 15 MB"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/lxc/incus",children:"lxc/incus"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Apache 2.0"}),"\n",(0,s.jsx)(e.li,{children:"community fork of Canonical's LXD"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["lxd \u7684\u6838\u5FC3\u547D\u4EE4\u662F ",(0,s.jsx)(e.strong,{children:"lxc"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u96C6\u6210\u4E86\u4E4B\u524D ",(0,s.jsx)(e.code,{children:"lxc-*"})," \u7684\u529F\u80FD"]}),"\n",(0,s.jsx)(e.li,{children:"\u7C7B\u4F3C\u4E8E 2.0"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \u7B49\u540C\u4E8E root \u6743\u9650\nusermod -a -G lxd $USER\n\n# tuna \u955C\u50CF\nlxc remote add tuna-images https://mirrors.tuna.tsinghua.edu.cn/lxc-images/ --protocol=simplestreams --public\nlxc image list tuna-images:\n"})}),"\n",(0,s.jsx)(e.h2,{id:"kvm-in-lxclxd",children:"KVM in LXC/LXD"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u53EF\u4EE5\u5C1D\u8BD5"}),"\n",(0,s.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://discourse.ubuntu.com/t/15222",children:"LXD 4.0 quick recipe: LXC and KVM coexisting"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",children:"# /dev/kvm\nlxc.cgroup.devices.allow = c 10:232 rwm\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"lxc config device add CONTAINER kvm unix-char path=/dev/kvm\n"})})]})}function x(n={}){let{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},17776:function(n,e,i){i.d(e,{R:()=>r,x:()=>t});var l=i(7378);let s={},c=l.createContext(s);function r(n){let e=l.useContext(c);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),l.createElement(c.Provider,{value:e},n.children)}}}]);