"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["426548"],{500633:function(n,e,l){l.r(e),l.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>j,frontMatter:()=>t,metadata:()=>i,toc:()=>h});var i=l(282347),s=l(486106),r=l(917776);let t={title:"\u6570\u636E\u540C\u6B65\u6A21\u5F0F",slug:"etl-pattens",tags:["Design","Architecture"]},d="\u6570\u636E\u540C\u6B65\u6A21\u5F0F",c={authorsImageUrls:[]},h=[{value:"\u573A\u666F",id:"\u573A\u666F",level:2},{value:"\u6A21\u5F0F",id:"\u6A21\u5F0F",level:2},{value:"\u65B9\u5F0F",id:"\u65B9\u5F0F",level:2},{value:"\u5B9E\u73B0\u65B9\u6848",id:"\u5B9E\u73B0\u65B9\u6848",level:2},{value:"Transform \u8003\u8651",id:"transform-\u8003\u8651",level:2},{value:"\u6570\u636E\u7F16\u7801 \u8003\u8651",id:"\u6570\u636E\u7F16\u7801-\u8003\u8651",level:2}];function x(n){let e={blockquote:"blockquote",h2:"h2",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"A \u540C\u6B65\u5230 B"}),"\n",(0,s.jsx)(e.p,{children:"DBA -> A -> B -> DBB"}),"\n",(0,s.jsx)(e.p,{children:"Extract -> Load"}),"\n",(0,s.jsx)(e.p,{children:"Extract -Transform-> Load"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u573A\u666F",children:"\u573A\u666F"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"A,B,DBA,DBB \u4E92\u901A\u6027"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"from\\to"}),(0,s.jsx)(e.th,{children:"DBA"}),(0,s.jsx)(e.th,{children:"A"}),(0,s.jsx)(e.th,{children:"B"}),(0,s.jsx)(e.th,{children:"DBB"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"DBA"}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"\u{1F7E1}"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"A"}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{children:"\u{1F7E2}"}),(0,s.jsx)(e.td,{children:"\u{1F7E1}"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"B"}),(0,s.jsx)(e.td,{children:"\u{1F7E0}"}),(0,s.jsx)(e.td,{children:"\u{1F7E2}"}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"DBB"}),(0,s.jsx)(e.td,{children:"\u{1F7E0}"}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u{1F7E2} - \u6709\u53EF\u80FD - A <-> B"}),"\n",(0,s.jsx)(e.li,{children:"\u{1F7E1} - \u4E5F\u8BB8\u53EF\u80FD - \u63D0\u4F9B\u516C\u6709\u4E91\u6570\u636E\u5E93\u4F5C\u4E3A\u540C\u6B65\u76EE\u6807"}),"\n",(0,s.jsxs)(e.li,{children:["\u{1F7E0} - \u4E0D\u592A\u53EF\u80FD\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679C\u662F\u5185\u90E8\u670D\u52A1\u662F\u53EF\u80FD\u7684"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6A21\u5F0F",children:"\u6A21\u5F0F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Push - \u63A8 - A -> B"}),"\n",(0,s.jsx)(e.li,{children:"Pull - \u62C9 - A <- B"}),"\n",(0,s.jsx)(e.li,{children:"Reactive - A <-> B"}),"\n",(0,s.jsx)(e.li,{children:"\u7B2C\u4E09\u65B9 - A -> X -> B"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u65B9\u5F0F",children:"\u65B9\u5F0F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5168\u91CF"}),"\n",(0,s.jsxs)(e.li,{children:["\u589E\u91CF\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u57FA\u4E8E\u589E\u91CF\u6E38\u6807"}),"\n",(0,s.jsx)(e.li,{children:"\u57FA\u4E8E CDC \u4E8B\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"Schema+Data"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u5B9E\u73B0\u65B9\u6848",children:"\u5B9E\u73B0\u65B9\u6848"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["DBA -> A -> B -> DBB\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"B \u66B4\u9732 API\uFF0CA \u8BF7\u6C42 B - Push/Hook"}),"\n",(0,s.jsx)(e.li,{children:"\u4F8B\u5982: WebHook"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["DBA -> A <- B -> DBB\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"A \u66B4\u9732 API\uFF0CB \u8BF7\u6C42 A - Pull/Query"}),"\n",(0,s.jsx)(e.li,{children:"\u4F8B\u5982: WebHook"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["DBA -> A -> DBB\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4F8B\u5982: \u914D\u7F6E\u540C\u6B65\u76EE\u6807\u7ED9 A, A \u76F4\u63A5\u5199\u5165"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["DBA -> B -> DBB\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4F8B\u5982: RLS \u66B4\u9732\u7ED9 B \u8BBF\u95EE"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["DBA <-> DBB\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4F8B\u5982: DB Link, Replication"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["DBA -> A -> Queue -> B -> DBB\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"A,B \u901A\u8FC7 Queue \u4EA4\u4E92 - A,B \u90FD\u6CA1\u6709\u66B4\u9732\u63A5\u53E3"}),"\n",(0,s.jsx)(e.li,{children:"\u88AB\u52A8"}),"\n",(0,s.jsxs)(e.li,{children:["Queue \u5B9A\u4F4D\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6570\u636E\u5B58\u50A8 - Kafka"}),"\n",(0,s.jsx)(e.li,{children:"\u4FE1\u606F\u4F20\u8F93 - Redis, Nats - \u4F8B\u5982 RPC over Redis Stream"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"DBA -> X -> DBB"}),"\n",(0,s.jsxs)(e.li,{children:["DBA -> A -> X -> B -> DBB\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u501F\u52A9\u7B2C\u4E09\u65B9\u670D\u52A1 - \u4F8B\u5982: AirByte, PgLoader"}),"\n",(0,s.jsxs)(e.li,{children:["X \u670D\u52A1\u4F5C\u4E3A \u4E2D\u95F4\u670D\u52A1 \u4E0E A,B \u4EA4\u4E92\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u66FF\u4EE3 Queue \u89D2\u8272"}),"\n",(0,s.jsx)(e.li,{children:"\u4E3B\u52A8"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"X \u5177\u6709\u9002\u914D\u80FD\u529B"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"transform-\u8003\u8651",children:"Transform \u8003\u8651"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6570\u636E Schema \u9002\u914D"}),"\n",(0,s.jsx)(e.li,{children:"\u6570\u636E\u7C7B\u578B\u9002\u914D"}),"\n",(0,s.jsx)(e.li,{children:"\u8FC7\u6EE4\u3001\u8F6C\u6362\u3001\u8BA1\u7B97"}),"\n",(0,s.jsxs)(e.li,{children:["\u901A\u5E38\u5305\u542B\u903B\u8F91\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u903B\u8F91 ~= Script\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Lua, Python, JS"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"gRPC - \u5916\u90E8\u8C03\u7528"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["Transform \u7684\u590D\u6742\u5EA6\u51B3\u5B9A\u4E86\u662F ETL \u8FD8\u662F\u6D41\u5904\u7406\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ETL - \u7B80\u5355\u9002\u914D\u3001\u8C03\u6574\u3001\u5143\u6570\u636E"}),"\n",(0,s.jsx)(e.li,{children:"\u6D41\u5904\u7406 - \u5305\u542B\u72B6\u6001\u3001\u4F9D\u8D56\u524D\u540E\u6D88\u606F/Window\u3001\u5305\u542B\u805A\u5408"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u4F8B\u5982: Flink, SparkSQL, Storm\u3001KafkaSQL"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u6570\u636E\u7F16\u7801-\u8003\u8651",children:"\u6570\u636E\u7F16\u7801 \u8003\u8651"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6587\u672C\u7F16\u7801 - CSV,JSON,JSONL - \u57FA\u7840\uFF0C\u4E22\u5931\u7C7B\u578B\u4FE1\u606F"}),"\n",(0,s.jsx)(e.li,{children:"\u4E8C\u8FDB\u5236\u7F16\u7801 - Avro, Parqute, Protobuf"}),"\n",(0,s.jsxs)(e.li,{children:["CBOR - Concise Binary Object Representation\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5BF9\u6BD4 JSON \u80FD\u66F4\u597D\u7684\u4FDD\u7559\u7C7B\u578B\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"Schema+Data - \u6570\u636E\u66F4\u7D27\u51D1"}),"\n"]})]})}function j(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(x,{...n})}):x(n)}},917776:function(n,e,l){l.d(e,{R:()=>t,x:()=>d});var i=l(7378);let s={},r=i.createContext(s);function t(n){let e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),i.createElement(r.Provider,{value:e},n.children)}},282347:function(n){n.exports=JSON.parse('{"permalink":"/story/etl-pattens","editUrl":"https://github.com/wenerme/wener/edit/master/story/../story/2022/2022-01-26-etl-pattens.md","source":"@site/../story/2022/2022-01-26-etl-pattens.md","title":"\u6570\u636E\u540C\u6B65\u6A21\u5F0F","description":"A \u540C\u6B65\u5230 B","date":"2022-01-26T00:00:00.000Z","tags":[{"inline":true,"label":"Design","permalink":"/story/tags/design"},{"inline":true,"label":"Architecture","permalink":"/story/tags/architecture"}],"readingTime":1.49,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u6570\u636E\u540C\u6B65\u6A21\u5F0F","slug":"etl-pattens","tags":["Design","Architecture"]},"unlisted":false,"prevItem":{"title":"Love the World","permalink":"/story/love-the-world"},"nextItem":{"title":"\u7EC4\u5EFA\u4F60\u81EA\u5DF1\u7684 NAS \u670D\u52A1\u5668","permalink":"/story/build-your-own-nas"}}')}}]);