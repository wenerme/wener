"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["263796"],{176239:function(n,e,l){l.r(e),l.d(e,{frontMatter:()=>i,toc:()=>t,default:()=>o,metadata:()=>s,assets:()=>a,contentTitle:()=>c});var s=JSON.parse('{"id":"service/auth/ldap/openldap","title":"OpenLDAP","description":"- openldap/openldap","source":"@site/../notes/service/auth/ldap/openldap.md","sourceDirName":"service/auth/ldap","slug":"/service/auth/ldap/openldap","permalink":"/notes/service/auth/ldap/openldap","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/ldap/openldap.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1661507210000,"frontMatter":{"title":"OpenLDAP"},"sidebar":"docs","previous":{"title":"LLDAP","permalink":"/notes/service/auth/ldap/lldap"},"next":{"title":"Logto","permalink":"/notes/service/auth/logto"}}'),d=l(486106),r=l(917776);let i={title:"OpenLDAP"},c="OpenLDAP",a={},t=[{value:"Note",id:"note",level:2},{value:"Overlay",id:"overlay",level:2},{value:"dynlist",id:"dynlist",level:3},{value:"Schema",id:"schema",level:2},{value:"Password",id:"password",level:3},{value:"slapd-config",id:"slapd-config",level:2},{value:"\u57FA\u7840\u914D\u7F6E",id:"\u57FA\u7840\u914D\u7F6E",level:3},{value:"slapd.conf",id:"slapdconf",level:2},{value:"\u57FA\u7840\u914D\u7F6E",id:"\u57FA\u7840\u914D\u7F6E-1",level:3},{value:"backend sql",id:"backend-sql",level:2},{value:"backend monitor",id:"backend-monitor",level:2},{value:"Access Control",id:"access-control",level:2},{value:"Off-line",id:"off-line",level:2},{value:"\u5907\u4EFD",id:"\u5907\u4EFD",level:2},{value:"lloadd",id:"lloadd",level:2},{value:"\u4E0D\u652F\u6301 sha256, sha512",id:"\u4E0D\u652F\u6301-sha256-sha512",level:2},{value:"No passwd entry for user ldap",id:"no-passwd-entry-for-user-ldap",level:2},{value:"slapd.ldif",id:"slapdldif",level:2},{value:"daemon: bind(7) failed errno=2 (No such file or directory)",id:"daemon-bind7-failed-errno2-no-such-file-or-directory",level:2}];function h(n){let e={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.header,{children:(0,d.jsx)(e.h1,{id:"openldap",children:"OpenLDAP"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.a,{href:"https://github.com/openldap/openldap",children:"openldap/openldap"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u652F\u6301 SQL \u540E\u7AEF - PostgreSQL"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u4F7F\u7528\u573A\u666F - \u7528\u6237\u8054\u90A6, \u6570\u636E\u5B58\u50A8\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"Linux PAM"}),"\n",(0,d.jsx)(e.li,{children:"SSH PAM"}),"\n",(0,d.jsx)(e.li,{children:"Keycloak user federation"}),"\n",(0,d.jsx)(e.li,{children:"Kerberos database"}),"\n",(0,d.jsx)(e.li,{children:"PowerDNS database"}),"\n",(0,d.jsx)(e.li,{children:"Serive user - Gitea, Gitlab, Nextcloud"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.openldap.org/doc/",children:"\u6587\u6863"})}),"\n",(0,d.jsxs)(e.li,{children:["archlinux ",(0,d.jsx)(e.a,{href:"https://wiki.archlinux.org/index.php/OpenLDAP",children:"OpenLDAP"})]}),"\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.a,{href:"https://github.com/leenooks/phpLDAPadmin",children:"leenooks/phpLDAPadmin"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"http://demo.phpldapadmin.org/",children:"demo"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.a,{href:"https://stackoverflow.com/questions/22606811",children:"OpenLDAP multi-tenant like ACL"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.openldap.org/faq/data/cache/1133.html",children:"Sets in Access Controls"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://github.com/osixia/docker-openldap",children:"osixia/docker-openldap"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://github.com/jp-gouin/helm-openldap",children:"jp-gouin/helm-openldap"})}),"\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.a,{href:"https://github.com/ltb-project/self-service-password",children:"ltb-project/self-service-password"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"GPLv3, PHP"}),"\n",(0,d.jsx)(e.li,{children:"change and reset password in an LDAP"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.admonition,{type:"caution",children:(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["sql backend \u9700\u8981\u81EA\u884C\u7EF4\u62A4 \u8868 \u4E0E ObjectClass \u7684\u5173\u7CFB\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u5E76\u4E0D\u662F\u76F4\u63A5\u53EF\u7528 - \u521D\u671F\u6709\u4E00\u5B9A\u5DE5\u4F5C\u91CF"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"\u4E0D\u652F\u6301 reload - \u76F4\u63A5\u91CD\u542F"}),"\n"]})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:'# macOS\n/usr/libexec/slapd -VVV # \u81EA\u5E26 v2.4\n\nbrew install openldap\nexport PATH="/usr/local/opt/openldap/bin:$PATH"\nexport PATH="/usr/local/opt/openldap/sbin:$PATH"\n/usr/local/opt/openldap/libexec/slapd -VVV # \u6700\u65B0\u7248 v2.6\n\n# AlpineLinux\napk add openldap\n# \u6DFB\u52A0\u540E\u7AEF - \u751F\u4EA7\u7528 sql \u6D4B\u8BD5\u7528 mdb\napk add openldap-back-sql openldap-back-mdb\n# \u6DFB\u52A0 overlay - openldap-overlay-all \u4E3A\u6240\u6709\napk add openldap-overlay-{accesslog,memberof,otp}\napk add openldap-passwd-{pbkdf2,argon2,sha2}\n# /etc/openldap/slapd.conf\nservice slapd checkconfig\n'})}),"\n",(0,d.jsx)(e.h2,{id:"note",children:"Note"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["overlay\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u4E4B\u95F4\u7684\u4E2D\u95F4\u5C42"}),"\n",(0,d.jsx)(e.li,{children:"\u4F5C\u4E3A\u6269\u5C55\u6DFB\u52A0\u5176\u4ED6\u529F\u80FD"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u914D\u7F6E\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"/etc/openldap/slapd.conf"}),"\n",(0,d.jsx)(e.li,{children:"/etc/openldap/slapd.ldif"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"\u540E\u7AEF - bdb, dnssrv, hdb, ldap, mdb, meta, monitor, null, passwd, relay, shell, sock, sql"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"cli"}),(0,d.jsx)(e.th,{children:"desc"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.strong,{children:"SBIN"})}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapacl"}),(0,d.jsx)(e.td,{children:"\u6821\u9A8C slapd \u76EE\u5F55\u6743\u9650"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapadd"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapauth"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapcat"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapd"}),(0,d.jsx)(e.td,{children:"\u72EC\u7ACB LDAP \u5B88\u62A4\u8FDB\u7A0B"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapdn"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapindex"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slappasswd"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapschema"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slaptest"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"slapmodify"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.strong,{children:"BIN"})}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapadd"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapdelete"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapmodify"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldappasswd"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapurl"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapwhoami"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapcompare"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapexop"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapmodrdn"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapsearch"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapvc"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.strong,{children:"MISC"})}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"lloadd"}),(0,d.jsx)(e.td,{children:"\u8D1F\u8F7D\u5747\u8861\u4EE3\u7406\u670D\u52A1"})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"slapd"}),(0,d.jsx)(e.th,{children:"for"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-h URLs"}),(0,d.jsx)(e.td,{children:"\u76D1\u542C"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-u user"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-g group"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-r dir"}),(0,d.jsx)(e.td,{children:"chroot"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-c cookie"}),(0,d.jsx)(e.td,{children:"cookie for syncrepl"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-o option=value"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-d debug-level"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-f slapd.conf"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-F slapd.d"}),(0,d.jsx)(e.td,{children:"ldif \u914D\u7F6E\u76EE\u5F55"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"-T"}),(0,d.jsx)(e.td,{children:"\u5DE5\u5177"})]})]})]}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"-T - acl, a/add, auth, c/cat, d/dn, i/index, p/passwd, s/schema, t/test"}),"\n",(0,d.jsxs)(e.li,{children:["-h ",(0,d.jsx)(e.code,{children:"ldap:/// ldaps:/// ldapi:///"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"ldap - \u9ED8\u8BA4 389"}),"\n",(0,d.jsx)(e.li,{children:"ldaps - \u9ED8\u8BA4 636 - LDAP over TLS"}),"\n",(0,d.jsxs)(e.li,{children:["ldapi - LDAP over IPC\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"x-mod \u53EF\u6307\u5B9A\u6743\u9650"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"PLDAP, PLDAPS - HAProxy proxy protocol version 2"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["-c cookie\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"rid, sid, csn"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["-o option\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"slp"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:'slapd -d ?                 # \u663E\u793A\u6240\u6709\u7684 debug level\nslapd -Tt -f slapd.conf    # \u6821\u9A8C\u914D\u7F6E - slaptest\nslapd -f slapd.conf -d 255 # \u542F\u52A8\n\nchown -R ldap:ldap slapd.d # \u786E\u4FDD\u6743\u9650\u6B63\u786E\n# \u5B58\u5728 slapd.d/cn=config.ldif\nslapd -F slapd.d -u ldap -g ldap # \u63A8\u8350\u4F7F\u7528 ldif \u914D\u7F6E\n\n# \u914D\u7F6E\u8F6C\u6362\nslaptest -f slapd.conf -F slapd.d\n\nslapcat -F /usr/local/etc/openldap/slapd.d -n0 -l extracted_config.ldif\nslapadd -F /usr/local/etc/openldap/slapd.d -l updated_config.ldif\n\n# -b DN\n# -U authcID\n# [attr[/access][:value]]\n# \u68C0\u6D4B wener \u7528\u6237\u662F\u5426\u80FD\u8BFB\u53D6 dc=wener,dc=me \u7684 name \u5C5E\u6027\nslapacl -f slapd.conf -v -U wener -b "dc=wener,dc=me" "name/read:wener"\n'})}),"\n",(0,d.jsx)(e.h2,{id:"overlay",children:"Overlay"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"overlay"}),(0,d.jsx)(e.th,{children:"desc"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"accesslog"}),(0,d.jsx)(e.td,{children:"\u5B58\u50A8\u8BBF\u95EE\u65E5\u5FD7\u5230 DB - \u4E5F\u4F1A\u7528\u4E8E delta-syncrepl"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"auditlog"}),(0,d.jsx)(e.td,{children:"\u4FEE\u6539\u65E5\u5FD7"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"chain"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"collect"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"constraint"}),(0,d.jsx)(e.td,{children:"\u7528 regex \u9650\u5B9A\u5C5E\u6027\u503C"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"dds"}),(0,d.jsx)(e.td,{children:"dynamicObject,ttl"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"deref"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"dynlist"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"homedir"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"lastbind"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"memberof"}),(0,d.jsx)(e.td,{children:"\u7EF4\u62A4\u53CD\u5411\u5206\u7EC4\u5173\u7CFB"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"mqtt"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"pcache"}),(0,d.jsx)(e.td,{children:"Proxy Cache"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ppolicy"}),(0,d.jsx)(e.td,{children:"Password Policy"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"proxycache"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"refint"}),(0,d.jsx)(e.td,{children:"Referential Integrity"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"remoteauth"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"retcode"}),(0,d.jsx)(e.td,{children:"Return Code"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"rwm"}),(0,d.jsx)(e.td,{children:"Rewrite/Remap"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"seqmod"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"sssvlv"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"syncprov"}),(0,d.jsx)(e.td,{children:"Sync Provider"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"translucent"}),(0,d.jsx)(e.td,{children:"Translucent Proxy"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"unique"}),(0,d.jsx)(e.td,{children:"\u552F\u4E00\u9650\u5B9A"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"valsort"}),(0,d.jsx)(e.td,{children:"Value Sorting"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.del,{children:"dyngroup"})}),(0,d.jsx)(e.td,{children:"\u4F7F\u7528 dynlist"})]})]})]}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u591A\u4E2A overlay \u662F\u53CD\u5E8F\u6267\u884C\u7684"}),"\n",(0,d.jsxs)(e.li,{children:["dds - Dynamic Directory Services - rfc2859\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["CRP - Client Refresh Period\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u5237\u65B0 ttl - ldapexop"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["memberof\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u4E3A groupOfNames \u7684 member \u5BF9\u8C61\u751F\u6210 memberof \u53CD\u5411\u5F15\u7528\u5C5E\u6027"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["rwm ",(0,d.jsx)(e.a,{href:"https://www.openldap.org/software/man.cgi?query=slapo-rwm&apropos=0&sektion=5&manpath=OpenLDAP+2.6-Release&arch=default&format=html",children:"slapo-rwm"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u4E3A\u8FDC\u7A0B ldap \u6216 relay \u63D0\u4F9B\u865A\u62DF\u5B57\u6BB5"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["translucent\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u5B58\u50A8\u90E8\u5206\u4EE3\u7406\u6570\u636E\u7684\u5230\u672C\u5730"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["unique\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["unique_uri - ",(0,d.jsx)(e.code,{children:"ldap:///ou=users,dc=example,dc=com?mail?sub?(objectClass=inetOrgPerson)"})]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["valsort\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["valsort-attr - ",(0,d.jsx)(e.code,{children:"memberUid ou=groups,dc=wener,dc=me alpha-ascend"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"refint"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u652F\u6301 rename"}),"\n",(0,d.jsx)(e.li,{children:"\u5982\u679C user \u88AB\u5220\u9664\uFF0C\u5BF9\u5E94\u7684 member \u5173\u7CFB\u4E5F\u88AB\u5220\u9664"}),"\n",(0,d.jsx)(e.li,{children:"\u5982\u679C\u6CA1\u6709\u4EFB\u4F55 member \u5219\u4F7F\u7528 refint_nothing"}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-conf",children:'overlay refint\nrefint_attributes member\nrefint_nothing "cn=admin,dc=example,dc=com"\n'})}),"\n",(0,d.jsx)(e.h3,{id:"dynlist",children:"dynlist"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-conf",children:"overlay dynlist\n# dynlist-attrset <group-oc> <URL-ad> [member-ad]\n# member-ad - \u5B58\u5728\u5219\u4E3A dyngroup - \u9700\u8981\u5305\u542B dyngroup.schema\n\n# \u5C06\u67E5\u8BE2\u7ED3\u679C\u7684\u5355\u4E00\u5C5E\u6027\u8FD4\u56DE\ndynlist-attrset nisMailAlias labeledURI\n\n# \u5C06\u67E5\u8BE2\u7ED3\u679C\u4F5C\u4E3A member \u5C5E\u6027\u8FD4\u56DE\ndynlist-attrset groupOfURLs labeledURI member\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ldif",children:"cn=all,ou=aliases,dc=example,dc=com\ncn: all\nobjectClass: nisMailAlias\nlabeledURI: ldap:///ou=People,dc=example,dc=com?mail?one?(objectClass=inetOrgPerson)\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u67E5\u8BE2\u8BE5\u5BF9\u8C61\u65F6\u5B9E\u9645\u8FD4\u56DE labeledURI \u67E5\u8BE2\u7ED3\u679C"}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"schema",children:"Schema"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"schema"}),(0,d.jsx)(e.th,{children:"note"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"collective"}),(0,d.jsx)(e.td,{children:"Collective attributes (experimental)"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"corba"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"core"}),(0,d.jsx)(e.td,{children:"OpenLDAP core"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"cosine"}),(0,d.jsx)(e.td,{children:"COSINE Pilot"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"dsee"}),(0,d.jsx)(e.td,{children:"Sun DSEE"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"duaconf"}),(0,d.jsx)(e.td,{children:"Client Configuration - WIP"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"dyngroup"}),(0,d.jsx)(e.td,{children:"Dynamic Group (experimental)"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"inetorgperson"}),(0,d.jsx)(e.td,{children:"InetOrgPerson"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"java"}),(0,d.jsx)(e.td,{children:"Java Object"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"misc"}),(0,d.jsx)(e.td,{children:"Miscellaneous Schema (experimental)"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"msuser"}),(0,d.jsx)(e.td,{children:"Microsoft's Active Directory schema for replication"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"namedobject"}),(0,d.jsx)(e.td,{children:"namedObject draft schema - WIP"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"nis"}),(0,d.jsx)(e.td,{children:"Network Information Service (experimental)"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"openldap"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"pmi"}),(0,d.jsx)(e.td,{children:"ITU X.509 PMI support (experimental)"})]})]})]}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.a,{href:"https://github.com/openldap/openldap/tree/master/contrib",children:"https://github.com/openldap/openldap/tree/master/contrib"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u989D\u5916\u6A21\u5757\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"passwd/pbkdf2"}),"\n",(0,d.jsx)(e.li,{children:"passwd/sha2"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"password",children:"Password"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"argon2"}),"\n",(0,d.jsxs)(e.li,{children:["pbkdf2\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"PBKDF2 -> PBKDF2-SHA1"}),"\n",(0,d.jsx)(e.li,{children:"PBKDF2-SHA1"}),"\n",(0,d.jsx)(e.li,{children:"PBKDF2-SHA256"}),"\n",(0,d.jsx)(e.li,{children:"PBKDF2-SHA512"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["sha2\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"SHA512"}),"\n",(0,d.jsx)(e.li,{children:"SHA384"}),"\n",(0,d.jsx)(e.li,{children:"SHA256"}),"\n",(0,d.jsx)(e.li,{children:"SSHA512"}),"\n",(0,d.jsx)(e.li,{children:"SSHA384"}),"\n",(0,d.jsx)(e.li,{children:"SSHA256"}),"\n",(0,d.jsx)(e.li,{children:"S \u524D\u7F00 Salted"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["totp - RFC 6238 Time-based One Time Passwords\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"TOTP1 - SHA-1"}),"\n",(0,d.jsx)(e.li,{children:"TOTP256 - SHA-256"}),"\n",(0,d.jsx)(e.li,{children:"TOTP512 - SHA-512"}),"\n",(0,d.jsx)(e.li,{children:"TOTP1ANDPW"}),"\n",(0,d.jsx)(e.li,{children:"TOTP256ANDPW"}),"\n",(0,d.jsxs)(e.li,{children:["TOTP512ANDPW\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"TOTP+password"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"kerberos"}),"\n",(0,d.jsx)(e.li,{children:"netscape"}),"\n",(0,d.jsx)(e.li,{children:"apr1"}),"\n",(0,d.jsx)(e.li,{children:"radius"}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-txt",metastring:'title="password"',children:"# password=secret salt=saltsalt\nuserPassword: {ARGON2}$argon2i$v=19$m=4096,t=3,p=1$c2FsdHNhbHQ$DKlexoEJUoZTmkAAC3SaMWk30El9/RvVhlqGo6afIng\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:'# \u9ED8\u8BA4\u652F\u6301 SHA\nslappasswd -o module-load=pw-sha2.so -h {SHA} -s secret\n\necho -n "secret" | argon2 "salt" -e\nslappasswd -o module-load=argon2.so -h {ARGON2} -s secret\n\nslappasswd -o module-load=pw-pbkdf2.so -h {PBKDF2} -s secret\n\nslappasswd -o module-load=pw-sha2.so -h {SHA256} -s secret\necho -n "secret" | openssl dgst -sha256 -binary | openssl enc -base64\n'})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["passwd - ",(0,d.jsx)(e.a,{href:"https://github.com/openldap/openldap/tree/master/servers/slapd/pwmods",children:"servers/slapd/pwmods"})]}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"slapd-config",children:"slapd-config"}),"\n",(0,d.jsx)(e.p,{children:"\u4F7F\u7528 ldif \u914D\u7F6E"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["cn=config 0 olcGlobal\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"olcIdleTimeout"}),"\n",(0,d.jsx)(e.li,{children:"olcLogLevel"}),"\n",(0,d.jsx)(e.li,{children:"olcReferral"}),"\n",(0,d.jsxs)(e.li,{children:["cn=module\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"olcModuleLoad"}),"\n",(0,d.jsx)(e.li,{children:"olcModulePath"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["cn=schema - olcSchemaConfig - System schema\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"olcAttributeTypes"}),"\n",(0,d.jsx)(e.li,{children:"olcObjectClasses"}),"\n",(0,d.jsxs)(e.li,{children:["cn={0}core - CoreSchema\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"olcAttributeTypes"}),"\n",(0,d.jsx)(e.li,{children:"olcObjectClasses"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"olcBackend"}),"\n",(0,d.jsxs)(e.li,{children:["olcDatabase={1}mdb - olcBackendConfig\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["index \u7528\u4E8E\u533A\u5206\u591A\u4E2A\u540C\u7C7B\u578B\u7684\u4E0D\u540C db\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u4E0D\u6307\u5B9A\u4F1A\u81EA\u52A8\u521B\u5EFA"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.code,{children:"olcAccess: to <what> [ by <who> [<accesslevel>] [<control>] ]+"})}),"\n",(0,d.jsx)(e.li,{children:"olcReadonly"}),"\n",(0,d.jsx)(e.li,{children:"olcRootDN"}),"\n",(0,d.jsx)(e.li,{children:"olcRootPW"}),"\n",(0,d.jsx)(e.li,{children:"olcSizeLimit"}),"\n",(0,d.jsx)(e.li,{children:"olcSuffix"}),"\n",(0,d.jsx)(e.li,{children:"olcSyncrepl"}),"\n",(0,d.jsx)(e.li,{children:"olcTimeLimit: 3600"}),"\n",(0,d.jsx)(e.li,{children:"olcUpdateref"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["olcDatabase=frontend\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"olcAccess"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["mdb\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["backend\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"olcBkMdbIdlExp: 16"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["database\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"olcDbDirectory: /usr/local/var/openldap-data"}),"\n",(0,d.jsx)(e.li,{children:"olcDbCheckpoint: 1024 10"}),"\n",(0,d.jsx)(e.li,{children:"olcDbEnvFlags"}),"\n",(0,d.jsx)(e.li,{children:"olcDbIndex"}),"\n",(0,d.jsx)(e.li,{children:"olcDbMaxEntrySize: 0"}),"\n",(0,d.jsx)(e.li,{children:"olcDbMaxReaders: 126"}),"\n",(0,d.jsx)(e.li,{children:"olcDbMaxSize: 10485760 - 10MB"}),"\n",(0,d.jsx)(e.li,{children:"olcDbMode: 0600"}),"\n",(0,d.jsx)(e.li,{children:"olcDbMultival"}),"\n",(0,d.jsx)(e.li,{children:"olcDbRtxnsize"}),"\n",(0,d.jsx)(e.li,{children:"olcDbSearchStack: 16"}),"\n",(0,d.jsx)(e.li,{children:"olcDbNosync"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"\u57FA\u7840\u914D\u7F6E",children:"\u57FA\u7840\u914D\u7F6E"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ldif",children:'dn: cn=config\nobjectClass: olcGlobal\ncn: config\n\nolcArgsFile: /var/lib/openldap/run/slapd.args\nolcPidFile: /var/lib/openldap/run/slapd.pid\n\n# \u6A21\u5757\u52A0\u8F7D\ndn: cn=module,cn=config\nobjectClass: olcModuleList\ncn: module\nolcModulepath:	/usr/lib/openldap\nolcModuleload:	back_mdb.so\n\ndn: cn=schema,cn=config\nobjectClass: olcSchemaConfig\ncn: schema\n\ninclude: file:///etc/openldap/schema/core.ldif\n\n# \u524D\u7AEF\n#\ndn: olcDatabase=frontend,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcFrontendConfig\nolcDatabase: frontend\n# \u8BBF\u95EE\u63A7\u5236\u7B56\u7565\n#	Other DSEs:\n#		Allow self write access\n#		Allow authenticated users read access\n#		Allow anonymous users to authenticate\n#\n#olcAccess: to dn.base="" by * read\n#olcAccess: to dn.base="cn=Subschema" by * read\n#olcAccess: to *\n#	by self write\n#	by users read\n#	by anonymous auth\n#\n# if no access controls are present, the default policy\n# allows anyone and everyone to read anything but restricts\n# updates to rootdn.  (e.g., "access to * by * read")\n#\n# rootdn can always read and write EVERYTHING!\n#\n\n# \u6570\u636E\u5E93\u914D\u7F6E\ndn: olcDatabase=mdb,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcMdbConfig\nolcDatabase: mdb\nolcDbMaxSize: 1073741824\nolcSuffix: dc=wener,dc=me\nolcRootDN: cn=admin,dc=wener,dc=me\nolcRootPW: secret\nolcDbDirectory:	/var/lib/openldap/openldap-data\nolcDbIndex: objectClass eq\n\ndn: olcDatabase=monitor,cn=config\nobjectClass: olcDatabaseConfig\nolcDatabase: monitor\nolcRootDN: cn=config\nolcMonitoring: FALSE\n'})}),"\n",(0,d.jsx)(e.h2,{id:"slapdconf",children:"slapd.conf"}),"\n",(0,d.jsx)(e.admonition,{type:"caution",children:(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u8BE5\u914D\u7F6E\u65B9\u5F0F\u5DF2\u5E9F\u5F03\uFF0C\u63A8\u8350\u4F7F\u7528 slapd-config \u914D\u7F6E"}),"\n"]})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u5168\u5C40\u914D\u7F6E+\u6570\u636E\u5E93\u914D\u7F6E"}),"\n",(0,d.jsx)(e.li,{children:"\u884C\u5F00\u5934\u4E3A\u7A7A\u767D\u5219\u4E3A \u7EED \u884C"}),"\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.code,{children:"backend <type>"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"asyncmeta, config, dnssrv, ldap, ldif, mdb, meta, monitor, null, passwd, perl, relay, sock, sql, wt"}),"\n",(0,d.jsx)(e.li,{children:"wt - WiredTiger"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.code,{children:"overlay <name>"})}),"\n"]}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.openldap.org/doc/admin26/slapdconf2.html",children:"https://www.openldap.org/doc/admin26/slapdconf2.html"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man5/slapd.conf.5.html",children:"https://man7.org/linux/man-pages/man5/slapd.conf.5.html"})}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"\u57FA\u7840\u914D\u7F6E-1",children:"\u57FA\u7840\u914D\u7F6E"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-conf",children:'include		/etc/openldap/schema/core.schema\n\npidfile		/var/lib/openldap/run/slapd.pid\nargsfile	/var/lib/openldap/run/slapd.args\n\n# \u52A0\u8F7D\u6A21\u5757\nmodulepath	/usr/lib/openldap\nmoduleload	back_mdb.la\n\nattributeoptions x-hidden lang-\naccess to attrs=name;x-hidden by * =cs\naccess to attrs=userPassword  by * auth\naccess to * by * read\n\ndatabase config\n# \u5F00\u542F\u540E\u53EF bind cn=config \u76F4\u63A5\u4FEE\u6539\u914D\u7F6E - \u4E0D\u8FC7\u914D\u7F6E\u4FEE\u6539\u4E0D\u4F1A\u4FDD\u5B58\n# rootpw secret\n\n# mdb \u914D\u7F6E\ndatabase	mdb\nmaxsize		1073741824\nsuffix		"dc=wener,dc=me"\nrootdn		"cn=admin,dc=wener,dc=me"\n# \u907F\u514D\u5BC6\u7801\u660E\u6587 - \u4F7F\u7528 slappasswd \u751F\u6210\nrootpw		secret\n# chmod 700\ndirectory	/var/lib/openldap/openldap-data\n# \u9700\u8981\u7EF4\u62A4\u7684\u7D22\u5F15\nindex	objectClass	eq\nindex cn,sn,mail pres,eq,approx,sub\n\ndatabase monitor\n'})}),"\n",(0,d.jsx)(e.h2,{id:"backend-sql",children:"backend sql"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u4F7F\u7528 odbc \u8FDE\u63A5"}),"\n",(0,d.jsx)(e.li,{children:"\u9700\u8981\u81EA\u884C\u7EF4\u62A4 \u8868 \u4E0E ObjectClass \u7684\u5173\u7CFB"}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ini",metastring:'title="/etc/odbc.ini"',children:"[example]\nDescription         = OpenLDAP back-sql\nDriver              = PostgreSQL\nTrace               = No\nDatabase            = example\nServername          = localhost\nUserName            = manager\nPassword            = secret\nPort                = 5432\n;Protocol            = 6.4\nReadOnly            = No\nRowVersioning       = No\nShowSystemTables    = No\nShowOidColumn       = No\nFakeOidIndex        = No\nConnSettings        =\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ini",metastring:'title="/etc/odbcinst.ini"',children:"[PostgreSQL]\nDescription     = ODBC for PostgreSQL\nDriver          = /usr/lib/libodbcpsql.so\nSetup           = /usr/lib/libodbcpsqlS.so\nFileUsage       = 1\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-conf",children:'database	sql\nsuffix		"o=sql,c=RU"\nrootdn		"cn=root,o=sql,c=RU"\nrootpw		secret\ndbname		PostgreSQL\ndbuser		postgres\ndbpasswd	postgres\ninsentry_stmt	"insert into ldap_entries (id,dn,oc_map_id,parent,keyval) values ((select max(id)+1 from ldap_entries),?,?,?,?)"\nupper_func	"upper"\nstrcast_func	"text"\nconcat_pattern	"?||?"\nhas_ldapinfo_dn_ru	no\n'})}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"PostgreSQL"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"ldap_oc_mappings"}),"\n",(0,d.jsx)(e.li,{children:"ldap_attr_mappings"}),"\n",(0,d.jsx)(e.li,{children:"ldap_entries"}),"\n",(0,d.jsx)(e.li,{children:"ldap_entry_objclasses"}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"create table\n  ldap_oc_mappings (\n    id serial not null primary key,\n    -- objectClass name\n    name varchar(64) not null,\n    -- \u6620\u5C04\u7684\u8868\u540D\n    keytbl varchar(64) not null,\n    -- pk \u5217\n    keycol varchar(64) not null,\n    -- \u521B\u5EFA SQL\n    create_proc varchar(255),\n    -- \u5220\u9664 SQL\n    delete_proc varchar(255),\n    expect_return int not null\n  );\n\ncreate table\n  ldap_attr_mappings (\n    id serial not null primary key,\n    oc_map_id integer not null references ldap_oc_mappings(id),\n    name varchar(255) not null,\n    sel_expr varchar(255) not null,\n    sel_expr_u varchar(255),\n    from_tbls varchar(255) not null,\n    join_where varchar(255),\n    add_proc varchar(255),\n    delete_proc varchar(255),\n    param_order int not null,\n    expect_return int not null\n  );\n\ncreate table\n  ldap_entries (\n    id serial not null primary key,\n    dn varchar(255) not null,\n    oc_map_id integer not null references ldap_oc_mappings(id),\n    parent int NOT NULL,\n    keyval int NOT NULL,\n    UNIQUE (oc_map_id, keyval),\n    UNIQUE (dn)\n  );\n\ncreate table\n  ldap_entry_objclasses (\n    entry_id integer not null references ldap_entries(id),\n    oc_name varchar(64)\n  );\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://github.com/openldap/openldap/tree/master/servers/slapd/back-sql/rdbms_depend/pgsql",children:"https://github.com/openldap/openldap/tree/master/servers/slapd/back-sql/rdbms_depend/pgsql"})}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"backend-monitor",children:"backend monitor"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u7531 slapd \u7EF4\u62A4\uFF0C\u63D0\u4F9B\u7CFB\u7EDF\u5065\u5EB7\u4FE1\u606F"}),"\n",(0,d.jsxs)(e.li,{children:["cn=Monitor\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["cn=Backends\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"monitoredInfo"}),"\n",(0,d.jsx)(e.li,{children:"cn=Backend 0"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["cn=Connections\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"cn=Total"}),"\n",(0,d.jsx)(e.li,{children:"cn=Current"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["cn=Databases\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"cn=Database 0"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"cn=Listeners"}),"\n",(0,d.jsxs)(e.li,{children:["cn=Overlays\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"monitoredInfo"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["cn=Statistics\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["cn=Entries\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"monitorCounter"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["cn=Threads\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["cn=Max\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"monitoredInfo"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["cn=Time\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["cn=Current\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"monitorTimestamp"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"cn=Start"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["cn=Waiters\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["cn=Read\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"monitorCounter"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"cn=Write"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-conf",children:'database monitor\naccess to * by dn.exact="cn=admin,dc=wener,dc=me" by * none\n'})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"ldapsearch -x -D 'cn=admin,dc=wener,dc=me' -W -b 'cn=Monitor' -s base 1.1\nldapsearch -x -D 'cn=admin,dc=wener,dc=me' -W -b 'cn=Monitor' -s base '(objectClass=*)' '*' '+'\n"})}),"\n",(0,d.jsx)(e.h2,{id:"access-control",children:"Access Control"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"<access directive> ::= to <what>\n    [by <who> [<access>] [<control>] ]+\n<what> ::= * |\n    [dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>]\n    [filter=<ldapfilter>] [attrs=<attrlist>]\n<basic-style> ::= regex | exact\n<scope-style> ::= base | one | subtree | children\n<attrlist> ::= <attr> [val[.<basic-style>]=<regex>] | <attr> , <attrlist>\n<attr> ::= <attrname> | entry | children\n<who> ::= * | [anonymous | users | self\n        | dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>]\n    [dnattr=<attrname>]\n    [group[/<objectclass>[/<attrname>][.<basic-style>]]=<regex>]\n    [peername[.<basic-style>]=<regex>]\n    [sockname[.<basic-style>]=<regex>]\n    [domain[.<basic-style>]=<regex>]\n    [sockurl[.<basic-style>]=<regex>]\n    [set=<setspec>]\n    [aci=<attrname>]\n<access> ::= [self]{<level>|<priv>}\n<level> ::= none | disclose | auth | compare | search | read | write | manage\n<priv> ::= {=|+|-}{m|w|r|s|c|x|d|0}+\n<control> ::= [stop | continue | break]\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["what\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.code,{children:"*"})}),"\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.code,{children:"dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"basic-style - regex, exact"}),"\n",(0,d.jsx)(e.li,{children:"scope-style - base, one, subtree, children"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.code,{children:"filter=<ldapfilter>] [attrs=<attrlist>"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["who\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.code,{children:"*"})}),"\n",(0,d.jsx)(e.li,{children:"anonymous"}),"\n",(0,d.jsx)(e.li,{children:"users - \u8BA4\u8BC1\u7528\u6237"}),"\n",(0,d.jsx)(e.li,{children:"self - \u7528\u6237\u6240\u5728 entry"}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.code,{children:"dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>]"})}),"\n",(0,d.jsx)(e.li,{children:"dnattr="}),"\n",(0,d.jsx)(e.li,{children:"group="}),"\n",(0,d.jsx)(e.li,{children:"peername="}),"\n",(0,d.jsx)(e.li,{children:"sockname="}),"\n",(0,d.jsx)(e.li,{children:"domain="}),"\n",(0,d.jsx)(e.li,{children:"sockurl="}),"\n",(0,d.jsx)(e.li,{children:"set="}),"\n",(0,d.jsx)(e.li,{children:"aci="}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["access\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"self"}),"\n",(0,d.jsxs)(e.li,{children:["level\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"none | disclose | auth | compare | search | read | write | manage"}),"\n",(0,d.jsx)(e.li,{children:"\u4E0B\u7EA7\u5305\u542B\u4E0A\u7EA7"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["priv\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.code,{children:"{=|+|-}{m|w|r|s|c|x|d|0}+"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["control\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"stop - \u9ED8\u8BA4"}),"\n",(0,d.jsx)(e.li,{children:"continue - \u7EE7\u7EED\u5904\u7406 who"}),"\n",(0,d.jsx)(e.li,{children:"break - \u8DF3\u51FA\u5F53\u524D access \u7EE7\u7EED\u5904\u7406\u4E0B\u4E00\u6761"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u9690\u542B\u89C4\u5219 ",(0,d.jsx)(e.code,{children:"by * none stop"})]}),"\n"]}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"\u6743\u9650\u7EC4\u5408"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:'access to *\n    by peername.ip="127.0.0.1" =w continue\n    by dn.exact="cn=foo" +rcsx\n    by * auth\n'})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["127.0.0.1 \u6743\u9650\u4E3A ",(0,d.jsx)(e.code,{children:"w"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u5982\u679C cn=foo \u5219\u6DFB\u52A0\u66F4\u591A\u6743\u9650"}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"who"}),(0,d.jsx)(e.th,{children:"desc"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"*"})}),(0,d.jsx)(e.td,{children:"\u6240\u6709"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"anonymous"}),(0,d.jsx)(e.td,{children:"\u533F\u540D/\u672A\u6388\u6743 \u7528\u6237"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"users"}),(0,d.jsx)(e.td,{children:"\u6388\u6743\u7528\u6237"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"self"}),(0,d.jsx)(e.td,{children:"User associated with target entry"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"dn[.<basic-style>]=<regex>"})}),(0,d.jsx)(e.td,{children:"Users matching a regular expression"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:(0,d.jsx)(e.code,{children:"dn.<scope-style>=<DN>"})}),(0,d.jsx)(e.td,{children:"Users within scope of a DN"})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"level"}),(0,d.jsx)(e.th,{children:"priv"}),(0,d.jsx)(e.th,{children:"desc"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"none"}),(0,d.jsx)(e.td,{children:"=0"}),(0,d.jsx)(e.td,{children:"\u4E0D\u80FD\u8BBF\u95EE"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"disclose"}),(0,d.jsx)(e.td,{children:"=d"}),(0,d.jsx)(e.td,{children:"needed for information disclosure on error"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"auth"}),(0,d.jsx)(e.td,{children:"=dx"}),(0,d.jsx)(e.td,{children:"\u9700\u8981\u8BA4\u8BC1 - bind"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"compare"}),(0,d.jsx)(e.td,{children:"=cdx"}),(0,d.jsx)(e.td,{children:"needed to compare"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"search"}),(0,d.jsx)(e.td,{children:"=scdx"}),(0,d.jsx)(e.td,{children:"needed to apply search filters"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"read"}),(0,d.jsx)(e.td,{children:"=rscdx"}),(0,d.jsx)(e.td,{children:"needed to read search results"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"write"}),(0,d.jsx)(e.td,{children:"=wrscdx"}),(0,d.jsx)(e.td,{children:"needed to modify/rename"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"manage"}),(0,d.jsx)(e.td,{children:"=mwrscdx"}),(0,d.jsx)(e.td,{children:"needed to manage"})]})]})]}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.openldap.org/faq/data/cache/454.html",children:"https://www.openldap.org/faq/data/cache/454.html"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://uit.stanford.edu/service/directory/aclexamples",children:"https://uit.stanford.edu/service/directory/aclexamples"})}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"off-line",children:"Off-line"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ldif",children:"dn: dc=wener,dc=me\nobjectClass: dcObject\nobjectClass: organization\ndc: wener\no: Wener's Website\ndescription: A blog full of notes\n\ndn: cn=admin,dc=example,dc=com\nobjectClass: organizationalRole\ncn: admin\ndescription: Directory Administrator\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"# \u4F7F\u7528 directory \u7684 \u53EF\u4EE5\u52A0\nslapd -Ta -F slapd.d -l demo.ldif\n"})}),"\n",(0,d.jsx)(e.h2,{id:"\u5907\u4EFD",children:"\u5907\u4EFD"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:'slapcat -f slapd.conf -b "dc=example,dc=com"\n'})}),"\n",(0,d.jsx)(e.h2,{id:"lloadd",children:"lloadd"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u8D1F\u8F7D\u5747\u8861"}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-conf",children:'feature proxyauthz\n\nbindconf bindmethod=simple\n        binddn="cn=Manager,dc=example,dc=com"\n        credentials=secret\n\ntier roundrobin\nbackend-server uri=ldap://server1.example.com\n              numconns=5 bindconns=5\n              max-pending-ops=10 conn-max-pending=3\n              retry=5000\nbackend-server uri=ldap://server2.example.com\n              numconns=5 bindconns=5\n              max-pending-ops=10 conn-max-pending=3\n              retry=5000\n'})}),"\n",(0,d.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,d.jsx)(e.h2,{id:"\u4E0D\u652F\u6301-sha256-sha512",children:"\u4E0D\u652F\u6301 sha256, sha512"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{children:"At present there is no need to change anything in the core since SHA-2 support\ncan be dynamically loaded. Don't fix what isn't broken.\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.openldap.org/lists/openldap-bugs/201205/msg00055.html",children:"https://www.openldap.org/lists/openldap-bugs/201205/msg00055.html"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.openldap.org/faq/data/cache/1467.html",children:"https://www.openldap.org/faq/data/cache/1467.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"no-passwd-entry-for-user-ldap",children:"No passwd entry for user ldap"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"getent passwd ldap\n"})}),"\n",(0,d.jsx)(e.h2,{id:"slapdldif",children:"slapd.ldif"}),"\n",(0,d.jsx)(e.p,{children:"\u9ED8\u8BA4\u53EA\u80FD slapd.conf \u5355\u6587\u4EF6\u914D\u7F6E\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4E00\u5B9A\u7684\u65B9\u5F0F\u5B9E\u73B0 ldif \u914D\u7F6E\u3002"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"slapd -f slapd.conf.init -F slapd.d -h 'ldap:// ldaps:// ldapi://'\n\n# slapd.ldif \u5305\u542B\u6240\u6709\u914D\u7F6E\nldapadd -Y EXTERNAL -H ldapi:// -f slapd.ldif\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-conf",metastring:'title="slapd.conf.init"',children:'pidfile /var/lib/openldap/run/slapd.pid\n\ndatabase config\n# \u5141\u8BB8\u901A\u8FC7 sock \u7BA1\u7406\naccess to * by dn.base="gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth" manage\n'})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ldif",metastring:'title="slapd.ldif"',children:'dn: cn=module,cn=config\nobjectClass: olcModuleList\ncn: module\nolcModulePath: /usr/lib/openldap\nolcModuleLoad: back_mdb.so\n\ndn: olcDatabase=mdb,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcMdbConfig\nolcDatabase: mdb\nolcSuffix: dc=example,dc=com\nolcRootDN: cn=manager,dc=example,dc=com\nolcRootPW:: c2VjcmV0\nolcDbDirectory: /var/lib/openldap/example.com\nolcAccess: to * by dn.base="gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth" manage\n'})}),"\n",(0,d.jsx)(e.h2,{id:"daemon-bind7-failed-errno2-no-such-file-or-directory",children:"daemon: bind(7) failed errno=2 (No such file or directory)"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"install -d -m 700 -o ldap -g ldap /var/lib/openldap/run\nchown -R ldap:ldap /var/lib/openldap\n"})})]})}function o(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(h,{...n})}):h(n)}},917776:function(n,e,l){l.d(e,{R:()=>i,x:()=>c});var s=l(7378);let d={},r=s.createContext(d);function i(n){let e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:i(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);