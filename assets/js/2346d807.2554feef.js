"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["9668"],{93312:function(n,e,t){t.r(e),t.d(e,{frontMatter:()=>l,toc:()=>h,default:()=>x,metadata:()=>s,assets:()=>c,contentTitle:()=>i});var s=JSON.parse('{"id":"service/observability/opentelemetry/README","title":"OpenTelemetry","description":"Log","source":"@site/../notes/service/observability/opentelemetry/README.md","sourceDirName":"service/observability/opentelemetry","slug":"/service/observability/opentelemetry/","permalink":"/notes/service/observability/opentelemetry/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/observability/opentelemetry/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1758158840000,"frontMatter":{"title":"OpenTelemetry"},"sidebar":"docs","previous":{"title":"OpenObserve","permalink":"/notes/service/observability/openobserve"},"next":{"title":"\u94FE\u8DEF\u8DDF\u8E2A","permalink":"/notes/service/observability/tracing/"}}'),r=t(86106),d=t(17776);let l={title:"OpenTelemetry"},i="OpenTelemetry",c={},h=[{value:"\u73AF\u5883\u53D8\u91CF",id:"env-vars",level:2}];function o(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"opentelemetry",children:"OpenTelemetry"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Log"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "_timestamp": 1757579545084764,\n  "body": "Starting #0",\n  "code_file_path": "/app/main.py",\n  "code_function_name": "lifespan",\n  "code_line_number": 67,\n  "deployment_environment": "production",\n  "dropped_attributes_count": 0,\n  "instrumentation_library_name": "app.main",\n  "service_name": "api",\n  "service_namespace": "app",\n  "service_version": "1.0.0",\n  "severity": "INFO",\n  "telemetry_sdk_language": "python",\n  "telemetry_sdk_name": "opentelemetry",\n  "telemetry_sdk_version": "1.36.0"\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"env-vars",children:"\u73AF\u5883\u53D8\u91CF"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["OTEL_EXPORTER_OTLP_ENDPOINT\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["gRPC ",(0,r.jsx)(e.a,{href:"http://localhost:4317",children:"http://localhost:4317"})]}),"\n",(0,r.jsxs)(e.li,{children:["HTTP ",(0,r.jsx)(e.a,{href:"http://localhost:4318",children:"http://localhost:4318"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Python\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"OTEL_PYTHON_TRACER_PROVIDER"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://opentelemetry.io/docs/specs/semconv/resource/deployment-environment/",children:"https://opentelemetry.io/docs/specs/semconv/resource/deployment-environment/"})}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"env"}),(0,r.jsx)(e.th,{children:"demo"}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_RESOURCE_ATTRIBUTES"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_SERVICE_NAME"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{children:"service.name"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_LOG_LEVEL"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_PROPAGATORS"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_TRACES_SAMPLER"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_EXPORTER_OTLP_ENDPOINT"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"http://localhost:4318",children:"http://localhost:4318"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"http://localhost:4318/v1/traces",children:"http://localhost:4318/v1/traces"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_EXPORTER_OTLP_METRICS_ENDPOINT"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"http://my-api-endpoint/v1/metrics",children:"http://my-api-endpoint/v1/metrics"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_EXPORTER_OTLP_LOGS_ENDPOINT"}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.a,{href:"http://my-api-endpoint/v1/logs",children:"http://my-api-endpoint/v1/logs"})}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_EXPORTER_OTLP_HEADERS"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"OTEL_EXPORTER_OTLP_{TRACES,METRICS,LOGS}_HEADERS"})}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_EXPORTER_OTLP_TIMEOUT"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"OTEL_EXPORTER_OTLP_{TRACES,METRICS,LOGS}_TIMEOUT"})}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_EXPORTER_OTLP_PROTOCOL"}),(0,r.jsx)(e.td,{children:"grpc"}),(0,r.jsx)(e.td,{children:"grpc,http/protobuf,http/json"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"OTEL_EXPORTER_OTLP_*_PROTOCOL"})}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_SDK_DISABLED"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_TRACES_EXPORTER"}),(0,r.jsx)(e.td,{children:"otlp"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_METRICS_EXPORTER"}),(0,r.jsx)(e.td,{children:"otlp"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"OTEL_LOGS_EXPORTER"}),(0,r.jsx)(e.td,{children:"otlp"}),(0,r.jsx)(e.td,{})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"TRACEPARENT"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{children:"\u4E00\u822C\u7528\u4E8E IPC"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"TRACESTATE"}),(0,r.jsx)(e.td,{}),(0,r.jsx)(e.td,{children:"\u4E00\u822C\u914D\u5408 TRACEPARENT"})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"OTEL_TRACES_EXPORTER - otlp, zipkin, console, logging, none"}),"\n",(0,r.jsx)(e.li,{children:"OTEL_METRICS_EXPORTER - otlp, prometheus, console, none"}),"\n",(0,r.jsx)(e.li,{children:"OTEL_LOGS_EXPORTER - otlp, console, logging, none"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"OTEL_{LANGUAGE}_{FEATURE}"})}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"OTEL_PROPAGATORS"}),(0,r.jsx)(e.th,{children:"Description"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"tracecontext"}),(0,r.jsx)(e.td,{children:"W3C Trace Context"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"baggage"}),(0,r.jsx)(e.td,{children:"W3C Baggage"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"b3"}),(0,r.jsx)(e.td,{children:"B3 Single"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"b3multi"}),(0,r.jsx)(e.td,{children:"B3 Multi"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"jaeger"}),(0,r.jsx)(e.td,{children:"Jaeger"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"xray"}),(0,r.jsx)(e.td,{children:"AWS X-Ray"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ottrace"}),(0,r.jsx)(e.td,{children:"OT Trace"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"none"}),(0,r.jsx)(e.td,{children:"No automatically configured propagator."})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"OTEL_TRACES_SAMPLER"}),(0,r.jsx)(e.th,{children:"Description"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"always_on"}),(0,r.jsx)(e.td,{children:"AlwaysOnSampler"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"always_off"}),(0,r.jsx)(e.td,{children:"AlwaysOffSampler"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"traceidratio"}),(0,r.jsx)(e.td,{children:"TraceIdRatioBased"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"parentbased_always_on"}),(0,r.jsx)(e.td,{children:"ParentBased(root=AlwaysOnSampler)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"parentbased_always_off"}),(0,r.jsx)(e.td,{children:"ParentBased(root=AlwaysOffSampler)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"parentbased_traceidratio"}),(0,r.jsx)(e.td,{children:"ParentBased(root=TraceIdRatioBased)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"parentbased_jaeger_remote"}),(0,r.jsx)(e.td,{children:"ParentBased(root=JaegerRemoteSampler)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"jaeger_remote"}),(0,r.jsx)(e.td,{children:"JaegerRemoteSampler"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"xray"}),(0,r.jsx)(e.td,{children:"AWS X-Ray Centralized Sampling (third party)"})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://opentelemetry.io/docs/specs/otel/configuration/sdk-environment-variables/",children:"https://opentelemetry.io/docs/specs/otel/configuration/sdk-environment-variables/"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/",children:"https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/"})}),"\n"]})]})}function x(n={}){let{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},17776:function(n,e,t){t.d(e,{R:()=>l,x:()=>i});var s=t(7378);let r={},d=s.createContext(r);function l(n){let e=s.useContext(d);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(d.Provider,{value:e},n.children)}}}]);