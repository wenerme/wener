"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["50708"],{2247:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>r,toc:()=>a,default:()=>h,metadata:()=>i,assets:()=>d,contentTitle:()=>l});var i=JSON.parse('{"id":"service/forge/git/git-internal","title":"Git Internal","description":"| str    | object type   | number |","source":"@site/../notes/service/forge/git/git-internal.md","sourceDirName":"service/forge/git","slug":"/service/forge/git/internal","permalink":"/notes/service/forge/git/internal","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/forge/git/git-internal.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1665107861000,"frontMatter":{"sidebar_title":"Internal"},"sidebar":"docs","previous":{"title":"Git Hook","permalink":"/notes/service/forge/git/hook"},"next":{"title":"Git Message","permalink":"/notes/service/forge/git/message"}}'),c=t(86106),s=t(17776);let r={sidebar_title:"Internal"},l="Git Internal",d={},a=[{value:"sha256",id:"sha256",level:2}];function o(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"git-internal",children:"Git Internal"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"str"}),(0,c.jsx)(n.th,{children:"object type"}),(0,c.jsx)(n.th,{children:"number"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"commit"}),(0,c.jsx)(n.td,{children:"OBJ_COMMIT"}),(0,c.jsx)(n.td,{children:"1"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"tree"}),(0,c.jsx)(n.td,{children:"OBJ_TREE"}),(0,c.jsx)(n.td,{children:"2"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"blob"}),(0,c.jsx)(n.td,{children:"OBJ_BLOB"}),(0,c.jsx)(n.td,{children:"3"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"tag"}),(0,c.jsx)(n.td,{children:"OBJ_TAG"}),(0,c.jsx)(n.td,{children:"4"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{}),(0,c.jsx)(n.td,{children:"OBJ_OFS_DELTA"}),(0,c.jsx)(n.td,{children:"6"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{}),(0,c.jsx)(n.td,{children:"OBJ_REF_DELTA"}),(0,c.jsx)(n.td,{children:"7"})]})]})]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain",children:"Git Internals"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Git-Internals-Git-Objects",children:"Git Objects"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'echo -n hello | git hash-object --stdin\n# blob <size>\\0\nprintf \'blob 5\\0hello\' | sha1sum\nCONTENTS=hello sh -c \'printf "blob ${#CONTENTS}\\0$CONTENTS"\' | sha1sum\n\necho -n hello > /tmp/hello\nfile=/tmp/hello\n(\n  stat --printf="blob %s\\0" "$file"\n  cat "$file"\n) | sha1sum\n'})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[".git\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"HEAD"}),"\n",(0,c.jsx)(n.li,{children:"config"}),"\n",(0,c.jsx)(n.li,{children:"description"}),"\n",(0,c.jsx)(n.li,{children:"hooks/"}),"\n",(0,c.jsx)(n.li,{children:"info/"}),"\n",(0,c.jsxs)(n.li,{children:["objects/\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"info/"}),"\n",(0,c.jsxs)(n.li,{children:["pack/ - ",(0,c.jsx)(n.a,{href:"https://git-scm.com/docs/gitformat-pack",children:"Git pack format"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"pack-.{pack,idx}"}),"\n",(0,c.jsx)(n.li,{children:"pack-.rev"}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"pack-*.mtimes"})}),"\n",(0,c.jsx)(n.li,{children:"multi-pack-index"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.li,{children:"refs/"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"#\ngit init /tmp/git\ncd /tmp/git\necho -n hello | git hash-object -w --stdin\nfind .git/objects -type f\nfile .git/objects/b6/fc4c620b67d95f953a5c1c1230aaab5db5a1b0 # zlib compressed data\ngit cat-file -p b6fc4c620b67d95f953a5c1c1230aaab5db5a1b0\ngit cat-file -t b6fc4c620b67d95f953a5c1c1230aaab5db5a1b0 # blob\n\necho -n hello > hello.txt\ngit add hello.txt\ngit commit -m 'hello.txt'\n\ngit cat-file -p master^{tree} # hello.txt\nfind .git/objects -type f\ngit cat-file -t 04df07b08ca746b3167d0f1d1514e2f39a52c16c # tree\ngit cat-file -p 04df07b08ca746b3167d0f1d1514e2f39a52c16c\n# 100644 blob b6fc4c620b67d95f953a5c1c1230aaab5db5a1b0    hello.txt\ngit cat-file -t d7ca319a50ed5fb97583cc0ef251d19b503caa6d # commit\ngit cat-file -p d7ca319a50ed5fb97583cc0ef251d19b503caa6d\n# author wener <email> 1665103472 +0800\n# committer wener <email> 1665103472 +0800\n# gpgsig\n#\n# hello.txt\n\ngit write-tree\ngit update-index --cacheinfo 100644 $(git hash-object hello.txt) hello.txt\n\necho new > new.txt\ngit update-index --add new.txt\ngit write-tree\n\ngit cat-file -p $(git write-tree)\n\ngit read-tree --prefix=bak $(git write-tree)\n\necho 'commit' | git commit-tree $(git write-tree)\ngit cat-file -p dc1eb3\n\necho 'Second commit' | git commit-tree $(git write-tree) -p dc1eb3\ngit cat-file -p 8989b5\ngit log --stat 8989b5\n"})}),"\n",(0,c.jsx)(n.h2,{id:"sha256",children:"sha256"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-conf",children:"[core]\n	repositoryFormatVersion = 1\n[extensions]\n	objectFormat = sha256\n	compatObjectFormat = sha1\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://git-scm.com/docs/hash-function-transition/",children:"https://git-scm.com/docs/hash-function-transition/"})}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},17776:function(e,n,t){t.d(n,{R:()=>r,x:()=>l});var i=t(7378);let c={},s=i.createContext(c);function r(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);