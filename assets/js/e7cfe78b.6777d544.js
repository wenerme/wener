"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["614635"],{570856:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>o,default:()=>h,metadata:()=>l,assets:()=>d,contentTitle:()=>c});var l=JSON.parse('{"id":"os/alpine/alpine-faq","title":"Alpine FAQ","description":"\u672F\u8BED","source":"@site/../notes/os/alpine/alpine-faq.md","sourceDirName":"os/alpine","slug":"/os/alpine/faq","permalink":"/notes/os/alpine/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/os/alpine/alpine-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1765727241000,"frontMatter":{"title":"Alpine FAQ","tags":["FAQ"]},"sidebar":"docs","previous":{"title":"Alpine Desktop","permalink":"/notes/os/alpine/desktop"},"next":{"title":"Alpine GLIBC","permalink":"/notes/os/alpine/glibc"}}'),s=i(486106),r=i(917776);let t={title:"Alpine FAQ",tags:["FAQ"]},c,d={},o=[{value:"\u672F\u8BED",id:"\u672F\u8BED",level:2},{value:"Why AlpineLinux",id:"why-alpinelinux",level:2},{value:"\u5347\u7EA7\u6CE8\u610F\u4E8B\u9879",id:"\u5347\u7EA7\u6CE8\u610F\u4E8B\u9879",level:2},{value:"apk opening from cache No such file or directory",id:"apk-opening-from-cache-no-such-file-or-directory",level:2},{value:"\u5386\u53F2",id:"\u5386\u53F2",level:2},{value:"GPU",id:"gpu",level:2},{value:"apk 1 error",id:"apk-1-error",level:2},{value:"ifupdown \u5305\u4E0D\u4F1A\u542F\u52A8",id:"ifupdown-\u5305\u4E0D\u4F1A\u542F\u52A8",level:2},{value:"\u6CA1\u6709\u63D0\u793A\u767B\u9646",id:"\u6CA1\u6709\u63D0\u793A\u767B\u9646",level:2},{value:"Login incorrect - \u6CA1\u6709\u8BE2\u95EE\u5BC6\u7801",id:"login-incorrect---\u6CA1\u6709\u8BE2\u95EE\u5BC6\u7801",level:2},{value:"process &#39;/sbin/getty -L ttyAMA0 115200 vt100&#39; (pid 1929) exited. Scheduling for restart.",id:"process-sbingetty--l-ttyama0-115200-vt100-pid-1929-exited-scheduling-for-restart",level:2},{value:"getty: console: TIOCSCTTY: Operation not permitted",id:"getty-console-tiocsctty-operation-not-permitted",level:2},{value:"\u5185\u6838\u98CE\u683C - kernel flavors - lts vs virt",id:"flavors",level:2},{value:"rc-update: failed to add service <code>loadkmap&#39; to runlevel </code>boot&#39;: No such file or directory",id:"rc-update-failed-to-add-service-loadkmap-to-runlevel-boot-no-such-file-or-directory",level:2},{value:"virt vs standard",id:"virt-vs-standard",level:2},{value:"microcode",id:"microcode",level:2},{value:"mount: mounting UUID=x-x-x-x on /sysroot failed: No such file or directory",id:"mount-mounting-uuidx-x-x-x-on-sysroot-failed-no-such-file-or-directory",level:2},{value:"sh: can&#39;t access tty; job control turned off",id:"sh-cant-access-tty-job-control-turned-off",level:2},{value:"initramfs emergency recovery shell launched. Type &#39;exit&#39; to continue boot",id:"initramfs-emergency-recovery-shell-launched-type-exit-to-continue-boot",level:2},{value:"/dev/null/utmp: Not a directory",id:"devnullutmp-not-a-directory",level:2},{value:"Password: chpasswd: PAM: Authentication failure",id:"password-chpasswd-pam-authentication-failure",level:2},{value:"dmesg: read kernel buffer failed: Operation not permitted",id:"dmesg-read-kernel-buffer-failed-operation-not-permitted",level:2},{value:"dmesg \u4FDD\u7559\u4E0A\u6B21",id:"dmesg-\u4FDD\u7559\u4E0A\u6B21",level:2},{value:"mirrors",id:"mirrors",level:2},{value:"\u907F\u514D udhcp \u4FEE\u6539 DNS",id:"\u907F\u514D-udhcp-\u4FEE\u6539-dns",level:2},{value:"alpine musl performance",id:"alpine-musl-performance",level:2},{value:"alpine glibc compat",id:"alpine-glibc-compat",level:2},{value:"apk \u4ECE edge \u4ED3\u5E93\u5B89\u88C5",id:"apk-\u4ECE-edge-\u4ED3\u5E93\u5B89\u88C5",level:2},{value:"ca-certificates.crt does not contain exactly one certificate or CRL: skipping",id:"ca-certificatescrt-does-not-contain-exactly-one-certificate-or-crl-skipping",level:2},{value:"SSL routines:tls_process_server_certificate verify failed/statem/statem_clnt.c:1919",id:"ssl-routinestls_process_server_certificate-verify-failedstatemstatem_clntc1919",level:2},{value:"\u955C\u50CF",id:"\u955C\u50CF",level:2},{value:"grub netboot",id:"grub-netboot",level:2},{value:"8AB0D52247F0000:error:0A000086 routines:tls_post_process_server_certificate verify failed/statem/statem_clnt.c:1889:",id:"8ab0d52247f0000error0a000086-routinestls_post_process_server_certificate-verify-failedstatemstatem_clntc1889",level:2},{value:"apk Permission denied",id:"apk-permission-denied",level:2},{value:"apk-new",id:"apk-new",level:2},{value:"symbol not found",id:"symbol-not-found",level:2},{value:"ping: permission denied (are you root?)",id:"ping-permission-denied-are-you-root",level:2},{value:"mdev: unknown user/group &#39;root&#39; on line 54",id:"mdev-unknown-usergroup-root-on-line-54",level:2}];function a(e){let n={a:"a",code:"code",del:"del",em:"em",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u672F\u8BED",children:"\u672F\u8BED"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["HWE Hardware Enablement\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://askubuntu.com/questions/248914",children:"https://askubuntu.com/questions/248914"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"ECC - Error-correcting memory"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/EDAC_(Linux)",children:"EDAC"})," - Error Detection and Correction\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://bluesmoke.sourceforge.net/",children:"EDAC Project"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.kernel.org/doc/html/v4.19/driver-api/edac.html",children:"EDAC Device"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"why-alpinelinux",children:"Why AlpineLinux"}),"\n",(0,s.jsx)(n.p,{children:"small footprint, non-systemd, fast enough, good community, sane defaults."}),"\n",(0,s.jsx)(n.p,{children:"\u963F\u91CC\u4E91\u3001\u817E\u8BAF\u4E91\u3001\u7269\u7406\u670D\u52A1\u5668\u3001\u865A\u62DF\u673A\u3001\u5BB9\u5668\u90FD\u662F\u7528\u7684 alpinelinux"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u73AF\u5883\u90FD\u4E00\u6837\uFF0C\u4F7F\u7528\u5404\u65B9\u9762\u719F\u6089\uFF0C\u719F\u7EC3"}),"\n",(0,s.jsx)(n.li,{children:"\u5C0F/\u5FEB - \u963F\u91CC\u4E91 ECS \u53EA\u9700\u8981\u4E0A\u4F20\u4E00\u4E2A \u51E0\u5341 MB \u7684\u955C\u50CF\u5373\u53EF\uFF0C\u4ECE 0 \u5B89\u88C5\u53EA\u9700\u8981 3 \u5206\u949F"}),"\n",(0,s.jsx)(n.li,{children:"\u7B80\u5355 - \u53EF\u4EE5\u7531\u5185\u800C\u5916\u7684\u4E86\u89E3\u6240\u6709 alpine \u7EC6\u8282\uFF0C\u5BF9\u4E8E debian \u548C centos \u6211\u90FD\u505A\u4E0D\u5230\uFF0C\u56E0\u4E3A\u592A\u590D\u6742"}),"\n",(0,s.jsx)(n.li,{children:"\u8DDF\u4E0A\u65F6\u4EE3 - \u5185\u6838 \u4E00\u822C\u662F\u6700\u8FD1\u7684 lts\uFF0C\u80FD\u5FEB\u901F\u5229\u7528\u4E0A\u65B0\u7684\u5185\u6838\u7279\u6027\uFF0C\u6BD4\u5982\u73B0\u5728 linux \u5185\u6838\u652F\u6301 io_uring, ntfs"}),"\n",(0,s.jsx)(n.li,{children:"\u5FEB\u901F\u66F4\u65B0 - \u5B89\u5168\u95EE\u9898\u54CD\u5E94\u975E\u5E38\u5FEB - \u56E0\u4E3A\u4F7F\u7528\u9762\u975E\u5E38\u5E7F"}),"\n",(0,s.jsx)(n.li,{children:"\u884D\u751F\u4E1A\u52A1\u96C6\u6210\u7CFB\u7EDF - \u7CFB\u7EDF\u9884\u88C5\u4E00\u4E9B\u8F6F\u4EF6\u548C\u670D\u52A1 - \u4F8B\u5982: k3sos"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4E0D\u9002\u7528\u573A\u666F"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u673A\u5668\u5B66\u4E60 - ubuntu \u662F\u6700\u597D\u7684 - \u6700\u65B0 Linux \u5F00\u59CB\u8981\u96C6\u6210 Navdia \u9A71\u52A8\uFF0C\u60C5\u51B5\u4F1A\u6709\u6240\u597D\u8F6C"}),"\n",(0,s.jsxs)(n.li,{children:["\u5546\u52A1\u7528\u684C\u9762\u7CFB\u7EDF - \u9ED8\u8BA4 xface - ",(0,s.jsx)(n.em,{children:"\u751F\u6001"})," \u548C\u4F53\u9A8C\u6CA1\u6709 ubuntu \u597D"]}),"\n",(0,s.jsx)(n.li,{children:"\u5B9A\u5236\u5316\u5D4C\u5165\u5F0F\u8BBE\u5907 - alpine \u652F\u6301\u7684 arch \u8FDC\u6CA1\u6709 debian \u7684\u591A\uFF0C\u5982\u679C arch \u652F\u6301\u53EF\u4EE5\u8003\u8651 alpine"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5347\u7EA7\u6CE8\u610F\u4E8B\u9879",children:"\u5347\u7EA7\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u6CE8\u610F\u7528\u7684\u955C\u50CF\u662F\u5426\u540C\u6B65 - \u5426\u5219\u53EF\u80FD\u5BFC\u81F4\u5B89\u88C5\u5F02\u5E38\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"tuna \u76EE\u524D\u662F\u6700\u597D\u7684"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u907F\u514D\u8DE8\u7248\u672C\u5347\u7EA7"}),"\n",(0,s.jsx)(n.li,{children:"OpenSSL version mismatch"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"apk-opening-from-cache-no-such-file-or-directory",children:"apk opening from cache No such file or directory"}),"\n",(0,s.jsx)(n.h2,{id:"\u5386\u53F2",children:"\u5386\u53F2"}),"\n",(0,s.jsx)(n.p,{children:"alpine \u65E9\u671F\u601D\u60F3\u6765\u81EA\u4E8E FreeBSD"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"/etc/periodic"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://apk-tools.sourceforge.net",children:"https://apk-tools.sourceforge.net"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7B2C\u4E00\u7248 apk-tools \u57FA\u4E8E FreeBSD \u7684 pkg_add"}),"\n",(0,s.jsx)(n.li,{children:"2005-06-13 \u7B2C\u4E00\u6B21\u63D0\u4EA4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"gpu",children:"GPU"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Nvidia \u672A\u63D0\u4F9B musl \u7248\u672C\u7684\u9A71\u52A8"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://forums.developer.nvidia.com/t/219586",children:"https://forums.developer.nvidia.com/t/219586"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"apk-1-error",children:"apk 1 error"}),"\n",(0,s.jsxs)(n.p,{children:["apk \u64CD\u4F5C\u65F6\u663E\u793A\u6709\u9519\u8BEF, \u4F8B\u5982 ",(0,s.jsx)(n.code,{children:"1 error; 241 MiB in 67 packages"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u5373\u53EF\napk fix\n"})}),"\n",(0,s.jsx)(n.h2,{id:"ifupdown-\u5305\u4E0D\u4F1A\u542F\u52A8",children:"ifupdown \u5305\u4E0D\u4F1A\u542F\u52A8"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ifupdown \u6765\u81EA debian - \u867D\u7136\u4F9D\u8D56 iproute2 \u4F46\u662F\u4E0D\u4F1A\u4F7F\u7528"}),"\n",(0,s.jsx)(n.li,{children:"busybox \u7684 ifup \u4F1A\u8C03\u7528 ip li set eth0 up"}),"\n",(0,s.jsx)(n.li,{children:"3.10 \u662F 0.7.x \u7248\u672C\u7684\uFF0C\u4E0B\u4E00\u4E2A\u5927\u7248\u672C\u5E94\u8BE5\u53EF\u7528"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u6CA1\u6709\u63D0\u793A\u767B\u9646",children:"\u6CA1\u6709\u63D0\u793A\u767B\u9646"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53EF\u80FD\u662F tty \u4E0D\u5BF9"}),"\n",(0,s.jsxs)(n.li,{children:["\u5C1D\u8BD5\u4FEE\u6539 ",(0,s.jsx)(n.code,{children:"/etc/inittab"})," \u91CC\u7684 ",(0,s.jsx)(n.code,{children:"ttyS0::respawn:/sbin/getty -L ttyS0 115200 vt100"})]}),"\n",(0,s.jsx)(n.li,{children:"qemu aarch64 \u4F7F\u7528\u7684 ttyAMA0"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"login-incorrect---\u6CA1\u6709\u8BE2\u95EE\u5BC6\u7801",children:"Login incorrect - \u6CA1\u6709\u8BE2\u95EE\u5BC6\u7801"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53EF\u80FD root \u5173\u95ED\u4E86 serial console \u767B\u9646"}),"\n",(0,s.jsxs)(n.li,{children:["\u5141\u8BB8\u7684 tty ",(0,s.jsx)(n.code,{children:"/etc/securetty"})]}),"\n",(0,s.jsx)(n.li,{children:"\u5982\u679C\u4F7F\u7528\u7684 ttyAMA0 \u53EF\u4EE5\u6DFB\u52A0"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"process-sbingetty--l-ttyama0-115200-vt100-pid-1929-exited-scheduling-for-restart",children:"process '/sbin/getty -L ttyAMA0 115200 vt100' (pid 1929) exited. Scheduling for restart."}),"\n",(0,s.jsx)(n.h2,{id:"getty-console-tiocsctty-operation-not-permitted",children:"getty: console: TIOCSCTTY: Operation not permitted"}),"\n",(0,s.jsx)(n.h2,{id:"flavors",children:"\u5185\u6838\u98CE\u683C - kernel flavors - lts vs virt"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u533A\u522B\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5185\u6838\u7F16\u8BD1\u53C2\u6570"}),"\n",(0,s.jsx)(n.li,{children:"OS \u9ED8\u8BA4 module"}),"\n",(0,s.jsx)(n.li,{children:"\u56FA\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["virt\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u9002\u7528\u4E8E\u865A\u62DF\u5316\u73AF\u5883"}),"\n",(0,s.jsx)(n.li,{children:"\u9ED8\u8BA4\u5F00\u542F virtio"}),"\n",(0,s.jsx)(n.li,{children:"\u5F88\u5C11 linux-firmware - \u56E0\u6B64\u5F88\u5C0F"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["lts\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"LTS \u7248\u672C\u7684 Linux \u5185\u6838"}),"\n",(0,s.jsx)(n.li,{children:"\u6B63\u5E38\u786C\u4EF6\u73AF\u5883"}),"\n",(0,s.jsx)(n.li,{children:"\u5B8C\u6574 linux-firmware"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.del,{children:"hardened < 3.10"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652F\u6301\u67B6\u6784: x86_64, x86, armhf"}),"\n",(0,s.jsx)(n.li,{children:"\u542F\u7528\u4E86\u5185\u6838\u5B89\u5168\u6A21\u5757"}),"\n",(0,s.jsx)(n.li,{children:"grsecurity"}),"\n",(0,s.jsx)(n.li,{children:"pax"}),"\n",(0,s.jsxs)(n.li,{children:["\u5B89\u88C5\u5B8C\u6210\u540E 500m \u5DE6\u53F3, boot 20m \u5DE6\u53F3\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u56FA\u4EF6: 210m"}),"\n",(0,s.jsx)(n.li,{children:"\u5185\u6838\u6A21\u5757: 270m"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.del,{children:"virthardened < 3.10"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652F\u6301\u67B6\u6784: x86_64, x86"}),"\n",(0,s.jsx)(n.li,{children:"\u5B89\u5168\u548C hardened \u76F8\u540C"}),"\n",(0,s.jsx)(n.li,{children:"\u8C03\u6574\u5185\u6838\u53C2\u6570\u4EE5\u9002\u5E94\u865A\u62DF\u5316\u73AF\u5883"}),"\n",(0,s.jsx)(n.li,{children:"\u955C\u50CF\u66F4\u5C0F, \u66F4\u5FEB, \u6CA1\u6709\u9ED8\u8BA4\u9A71\u52A8\u548C\u56FA\u4EF6"}),"\n",(0,s.jsx)(n.li,{children:"\u5B89\u88C5\u5B8C\u6210\u540E 100m \u5DE6\u53F3, boot 13m \u5DE6\u53F3"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.del,{children:"vanilla < 3.10"})," -> lts\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652F\u6301\u67B6\u6784: x86_64, x86, s390x, ppc64le, ppc, armhf, aarch64"}),"\n",(0,s.jsx)(n.li,{children:"\u9002\u7528\u4E8E\u8C03\u8BD5"}),"\n",(0,s.jsx)(n.li,{children:"\u9002\u7528\u4E8E\u5176\u4ED6\u98CE\u683C\u4E0D\u652F\u6301\u7684\u67B6\u6784"}),"\n",(0,s.jsx)(n.li,{children:"\u65E0\u5B89\u5168\u90E8\u76F8\u5173\u7684\u8865\u4E01\u548C\u5185\u6838\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["standard - \u6253\u5305\u5305\u542B\u66F4\u591A\u5185\u5BB9\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7535\u6E90\u7BA1\u7406"}),"\n",(0,s.jsx)(n.li,{children:"CPU \u7BA1\u7406"}),"\n",(0,s.jsx)(n.li,{children:"PCI \u63A7\u5236\u5668"}),"\n",(0,s.jsx)(n.li,{children:"\u6027\u80FD\u76D1\u63A7"}),"\n",(0,s.jsx)(n.li,{children:"\u5185\u5B58"}),"\n",(0,s.jsxs)(n.li,{children:["\u79FB\u9664\u7279\u6B8A\u786C\u4EF6\u76F8\u5173\u914D\u7F6E\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u65E0\u7EBF"}),"\n",(0,s.jsx)(n.li,{children:"\u84DD\u7259"}),"\n",(0,s.jsx)(n.li,{children:"IRDA"}),"\n",(0,s.jsx)(n.li,{children:"NFC"}),"\n",(0,s.jsx)(n.li,{children:"SIP"}),"\n",(0,s.jsx)(n.li,{children:"I2C"}),"\n",(0,s.jsx)(n.li,{children:"\u952E\u76D8"}),"\n",(0,s.jsx)(n.li,{children:"\u9F20\u6807"}),"\n",(0,s.jsx)(n.li,{children:"\u89E6\u5C4F"}),"\n",(0,s.jsx)(n.li,{children:"\u535A\u901A SoC"}),"\n",(0,s.jsxs)(n.li,{children:["\u7269\u7406\u63A7\u5236\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7535\u6E90\u91CD\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u96F7\u7535"}),"\n",(0,s.jsx)(n.li,{children:"\u5B89\u5353"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u4E0D\u4F1A\u6784\u5EFA\u56FA\u4EF6"}),"\n",(0,s.jsx)(n.li,{children:"\u79FB\u9664\u786C\u4EF6\u76F8\u5173\u9A71\u52A8"}),"\n",(0,s.jsx)(n.li,{children:"\u79FB\u9664\u786C\u4EF6\u76F8\u5173\u517C\u5BB9\u8BBE\u7F6E"}),"\n",(0,s.jsx)(n.li,{children:"\u6DFB\u52A0 XEN"}),"\n",(0,s.jsx)(n.li,{children:"\u79FB\u9664 JFFS, UBIFS"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://git.alpinelinux.org/aports/tree/main/linux-lts",children:"https://git.alpinelinux.org/aports/tree/main/linux-lts"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.del,{children:(0,s.jsx)(n.a,{href:"https://git.alpinelinux.org/cgit/aports/tree/main/linux-hardened",children:"https://git.alpinelinux.org/cgit/aports/tree/main/linux-hardened"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.del,{children:(0,s.jsx)(n.a,{href:"https://git.alpinelinux.org/cgit/aports/tree/main/linux-vanilla",children:"https://git.alpinelinux.org/cgit/aports/tree/main/linux-vanilla"})})}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"rc-update-failed-to-add-service-loadkmap-to-runlevel-boot-no-such-file-or-directory",children:["rc-update: failed to add service ",(0,s.jsx)(n.code,{children:"loadkmap' to runlevel "}),"boot': No such file or directory"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u786E\u4FDD ",(0,s.jsx)(n.code,{children:"/etc/init.d/loadkmap"})," \u5B58\u5728"]}),"\n",(0,s.jsxs)(n.li,{children:["\u786E\u4FDD ",(0,s.jsx)(n.code,{children:"/etc/runlevels/boot/"})," \u76EE\u5F55\u5B58\u5728"]}),"\n",(0,s.jsx)(n.li,{children:"chroot \u6DFB\u52A0 boot runlevel \u6709\u95EE\u9898"}),"\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 ln - ",(0,s.jsx)(n.code,{children:"ln -s /etc/init.d/$svc /etc/runlevels/boot"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"virt-vs-standard",children:"virt vs standard"}),"\n",(0,s.jsx)(n.h2,{id:"microcode",children:"microcode"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"AlpineLinux \u7684 microcode \u5728 non-free \u4E0B\uFF0C\u9700\u8981\u81EA\u5DF1\u7F16\u8BD1"}),"\n",(0,s.jsxs)(n.li,{children:["\u7F16\u8BD1\u5B8C\u6210\u53EF\u76F4\u63A5\u62F7\u8D1D\u8FDB\u884C\u5B89\u88C5 ",(0,s.jsx)(n.code,{children:"apk add --allow-untrusted intel-ucode-20180312-r0.apk"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u7136\u540E\u9700\u8981\u4FEE\u6539 ",(0,s.jsx)(n.code,{children:"/boot/extlinux.conf"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5982\u679C\u60F3\u8981 extlinux \u80FD\u591F\u81EA\u52A8\u68C0\u6D4B\uFF0C\u53EF\u53C2\u8003 ",(0,s.jsx)(n.a,{href:"https://patchwork.alpinelinux.org/patch/3443/",children:"https://patchwork.alpinelinux.org/patch/3443/"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u8FD9\u662F\u6211\u76EE\u524D\u7684\u8C03\u6574\uFF0C\u6BD4\u63CF\u8FF0\u7684\u7B80\u5355\u4E9B"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'if [ -f "/boot/intel-ucode.img" ]; then\n  everbose "Found microcode for Intel CPUs: /boot/intel-ucode.img"\n  echo "  INITRD intel-ucode.img,initramfs-$tag" >> $conf.new\nelse\n  echo "  INITRD initramfs-$tag" >> $conf.new\nfi\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u7136\u540E ",(0,s.jsx)(n.code,{children:"update-extlinux"})," \u5373\u53EF"]}),"\n",(0,s.jsxs)(n.li,{children:["\u53EF\u518D\u6B21\u786E\u8BA4 ",(0,s.jsx)(n.code,{children:"/boot/extlinux.conf"})," \u4E2D\u7684 INITRD \u6709\u4E86 intel-ucode.img"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u542F\u52A8\u540E\u4F1A\u770B\u5230 microcode \u5347\u7EA7\u7684\u4FE1\u606F\ndmesg | grep microcode\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4F8B\u5982"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"microcode: sig=0x906e9, pf=0x2, reversion=0x84\nmicrocode: Microcode Update Driver: v2.2\n"})}),"\n",(0,s.jsx)(n.h2,{id:"mount-mounting-uuidx-x-x-x-on-sysroot-failed-no-such-file-or-directory",children:"mount: mounting UUID=x-x-x-x on /sysroot failed: No such file or directory"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u53EF\u80FD\u7CFB\u7EDF\u8FD8\u6CA1\u53D1\u73B0\u8BBE\u5907\u5C31\u5C31\u884C\u6302\u8F7D\u4E86\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u901A\u5E38\u51FA\u73B0\u5728\u4F7F\u7528 usb \u542F\u52A8\u7684\u60C5\u51B5"}),"\n",(0,s.jsx)(n.li,{children:"\u56E0\u4E3A rootdelay \u8FD9\u6837\u7684\u53C2\u6570\u5728 extlinux \u6302\u8F7D\u65F6\u8FD8\u672A\u751F\u6548\uFF0C\u53EF\u80FD\u7CFB\u7EDF\u542F\u52A8\u4F46\u8BBE\u5907\u8FD8\u672A\u53D1\u73B0"}),"\n",(0,s.jsxs)(n.li,{children:["\u5C1D\u8BD5\u4FEE\u6539\u542F\u52A8\u811A\u672C\uFF0C\u589E\u52A0 sleep 10\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/alpinelinux/mkinitfs/blob/master/initramfs-init.in#L474",children:"https://github.com/alpinelinux/mkinitfs/blob/master/initramfs-init.in#L474"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u7B2C\u4E00\u6B21\u51FA\u73B0\u65F6\u5019\u53EF\u4EE5\u8003\u8651\u624B\u52A8\u6302\u8F7D"}),"\n",(0,s.jsx)(n.li,{children:"\u4E5F\u53EF\u4EE5\u8003\u8651\u591A\u91CD\u542F\u51E0\u6B21\uFF0C\u6709\u4E00\u5B9A\u51E0\u7387\u8FDB\u5165\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mount UUID=x-x-x-x /sysroot\n# \u6302\u8F7D\u5B8C\u6210\u540E\u9000\u51FA\u4F1A\u7EE7\u7EED\u542F\u52A8\n# exit\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u53EF\u80FD\u542F\u52A8\u5206\u533A\u574F\u4E86 - \u53EF\u4EE5\u76F4\u63A5\u4ECE\u73B0\u6709\u7684\u7CFB\u7EDF\u590D\u5236 boot \u5185\u5BB9\u5230\u542F\u52A8\u5206\u533A\u3002\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u590D\u5236\u540E\u5207\u8BB0\u4FEE\u6539 extlinux.conf \u4E2D\u7684 UUID \u5582\u6B63\u786E\u7684 rootfs\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u590D\u5236\u540E\u8BB0\u5F97\u68C0\u67E5 kernel \u7248\u672C\uFF0C\u786E\u4FDD\u88AB\u590D\u5236\u7684\u5B58\u50A8\u4E0A /lib/modules \u4E0B\u6709\u5BF9\u5E94 kernel \u7248\u672C\u7684\u6A21\u5757\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"sh-cant-access-tty-job-control-turned-off",children:"sh: can't access tty; job control turned off"}),"\n",(0,s.jsx)(n.p,{children:"\u4E00\u822C\u4F1A\u4F34\u968F\u5206\u533A\u635F\u574F\u51FA\u73B0\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"initramfs-emergency-recovery-shell-launched-type-exit-to-continue-boot",children:"initramfs emergency recovery shell launched. Type 'exit' to continue boot"}),"\n",(0,s.jsx)(n.p,{children:"\u5206\u533A\u635F\u574F\u540E\u4F1A\u8FDB\u5165\u6025\u6551\u6A21\u5F0F\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"devnullutmp-not-a-directory",children:"/dev/null/utmp: Not a directory"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://bugs.alpinelinux.org/issues/3282",children:"#3282"})," - users: /dev/null/utmp: Not a directory\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6267\u884C who, last, screen \u65F6"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"3.16 \u5305\u542B utmp"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"apk add utmps\nservice utmpd start\nrc-update add utmpd boot\n"})}),"\n",(0,s.jsx)(n.h2,{id:"password-chpasswd-pam-authentication-failure",children:"Password: chpasswd: PAM: Authentication failure"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["3.6+ BUG ",(0,s.jsx)(n.a,{href:"https://gitlab.alpinelinux.org/alpine/aports/issues/10209",children:"https://gitlab.alpinelinux.org/alpine/aports/issues/10209"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"dmesg-read-kernel-buffer-failed-operation-not-permitted",children:"dmesg: read kernel buffer failed: Operation not permitted"}),"\n",(0,s.jsxs)(n.p,{children:["3.14 \u5185\u6838\u8BBE\u7F6E\u4E86 ",(0,s.jsx)(n.code,{children:"CONFIG_SECURITY_DMESG_RESTRICT=y"})]}),"\n",(0,s.jsx)(n.p,{children:"\u53EF\u4EE5\u5173\u95ED"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo sysctl kernel.dmesg_restrict=0\n"})}),"\n",(0,s.jsx)(n.h2,{id:"dmesg-\u4FDD\u7559\u4E0A\u6B21",children:"dmesg \u4FDD\u7559\u4E0A\u6B21"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["/etc/init.d/bootmisc\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"previous_dmesg=yes \u65F6\u4F1A mv /var/log/dmesg /var/log/dmesg.old"}),"\n",(0,s.jsx)(n.li,{children:"\u5728 /etc/conf.d/bootmisc \u914D\u7F6E"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"echo previous_dmesg=yes | tee -a /etc/conf.d/bootmisc\n"})}),"\n",(0,s.jsx)(n.h2,{id:"mirrors",children:"mirrors"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://mirrors.alpinelinux.org",children:"https://mirrors.alpinelinux.org"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u907F\u514D-udhcp-\u4FEE\u6539-dns",children:"\u907F\u514D udhcp \u4FEE\u6539 DNS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir -p /etc/udhcpc\necho 'RESOLV_CONF=no' > /etc/udhcpc/udhcpc.conf\n"})}),"\n",(0,s.jsx)(n.h2,{id:"alpine-musl-performance",children:"alpine musl performance"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"musl malloc \u6027\u80FD\u5F31\u4E8E glibc malloc"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://lists.alpinelinux.org/~alpine/users/%3C6df8863e77b970b466dbfc9a3a5c2bcec3199f48.camel%40aquilenet.fr%3E#%3C4dcedd5d-e2ce-e8e-e231-874997bbe9f6@dereferenced.org%3E",children:"maillist answer"})}),"\n",(0,s.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://superuser.com/a/1234279/242730",children:"https://superuser.com/a/1234279/242730"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.linkedin.com/pulse/testing-alternative-c-memory-allocators-pt-2-musl-mystery-gomes/",children:"https://www.linkedin.com/pulse/testing-alternative-c-memory-allocators-pt-2-musl-mystery-gomes/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"alpine-glibc-compat",children:"alpine glibc compat"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"libc6-compat gcompat"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"apk-\u4ECE-edge-\u4ED3\u5E93\u5B89\u88C5",children:"apk \u4ECE edge \u4ED3\u5E93\u5B89\u88C5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"apk add tailscale -X https://mirrors.sjtug.sjtu.edu.cn/alpine/edge/community\n"})}),"\n",(0,s.jsx)(n.h2,{id:"ca-certificatescrt-does-not-contain-exactly-one-certificate-or-crl-skipping",children:"ca-certificates.crt does not contain exactly one certificate or CRL: skipping"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo update-ca-certificates # \u66F4\u65B0 CA \u65F6\u51FA\u73B0\n\nmkdir /usr/local/share/ca-certificates/extra\n"})}),"\n",(0,s.jsx)(n.h2,{id:"ssl-routinestls_process_server_certificate-verify-failedstatemstatem_clntc1919",children:"SSL routines:tls_process_server_certificate:certificate verify failed:ssl/statem/statem_clnt.c:1919"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 1. \u786E\u8BA4\u7CFB\u7EDF\u65F6\u95F4\ndate\nchronyc tracking    # \u67E5\u770B\u5F53\u524D\u72B6\u6001\nchronyc sources     # \u67E5\u770B\u540C\u6B65\u6E90\nchronyc -a makestep # \u4E3B\u52A8\u540C\u6B65\n\n# 2.\nopenssl s_client -connect wener.me:443 # \u6D4B\u8BD5\u8BC1\u4E66\u662F\u5426\u6B63\u786E\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u955C\u50CF",children:"\u955C\u50CF"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"echo \"https://mirrors.tuna.tsinghua.edu.cn/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/main\nhttps://mirrors.tuna.tsinghua.edu.cn/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/community\" > /etc/apk/repositories\n"})}),"\n",(0,s.jsx)(n.h2,{id:"grub-netboot",children:"grub netboot"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"lts"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -k -f -# https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/releases/x86_64/netboot/vmlinuz-lts -o /boot/vmlinuz-netboot\ncurl -k -f -# https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/releases/x86_64/netboot/initramfs-lts -o /boot/initramfs-netboot\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="/etc/grub.d/40_netboot"',children:'#!/bin/sh\nexec tail -n +3 \\$0\n\nmenuentry \'Alpine\' {\n    linux /boot/vmlinuz-netboot alpine_repo="https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/main" modloop="https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/releases/x86_64/netboot/modloop-lts" modules="loop,squashfs" initrd="initramfs-netboot" console="tty0" ssh_key="https://github.com/wenerme.keys"\n    initrd /boot/initramfs-netboot\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"virt"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -k -f -# https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/releases/x86_64/netboot/vmlinuz-virt -o /boot/vmlinuz-netboot\ncurl -k -f -# https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/releases/x86_64/netboot/initramfs-virt -o /boot/initramfs-netboot\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="/etc/grub.d/40_netboot"',children:'#!/bin/sh\nexec tail -n +3 \\$0\n\nmenuentry \'Alpine\' {\n    linux /boot/vmlinuz-netboot alpine_repo="https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/main" modloop="https://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/releases/x86_64/netboot/modloop-virt" modules="loop,squashfs" initrd="initramfs-netboot" console="tty0" ssh_key="https://github.com/wenerme.keys"\n    initrd /boot/initramfs-netboot\n}\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:['\u6CE8\u610F\u4FEE\u6539 ssh_key="',(0,s.jsx)(n.a,{href:"https://github.com/wenerme.keys",children:"https://github.com/wenerme.keys"}),'"']}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://wiki.alpinelinux.org/wiki/PXE_boot",children:"https://wiki.alpinelinux.org/wiki/PXE_boot"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://wiki.alpinelinux.org/wiki/Netboot_Alpine_Linux_using_iPXE",children:"https://wiki.alpinelinux.org/wiki/Netboot_Alpine_Linux_using_iPXE"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/52fancy/NetInstallAlpine/blob/main/alpine.sh",children:"https://github.com/52fancy/NetInstallAlpine/blob/main/alpine.sh"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"8ab0d52247f0000error0a000086-routinestls_post_process_server_certificate-verify-failedstatemstatem_clntc1889",children:"8AB0D52247F0000:error:0A000086:SSL routines:tls_post_process_server_certificate:certificate verify failed:ssl/statem/statem_clnt.c:1889:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u786E\u4FDD\u65F6\u95F4\u6B63\u786E\nsetup-ntp chrony\n\n# \u786E\u4FDD\u6709 ca\napk add \\\n  --no-cache \\\n  --repository http://mirrors.tuna.tsinghua.edu.cn/alpine/latest-stable/main/ \\\n  ca-certificates\n\n# \u80FD\u901A\nopenssl s_client -connect google.com:443\n"})}),"\n",(0,s.jsx)(n.h2,{id:"apk-permission-denied",children:"apk Permission denied"}),"\n",(0,s.jsx)(n.p,{children:"\u68C0\u67E5\u7F51\u7EDC\uFF0C\u901A\u5E38\u662F \u4E0B\u8F7D\u5931\u8D25"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"apk update\n"})}),"\n",(0,s.jsx)(n.h2,{id:"apk-new",children:"apk-new"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"apk \u5347\u7EA7\u5982\u679C\u68C0\u6D4B\u5230\u672C\u5730\u4FEE\u6539\uFF0C\u5219\u4F1A\u521B\u5EFA .apk-new \u6587\u4EF6"}),"\n",(0,s.jsx)(n.li,{children:"--clean-protected \u4E0D\u521B\u5EFA .apk-new \u6587\u4EF6"}),"\n",(0,s.jsx)(n.li,{children:"\u6709\u65F6\u5019\u53EF\u80FD\u662F mod \u53D8\u4E86"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"find /etc -name '*.apk-new'\n\n# \u8FD9\u4E9B\u53EF\u4EE5\u8003\u8651\u76F4\u63A5\u6E05\u7406\nrm /etc/{hosts,hostname,rc.conf,passwd,shadow,group,sudoers,fstab,sysctl.conf,profile}.apk-new\n\n# \u8FD9\u4E9B\u53EF\u4EE5\u89C2\u5BDF\u4E0B\uFF0C\u770B\u662F\u5426\u4FDD\u7559\u6216\u8005\u53C2\u8003\u4E0B\u505A\u8C03\u6574\ndiff /etc/inittab{,.apk-new}\n\n# rebase\nmv /etc/conf.d/k3s{.apk-new,}\n\n# \u603B\u662F\u4FDD\u7559\u8FD9\u4E9B\nmv /etc/os-release{.apk-new,}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'for f in /etc/init.d/*.apk-new; do\n  echo "=== $f ==="\n  diff "${f%.apk-new}" "$f"\ndone\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u9010\u4E2A\u6587\u4EF6\u5206\u6790\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"pidfile \u53D8\u5316"}),"\n",(0,s.jsx)(n.li,{children:"\u53C2\u6570\u53D8\u5316"}),"\n",(0,s.jsx)(n.li,{children:"\u7528\u6237\u53D8\u5316"}),"\n",(0,s.jsx)(n.li,{children:"license \u5934\u53D8\u5316"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"symbol-not-found",children:"symbol not found"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u68C0\u67E5\u5305\u662F\u5426\u6709\u4FEE\u6539\u60C5\u51B5\napk.static audit --system\n\n# \u5B8C\u6574\u68C0\u67E5\u662F\u4E0D\u662F\u6709\u9057\u7559\u7684 lib \u5BFC\u81F4\u7684\napk.static audit --full --check-permissions --ignore-busybox-symlinks > audit.log\n\n# \u68C0\u67E5\u4E0D\u8981\u662F\u56E0\u4E3A\u591A\u51FA\u6765\u7684  lib \u5BFC\u81F4\u7684\ngrep '^A lib'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"ping-permission-denied-are-you-root",children:"ping: permission denied (are you root?)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u63A8\u8350\napk add iputils\nrealpath $(which ping) # /bin/ping\nping 1.1.1.1\n\n# \u539F\u56E0\nrealpath $(which ping) # /bin/busybox\n# ping \u9700\u8981 suid bit\n# chmod u+s /bin/ping # \u4E0D\u5EFA\u8BAE\u7ED9 busybox \u592A\u9AD8\u7684\u6743\u9650\n# setcap cap_net_raw+p $(which ping) # \u53EF\u4EE5\u4F7F\u7528 cap \u65B9\u5F0F\ngetcap $(which ping)\n\nstat /bin/busybox # 0755\nstat /bin/ping    # 4755 - with suid\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/iputils/iputils",children:"https://github.com/iputils/iputils"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://gitlab.alpinelinux.org/alpine/aports/-/tree/master/main/iputils",children:"https://gitlab.alpinelinux.org/alpine/aports/-/tree/master/main/iputils"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"mdev-unknown-usergroup-root-on-line-54",children:"mdev: unknown user/group 'root:uucp' on line 54"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"getent group uucp\nid uucp\n# ttyS[0-9]*	root:uucp 0660\ncat /etc/mdev.conf | grep uucp\n\n# \u5982\u679C\u6CA1\u4FEE\u6539\u8FC7 mdef.conf, \u76F4\u63A5\u4F7F\u7528\u65B0\u7248\u672C\u8986\u76D6\nmv /etc/mdev.conf{.apk-new,}\n# \u91CD\u65B0\u5236\u4F5C initramfs\nmkinitfs\n"})})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},917776:function(e,n,i){i.d(n,{R:()=>t,x:()=>c});var l=i(7378);let s={},r=l.createContext(s);function t(e){let n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);