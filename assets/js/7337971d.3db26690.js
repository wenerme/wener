"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["745681"],{474162:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>t,toc:()=>a,default:()=>m,metadata:()=>s,assets:()=>d,contentTitle:()=>l});var s=JSON.parse('{"id":"web/editor/prosemirror/README","title":"ProseMirror","description":"- prosemirror","source":"@site/../notes/web/editor/prosemirror/README.md","sourceDirName":"web/editor/prosemirror","slug":"/web/editor/prosemirror/","permalink":"/notes/web/editor/prosemirror/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/editor/prosemirror/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1716536381000,"frontMatter":{"title":"ProseMirror"},"sidebar":"docs","previous":{"title":"plate","permalink":"/notes/web/editor/plate"},"next":{"title":"prosemirror-inside","permalink":"/notes/web/editor/prosemirror/inside"}}'),i=n(486106),o=n(917776);let t={title:"ProseMirror"},l="ProseMirror",d={},a=[];function c(e){let r={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"prosemirror",children:"ProseMirror"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://prosemirror.net/",children:"prosemirror"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"low-level rte toolkit"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\u7279\u6027\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"\u7ED3\u6784\u5316\u7684\u6A21\u578B\u6811"}),"\n",(0,i.jsx)(r.li,{children:"\u6A21\u578B\u4E0D\u53EF\u53D8"}),"\n",(0,i.jsx)(r.li,{children:"\u652F\u6301\u534F\u4F5C\u7F16\u8F91"}),"\n",(0,i.jsxs)(r.li,{children:["\u6A21\u578B\u53D7 schema \u9650\u5236 - \u5B9E\u73B0\u81EA\u5B9A\u4E49\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"\u89E3\u6790\u81EA\u52A8\u5316 - \u4F46\u53EF\u80FD\u4E22\u5F03 schema \u4E4B\u5916\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:"\u6A21\u578B\u72B6\u6001\u53D8\u5316\u7C7B\u4F3C\u4E8E redux"}),"\n",(0,i.jsx)(r.li,{children:"\u6574\u4F53\u6982\u5FF5\u7C7B\u4F3C\u4E8E react+redux"}),"\n",(0,i.jsx)(r.li,{children:"\u72B6\u6001 UI \u72EC\u7ACB"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://prosemirror.net/docs/ref/",children:"Reference manual"})}),"\n"]}),"\n",(0,i.jsx)(r.admonition,{type:"tip",children:(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"\u5355\u7EAF\u5B66\u4E60 ProseMirror \u7684\u8BBE\u8BA1\u4E5F\u975E\u5E38\u6709\u610F\u4E49"}),"\n"]})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# \u6838\u5FC3\u6A21\u5757\nnpm add prosemirror-{state,view,model,schema-basic,schema-list}\nnpm add --dev @types/prosemirror-{state,view,model,schema-basic,schema-list}\n# \u6269\u5C55\u6A21\u5757\nnpm add prosemirror-{keymap,history,commands,dropcursor,gapcursor,menu,inputrules}\nnpm add --dev @types/prosemirror-{keymap,history,commands,dropcursor,gapcursor,menu,inputrules}\n"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-ts",children:"import { schema } from 'prosemirror-schema-basic';\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { DOMParser } from 'prosemirror-model';\n\nimport { baseKeymap } from 'prosemirror-commands';\nimport { undo, redo, history } from 'prosemirror-history';\nimport { keymap } from 'prosemirror-keymap';\n\nlet content = document.getElementById('content');\nlet state = EditorState.create({\n  // \u521D\u59CB\u72B6\u6001\n  doc: DOMParser.fromSchema(schema).parse(content),\n  schema,\n  plugins: [history(), keymap({ 'Mod-z': undo, 'Mod-y': redo }), keymap(baseKeymap)],\n});\nlet view = new EditorView(document.body, { state });\n\n// \u57FA\u4E8E schema \u53EF\u76F4\u63A5\u6784\u5EFA doc\nlet doc = schema.node('doc', null, [\n  schema.node('paragraph', null, [schema.text('One.')]),\n  schema.node('horizontal_rule'),\n  schema.node('paragraph', null, [schema.text('Two!')]),\n]);\n\n// Schema \u5305\u542B nodes, marks\nnew Schema({\n  nodes: {\n    doc: { content: 'block+' },\n    paragraph: {\n      group: 'block',\n      content: 'text*',\n      marks: '_',\n\n      toDOM(node) {\n        return ['p', 0];\n      },\n    },\n    heading: { group: 'block', content: 'text*', marks: '', attrs: { level: { default: 1 } } },\n    text: { inline: true },\n  },\n  marks: {\n    strong: {},\n    em: {\n      parseDOM: [\n        { tag: 'em' }, // Match <em> nodes\n        { tag: 'i' }, // and <i> nodes\n        { style: 'font-style=italic' }, // and inline 'font-style: italic'\n      ],\n    },\n  },\n});\n"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["content \u8BED\u6CD5 - \u7C7B\u4F3C\u4E8E PEG \u8BED\u6CD5\u3001RegExp \u8BED\u6CD5\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"paragraph"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"paragraph+"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"paragraph*"})}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"paragraph{2}"}),",",(0,i.jsx)(r.code,{children:"paragraph{2,}"}),",",(0,i.jsx)(r.code,{children:"paragraph{2,3}"})]}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"heading paragraph+"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"(paragraph | blockquote)+"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["marks\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"_"})," \u8868\u793A\u4EFB\u610F"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:"group \u5B9A\u4E49\u7C7B\u578B\u7EC4\u5408"}),"\n",(0,i.jsxs)(r.li,{children:["Plugin\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["props\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"decorations"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:"state"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:"EditorView - typing, clicking, copying, pasting, dragging"}),"\n"]})]})}function m(e={}){let{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},917776:function(e,r,n){n.d(r,{R:()=>t,x:()=>l});var s=n(7378);let i={},o=s.createContext(i);function t(e){let r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);