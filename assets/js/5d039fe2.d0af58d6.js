"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["532944"],{663529:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>i,toc:()=>h,default:()=>a,metadata:()=>d,assets:()=>c,contentTitle:()=>l});var d=JSON.parse('{"id":"ai/agent/nanobot","title":"NanoBot","description":"- HKUDS/nanobot","source":"@site/../notes/ai/agent/nanobot.md","sourceDirName":"ai/agent","slug":"/ai/agent/nanobot","permalink":"/notes/ai/agent/nanobot","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/ai/agent/nanobot.md","tags":[{"inline":true,"label":"AI","permalink":"/notes/tags/ai"},{"inline":true,"label":"Agent","permalink":"/notes/tags/agent"},{"inline":true,"label":"Python","permalink":"/notes/tags/python"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1772429368000,"frontMatter":{"title":"NanoBot","tags":["AI","Agent","Python"]},"sidebar":"docs","previous":{"title":"serena","permalink":"/notes/ai/agent/mcp/serena"},"next":{"title":"OpenClaw \u9879\u76EE\u5206\u6790","permalink":"/notes/ai/agent/openclaw"}}'),r=s(486106),t=s(917776);let i={title:"NanoBot",tags:["AI","Agent","Python"]},l="NanoBot",c={},h=[{value:"\u67B6\u6784",id:"\u67B6\u6784",level:2},{value:"\u6838\u5FC3\u6A21\u5757",id:"\u6838\u5FC3\u6A21\u5757",level:3},{value:"\u5DE5\u5177",id:"\u5DE5\u5177",level:3},{value:"Provider \u6CE8\u518C (ProviderSpec)",id:"provider-\u6CE8\u518C-providerspec",level:3},{value:"\u4E0E OpenClaw \u5BF9\u6BD4",id:"\u4E0E-openclaw-\u5BF9\u6BD4",level:2}];function o(n){let e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"nanobot",children:"NanoBot"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/HKUDS/nanobot",children:"HKUDS/nanobot"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"MIT, Python"}),"\n",(0,r.jsx)(e.li,{children:"\u8D85\u8F7B\u91CF\u4E2A\u4EBA AI \u52A9\u624B\u6846\u67B6\uFF0C\u53D7 OpenClaw \u542F\u53D1"}),"\n",(0,r.jsx)(e.li,{children:"\u6838\u5FC3\u4EE3\u7801 ~3500 \u884C\uFF08OpenClaw \u7684 1%\uFF09"}),"\n",(0,r.jsx)(e.li,{children:"\u652F\u6301 9 \u6E20\u9053: Telegram, Discord, WhatsApp, Feishu, DingTalk, Slack, Email, QQ, Mochat"}),"\n",(0,r.jsx)(e.li,{children:"LiteLLM \u7EDF\u4E00 12+ LLM Provider\uFF0C\u652F\u6301 vLLM \u672C\u5730\u6A21\u578B"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u67B6\u6784",children:"\u67B6\u6784"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Channel (Telegram/Discord/...) \u2500\u2500\u2192 MessageBus (inbound queue)\n                                        \u2502\n                                        \u25BC\n                                    AgentLoop\n                                    \u2502  1. get_or_create session\n                                    \u2502  2. build_messages (system + history + user)\n                                    \u2502  3. provider.chat (LiteLLM)\n                                    \u2502  4. execute tool_calls (max 20 \u8F6E)\n                                    \u2502  5. save session\n                                    \u2502\n                                    \u25BC\n                               MessageBus (outbound queue)\n                                    \u2502\n                                    \u25BC\n                               ChannelManager._dispatch_outbound()\n                                    \u2502 \u6309 msg.channel \u8DEF\u7531\n                                    \u25BC\n                               Channel.send() \u2500\u2500\u2192 \u7528\u6237\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u6838\u5FC3\u6A21\u5757",children:"\u6838\u5FC3\u6A21\u5757"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u6A21\u5757"}),(0,r.jsx)(e.th,{children:"\u4F5C\u7528"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"agent/loop.py"})}),(0,r.jsx)(e.td,{children:"AgentLoop\uFF1A\u6D88\u606F\u5904\u7406\u5F15\u64CE\uFF0CLLM\u8C03\u7528+\u5DE5\u5177\u6267\u884C\u5FAA\u73AF"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"agent/context.py"})}),(0,r.jsx)(e.td,{children:"ContextBuilder\uFF1A\u7EC4\u88C5 system prompt\uFF08identity + bootstrap + memory + skills\uFF09"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"agent/memory.py"})}),(0,r.jsx)(e.td,{children:"MemoryStore\uFF1Aworkspace \u4E0B MEMORY.md \u6301\u4E45\u5316\u8BB0\u5FC6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"agent/skills.py"})}),(0,r.jsx)(e.td,{children:"SkillsLoader\uFF1A\u6280\u80FD\u52A0\u8F7D\uFF08always-load + on-demand\uFF09"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"agent/subagent.py"})}),(0,r.jsx)(e.td,{children:"SubagentManager\uFF1A\u540E\u53F0\u5B50\u4EFB\u52A1"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"bus/queue.py"})}),(0,r.jsx)(e.td,{children:"MessageBus\uFF1A\u53CC asyncio.Queue \u89E3\u8026 channel\u2194agent"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"bus/events.py"})}),(0,r.jsx)(e.td,{children:"InboundMessage / OutboundMessage \u6570\u636E\u7C7B"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"channels/base.py"})}),(0,r.jsx)(e.td,{children:"BaseChannel ABC\uFF1Astart/stop/send + allowFrom \u6743\u9650"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"channels/manager.py"})}),(0,r.jsx)(e.td,{children:"ChannelManager\uFF1A\u521D\u59CB\u5316+\u542F\u52A8+\u8DEF\u7531\u6240\u6709\u6E20\u9053"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"providers/registry.py"})}),(0,r.jsx)(e.td,{children:"ProviderSpec \u6CE8\u518C\u8868\uFF1A12 \u4E2A provider \u5143\u6570\u636E"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"providers/litellm_provider.py"})}),(0,r.jsx)(e.td,{children:"LiteLLM \u5C01\u88C5\uFF1A\u7EDF\u4E00 LLM \u8C03\u7528\u63A5\u53E3"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"session/manager.py"})}),(0,r.jsx)(e.td,{children:"SessionManager\uFF1AJSONL \u6587\u4EF6\u6301\u4E45\u5316\u4F1A\u8BDD"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"config/schema.py"})}),(0,r.jsx)(e.td,{children:"Pydantic Config\uFF1AJSON \u914D\u7F6E\u5B9A\u4E49"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"\u5DE5\u5177",children:"\u5DE5\u5177"}),"\n",(0,r.jsx)(e.p,{children:"read_file, write_file, edit_file, list_dir, exec (shell), web_search (Brave), web_fetch, message, spawn (\u5B50agent), cron"}),"\n",(0,r.jsx)(e.h3,{id:"provider-\u6CE8\u518C-providerspec",children:"Provider \u6CE8\u518C (ProviderSpec)"}),"\n",(0,r.jsxs)(e.p,{children:["\u6DFB\u52A0 provider \u53EA\u9700 2 \u6B65\uFF1A\u5728 ",(0,r.jsx)(e.code,{children:"registry.py"})," \u52A0 ",(0,r.jsx)(e.code,{children:"ProviderSpec"})," + \u5728 ",(0,r.jsx)(e.code,{children:"schema.py"})," \u52A0\u914D\u7F6E\u5B57\u6BB5\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u652F\u6301\uFF1AOpenRouter, AiHubMix (gateway), Anthropic, OpenAI, DeepSeek, Gemini, Zhipu, DashScope, Moonshot, MiniMax, vLLM, Groq"}),"\n",(0,r.jsx)(e.h2,{id:"\u4E0E-openclaw-\u5BF9\u6BD4",children:"\u4E0E OpenClaw \u5BF9\u6BD4"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u7EF4\u5EA6"}),(0,r.jsx)(e.th,{children:"NanoBot"}),(0,r.jsx)(e.th,{children:"OpenClaw"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u8BED\u8A00"}),(0,r.jsx)(e.td,{children:"Python"}),(0,r.jsx)(e.td,{children:"TypeScript (ESM)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u4EE3\u7801\u91CF"}),(0,r.jsx)(e.td,{children:"~3,500 \u884C"}),(0,r.jsx)(e.td,{children:"~430,000 \u884C"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u5B9A\u4F4D"}),(0,r.jsx)(e.td,{children:"\u8F7B\u91CF\u7814\u7A76/\u4E2A\u4EBA\u52A9\u624B"}),(0,r.jsx)(e.td,{children:"\u751F\u4EA7\u7EA7\u591A\u6E20\u9053 AI \u7F51\u5173"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u6E20\u9053\u6570"}),(0,r.jsx)(e.td,{children:"9 (\u786C\u7F16\u7801)"}),(0,r.jsx)(e.td,{children:"8 \u5185\u7F6E + 35 \u6269\u5C55\u63D2\u4EF6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u6E20\u9053\u67B6\u6784"}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"BaseChannel"})," ABC + ",(0,r.jsx)(e.code,{children:"ChannelManager"})," \u786C\u7F16\u7801 if/else"]}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"ChannelPlugin"})," adapter \u6A21\u5F0F + \u72EC\u7ACB workspace packages"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u6D88\u606F\u603B\u7EBF"}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"MessageBus"}),"\uFF1A\u53CC asyncio.Queue"]}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"dispatchInboundMessage"})," \u2192 ",(0,r.jsx)(e.code,{children:"getReplyFromConfig"})," \u7BA1\u9053"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Provider"}),(0,r.jsxs)(e.td,{children:["LiteLLM + ",(0,r.jsx)(e.code,{children:"ProviderSpec"})," \u6CE8\u518C\u8868"]}),(0,r.jsx)(e.td,{children:"\u81EA\u5EFA provider \u62BD\u8C61 + \u591A\u7C92\u5EA6 model \u89E3\u6790"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Session"}),(0,r.jsxs)(e.td,{children:["JSONL \u6587\u4EF6 (",(0,r.jsx)(e.code,{children:"channel:chat_id"}),")"]}),(0,r.jsx)(e.td,{children:"\u591A\u5C42 session store + 6 \u7EA7\u8DEF\u7531\u7ED1\u5B9A"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u8DEF\u7531"}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"channel:chat_id"})," \u7B80\u5355 key"]}),(0,r.jsx)(e.td,{children:"peer\u2192guild\u2192team\u2192account\u2192channel\u2192default 6 \u7EA7"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u6D41\u5F0F\u56DE\u590D"}),(0,r.jsx)(e.td,{children:"\u274C \u65E0"}),(0,r.jsx)(e.td,{children:"\u2705 block streaming + thinking tag \u8FC7\u6EE4"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"API \u517C\u5BB9"}),(0,r.jsx)(e.td,{children:"\u274C \u65E0 HTTP API"}),(0,r.jsxs)(e.td,{children:["\u2705 OpenAI \u517C\u5BB9 ",(0,r.jsx)(e.code,{children:"/v1/chat/completions"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u914D\u7F6E"}),(0,r.jsx)(e.td,{children:"JSON + Pydantic"}),(0,r.jsx)(e.td,{children:"JSON5 + Zod + \u70ED\u91CD\u8F7D + \u9057\u7559\u8FC1\u79FB"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u5BA2\u6237\u7AEF"}),(0,r.jsx)(e.td,{children:"CLI only"}),(0,r.jsx)(e.td,{children:"CLI + WebSocket + Control UI + macOS/iOS/Android"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u5B50\u4EFB\u52A1"}),(0,r.jsx)(e.td,{children:"spawn tool + SubagentManager"}),(0,r.jsx)(e.td,{children:"\u5185\u7F6E subagent \u6CE8\u518C\u8868"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u5B9A\u65F6\u4EFB\u52A1"}),(0,r.jsx)(e.td,{children:"cron tool + CronService"}),(0,r.jsx)(e.td,{children:"\u5185\u7F6E cron service"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Skills"}),(0,r.jsx)(e.td,{children:"workspace SKILL.md\uFF08always-load + on-demand\uFF09"}),(0,r.jsx)(e.td,{children:"skills/ \u76EE\u5F55 + remote skills"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Memory"}),(0,r.jsx)(e.td,{children:"MEMORY.md \u6587\u4EF6"}),(0,r.jsx)(e.td,{children:"\u591A\u79CD session store"})]})]})]})]})}function a(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},917776:function(n,e,s){s.d(e,{R:()=>i,x:()=>l});var d=s(7378);let r={},t=d.createContext(r);function i(n){let e=d.useContext(t);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),d.createElement(t.Provider,{value:e},n.children)}}}]);