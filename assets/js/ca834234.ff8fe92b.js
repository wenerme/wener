"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["11628"],{60192:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>i,toc:()=>h,default:()=>j,metadata:()=>d,assets:()=>c,contentTitle:()=>l});var d=JSON.parse('{"id":"service/forge/zentao","title":"zentao","description":"- LDAP \u9700\u8981 \u4F01\u4E1A\u7248\u3001\u65D7\u8230\u7248","source":"@site/../notes/service/forge/zentao.md","sourceDirName":"service/forge","slug":"/service/forge/zentao","permalink":"/notes/service/forge/zentao","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/forge/zentao.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1705291463000,"frontMatter":{"title":"zentao"},"sidebar":"docs","previous":{"title":"Server","permalink":"/notes/service/forge/woodpecker/server"},"next":{"title":"Forum Awesome","permalink":"/notes/service/forum/awesome"}}'),t=s(86106),r=s(17776);let i={title:"zentao"},l="zentao",c={},h=[{value:"Docker",id:"docker",level:2},{value:"\u4FEE\u6539 AI \u53C2\u6570",id:"\u4FEE\u6539-ai-\u53C2\u6570",level:2},{value:"\u8FD8\u6CA1\u6709\u4FDD\u5B58\u914D\u7F6E\u6587\u4EF6",id:"\u8FD8\u6CA1\u6709\u4FDD\u5B58\u914D\u7F6E\u6587\u4EF6",level:2},{value:"Admin",id:"admin",level:2},{value:"18.6",id:"186",level:2}];function x(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"zentao",children:"zentao"})}),"\n",(0,t.jsx)(e.admonition,{type:"caution",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"LDAP \u9700\u8981 \u4F01\u4E1A\u7248\u3001\u65D7\u8230\u7248"}),"\n",(0,t.jsx)(e.li,{children:"zentao \u9700\u8981 SUPER/SYSTEM_VARIABLES_ADMIN \u6743\u9650 - \u5EFA\u8BAE\u72EC\u7ACB MySQL \u6216\u8005\u4F7F\u7528 \u5185\u7F6E"}),"\n"]})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/easysoft/zentaopms",children:"easysoft/zentaopms"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://gitee.com/wwccss/zentaopms",children:"wwccss/zentaopms"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://github.com/quicklyon/zentao-docker",children:"quicklyon/zentao-docker"})}),"\n",(0,t.jsx)(e.li,{children:"\u7985\u9053"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# https://hub.docker.com/r/easysoft/zentao\n# Zentao >= 18.6\ndocker run --rm -it \\\n  -p 8080:80 \\\n  -v $PWD/data:/data \\\n  -e MYSQL_ROOT_PASSWORD=123456\n--name zentao easysoft/zentao:18.7\n\n# Zentao < 18.6\ndocker run --rm -it \\\n  -p 8080:80 \\\n  -v $PWD/data/zentaopms:/www/zentaopms \\\n  -v $PWD/data/mysql:/var/lib/mysql \\\n  -e MYSQL_ROOT_PASSWORD=123456\n--name zentao easysoft/zentao:18.5\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"env"}),(0,t.jsx)(e.th,{children:"default"}),(0,t.jsx)(e.th,{children:"note"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"DEBUG"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PHP_SESSION_TYPE"}),(0,t.jsx)(e.td,{children:"files"}),(0,t.jsx)(e.td,{children:"redis/files"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PHP_SESSION_PATH"}),(0,t.jsx)(e.td,{children:"/data/php/session"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PHP_MAX_EXECUTION_TIME"}),(0,t.jsx)(e.td,{children:"120"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PHP_MEMORY_LIMIT"}),(0,t.jsx)(e.td,{children:"256M"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PHP_POST_MAX_SIZE"}),(0,t.jsx)(e.td,{children:"128M"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"PHP_UPLOAD_MAX_FILESIZE"}),(0,t.jsx)(e.td,{children:"128M"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ZT_MYSQL_HOST"}),(0,t.jsx)(e.td,{children:"127.0.0.1"}),(0,t.jsx)(e.td,{children:"MySQL \u8FDE\u63A5\u4FE1\u606F"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ZT_MYSQL_PORT"}),(0,t.jsx)(e.td,{children:"3306"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ZT_MYSQL_DB"}),(0,t.jsx)(e.td,{children:"zentao"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ZT_MYSQL_USER"}),(0,t.jsx)(e.td,{children:"root"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"ZT_MYSQL_PASSWORD"}),(0,t.jsx)(e.td,{children:"pass4zenTao"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_ENABLED"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_HOST"}),(0,t.jsx)(e.td,{children:"127.0.0.1"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_PORT"}),(0,t.jsx)(e.td,{children:"389"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_BASEDN"}),(0,t.jsx)(e.td,{children:"dc=quickon,dc=org"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_ADMINUSER"}),(0,t.jsx)(e.td,{children:"cn=admin,dc=quickon,dc=org"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_BINDPASSWORD"}),(0,t.jsx)(e.td,{children:"pass4zenTao"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_USERKEY"}),(0,t.jsx)(e.td,{children:"uid"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_EMAILKEY"}),(0,t.jsx)(e.td,{children:"mail"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_GROUP"}),(0,t.jsx)(e.td,{children:"1"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_REALNAME"}),(0,t.jsx)(e.td,{children:"name"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_REPEATPOLICY"}),(0,t.jsx)(e.td,{children:"number"}),(0,t.jsx)(e.td,{children:"\u91CD\u540D\u7B56\u7565"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LDAP_AUTOCREATE"}),(0,t.jsx)(e.td,{children:"1"}),(0,t.jsx)(e.td,{children:"\u81EA\u52A8\u521B\u5EFA\u7528\u6237"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"SMTP_ENABLED"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LINK_GIT"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"GIT_TYPE"}),(0,t.jsx)(e.td,{children:"gitea"}),(0,t.jsx)(e.td,{children:"gitea/gogs/gitlab"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"GIT_INSTANCE_NAME"}),(0,t.jsx)(e.td,{children:"gitea"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"GIT_USERNAME"}),(0,t.jsx)(e.td,{children:"root"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"GIT_PASSWORD"}),(0,t.jsx)(e.td,{children:"pass4QuickOn"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"GIT_PROTOCOL"}),(0,t.jsx)(e.td,{children:"https"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"GIT_DOMAIN"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"GIT_TOKEN"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LINK_CI"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"CI_TYPE"}),(0,t.jsx)(e.td,{children:"jenkins"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"LINK_SCAN"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"SCAN_TYPE"}),(0,t.jsx)(e.td,{children:"sonarqube"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"IS_CONTAINER"}),(0,t.jsx)(e.td,{children:"true"}),(0,t.jsx)(e.td,{})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"MYSQL_INTERNAL"}),(0,t.jsx)(e.td,{children:"false"}),(0,t.jsx)(e.td,{children:"\u5185\u7F6E MySQL"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"MYSQL_ROOT_PASSWORD"}),(0,t.jsx)(e.td,{}),(0,t.jsx)(e.td,{})]})]})]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5BB9\u5668\u5185apache\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\uFF1A/etc/apache2/"}),"\n",(0,t.jsx)(e.li,{children:"\u5BB9\u5668\u5185\u7985\u9053\u76EE\u5F55\uFF1A/www/zentaopms"}),"\n",(0,t.jsx)(e.li,{children:"\u5BB9\u5668\u5185mysql\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\uFF1A/etc/mysql/"}),"\n",(0,t.jsx)(e.li,{children:"\u5BB9\u5668\u5185php\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\uFF1A/etc/php/7.0/apache2"}),"\n",(0,t.jsxs)(e.li,{children:["Redis\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"PHP_SESSION_TYPE=redis"}),"\n",(0,t.jsx)(e.li,{children:"PHP_SESSION_PATH=tcp://redis:6379"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://www.zentao.net/book/zentaopms/405.html",children:"Docker\u65B9\u5F0F\u90E8\u7F72\u7985\u9053"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"docker",children:"Docker"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"/apps/zentao/config/my.php"}),"\n"]}),"\n",(0,t.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,t.jsx)(e.h2,{id:"\u4FEE\u6539-ai-\u53C2\u6570",children:"\u4FEE\u6539 AI \u53C2\u6570"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"echo '$config->ai->openai->api->openai->format = \"https://openai-proxy.wener.me/%s/%s\";' >> /apps/zentao/module/ai/config.php\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://gitee.com/wwccss/zentaopms/blob/zentaopms_18.9/module/ai/config.php",children:"https://gitee.com/wwccss/zentaopms/blob/zentaopms_18.9/module/ai/config.php"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u8FD8\u6CA1\u6709\u4FDD\u5B58\u914D\u7F6E\u6587\u4EF6",children:"\u8FD8\u6CA1\u6709\u4FDD\u5B58\u914D\u7F6E\u6587\u4EF6"}),"\n",(0,t.jsx)(e.h2,{id:"admin",children:"Admin"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"select admins from zt_company;\n\n-- \u4FEE\u6539 admin\nupdate zt_company set admins=',cyw,' where id=1;\n"})}),"\n",(0,t.jsx)(e.h1,{id:"\u7248\u672C",children:"\u7248\u672C"}),"\n",(0,t.jsx)(e.h2,{id:"186",children:"18.6"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u7ED3\u6784\u53D8\u5316"}),"\n",(0,t.jsxs)(e.li,{children:["\u5185\u7F6E MySQL \u53EF\u5173\u95ED\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"MYSQL_INTERNAL"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\u65B9\u4FBF\u914D\u7F6E\u5916\u90E8 MySQL\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"ZT_MYSQL"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:"\u53EF\u4EE5\u4F7F\u7528 Redis \u6301\u4E45\u5316 Session"}),"\n",(0,t.jsx)(e.li,{children:"\u53EF\u4EE5\u4F7F\u7528 ENV \u914D\u7F6E PHP"}),"\n",(0,t.jsx)(e.li,{children:"\u76EE\u5F55\u53D8\u5316"}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://www.zentao.net/book/zentaopms/1059.html",children:"https://www.zentao.net/book/zentaopms/1059.html"})}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u65E7\u7248\u672C\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["/www/zentaopms - 18.3\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"/www/zentaopms/VERSION"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:"/apps/zentaopms - 18.4,18.5"}),"\n",(0,t.jsx)(e.li,{children:"/var/lib/mysql"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\u65B0\u7248\u672C\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["/data\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"/data/mysql"}),"\n",(0,t.jsxs)(e.li,{children:["/data/zentao\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"/data/zentao/.version"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:"/data/phy"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# \u65E7\u7248\u672C\u5907\u4EFD\ncd /www/zentaopms/bin\nbash init.sh\nbash backup.sh\n\nls -1 /www/zentaopms/tmp/backup\n\ncp -rp old/www/data new/data/zentao/www\ncp -rp old/config/my.php new/data/zentao/config/my.php\n\ncd old/www/zentaopms/tmp/backup\n\ncp 202401100259473.sql.php bak.sql\nsed -i '1d' bak.sql\nsed -i 's/0000-00-00/1970-01-01/g' bak.sql\n\nmysql -uroot -h127.0.0.1 -P3306 -p123456 zentao < bak.sql\n\nmysql -uroot -h127.0.0.1 -P3306 -p123456 zentao\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"-- \u5224\u65AD\u6570\u636E\u662F\u5426\u6062\u590D\nselect account from zt_user;\n"})})]})}function j(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(x,{...n})}):x(n)}},17776:function(n,e,s){s.d(e,{R:()=>i,x:()=>l});var d=s(7378);let t={},r=d.createContext(t);function i(n){let e=d.useContext(r);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),d.createElement(r.Provider,{value:e},n.children)}}}]);