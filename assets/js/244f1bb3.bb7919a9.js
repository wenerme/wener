"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["8180"],{27426:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>c,toc:()=>h,default:()=>x,metadata:()=>l,assets:()=>d,contentTitle:()=>t});var l=JSON.parse('{"id":"platform/wecom/README","title":"\u4F01\u4E1A\u5FAE\u4FE1","description":"- \u5E94\u7528\u7C7B\u578B","source":"@site/../notes/platform/wecom/README.md","sourceDirName":"platform/wecom","slug":"/platform/wecom/","permalink":"/notes/platform/wecom/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/platform/wecom/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1725936322000,"frontMatter":{"title":"\u4F01\u4E1A\u5FAE\u4FE1"},"sidebar":"docs","previous":{"title":"wechaty","permalink":"/notes/platform/wechat/wechaty"},"next":{"title":"\u4F1A\u8BDD\u5185\u5BB9\u5B58\u6863","permalink":"/notes/platform/wecom/archive"}}'),s=i(86106),r=i(17776);let c={title:"\u4F01\u4E1A\u5FAE\u4FE1"},t="\u4F01\u4E1A\u5FAE\u4FE1",d={},h=[{value:"\u6388\u6743",id:"\u6388\u6743",level:2},{value:"\u7F51\u9875\u6388\u6743",id:"\u7F51\u9875\u6388\u6743",level:3},{value:"Web \u626B\u7801\u6388\u6743\u767B\u5F55",id:"web-\u626B\u7801\u6388\u6743\u767B\u5F55",level:3},{value:"redirect_uri \u4E0E\u914D\u7F6E\u7684\u6388\u6743\u5B8C\u6210\u56DE\u8C03\u57DF\u540D\u4E0D\u4E00\u81F4",id:"redirect_uri-\u4E0E\u914D\u7F6E\u7684\u6388\u6743\u5B8C\u6210\u56DE\u8C03\u57DF\u540D\u4E0D\u4E00\u81F4",level:2}];function o(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u4F01\u4E1A\u5FAE\u4FE1",children:"\u4F01\u4E1A\u5FAE\u4FE1"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5E94\u7528\u7C7B\u578B\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u57FA\u7840\u5E94\u7528 - \u5185\u7F6E"}),"\n",(0,s.jsx)(n.li,{children:"\u7B2C\u4E09\u65B9\u5E94\u7528"}),"\n",(0,s.jsx)(n.li,{children:"\u81EA\u5EFA\u5E94\u7528"}),"\n",(0,s.jsx)(n.li,{children:"\u786C\u4EF6\u5F00\u53D1"}),"\n",(0,s.jsx)(n.li,{children:"\u670D\u52A1\u5546"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/notes/platform/wecom/archive",children:"\u4F1A\u8BDD\u5B58\u6863"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://work.weixin.qq.com/api/doc/",children:"\u5F00\u53D1\u6587\u6863"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://work.weixin.qq.com/api/doc/90001/90148/90455",children:"\u5168\u5C40\u9519\u8BEF\u7801"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.kkzxak47.com/2019/07/30/%E4%BD%BF%E7%94%A8%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95keycloak/",children:"Keycloak \u96C6\u6210"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/36320213",children:"\u4F01\u4E1A\u5FAE\u4FE1\u5F00\u53D1\u6307\u5357"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4F01\u4E1A\u5FAE\u4FE1\u4F1A\u8BDD\u5B58\u6863\u4FDD\u5B58\u6700\u957F\u4E3A 90 \u5929"}),"\n",(0,s.jsxs)(n.li,{children:["\u6210\u5458\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["ID - 1-64 ",(0,s.jsx)(n.code,{children:"[_-@.a-zA-Z0-9]{1,64}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u552F\u4E00\u68C0\u67E5\u5FFD\u7565\u5927\u5C0F\u5199"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u540D\u79F0/\u522B\u540D 1-64 utf8 \u5B57\u7B26"}),"\n",(0,s.jsx)(n.li,{children:"\u804C\u4F4D\u3001\u5730\u5740 0-128"}),"\n",(0,s.jsx)(n.li,{children:"\u6027\u522B 1\u8868\u793A\u7537\u6027\uFF0C2\u8868\u793A\u5973\u6027"}),"\n",(0,s.jsx)(n.li,{children:"\u6240\u5C5E\u90E8\u95E8\u6700\u591A 100 \u4E2A"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u90E8\u95E8\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8DDF\u90E8\u95E8 1"}),"\n",(0,s.jsx)(n.li,{children:"ID int32"}),"\n",(0,s.jsxs)(n.li,{children:["\u540D\u79F0 - 1-64 utf8 \u5B57\u7B26, \u4E0D\u5305\u542B ",(0,s.jsx)(n.code,{children:'\\:*?"<>\uFF5C'})]}),"\n",(0,s.jsx)(n.li,{children:"\u6700\u5927\u5C42\u7EA7 15 \u5C42"}),"\n",(0,s.jsx)(n.li,{children:"\u603B\u6570\u6700\u591A 3 \u4E07\u4E2A"}),"\n",(0,s.jsx)(n.li,{children:"\u90E8\u95E8\u4E0B\u4E0B\u8282\u70B9\u6700\u591A 3 \u4E07\u4E2A"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u6807\u7B7E\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5173\u8054\u5E94\u7528\uFF0C\u662F\u5E94\u7528\u7EF4\u5EA6\u7EF4\u62A4"}),"\n",(0,s.jsx)(n.li,{children:"\u6210\u5458\u4FEE\u6539\u9700\u8981\u4F7F\u7528\u5BF9\u5E94\u5E94\u7528\u6765\u8FDB\u884C\u64CD\u4F5C"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"access_token \u662F\u5168\u5C40\u7684\uFF0C\u4E0D\u80FD\u8FD4\u56DE\u5230\u524D\u7AEF"}),"\n",(0,s.jsxs)(n.li,{children:["\u6388\u6743\u8BA4\u8BC1\u65F6\u7684 code \u53EA\u662F\u4F7F\u7528 access_token \u53BB ",(0,s.jsx)(n.strong,{children:"\u6821\u9A8C"})," \u800C\u4E0D\u662F\u4E3A\u7528\u6237\u6362\u53D6\u5C5E\u4E8E\u7528\u6237\u7684 access_token"]}),"\n",(0,s.jsx)(n.li,{children:"\u9ED8\u8BA4 scope \u4E3A snsapi_base"}),"\n"]})}),"\n",(0,s.jsx)(n.admonition,{title:"\u83B7\u53D6\u4F01\u4E1A\u4FE1\u606F",type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u521B\u5EFA"})," \u6210\u5458/\u90E8\u95E8\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"\u901A\u8BAF\u5F55\u540C\u6B65"}),", ",(0,s.jsx)(n.code,{children:"\u7B2C\u4E09\u65B9\u901A\u8BAF\u5F55\u5E94\u7528"})," \u64CD\u4F5C"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u83B7\u53D6"})," \u6210\u5458/\u90E8\u95E8 ID\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"\u4F01\u4E1A\u7BA1\u7406\u540E\u53F0 - \u7BA1\u7406\u5DE5\u5177 - \u901A\u8BAF\u5F55\u540C\u6B65"})," \u5E94\u7528\u8FDB\u884C\u83B7\u53D6, \u80FD\u6279\u91CF\u83B7\u53D6"]}),"\n",(0,s.jsx)(n.li,{children:"/cgi-bin/user/list_id"}),"\n",(0,s.jsx)(n.li,{children:"/cgi-bin/department/simplelist"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u6210\u5458\u8BE6\u60C5 - \u7528\u6237\u540D\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4E0D\u80FD"})," \u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"\u901A\u8BAF\u5F55\u540C\u6B65"})," \u5E94\u7528\u83B7\u53D6"]}),"\n",(0,s.jsxs)(n.li,{children:["\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"\u81EA\u5EFA\u5E94\u7528"}),", ",(0,s.jsx)(n.code,{children:"\u670D\u52A1\u5546\u4EE3\u5F00\u53D1\u5E94\u7528"}),", ",(0,s.jsx)(n.code,{children:"\u7B2C\u4E09\u65B9\u5E94\u7528"}),", ",(0,s.jsx)(n.code,{children:"\u7B2C\u4E09\u65B9\u901A\u8BAF\u5F55\u5E94\u7528"})]}),"\n",(0,s.jsx)(n.li,{children:"\u8BFB\u53D6\u6210\u5458 /cgi-bin/user/get"}),"\n",(0,s.jsx)(n.li,{children:"\u83B7\u53D6\u90E8\u95E8\u6210\u5458 /cgi-bin/user/simplelist"}),"\n",(0,s.jsx)(n.li,{children:"\u83B7\u53D6\u90E8\u95E8\u6210\u5458\u8BE6\u60C5 /cgi-bin/user/list"}),"\n",(0,s.jsx)(n.li,{children:"\u83B7\u53D6\u90E8\u95E8\u5217\u8868 /cgi-bin/department/list"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u6210\u5458\u8BE6\u60C5 - \u5934\u50CF\u3001\u6027\u522B\u3001\u624B\u673A\u3001\u90AE\u7BB1\u3001\u4F01\u4E1A\u90AE\u7BB1\u3001\u5458\u5DE5\u4E2A\u4EBA\u4E8C\u7EF4\u7801\u3001\u5730\u5740\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"oauth2 \u624B\u5DE5\u6388\u6743"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5BA2\u6237\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u914D\u7F6E \u5BA2\u6237\u8054\u7CFB \u53EF\u8C03\u7528\u5E94\u7528"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u6388\u6743",children:"\u6388\u6743"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u975E\u6807\u51C6 OAuth2"}),"\n",(0,s.jsxs)(n.li,{children:["access_token \u662F\u5168\u5C40\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u9ED8\u8BA4 7200s"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u6362 token \u9700\u8981 appid \u548C agentid"}),"\n",(0,s.jsx)(n.li,{children:"code \u53EA\u80FD\u7528\u4E00\u6B21"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u7F51\u9875\u6388\u6743",children:"\u7F51\u9875\u6388\u6743"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:'language-title="\u8DF3\u8F6C\u6388\u6743"',children:"https://open.weixin.qq.com/connect/oauth2/authorize?\n  appid=wx10101&\n  response_type=code&\n  scope=snsapi_base&\n  redirect_uri=https%3A%2F%2Ftest.example.com%3A3000%2Fapi%2Fmyredirect\n  #wechat_redirect\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:'language-title="\u6362\u53D6',metastring:'Token"',children:"https://qyapi.weixin.qq.com/cgi-bin/user/getuserinfo?\n  access_token=ACCESS_TOKEN&\n  code=CODE\n"})}),"\n",(0,s.jsx)(n.h3,{id:"web-\u626B\u7801\u6388\u6743\u767B\u5F55",children:"Web \u626B\u7801\u6388\u6743\u767B\u5F55"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:'language-title="\u8DF3\u8F6C\u6388\u6743"',children:"https://open.work.weixin.qq.com/wwopen/sso/qrConnect?\n  appid=wx10101&\n  agentid=1000000&\n  redirect_uri=https%3A%2F%2Ftest.example.com%3A3000%2Fapi%2Fmyredirect\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:'language-title="\u6362\u53D6',metastring:'Token"',children:"https://qyapi.weixin.qq.com/cgi-bin/user/getuserinfo?\n  access_token=ACCESS_TOKEN&\n  code=CODE\n"})}),"\n",(0,s.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,s.jsx)(n.h2,{id:"redirect_uri-\u4E0E\u914D\u7F6E\u7684\u6388\u6743\u5B8C\u6210\u56DE\u8C03\u57DF\u540D\u4E0D\u4E00\u81F4",children:"redirect_uri \u4E0E\u914D\u7F6E\u7684\u6388\u6743\u5B8C\u6210\u56DE\u8C03\u57DF\u540D\u4E0D\u4E00\u81F4"}),"\n",(0,s.jsx)(n.p,{children:"\u914D\u7F6E Web \u6388\u6743\u56DE\u8C03\u57DF\u540D"})]})}function x(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},17776:function(e,n,i){i.d(n,{R:()=>c,x:()=>t});var l=i(7378);let s={},r=l.createContext(s);function c(e){let n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);