"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["539398"],{62245:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>l,toc:()=>c,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>a});var s=JSON.parse('{"id":"web/spec/web-fs","title":"FileSystem","description":"- https://wicg.github.io/file-system-access/","source":"@site/../notes/web/spec/web-fs.md","sourceDirName":"web/spec","slug":"/web/spec/web-fs","permalink":"/notes/web/spec/web-fs","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/spec/web-fs.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1639938220000,"frontMatter":{"title":"FileSystem"},"sidebar":"docs","previous":{"title":"WebComponent","permalink":"/notes/web/spec/web-component"},"next":{"title":"Web Spec Awesome","permalink":"/notes/web/spec/awesome"}}'),i=t(486106),r=t(917776);let l={title:"FileSystem"},a="FileSystem",o={},c=[{value:"Origin Private File System",id:"origin-private-file-system",level:2},{value:"Drop as Handle",id:"drop-as-handle",level:2}];function d(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"filesystem",children:"FileSystem"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://wicg.github.io/file-system-access/",children:"https://wicg.github.io/file-system-access/"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/WICG/file-system-access/blob/main/EXPLAINER.md",children:"explainer"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://w3c.github.io/FileAPI/",children:"https://w3c.github.io/FileAPI/"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://web.dev/file-system-access/",children:"https://web.dev/file-system-access/"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/GoogleChromeLabs/text-editor/blob/main/src/inline-scripts/fs-helpers.js",children:"fs-helpers.js"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://web.dev/browser-fs-access/",children:"https://web.dev/browser-fs-access/"})}),"\n",(0,i.jsxs)(n.li,{children:["Chrome\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Chrome 86+\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/showOpenFilePicker",children:"window.showOpenFilePicker"})}),"\n",(0,i.jsx)(n.li,{children:"navigator.storage.getDirectory"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"dataurl \u652F\u6301 blob:, filesystem:"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'<a href="" download="filename.txt">'})," - \u89E6\u53D1\u4E0B\u8F7D\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-download",children:"download"})," \u4F9D\u8D56\u670D\u52A1\u7AEF\u8FD4\u56DE ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition",children:"Content-Disposition"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"const dirHandle = await window.showDirectoryPicker();\n\nconst saveFileHandle = await self.showSaveFilePicker({\n  suggestedName: 'Untitled Text.txt',\n  types: [\n    {\n      description: 'Text documents',\n      accept: {\n        'text/plain': ['.txt'],\n      },\n    },\n  ],\n});\n\nconst openFileHandle = await self.showOpenFilePicker({\n  // desktop, documents, downloads, music, pictures, videos\n  startIn: 'pictures',\n  // startIn: dirHandle,\n});\n\n// \u521B\u5EFA\u76EE\u5F55\nconst neoDirHandle = await dirHandle.getDirectoryHandle('neo', { create: true });\n// \u521B\u5EFA\u6587\u4EF6\nconst readmeFileHandle = await neoDirHandle.getFileHandle('README.txt', { create: true });\n// \u5220\u9664\u6587\u4EF6\nawait neoDirHandle.removeEntry('README.txt');\n// \u9012\u5F52\u5220\u9664\u76EE\u5F55\nawait dirHandle.removeEntry('neo', { recursive: true });\n"})}),"\n",(0,i.jsx)(n.h2,{id:"origin-private-file-system",children:"Origin Private File System"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"OPFS - Origin Private File System"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.chromestatus.com/feature/5702777582911488",children:"chromestatus"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"dev 94, trail 95, shiping 99"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// FileSystemDirectoryHandle\nconst root = await navigator.storage.getDirectory();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"drop-as-handle",children:"Drop as Handle"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="drop-handle.js"',children:"elem.addEventListener('dragover', (e) => {\n  // Prevent navigation.\n  e.preventDefault();\n});\n\nelem.addEventListener('drop', async (e) => {\n  // Prevent navigation.\n  e.preventDefault();\n  // Process all of the items.\n  for (const item of e.dataTransfer.items) {\n    // Careful: `kind` will be 'file' for both file\n    // _and_ directory entries.\n    if (item.kind === 'file') {\n      const entry = await item.getAsFileSystemHandle();\n      if (entry.kind === 'directory') {\n        handleDirectoryEntry(entry);\n      } else {\n        handleFileEntry(entry);\n      }\n    }\n  }\n});\n"})})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},917776:function(e,n,t){t.d(n,{R:()=>l,x:()=>a});var s=t(7378);let i={},r=s.createContext(i);function l(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);