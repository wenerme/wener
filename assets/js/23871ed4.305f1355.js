"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["22528"],{911183:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>d,toc:()=>h,default:()=>j,metadata:()=>r,assets:()=>c,contentTitle:()=>t});var r=JSON.parse('{"id":"dev/dev-env","title":"ENV","description":"- \u8FD0\u884C\u73AF\u5883 - \u5206\u652F\u53EF\u80FD\u5BF9\u5E94\u4E86\u8FD0\u884C\u73AF\u5883","source":"@site/../notes/dev/dev-env.md","sourceDirName":"dev","slug":"/dev/env","permalink":"/notes/dev/env","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/dev/dev-env.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1735615618000,"frontMatter":{"title":"ENV"},"sidebar":"docs","previous":{"title":"\u5F00\u53D1\u76F8\u5173\u6982\u5FF5","permalink":"/notes/dev/concept"},"next":{"title":"error","permalink":"/notes/dev/error"}}'),i=s(486106),l=s(917776);let d={title:"ENV"},t="\u73AF\u5883\u53D8\u91CF",c={},h=[{value:"vars",id:"vars",level:2},{value:"\u9759\u6001\u524D\u7AEF\u914D\u7F6E",id:"static-frontend-config",level:2}];function o(n){let e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"\u73AF\u5883\u53D8\u91CF",children:"\u73AF\u5883\u53D8\u91CF"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8FD0\u884C\u73AF\u5883 - \u5206\u652F\u53EF\u80FD\u5BF9\u5E94\u4E86\u8FD0\u884C\u73AF\u5883\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5F00\u53D1\u73AF\u5883"}),"\n",(0,i.jsx)(e.li,{children:"\u6D4B\u8BD5\u73AF\u5883"}),"\n",(0,i.jsx)(e.li,{children:"\u9884\u53D1\u5E03\u73AF\u5883"}),"\n",(0,i.jsx)(e.li,{children:"\u751F\u4EA7\u73AF\u5883"}),"\n",(0,i.jsx)(e.li,{children:"\u6027\u80FD\u6D4B\u8BD5\u73AF\u5883"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u8FD0\u884C\u6A21\u5F0F\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"production"}),"\n",(0,i.jsx)(e.li,{children:"development"}),"\n",(0,i.jsx)(e.li,{children:"test"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"env - \u73AF\u5883"}),"\n",(0,i.jsxs)(e.li,{children:["profile - \u914D\u7F6E\u6587\u4EF6/\u914D\u7F6E\u8F6E\u5ED3\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"--spring.profiles.active"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"envrionment variable - \u73AF\u5883\u53D8\u91CF"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"abbr."}),(0,i.jsx)(e.th,{children:"for"}),(0,i.jsx)(e.th,{children:"cn"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"staging"}),(0,i.jsx)(e.td,{children:"\u9884\u53D1\u5E03"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"dev"}),(0,i.jsx)(e.td,{children:"development"}),(0,i.jsx)(e.td,{children:"\u5F00\u53D1"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"prod"}),(0,i.jsx)(e.td,{children:"production"}),(0,i.jsx)(e.td,{children:"\u751F\u4EA7"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"test"}),(0,i.jsx)(e.td,{children:"test/testing"}),(0,i.jsx)(e.td,{children:"\u6D4B\u8BD5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"perf"}),(0,i.jsx)(e.td,{children:"performance"}),(0,i.jsx)(e.td,{children:"\u6027\u80FD\u6D4B\u8BD5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"bench"}),(0,i.jsx)(e.td,{children:"benchmark"}),(0,i.jsx)(e.td,{children:"\u57FA\u51C6\u6D4B\u8BD5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"sit"}),(0,i.jsx)(e.td,{children:"System Integration Testing"}),(0,i.jsx)(e.td,{children:"\u7CFB\u7EDF\u96C6\u6210\u6D4B\u8BD5, \u7531\u516C\u53F8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"uat"}),(0,i.jsx)(e.td,{children:"User Acceptance Testing"}),(0,i.jsx)(e.td,{children:"\u7528\u6237\u9A8C\u6536\u6D4B\u8BD5, \u7531\u7528\u6237"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"next"}),(0,i.jsx)(e.td,{children:"\u4E0B\u4E00\u4E2A\u7248\u672C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"alpha"}),(0,i.jsx)(e.td,{children:"\u5185\u90E8\u6D4B\u8BD5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"beta"}),(0,i.jsx)(e.td,{children:"\u516C\u6D4B"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ga"}),(0,i.jsx)(e.td,{children:"general availability"}),(0,i.jsx)(e.td,{children:"\u6B63\u5F0F\u53D1\u5E03"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"rc"}),(0,i.jsx)(e.td,{children:"release candidate"}),(0,i.jsx)(e.td,{children:"\u53D1\u5E03\u5019\u9009\u7248\u672C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"cr"}),(0,i.jsx)(e.td,{children:"code review"}),(0,i.jsx)(e.td,{children:"\u4EE3\u7801\u5BA1\u67E5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"stable"}),(0,i.jsx)(e.td,{children:"\u7A33\u5B9A\u7248\u672C"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"EAP"}),(0,i.jsx)(e.td,{children:"Early Access Program"}),(0,i.jsx)(e.td,{children:"\u65E9\u671F\u8BBF\u95EE\u8BA1\u5212"})]})]})]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5F00\u53D1->\u6D4B\u8BD5->\u4E0A\u7EBF"}),"\n",(0,i.jsx)(e.li,{children:"SIT -> UAT"}),"\n",(0,i.jsxs)(e.li,{children:["\u9762\u5411\u751F\u547D\u5468\u671F\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5F00\u53D1\u3001\u6D4B\u8BD5\u3001\u9884\u53D1\u5E03\u3001\u751F\u4EA7\u3001\u6027\u80FD\u6D4B\u8BD5"}),"\n",(0,i.jsx)(e.li,{children:"dev/test/staging/prod/perf"}),"\n",(0,i.jsx)(e.li,{children:"local/development/staging/production/testing"}),"\n",(0,i.jsx)(e.li,{children:"dev/test/staging/prod"}),"\n",(0,i.jsx)(e.li,{children:"development/test/stage/produciton"}),"\n",(0,i.jsx)(e.li,{children:"\u9884\u53D1\u5E03 - staging/pre/next"}),"\n",(0,i.jsx)(e.li,{children:"\u6027\u80FD\u6D4B\u8BD5 - performance/perf/benchmark/bench"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u9762\u5411\u73AF\u5883\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"region"}),"\n",(0,i.jsx)(e.li,{children:"zone"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["APP_ENV\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["larval - local, production, testing\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/laravel/framework/blob/5.8/src/Illuminate/Foundation/Application.php",children:"https://github.com/laravel/framework/blob/5.8/src/Illuminate/Foundation/Application.php"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["NODE_ENV - production, development, test - \u8FD0\u884C\u6A21\u5F0F\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/kerimdzhanov/dotenv-flow",children:"https://github.com/kerimdzhanov/dotenv-flow"})}),"\n",(0,i.jsxs)(e.li,{children:["process.env ",(0,i.jsx)(e.a,{href:"https://nodejs.org/api/process.html#process_process_env",children:"https://nodejs.org/api/process.html#process_process_env"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"SPRING_PROFILES_ACTIVE,spring.profiles.active"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/fundamentals/environments",children:".NET"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"DOTNET_ENVIRONMENT"}),"\n",(0,i.jsx)(e.li,{children:"ASPNETCORE_ENVIRONMENT"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["NEXT_PUBLIC_VERCEL_ENV, ",(0,i.jsx)(e.a,{href:"https://vercel.com/docs/projects/environment-variables/system-environment-variables",children:"VERCEL_ENV"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"production, preview, development"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://docs.digitalocean.com/products/app-platform/how-to/use-environment-variables/",children:"https://docs.digitalocean.com/products/app-platform/how-to/use-environment-variables/"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"APP_DOMAIN, APP_URL, APP_ID"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"__DEV__"})," \u53D8\u91CF - \u8FD0\u884C\u6A21\u5F0F\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7531 RN \u5F15\u5165 ",(0,i.jsx)(e.a,{href:"https://reactnative.dev/docs/javascript-environment",children:"https://reactnative.dev/docs/javascript-environment"})]}),"\n",(0,i.jsxs)(e.li,{children:["ReactRouter \u4E5F\u4F7F\u7528\u4E86\u8FD9\u4E2A\u53D8\u91CF ",(0,i.jsx)(e.a,{href:"https://github.com/search?q=repo%3Aremix-run%2Freact-router%20__DEV__&type=code",children:"https://github.com/search?q=repo%3Aremix-run%2Freact-router%20__DEV__&type=code"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901A\u8FC7 rollup \u6CE8\u5165\u4E86\u53D8\u91CF"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"__PROD__"})," \u53D8\u91CF"]}),"\n",(0,i.jsxs)(e.li,{children:["import.meta.env\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"by Vite"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"vars",children:"vars"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"NO_COLOR - \u5173\u95ED\u5F69\u8272\u8F93\u51FA"}),"\n",(0,i.jsx)(e.li,{children:"DNT - Do Not Track - \u5173\u95ED Telemetry"}),"\n"]}),"\n",(0,i.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(e.h2,{id:"static-frontend-config",children:"\u9759\u6001\u524D\u7AEF\u914D\u7F6E"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u52A0\u8F7D Bootstrap \u914D\u7F6E - \u4F8B\u5982 API \u5730\u5740"}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u6784\u5EFA\u65F6\u6839\u636E branch \u52A0\u8F7D\u914D\u7F6E"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"import { defineConfig, loadEnv, type PluginOption } from 'vite';\nexport default defineConfig(({ mode, command }) => {\n  const env = {};\n  console.log(`Vite ${command} mode=${mode} branch=${process.env.CI_COMMIT_BRANCH || ''}`);\n  Object.assign(env, loadEnv(mode, process.cwd(), ''));\n\n  // \u52A0\u8F7D .env.branch \u8986\u76D6\n  if (process.env.CI_COMMIT_BRANCH) {\n    Object.assign(env, loadEnv(process.env.CI_COMMIT_BRANCH, process.cwd(), ''));\n  }\n  process.env = Object.assign(process.env, env);\n\n  return defineConfig({});\n});\n"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u90E8\u7F72\u65F6\u901A\u8FC7\u8986\u76D6 json \u914D\u7F6E"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8BF7\u6C42 ",(0,i.jsx)(e.code,{children:"${location.origin}/config.json"})," \u83B7\u53D6\u914D\u7F6E\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5141\u8BB8\u914D\u7F6E\u4E0D\u5B58\u5728"}),"\n",(0,i.jsx)(e.li,{children:"\u90E8\u7F72\u65F6\u53EF\u4EE5\u5C06 /config.json \u91CD\u5B9A\u5411"}),"\n",(0,i.jsxs)(e.li,{children:["\u90E8\u7F72\u65F6\u53EF\u4EE5\u5C06 ",(0,i.jsx)(e.code,{children:"/app/public/config.json"})," \u5185\u5BB9\u8FDB\u884C\u66FF\u6362"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u5728\u524D\u7AEF\u914D\u7F6E\u6240\u6709 domain -> config \u7684\u914D\u7F6E\uFF0C\u6839\u636E\u5F53\u524D\u57DF\u540D\u52A0\u8F7D\u914D\u7F6E"}),"\n",(0,i.jsx)(e.li,{children:"\u57FA\u4E8E \u5F53\u524D\u57DF\u540D \u6309\u7167\u89C4\u5219\u751F\u6210 api \u5730\u5740"}),"\n",(0,i.jsxs)(e.li,{children:["\u56DE\u6EDA\u5230 ",(0,i.jsx)(e.code,{children:"${location.origin}/api"})," \u4F5C\u4E3A\u9ED8\u8BA4 API \u5730\u5740"]}),"\n",(0,i.jsx)(e.li,{children:"\u901A\u8FC7\u8BF7\u6C42 API \u83B7\u53D6\u914D\u7F6E"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"SaaS \u573A\u666F"}),"\n",(0,i.jsx)(e.li,{children:"\u5141\u8BB8\u7528\u6237\u8F93\u5165\u79DF\u6237 ID/\u540D\u5B57"}),"\n",(0,i.jsx)(e.li,{children:"\u670D\u52A1\u7AEF\u5224\u65AD referer/url \u5224\u65AD\u8FD4\u56DE\u7684\u914D\u7F6E\u4FE1\u606F"}),"\n"]})]})}function j(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},917776:function(n,e,s){s.d(e,{R:()=>d,x:()=>t});var r=s(7378);let i={},l=r.createContext(i);function d(n){let e=r.useContext(l);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);