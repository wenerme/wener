"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["225679"],{233480:function(n,e,s){s.r(e),s.d(e,{frontMatter:()=>d,toc:()=>h,default:()=>a,metadata:()=>l,assets:()=>c,contentTitle:()=>t});var l=JSON.parse('{"id":"db/db-faq","title":"Database FAQ","description":"- between - \u5DE6\u95ED\u53F3\u95ED","source":"@site/../notes/db/db-faq.md","sourceDirName":"db","slug":"/db/faq","permalink":"/notes/db/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/db-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1759988681000,"frontMatter":{"title":"Database FAQ","tags":["FAQ"]},"sidebar":"docs","previous":{"title":"DSN","permalink":"/notes/db/dsn"},"next":{"title":"\u6570\u636E\u5E93\u672F\u8BED","permalink":"/notes/db/glossary"}}'),i=s(486106),r=s(917776);let d={title:"Database FAQ",tags:["FAQ"]},t="Database FAQ",c={},h=[{value:"How to choose database",id:"how-to-choose-database",level:2},{value:"Tradeoff OLTP vs OLAP vs NoSQL",id:"tradeoff-oltp-vs-olap-vs-nosql",level:2},{value:"OLTP vs OLAP vs NoSQL vs NewSQL vs Data Warehouse vs Data Mart vs Data Lake",id:"oltp-vs-olap-vs-nosql-vs-newsql-vs-data-warehouse-vs-data-mart-vs-data-lake",level:2},{value:"OLTP vs OLAP",id:"oltp-vs-olap",level:2},{value:"page size",id:"page-size",level:2},{value:"MySQL vs MariaDB",id:"mysql-vs-mariadb",level:2},{value:"\u4E3A\u4EC0\u4E48\u4E0D\u8981\u9009\u62E9 MySQL",id:"reason-not-mysql",level:2},{value:"\u8F6F\u5220\u9664\u5B9E\u73B0\u552F\u4E00\u7D22\u5F15",id:"unique-index-soft-delete",level:2},{value:"MongoDB vs PostgreSQL",id:"mongodb-vs-postgresql",level:2},{value:"MySQL vs PostgreSQL",id:"mysql-vs-postgresql",level:2},{value:"NATS vs Redis",id:"nats-vs-redis",level:2},{value:"Data Model",id:"data-model",level:2}];function x(n){let e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"database-faq",children:"Database FAQ"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["between - \u5DE6\u95ED\u53F3\u95ED\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"a BETWEEN x AND y"})," -> ",(0,i.jsx)(e.code,{children:"a >= x AND a <= y"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"a BETWEEN SYMMETRIC x AND y"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5BF9 x, y \u6392\u5E8F\uFF0C\u7136\u540E ",(0,i.jsx)(e.code,{children:"a BETWEEN x AND y"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"how-to-choose-database",children:"How to choose database"}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"90% \u573A\u666F\u9009\u62E9 PostgreSQL"}),"\n",(0,i.jsxs)(e.li,{children:["\u4F18\u5148\u8003\u8651 ",(0,i.jsx)(e.strong,{children:"\u5782\u76F4"})," \u6269\u5BB9\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"delay \u95EE\u9898"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u573A\u666F"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"OLTP \u5173\u7CFB\u578B - PostgreSQL, MySQL"}),"\n",(0,i.jsx)(e.li,{children:"NoSQL \u6027\u80FD\u578B - KV, Memory Grid"}),"\n",(0,i.jsx)(e.li,{children:"OLAP \u5206\u6790\u578B - Column"}),"\n",(0,i.jsxs)(e.li,{children:["\u7279\u6B8A\u573A\u666F\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Graph"}),"\n",(0,i.jsx)(e.li,{children:"Document - MongoDB, FerratDB"}),"\n",(0,i.jsxs)(e.li,{children:["Search - OpenSearch, ",(0,i.jsx)(e.a,{href:"/notes/db/search/solr",children:"solr"}),", ",(0,i.jsx)(e.a,{href:"/notes/db/search/manticoresearch",children:"manticoresearch"})]}),"\n",(0,i.jsx)(e.li,{children:"Auth/Zanzibar - spicedb"}),"\n",(0,i.jsx)(e.li,{children:"MBaaS/Mobile - CouchDB, supabase, hasura, prisma, strapi"}),"\n",(0,i.jsx)(e.li,{children:"Secret/Security - Vault"}),"\n",(0,i.jsx)(e.li,{children:"Logging"}),"\n",(0,i.jsx)(e.li,{children:"Metrics"}),"\n",(0,i.jsx)(e.li,{children:"Treacing"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u8BBF\u95EE\u6A21\u5F0F"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7CBE\u51C6\u8BBF\u95EE - KV, OLTP"}),"\n",(0,i.jsx)(e.li,{children:"\u6279\u91CF\u8BBF\u95EE - OLAP"}),"\n",(0,i.jsx)(e.li,{children:"\u4FBF\u5229\u5173\u7CFB - Graph"}),"\n",(0,i.jsx)(e.li,{children:"\u90E8\u5206\u6295\u5C04 - Column"}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u5206\u5E03\u5F0F - \u5982\u679C\u8981\u4F18\u5148\u8003\u8651\u5206\u5E03\u5F0F"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Citus"}),"\n",(0,i.jsx)(e.li,{children:"Clickhouse, Scylldb"}),"\n",(0,i.jsx)(e.li,{children:"OpenSearch"}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u805A\u5408\u5206\u6790 - \u8BA1\u7B97\u3001\u7F13\u5B58\u3001\u5206\u6790"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"cubejs, superset, trino"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"tradeoff-oltp-vs-olap-vs-nosql",children:"Tradeoff OLTP vs OLAP vs NoSQL"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["OLTP\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ACID \u5FC5\u987B"}),"\n",(0,i.jsxs)(e.li,{children:["Latency\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"90% < 100ms"}),"\n",(0,i.jsx)(e.li,{children:"99% < 1s"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6570\u636E\u91CF\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"90% < 1G"}),"\n",(0,i.jsx)(e.li,{children:"99% < 1T"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u591A\u67E5\u8BE2\u547D\u4E2D\u7D22\u5F15"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u591A\u67E5\u8BE2\u4E3A\u7CBE\u51C6\u6570\u636E"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["OLAP\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Latency\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"50% < 1s"}),"\n",(0,i.jsx)(e.li,{children:"90% > 1m"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6570\u636E\u91CF\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"90% > 1T"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u591A\u67E5\u8BE2\u8BBF\u95EE\u5927\u91CF\u6570\u636E"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u822C \u9ED8\u8BA4\u652F\u6301\u5206\u5E03\u5F0F"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["NoSQL\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5927\u591A\u4EE5\u547D\u4E2D\u5185\u5B58\u4E3A\u4E3B"}),"\n",(0,i.jsx)(e.li,{children:"KV \u65B9\u5F0F\u67E5\u8BE2\u4E3A\u4E3B"}),"\n",(0,i.jsx)(e.li,{children:"\u6EE1\u8DB3\u7279\u6B8A\u9700\u6C42"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u822C \u9ED8\u8BA4\u652F\u6301\u5206\u5E03\u5F0F"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u6848\u4F8B: 8G \u5C0F\u6587\u4EF6\u6570\u636E, hash -> blob"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ClickHouse < 1m"}),"\n",(0,i.jsx)(e.li,{children:"ScyllaDB - \u89E6\u53D1 large data \u8B66\u544A, \u89E6\u53D1\u5199\u8D85\u65F6"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"oltp-vs-olap-vs-nosql-vs-newsql-vs-data-warehouse-vs-data-mart-vs-data-lake",children:"OLTP vs OLAP vs NoSQL vs NewSQL vs Data Warehouse vs Data Mart vs Data Lake"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["OLTP\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u4EA4\u6613\u573A\u666F"}),"\n",(0,i.jsx)(e.li,{children:"\u5F3A\u4E8B\u52A1\uFF0C\u5F3A\u4E00\u81F4\uFF0C\u8F83\u4F4E RT\uFF0C\u4F4E\u9891\u5EA6\u66F4\u65B0"}),"\n",(0,i.jsx)(e.li,{children:"\u5B58\u50A8\u5B9E\u65F6\u6570\u636E\uFF0C\u6570\u636E\u91CF\u5C0F"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["OLAP\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u5206\u6790\u62A5\u8868\u7EDF\u8BA1\uFF0C\u4EE5\u8BFB\u4E3A\u4E3B"}),"\n",(0,i.jsx)(e.li,{children:"\u5F31\u4E8B\u52A1\uFF0C\u5F31\u4E00\u81F4\u6027\uFF0C\u5BF9\u54CD\u5E94\u6709\u4E00\u5B9A\u8981\u6C42"}),"\n",(0,i.jsx)(e.li,{children:"\u5B58\u50A8\u660E\u7EC6\u6570\u636E\uFF0C\u5386\u53F2\u6570\u636E\uFF0C\u6570\u636E\u91CF\u5927"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["NoSQL\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5E94\u4ED8\u7279\u6B8A\u573A\u666F"}),"\n",(0,i.jsx)(e.li,{children:"\u4F8B\u5982\uFF1A\u541E\u5410\u3001\u5EF6\u65F6\u3001\u64CD\u4F5C\u4FBF\u643A\u3001\u6570\u636E\u91CF\u3001\u5B9E\u65F6\u3001\u5E76\u53D1\u3001\u641C\u7D22\u3001\u5916\u90E8\u96C6\u6210\u3001\u6570\u636E\u7EC4\u7EC7\u6A21\u5F0F\uFF08\u56FE\u3001\u7A7A\u95F4\u3001\u65F6\u5E8F\uFF09"}),"\n",(0,i.jsx)(e.li,{children:"\u63A5\u53E3\u5F62\u5F0F\u5404\u4E0D\u76F8\u540C\uFF0C\u4E8B\u52A1\u4FDD\u969C\u5404\u90E8\u76F8\u540C"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["NewSQL\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63A5\u53E3\u662F SQL \u6807\u51C6\u7684 NoSQL"}),"\n",(0,i.jsx)(e.li,{children:"\u5177\u6709 OLTP \u7684\u5C5E\u6027\uFF0C\u80FD\u6A2A\u5411\u6269\u5BB9"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u822C SQL \u5F15\u64CE + \u5206\u5E03\u5F0F KV \u5B58\u50A8\u5B9E\u73B0"}),"\n",(0,i.jsx)(e.li,{children:"\u901A\u5E38\u4F1A\u5B9E\u73B0 MySQL \u6216 PostgreSQL \u7684\u534F\u8BAE"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Data_warehouse",children:"Data Warehouse"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636E\u4ED3\u5E93"}),"\n",(0,i.jsx)(e.li,{children:"\u4F01\u4E1A\u7EAC\u5EA6\u7684\u6570\u636E\u7BA1\u63A7"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u5957\u7CFB\u7EDF\uFF0C\u4F53\u7CFB\u5316\u7684\u89E3\u51B3\u4F01\u4E1A\u5185\u90E8\u6570\u636E\u5B58\u50A8\u3001\u5904\u7406\u3001\u5206\u6790\u95EE\u9898"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636E\u91CF\u5DE8\u5927\uFF0C\u5BF9\u54CD\u5E94\u8981\u6C42\u4F4E"}),"\n",(0,i.jsx)(e.li,{children:"\u7EDF\u4E00\u5E73\u53F0\uFF0C\u7531\u5F88\u591A\u90E8\u5206\u7EC4\u6210\uFF0C\u6709\u5F00\u53D1\u5E73\u53F0"}),"\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u5F00\u53D1\u548C BI"}),"\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u4F01\u4E1A\u6574\u4F53"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636E\u6709\u4E00\u5B9A\u7ED3\u6784"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Data_mart",children:"Data Mart"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636E\u4ED3\u5E93\u7684\u4E00\u79CD\u7279\u6B8A\u5F62\u5F0F\uFF0C\u6570\u636E\u4ED3\u5E93\u7684\u5B50\u96C6"}),"\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u4E1A\u52A1\u3001\u7EC4\u7EC7\u90E8\u95E8\u3001\u67D0\u4E00\u9886\u57DF"}),"\n",(0,i.jsx)(e.li,{children:"\u4F01\u4E1A\u5185\u4E00\u5B9A\u6570\u636E\u5171\u4EAB\uFF0C\u6570\u636E\u5177\u6709\u7ED3\u6784\u6027"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Data Lake\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5B58\u50A8\u539F\u59CB\u6570\u636E\uFF0C\u4FDD\u6301\u4F4E\u5EC9\u7684\u5B58\u50A8\u6210\u672C"}),"\n",(0,i.jsx)(e.li,{children:"\u89C4\u6A21\u548C\u6570\u636E\u91CF\u6BD4 DW \u5927\uFF0C\u5904\u7406\u66F4\u6162\uFF0C\u8BFB\u53D6\u65F6\u5B9A\u4E49\u6570\u636E\u7ED3\u6784"}),"\n",(0,i.jsx)(e.li,{children:"Hadoop \u662F DL\uFF0C\u800C\u5728\u8FD9\u4E4B\u4E0A\u7684 HBase \u5219\u662F DW"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u822C\u6570\u636E\u4E0D\u5141\u8BB8\u66F4\u65B0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"oltp-vs-olap",children:"OLTP vs OLAP"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.stitchdata.com/resources/oltp-vs-olap/",children:"https://www.stitchdata.com/resources/oltp-vs-olap/"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"page-size",children:"page size"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"sqlite - 4096 - 4k"}),"\n",(0,i.jsx)(e.li,{children:"postgres - 8192 - 8k"}),"\n",(0,i.jsxs)(e.li,{children:["mysql innodb 16k\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"innodb_page_size"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- SQLite\nPRAGMA page_size;\n-- PostgreSQL\nSELECT current_setting('block_size');\n-- MySQL\nSHOW TABLE STATUS;\n"})}),"\n",(0,i.jsx)(e.h2,{id:"mysql-vs-mariadb",children:"MySQL vs MariaDB"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"MariaDB \u5F00\u53D1\u73B0\u72B6\u4E0D\u592A\u7406\u60F3 (2024)"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["MySQL\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["8.2.0 \u4E0D\u63D0\u4F9B\u57FA\u4E8E debian \u7684 \u955C\u50CF ",(0,i.jsx)(e.a,{href:"https://hub.docker.com/_/mysql",children:"https://hub.docker.com/_/mysql"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"MariaDB"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/percona/percona-server",children:"Percona Server for MySQL"})}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GUID \u4E0D\u540C"}),"\n",(0,i.jsx)(e.li,{children:"MariaDB 10.X \u548C MySQL 8.X \u4E0D\u518D\u517C\u5BB9"}),"\n",(0,i.jsx)(e.li,{children:"AlpineLinux \u4E0B mysql \u4E3A mariadb"}),"\n",(0,i.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["vitess \u4E0D\u652F\u6301 mariadb\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["RFC: Deprecate MariaDB Support in 2022 and Remove in 2023 ",(0,i.jsx)(e.a,{href:"https://github.com/vitessio/vitess/issues/9518",children:"vitess#9518"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://blog.devart.com/mysql-vs-mariadb.html",children:"https://blog.devart.com/mysql-vs-mariadb.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"reason-not-mysql",children:"\u4E3A\u4EC0\u4E48\u4E0D\u8981\u9009\u62E9 MySQL"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4E3A\u4EC0\u4E48\u4F1A\u9009\u62E9 MySQL"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u5F00\u53D1\u4EBA\u5458\u7ECF\u5386\u5927\u591A\u8FD8\u505C\u7559\u5728 MySQL 5.7"}),"\n",(0,i.jsx)(e.li,{children:"\u5386\u53F2\u9057\u7559\u9879\u76EE"}),"\n",(0,i.jsx)(e.li,{children:"\u66FE\u7ECF MySQL \u786E\u5B9E\u662F\u4E0D\u4E8C\u7684\u9009\u62E9"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u4E86\u7279\u6B8A\u7684 MySQL fork"}),"\n",(0,i.jsx)(e.li,{children:"Master Slave \u903B\u8F91\u7B80\u5355"}),"\n",(0,i.jsx)(e.li,{children:"MyISAM \u6027\u80FD\u597D\uFF0C\u867D\u7136\u4E0D ACID"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4E3A\u4EC0\u4E48\u4E0D\u8981\u9009\u62E9 MySQL"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679C\u65B0\u9879\u76EE\u9700\u8981\u9009\u62E9 MySQL 8.0 \u90A3\u4E48\u4E0D\u5982\u8003\u8651\u5207\u6362\u5230 PostgreSQL"}),"\n",(0,i.jsx)(e.li,{children:"\u8003\u8651 MariaDB \uFF1F \u90A3\u4E48\u4E0D\u5982\u8003\u8651 PostgreSQL"}),"\n",(0,i.jsx)(e.li,{children:"\u534F\u8BAE\u66F4\u4E25\u683C"}),"\n",(0,i.jsx)(e.li,{children:"\u7F3A\u5C11\u5F88\u591A SQL \u7279\u6027"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u56E0\u4E3A\u6CA1\u6709\u6240\u4EE5\u4E0D\u77E5\u9053"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u975E\u5E38\u5F71\u54CD\u9879\u76EE\u5F00\u53D1\u548C\u9009\u9879"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://www.guru99.com/postgresql-vs-mysql-difference.html",children:"https://www.guru99.com/postgresql-vs-mysql-difference.html"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"unique-index-soft-delete",children:"\u8F6F\u5220\u9664\u5B9E\u73B0\u552F\u4E00\u7D22\u5F15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"create temporary table if not exists test\n(\n    id         text        not null default public.gen_ulid() primary key,\n    uid        uuid        not null default gen_random_uuid() unique,\n    eid        text        null,\n    created_at timestamptz not null default current_timestamp,\n    updated_at timestamptz not null default current_timestamp,\n    deleted_at timestamptz,\n\n    username   text        not null\n);\ntruncate table test;\n\n-- \u901A\u5E38\u7684\u552F\u4E00\u7D22\u5F15\ncreate unique index test_username_key on test (username);\n\n-- \u63D2\u5165\u6570\u636E\ninsert into test(username) values ('wener');\n\n-- \u8F6F\u5220\u9664\nupdate test\nset deleted_at=current_timestamp\nwhere username = 'wener';\n\n-- \u63D2\u5165\u5931\u8D25 - \u5DF2\u7ECF\u5220\u9664\u7684\u8BB0\u5F55\u5F71\u54CD\u65B0\u6570\u636E\ninsert into test(username) values ('wener');\n-- \u79FB\u9664\u7D22\u5F15\ndrop index test_username_key;\n\n-- postgres \u6761\u4EF6\u7D22\u5F15\u5FFD\u7565\u9488\u5BF9\u672A\u5220\u9664\u7684\u552F\u4E00\n-- postgres 15 \u4E4B\u540E\u652F\u6301\u9488\u5BF9 null \u4E5F\u7B97\u552F\u4E00\uFF0C\u521B\u5EFA\u8054\u5408\u7D22\u5F15\u5373\u53EF\n-- mysql \u53EF\u4EE5\u4F7F\u7528\u8054\u5408\u7D22\u5F15\uFF0C\u5C06 deleted_at \u9ED8\u8BA4\u4E3A 0\ncreate unique index test_username_key on test (username) where deleted_at is null;\n\n-- \u6210\u529F - \u5220\u9664\u6570\u636E\u4E0D\u5F71\u54CD\ninsert into test(username) values ('wener');\n-- \u5931\u8D25 - \u5DF2\u7ECF\u5B58\u5728\u4E86\ninsert into test(username) values ('wener');\n-- \u5220\u9664 - \u518D\u6B21\u8F6F\u5220\u9664\nupdate test\nset deleted_at=current_timestamp\nwhere username = 'wener'\n  and deleted_at is null;\n-- \u6210\u529F - \u518D\u6B21\u63D2\u5165\ninsert into test(username) values ('wener');\n\n-- \u4E09\u6761\u8BB0\u5F55\nselect *\nfrom test;\n"})}),"\n",(0,i.jsx)(e.h2,{id:"mongodb-vs-postgresql",children:"MongoDB vs PostgreSQL"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u9ED8\u8BA4\u9009\u62E9 PostgreSQL \u5373\u53EF"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["MongoDB\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"SSPL"}),"\n",(0,i.jsx)(e.li,{children:"\u6587\u6863\u6A21\u578B"}),"\n",(0,i.jsx)(e.li,{children:"BSON"}),"\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u6C34\u5E73\u6269\u5BB9\u8BBE\u8BA1"}),"\n",(0,i.jsx)(e.li,{children:"\u9762\u5411\u7B80\u5355\u67E5\u8BE2"}),"\n",(0,i.jsx)(e.li,{children:"\u5355\u6587\u6863\u539F\u5B50\u4FEE\u6539"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["PostgreSQL\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"PostgreSQL License - \u7C7B\u4F3C MIT"}),"\n",(0,i.jsx)(e.li,{children:"\u884C\u6A21\u578B"}),"\n",(0,i.jsx)(e.li,{children:"JSONB"}),"\n",(0,i.jsx)(e.li,{children:"\u53EF\u4EE5\u6C34\u5E73\u548C\u5782\u76F4\u6269\u5BB9"}),"\n",(0,i.jsx)(e.li,{children:"ACID"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"/notes/db/document/ferretdb",children:"FerretDB"})," \u63D0\u4F9B\u517C\u5BB9\u534F\u8BAE"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"mysql-vs-postgresql",children:"MySQL vs PostgreSQL"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u9ED8\u8BA4\u9009\u62E9 PostgreSQL \u5373\u53EF"}),"\n"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["MySQL CE\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GPL"}),"\n",(0,i.jsx)(e.li,{children:"by Oracle"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u5C0F\u5199\u4E0D\u654F\u611F"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u4E2A\u94FE\u63A5\u4E00\u4E2A\u7EBF\u7A0B"}),"\n",(0,i.jsx)(e.li,{children:"GROUP BY \u65F6\u652F\u6301 SELECT \u975E\u805A\u5408\u5217"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Postgres\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"PostgreSQL License - \u7C7B\u4F3C MIT"}),"\n",(0,i.jsx)(e.li,{children:"\u5927\u5C0F\u5199\u654F\u611F"}),"\n",(0,i.jsx)(e.li,{children:"\u4E00\u4E2A\u94FE\u63A5\u4E00\u4E2A\u8FDB\u7A0B"}),"\n",(0,i.jsx)(e.li,{children:"\u751F\u6001\u66F4\u597D"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 Schema"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 RLS"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301\u66F4\u591A JSON \u7279\u6027 - \u64CD\u4F5C\u3001\u7D22\u5F15"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301\u66F4\u591A CTE"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 \u6269\u5C55"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.bytebase.com/blog/postgres-vs-mysql/",children:"https://www.bytebase.com/blog/postgres-vs-mysql/"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"nats-vs-redis",children:"NATS vs Redis"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["NATS\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6838\u5FC3\u662F \u6D88\u606F"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 request/reply \u6A21\u5F0F"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 \u591A\u79DF\u6237"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 \u66F4\u7075\u6D3B\u7684\u6D88\u606F\u8DEF\u7531, \u96C6\u7FA4\u67B6\u6784"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 KV, ObjectStore, JetStream"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301\u6301\u4E45\u5316\u5B58\u50A8"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301\u81EA\u5B9A\u4E49 AuthZ"}),"\n",(0,i.jsxs)(e.li,{children:["\u26A0\uFE0F \u52A3\u52BF\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8FD0\u7EF4\u66F4\u91CD"}),"\n",(0,i.jsx)(e.li,{children:"KV, ObjectStore \u529F\u80FD\u8584\u5F31\uFF0C\u4E0D\u5B8C\u5584"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Redis/Valkey\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6838\u5FC3\u662F \u5185\u5B58KV\u5B58\u50A8"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301 pubsub, stream - \u57FA\u672C\u548C NATS \u4E00\u81F4"}),"\n",(0,i.jsx)(e.li,{children:"\u7ED3\u6784\u4E30\u5BCC"}),"\n",(0,i.jsx)(e.li,{children:"\u8FD0\u7EF4\u8F7B\u4FBF"}),"\n",(0,i.jsxs)(e.li,{children:["\u26A0\uFE0F \u52A3\u52BF\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4E0D\u652F\u6301 request/reply \u6A21\u5F0F\uFF0C\u9700\u8981\u5E94\u7528\u5C42\u505A\u66F4\u590D\u6742\u7684\u5904\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u4E0D\u652F\u6301\u591A\u79DF\u6237"}),"\n",(0,i.jsx)(e.li,{children:"ACL \u4EE5\u914D\u7F6E\u6587\u4EF6\u7684\u65B9\u5F0F\u5B58\u5728 - \u591A\u4E2A\u8282\u70B9\u540C\u6B65\u590D\u6742"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636E\u9700\u8981\u5168\u90E8\u52A0\u8F7D\u5230\u5185\u5B58"}),"\n",(0,i.jsx)(e.li,{children:"\u96C6\u7FA4\u6A21\u5F0F\u8FD0\u7EF4\u590D\u6742\uFF0C\u9700\u8981\u8003\u8651\u7684\u4E8B\u60C5\u975E\u5E38\u591A"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"data-model",children:"Data Model"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"SQL"}),(0,i.jsx)(e.th,{children:"MongoDB"}),(0,i.jsx)(e.th,{children:"In-Memory"}),(0,i.jsx)(e.th,{children:"Redis"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Database"}),(0,i.jsx)(e.td,{children:"Database"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"DB"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Schema"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"prefix"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Table"}),(0,i.jsx)(e.td,{children:"Collection"}),(0,i.jsx)(e.td,{children:"List"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Row"}),(0,i.jsx)(e.td,{children:"Document"}),(0,i.jsx)(e.td,{children:"Object/Item"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Column"}),(0,i.jsx)(e.td,{children:"Field"}),(0,i.jsx)(e.td,{children:"Field/Attribute"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"PK"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"_id"})}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"View"}),(0,i.jsx)(e.td,{children:"View"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Index"}),(0,i.jsx)(e.td,{children:"Index"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Trigger"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"UDF"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]})]})]})]})}function a(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(x,{...n})}):x(n)}},917776:function(n,e,s){s.d(e,{R:()=>d,x:()=>t});var l=s(7378);let i={},r=l.createContext(i);function d(n){let e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);