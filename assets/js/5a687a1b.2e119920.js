"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["689715"],{866602:function(n,e,l){l.r(e),l.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var r=l(86037),i=l(486106),t=l(917776);let s={slug:"why-need-graphql",title:"\u4E3A\u4EC0\u4E48\u9700\u8981 GraphQL",tags:["\u5F00\u53D1","\u67B6\u6784","GraphQL"]},a="\u4E3A\u4EC0\u4E48\u9700\u8981 GraphQL",c={authorsImageUrls:[]},d=[{value:"GraphQL \u4E0D\u9002\u5408\u573A\u666F",id:"graphql-\u4E0D\u9002\u5408\u573A\u666F",level:2},{value:"\u5E94\u7528\u573A\u666F\u4E3E\u4F8B",id:"\u5E94\u7528\u573A\u666F\u4E3E\u4F8B",level:2},{value:"\u9009\u62E9\u6027\u7684\u8FD4\u56DE\u8F83\u91CD\u7684\u8BF7\u6C42",id:"\u9009\u62E9\u6027\u7684\u8FD4\u56DE\u8F83\u91CD\u7684\u8BF7\u6C42",level:3},{value:"\u590D\u6742\u5173\u8054\u5173\u7CFB",id:"\u590D\u6742\u5173\u8054\u5173\u7CFB",level:3},{value:"\u7F51\u5173\u6574\u5408\u670D\u52A1",id:"\u7F51\u5173\u6574\u5408\u670D\u52A1",level:3},{value:"\u603B\u7ED3",id:"\u603B\u7ED3",level:2}];function h(n){let e={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u9879\u76EE\u5F00\u59CB\u65F6\u4EBA\u5458\u914D\u5907\u4E00\u822C\u6709\u51E0\u79CD\u60C5\u51B5"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u540C\u4E00\u4E2A\u4EBA"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u540C\u4E00\u4E2A\u56E2\u961F"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u4E0D\u540C\u4EBA\u540C\u4E00\u4E2A\u56E2\u961F"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u4E0D\u540C\u4EBA\u4E0D\u540C\u56E2\u961F"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5F00\u53D1\u7684\u5E94\u7528\u4E00\u822C\u533A\u5206\u4E3A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u91CD\u524D\u7AEF"}),"\n",(0,i.jsx)(e.li,{children:"\u91CD\u540E\u7AEF"}),"\n",(0,i.jsx)(e.li,{children:"\u4E1A\u52A1\u6027"}),"\n",(0,i.jsx)(e.li,{children:"\u6570\u636E\u6027"}),"\n",(0,i.jsx)(e.li,{children:"\u5185\u5BB9\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u56E0\u6B64\u4F1A\u9047\u5230\u51E0\u4E2A\u73B0\u8C61"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u5F00\u53D1\u8FDB\u5EA6\u4E0D\u540C"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u76F8\u540C\u6A21\u5757\u529F\u80FD\u590D\u6742\u5EA6\u4E0D\u540C"}),"\n",(0,i.jsx)(e.li,{children:"\u4E0D\u540C\u7684\u540E\u7AEF\u5BF9\u8C61\u6709\u76F8\u540C\u7684\u6570\u636E\u5173\u8054"}),"\n",(0,i.jsx)(e.li,{children:"\u76F8\u540C\u524D\u7AEF\u4E0D\u540C\u6A21\u5757\u9700\u8981\u4E0D\u540C\u6570\u636E"}),"\n",(0,i.jsx)(e.li,{children:"\u4E0D\u540C\u524D\u7AEF\u9700\u8981\u4F7F\u7528\u4E0D\u540C\u6570\u636E"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u7AEF\u8BF7\u6C42\u4E00\u6B21\u6570\u636E\u540E\u4F1A\u518D\u6B21\u53D1\u8D77 N \u6B21\u8BF7\u6C42 - N+1"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u7AEF\u4E00\u4E2A\u6A21\u5757\u9700\u8981\u5BF9\u5E94\u591A\u4E2A\u540E\u7AEF"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u90A3\u4E48\u5C31\u4F1A\u8003\u8651\u51E0\u4E2A\u573A\u666F"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u524D\u7AEF\u81EA\u884C\u9009\u62E9\u8981\u54EA\u4E9B\u6570\u636E\u5B57\u6BB5"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u7AEF\u63D0\u4F9B\u5173\u8054\u7684\u6570\u636E\u9879\u8FDB\u884C\u4E00\u6B21\u6027\u8FD4\u56DE"}),"\n",(0,i.jsx)(e.li,{children:"\u540E\u7AEF\u6574\u5408\u5176\u4ED6\u670D\u52A1\u8FD4\u56DE\u7ED3\u679C\u8FDB\u884C\u4E00\u6B21\u6027\u8FD4\u56DE"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u90A3\u4E48\u8FD9\u65F6\u5019\u5C31\u53EF\u4EE5\u9009\u62E9\u4F7F\u7528 GraphQL\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"graphql-\u4E0D\u9002\u5408\u573A\u666F",children:"GraphQL \u4E0D\u9002\u5408\u573A\u666F"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5FEB\u901F\u8FDB\u5165\u5F00\u53D1 - \u5982\u679C\u9879\u76EE\u521A\u5F00\u59CB\u60F3\u8981\u901F\u5EA6\u5FEB\uFF0C\u90A3\u6700\u597D\u8FD8\u662F REST\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6CA1\u6709\u65F6\u95F4\u6295\u5165\u4E86\u89E3 GraphQL \u65B9\u6848"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4E00\u4E2A\u524D\u7AEF\u4E00\u4E2A\u540E\u7AEF\uFF0C\u524D\u7AEF\u903B\u8F91\u786E\u5B9A\uFF0C\u540E\u7AEF\u4E0D\u9700\u8981\u53D8\u52A8\u5219\u6CA1\u5FC5\u8981\u4F7F\u7528 GraphQL\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4E00\u6B21\u6027\u5DE5\u4F5C\uFF0C\u9879\u76EE\u4E0D\u9700\u8981\u6F14\u8FDB"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u5E94\u7528\u573A\u666F\u4E3E\u4F8B",children:"\u5E94\u7528\u573A\u666F\u4E3E\u4F8B"}),"\n",(0,i.jsx)(e.h3,{id:"\u9009\u62E9\u6027\u7684\u8FD4\u56DE\u8F83\u91CD\u7684\u8BF7\u6C42",children:"\u9009\u62E9\u6027\u7684\u8FD4\u56DE\u8F83\u91CD\u7684\u8BF7\u6C42"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"create table users (\n  id bigint,\n  name text\n);\ncreate table orders (\n  id bigint,\n  user_id bigint,\n  title text\n);\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u73B0\u5728 \u4E2A\u4EBA\u9875 \u9700\u8981\u5728\u8BF7\u6C42\u7528\u6237\u65F6\u540C\u65F6\u8FD4\u56DE\u7528\u6237\u7684\u8BA2\u5355\u603B\u6570\uFF0C\u4F46\u5176\u4ED6\u573A\u666F\u4E0D\u9700\u8981\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"object User {\n  id: Int\n  name: String\n  orderCount: Int # -> select count(*) from orders where user_id = source.id\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u901A\u8FC7 GraphQL \u53EF\u4EE5\u5C06\u9009\u62E9\u7559\u7ED9\u524D\u7AEF\uFF0C\u4E0D\u9700\u8981\u7531\u540E\u7AEF\u53BB\u51B3\u5B9A\u4EC0\u4E48\u65F6\u5019\u8981\u8FD4\u56DE\u4E00\u4E2A\u76F8\u5BF9\u201C\u6602\u8D35\u201D\u7684\u8BF7\u6C42\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u590D\u6742\u5173\u8054\u5173\u7CFB",children:"\u590D\u6742\u5173\u8054\u5173\u7CFB"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"create table users (\n  id bigint,\n  name text\n);\ncreate table articles (\n  id bigint,\n  title text\n);\ncreate table lables (\n  id bigint,\n  color_id bigint,\n  name text\n  target_id bigint,\n  target_type bigint -- User, Label\n);\ncreate table lable_colors (\n  id bigint,\n  color text\n)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u56E0\u4E3A \u7528\u6237 \u548C \u6587\u7AE0 \u90FD\u652F\u6301\u6253\u6807\u7B7E\uFF0C\u56E0\u6B64\u5728\u5B9E\u73B0\u65F6\u76F8\u540C\u7684\u903B\u8F91\u9700\u8981\u591A\u6B21\u5B9E\u73B0\u3002\n\u4F7F\u7528 GraphQL \u7B80\u5316\u5173\u8054\u5BF9\u8C61\u67E5\u8BE2\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"object User {\n  id: Int\n  name: String\n  lables: Label[] # -> select * from lables where target_id = source.id and target_type = 'User'\n}\nobject Article {\n  id: Int\n  title: String\n  lables: Label[] # -> select * from lables where target_id = source.id and target_type = 'Article'\n}\nobject Lable {\n  name: String\n  color: LableColor\n}\nobject LableColor {\n  color: String\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u67E5\u8BE2\u65F6\u5373\u53EF\u4E00\u6B21\u6027\u67E5\u8BE2\uFF0C\u800C\u4E14\u589E\u52A0\u989D\u5916\u7684\u5173\u8054\u4E5F\u76F8\u5BF9\u7B80\u5355\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"user:User{\n  name\n  lables: {\n    name\n    color: {\n      color\n    }\n  }\n}\narticle:Article {\n  title\n  labels: {\n    name\n  }\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u7F51\u5173\u6574\u5408\u670D\u52A1",children:"\u7F51\u5173\u6574\u5408\u670D\u52A1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5047\u8BBE\u6709\u4E00\u4E2A \u5916\u90E8\u7684 \u90AE\u4EF6\u670D\u52A1\uFF0C\u73B0\u5728\u9700\u8981\u5728\u83B7\u53D6\u7528\u6237\u65F6\u540C\u65F6\u8FD4\u56DE\u90AE\u4EF6\u6570\u91CF"}),"\n",(0,i.jsx)(e.li,{children:"\u6B64\u65F6\u53EF\u4EE5\u901A\u8FC7\u7F51\u5173\u5C06\u8BE5\u670D\u52A1\u6574\u5408\u5230\u73B0\u6709\u7684 GraphQL \u670D\u52A1\u4E2D"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"object User {\n  id: Int\n  name: String # \u8BE5\u5B57\u6BB5\u7531\u5B9E\u9645\u540E\u7AEF\u5904\u7406\n  emailCount: Int # \u8BE5\u5B57\u6BB5\u7531\u7F51\u5173\u5C42\u8FDB\u884C\u5904\u7406\n}\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u603B\u7ED3",children:"\u603B\u7ED3"}),"\n",(0,i.jsx)(e.p,{children:"\u9700\u8981 GraphQL \u7684\u7406\u7531\u5176\u5B9E\u5F88\u7B80\u5355\uFF0C\u5C31\u662F\u5F53\u540E\u7AEF\u7684\u67E5\u8BE2\u4EE3\u7801\u5199\u7684 \u201C\u5F88\u70E6\u201D \u7684\u65F6\u5019\uFF0C\u9700\u8981\u4ECE\u4E2D\u89E3\u8131\u51FA\u6765\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u9009\u62E9\u4F7F\u7528 GraphQL\uFF0C\u7ED9\u524D\u7AEF\u66F4\u5927\u7684\u9009\u62E9\u548C\u63A7\u5236\u6743\u3002"}),"\n",(0,i.jsx)(e.admonition,{title:"\u4F7F\u7528\u6CE8\u610F\u4E8B\u9879",type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["GraphQL \u672C\u8EAB\u5C31\u5305\u542B\u4E86\u6587\u6863\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4E0D\u50CF REST \u8FD8\u8981\u7EF4\u62A4 Swagger/OpenAPI"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u540E\u7AEF\u5C3D\u91CF\u9009\u62E9\u652F\u6301\u751F\u6210 GraphQL \u7684 \u65B9\u5F0F/\u6846\u67B6/\u5DE5\u5177"}),"\n",(0,i.jsx)(e.li,{children:"\u751F\u6210\u533A\u5206\u4E3A \u5148 Schema \u6216 \u5148 Entity - \u770B\u60C5\u51B5\u6309\u9700"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u7AEF\u4F7F\u7528 TypeScript \u80FD\u591F\u5229\u7528 GraphQL Schema \u7C7B\u578B\u4FE1\u606F"}),"\n",(0,i.jsxs)(e.li,{children:["\u6700\u597D\u662F\u989D\u5916\u63D0\u4F9B Entity Schema/Metadata/JSONSchema \u7ED9\u524D\u7AEF\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u91CD\u6570\u636E\u573A\u666F\u524D\u7AEF\u7EC4\u4EF6\u53EF\u76F4\u63A5\u751F\u6210"}),"\n",(0,i.jsx)(e.li,{children:"\u524D\u7AEF\u53EF\u6309\u7167 Schema \u751F\u6210\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n"]})})]})}function o(n={}){let{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(h,{...n})}):h(n)}},917776:function(n,e,l){l.d(e,{R:()=>s,x:()=>a});var r=l(7378);let i={},t=r.createContext(i);function s(n){let e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),r.createElement(t.Provider,{value:e},n.children)}},86037:function(n){n.exports=JSON.parse('{"permalink":"/story/why-need-graphql","editUrl":"https://github.com/wenerme/wener/edit/master/story/../story/2021/2021-01-16-why-need-graphql.md","source":"@site/../story/2021/2021-01-16-why-need-graphql.md","title":"\u4E3A\u4EC0\u4E48\u9700\u8981 GraphQL","description":"\u9879\u76EE\u5F00\u59CB\u65F6\u4EBA\u5458\u914D\u5907\u4E00\u822C\u6709\u51E0\u79CD\u60C5\u51B5","date":"2021-01-16T00:00:00.000Z","tags":[{"inline":true,"label":"\u5F00\u53D1","permalink":"/story/tags/\u5F00\u53D1"},{"inline":true,"label":"\u67B6\u6784","permalink":"/story/tags/\u67B6\u6784"},{"inline":true,"label":"GraphQL","permalink":"/story/tags/graph-ql"}],"readingTime":2.97,"hasTruncateMarker":true,"authors":[],"frontMatter":{"slug":"why-need-graphql","title":"\u4E3A\u4EC0\u4E48\u9700\u8981 GraphQL","tags":["\u5F00\u53D1","\u67B6\u6784","GraphQL"]},"unlisted":false,"prevItem":{"title":"AlpineLinux \u5B89\u88C5 Xfce \u684C\u9762","permalink":"/story/alpinelinux-setup-xfce"},"nextItem":{"title":"\u7406\u89E3\u5B69\u5B50\u7684\u89C6\u529B","permalink":"/story/understand-baby-vision"}}')}}]);