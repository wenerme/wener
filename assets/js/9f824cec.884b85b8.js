"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["66952"],{36457:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>d,toc:()=>o,default:()=>a,metadata:()=>s,assets:()=>c,contentTitle:()=>t});var s=JSON.parse('{"id":"web/spec/js-dom-faq","title":"JS DOM FAQ","description":"open vs visible","source":"@site/../notes/web/spec/js-dom-faq.md","sourceDirName":"web/spec","slug":"/web/spec/js-dom-faq","permalink":"/notes/web/spec/js-dom-faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/web/spec/js-dom-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1677222278000,"frontMatter":{"tags":["FAQ"]},"sidebar":"docs","previous":{"title":"IWAs","permalink":"/notes/web/spec/iwa"},"next":{"title":"Messaging","permalink":"/notes/web/spec/messaging"}}'),i=l(86106),r=l(17776);let d={tags:["FAQ"]},t="JS DOM FAQ",c={},o=[{value:"open vs visible",id:"open-vs-visible",level:2},{value:"query sibling",id:"query-sibling",level:2},{value:"trackFocus",id:"trackfocus",level:2},{value:"DOM \u4E8B\u4EF6",id:"dom-\u4E8B\u4EF6",level:2},{value:"document vs body",id:"document-vs-body",level:2},{value:"target vs currentTarget vs relatedTarget",id:"target-vs-currenttarget-vs-relatedtarget",level:2},{value:"KeyboardEvent.key",id:"keyboardeventkey",level:2},{value:"KeyboardEvent.code",id:"keyboardeventcode",level:2},{value:"Refused to set unsafe header &quot;Content-Length&quot;",id:"refused-to-set-unsafe-header-content-length",level:2},{value:"\u76D1\u542C\u662F\u5426\u5728\u5F53\u524D\u9875\u9762",id:"\u76D1\u542C\u662F\u5426\u5728\u5F53\u524D\u9875\u9762",level:2}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"js-dom-faq",children:"JS DOM FAQ"})}),"\n",(0,i.jsx)(n.h2,{id:"open-vs-visible",children:"open vs visible"}),"\n",(0,i.jsx)(n.p,{children:"\u63A5\u53E3\u9009\u62E9 open \u8FD8\u662F visible \u5C5E\u6027\uFF1F"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["open - \u63A8\u8350\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"open/close"}),"\n",(0,i.jsx)(n.li,{children:"onClose"}),"\n",(0,i.jsx)(n.li,{children:"\u4E00\u822C\u5F88\u5C11\u89C1 onOpenChange, \u53EF\u80FD\u76F4\u63A5 onChange"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["visible\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"onVisbleChange \u5E38\u89C1\uFF0C\u76F4\u89C2"}),"\n",(0,i.jsx)(n.li,{children:"\u4F46 visible \u4E00\u822C\u610F\u5473\u7740 dom \u5B58\u5728\u3001\u5360\u7528\u4F4D\u7F6E"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["dialog\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4F7F\u7528 open \u5C5E\u6027"}),"\n",(0,i.jsx)(n.li,{children:"show(), showModal()"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["HTMLPopupElement\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4F7F\u7528 open \u5C5E\u6027"}),"\n",(0,i.jsx)(n.li,{children:"show(), hide()"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["CSS\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"visible \u5360\u7528\u4F4D\u7F6E"}),"\n",(0,i.jsx)(n.li,{children:"display:none \u4E0D\u5360\u7528\u4F4D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["headlessui\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7EDF\u4E00\u4F7F\u7528 open \u5C5E\u6027"}),"\n",(0,i.jsx)(n.li,{children:"\u4F20\u9012 close \u65B9\u6CD5"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"query-sibling",children:"query sibling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"function siblings(node, query) {\n  var parent = node.parentElement;\n  var index = [].slice.call(parent.children).indexOf(node) + 1;\n  // nth-child \u4F1A\u5339\u914D\u5230\u4E0B\u7EA7\n  return parent.querySelectorAll(`:nth-child(${index}) ~ ${query}`);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"trackfocus",children:"trackFocus"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"const trackFocus = (p) => {\n  const o = p.focus;\n  p.focus = function (...args) {\n    console.log(new Error().stack);\n    return o.apply(this, args);\n  };\n};\ntrackFocus(HTMLElement.prototype);\ntrackFocus(SVGElement.prototype);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"dom-\u4E8B\u4EF6",children:"DOM \u4E8B\u4EF6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window#event_handlers",children:"window"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"appinstalled"}),"\n",(0,i.jsx)(n.li,{children:"devicemotion, deviceorientation"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers",children:"WindowEventHandlers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"hash, storage, online, offline, load, unload"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Document#event_handlers",children:"document"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"afterscriptexecute, beforescriptexecute, fullscreenchange, fullscreenerror, selectionchange, visibilitychange"}),"\n",(0,i.jsx)(n.li,{children:"\u5927\u591A\u4E8B\u4EF6\u5728 window \u4E5F\u80FD\u76D1\u542C\u5230"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers",children:"GlobalEventHandlers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"HTMLElement, Document, Window \u90FD\u652F\u6301\u7684\u4E8B\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5176\u4ED6\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"navigator.clipboard - cut, copy, paste"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget",children:"EventTarget"})," \u7684\u5B50\u7C7B"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"document-vs-body",children:"document vs body"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["document - HTML\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["document.documentElement -> ",(0,i.jsx)(n.code,{children:"<html>"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["body\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<body>"})," or ",(0,i.jsx)(n.code,{children:"<frameset>"})," or null"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"target-vs-currenttarget-vs-relatedtarget",children:"target vs currentTarget vs relatedTarget"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"target - \u89E6\u53D1\u4E8B\u4EF6\u7684\u5143\u7D20"}),"\n",(0,i.jsx)(n.li,{children:"currentTarget - \u4E8B\u4EF6\u76D1\u542C\u7684\u5143\u7D20"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/relatedTarget",children:"relatedTarget"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9F20\u6807\u4E8B\u4EF6\u76F8\u5173\u5143\u7D20"}),"\n",(0,i.jsx)(n.li,{children:"\u8FDB\u5165\u3001\u79BB\u5F00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"keyboardeventkey",children:"KeyboardEvent.key"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Chrom 51+"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values",children:"Key Values"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"keyboardeventcode",children:"KeyboardEvent.code"}),"\n",(0,i.jsx)(n.admonition,{title:"\u5C3D\u91CF\u4F7F\u7528 KeyboardEvent.key",type:"caution",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["KeyboardEvent.code\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5FFD\u7565\u7528\u6237\u952E\u76D8\u5E03\u5C40"}),"\n",(0,i.jsx)(n.li,{children:"\u66F4\u9002\u7528\u4E8E\u6E38\u620F\u7B49\u975E\u8F93\u5165\u573A\u666F"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Chrom 48+"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code/code_values",children:"Code Values"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"refused-to-set-unsafe-header-content-length",children:'Refused to set unsafe header "Content-Length"'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["W3C XMLHttpRequest Level 1 4.6.2 \u5B9A\u4E49\u7684\u4E0D\u5141\u8BB8\u4FEE\u6539\u7684\u5934\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Accept-Charset"}),"\n",(0,i.jsx)(n.li,{children:"Accept-Encoding"}),"\n",(0,i.jsx)(n.li,{children:"Access-Control-Request-Headers"}),"\n",(0,i.jsx)(n.li,{children:"Access-Control-Request-Method"}),"\n",(0,i.jsx)(n.li,{children:"Connection"}),"\n",(0,i.jsx)(n.li,{children:"Content-Length"}),"\n",(0,i.jsx)(n.li,{children:"Cookie"}),"\n",(0,i.jsx)(n.li,{children:"Cookie2"}),"\n",(0,i.jsx)(n.li,{children:"Date"}),"\n",(0,i.jsx)(n.li,{children:"DNT"}),"\n",(0,i.jsx)(n.li,{children:"Expect"}),"\n",(0,i.jsx)(n.li,{children:"Host"}),"\n",(0,i.jsx)(n.li,{children:"Keep-Alive"}),"\n",(0,i.jsx)(n.li,{children:"Origin"}),"\n",(0,i.jsx)(n.li,{children:"Referer"}),"\n",(0,i.jsx)(n.li,{children:"TE"}),"\n",(0,i.jsx)(n.li,{children:"Trailer"}),"\n",(0,i.jsx)(n.li,{children:"Transfer-Encoding"}),"\n",(0,i.jsx)(n.li,{children:"Upgrade"}),"\n",(0,i.jsx)(n.li,{children:"User-Agent"}),"\n",(0,i.jsx)(n.li,{children:"Via"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u76D1\u542C\u662F\u5426\u5728\u5F53\u524D\u9875\u9762",children:"\u76D1\u542C\u662F\u5426\u5728\u5F53\u524D\u9875\u9762"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"document.addEventListener('visibilitychange', () => {\n  console.log(`hidden`, document.hidden);\n});\nwindow.addEventListener('blur', () => {\n  console.log(`blur`, !document.hasFocus());\n});\nwindow.addEventListener('focus', () => {\n  console.log(`focus`, document.hasFocus());\n});\n"})})]})}function a(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},17776:function(e,n,l){l.d(n,{R:()=>d,x:()=>t});var s=l(7378);let i={},r=s.createContext(i);function d(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);