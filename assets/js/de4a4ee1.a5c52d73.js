"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["79505"],{86155:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>t,toc:()=>d,default:()=>h,metadata:()=>i,assets:()=>a,contentTitle:()=>c});var i=JSON.parse('{"id":"voip/asterisk/asterisk-build","title":"Build Asterisk","description":"- debian \u80FD\u5B89\u88C5 16","source":"@site/../notes/voip/asterisk/asterisk-build.md","sourceDirName":"voip/asterisk","slug":"/voip/asterisk/build","permalink":"/notes/voip/asterisk/build","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/voip/asterisk/asterisk-build.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1626706991000,"frontMatter":{"title":"Build Asterisk"},"sidebar":"docs","previous":{"title":"Asterisk Awesome","permalink":"/notes/voip/asterisk/awesome"},"next":{"title":"Asterisk CDR","permalink":"/notes/voip/asterisk/cdr"}}'),r=n(86106),l=n(17776);let t={title:"Build Asterisk"},c="Build Asterisk",a={},d=[{value:"Asterisk Crash",id:"asterisk-crash",level:2},{value:"There are no local system nameservers configured, resorting to system resolution",id:"there-are-no-local-system-nameservers-configured-resorting-to-system-resolution",level:2},{value:"AlpineLinux musl \u95EE\u9898",id:"alpinelinux-musl-\u95EE\u9898",level:2}];function o(e){let s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"build-asterisk",children:"Build Asterisk"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["debian \u80FD\u5B89\u88C5 16\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u6CA1\u6709 codec_ilbc, app_meetme\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"ilbc -> opus"}),"\n",(0,r.jsx)(s.li,{children:"meetme -> ConfBridge"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["alpine \u80FD\u5B89\u88C5 18 - \u6700\u65B0 \b lts \u7248 - \u4F46\u6709\u4E9B\u573A\u666F\u53EF\u80FD crash\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u53EF\u4EE5\u8003\u8651\u57FA\u4E8E frolvlad/alpine-glibc \u4ECE\u65B0\u6784\u5EFA"}),"\n",(0,r.jsxs)(s.li,{children:["\u6CA1\u6709 codec_opus_open_source - ",(0,r.jsx)(s.a,{href:"https://gitlab.alpinelinux.org/alpine/aports/-/issues/12808",children:"#12808"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"\u5982\u679C\u9700\u8981 certificated asterisk \u7248\u672C\u53EA\u80FD\u81EA\u5DF1\u6784\u5EFA"}),"\n",(0,r.jsxs)(s.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["aports ",(0,r.jsx)(s.a,{href:"https://github.com/alpinelinux/aports/blob/master/main/asterisk/APKBUILD",children:"main/asterisk/APKBUILD"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://github.com/andrius/asterisk",children:"andrius/asterisk"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"debian, centos \u6784\u5EFA\u4E2A\u4E2A\u7248\u672C asterisk"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["debian\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5171\u4EAB\u8D44\u6E90\u4F4D\u4E8E /usr/share/asterisk"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"caution",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["opus \u7F16\u7801\u6A21\u5757\u4E0D\u662F\u5F00\u6E90\u7684 - \u9ED8\u8BA4\u5B89\u88C5\u662F\u7528\u5B98\u65B9\u4E0B\u8F7D - \u4F1A phonehome \u5230 stats.asterisk.org\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["debian \u7684 opus \u57FA\u4E8E ",(0,r.jsx)(s.a,{href:"https://github.com/traud/asterisk-opus",children:"traud/asterisk-opus"})]}),"\n",(0,r.jsx)(s.li,{children:"\u4E3B\u8981\u5305\u542B codec_opus \u548C format_ogg_opus"}),"\n",(0,r.jsxs)(s.li,{children:["debian \u6E90\u7801 ",(0,r.jsx)(s.a,{href:"https://salsa.debian.org/pkg-voip-team/asterisk-opus",children:"pkg-voip-team/asterisk-opus"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://web.archive.org/web/20161003135358/http://blogs.digium.com/2016/09/30/opus-in-asterisk/",children:"Opus for Asterisk"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5B98\u65B9\u7684\u8BF4\u6CD5\u662F\u56E0\u4E3A\u6CD5\u5F8B\u5173\u7CFB\u6240\u4EE5\u4E0D\u5F00\u653E\u6E90\u7801"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# \u6784\u5EFA doc xml\n# \u53EF\u7528\u4E8E\u751F\u6210\u4EE3\u7801\u6216\u6587\u6863\n# core \u505A\u4E86 html escape, full \u6CA1\u6709 - \u4E24\u4E2A\u533A\u522B\u4E0D\u5927\nmake doc/core-en_US.xml\nmake doc/full-en_US.xml\n\n# \u6A21\u5757\u652F\u6301\u72B6\u6001\ngrep -rP '^\\t<support_level>' $(find . -name '*.c') | sed -re 's#</?support_level>##g' | sort\n"})}),"\n",(0,r.jsx)(s.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(s.h2,{id:"asterisk-crash",children:"Asterisk Crash"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Dial \u65F6 WebSocket \u53D1\u9001 DTMF\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Debian 16.16 crash"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Echo \u5E94\u7528\u6309\u4EFB\u610F\u952E\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"18 alpinelinux crash"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Asterisk crashes during call transfer ",(0,r.jsx)(s.a,{href:"https://issues.asterisk.org/jira/browse/ASTERISK-29168",children:"ASTERISK-29168"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"pbx_realtime diaplans"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"there-are-no-local-system-nameservers-configured-resorting-to-system-resolution",children:"There are no local system nameservers configured, resorting to system resolution"}),"\n",(0,r.jsx)(s.p,{children:"musl \u4E0D\u652F\u6301"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5BFC\u81F4 pjsip \u65E0\u6CD5\u4F7F\u7528 DNS SRV \u800C\u4F7F\u7528 A \u548C AAAA \u89E3\u6790"}),"\n",(0,r.jsxs)(s.li,{children:["\u53C2\u8003\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://github.com/asterisk/asterisk/blob/b4347c486150653ec7ce1d129e8f9017c69344da/res/res_pjsip/config_system.c#L266-L270",children:"res/res_pjsip/config_system.c#L266-L270"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u8DD1\u51FA\u5F02\u5E38\u7684\u5730\u65B9"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://github.com/asterisk/asterisk/blob/b4347c486150653ec7ce1d129e8f9017c69344da/configure.ac#L1415-L1471",children:"configure.ac#L1415-L1471"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u4F9D\u8D56\u7684\u7CFB\u7EDF\u51FD\u6570"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"musl \u672A\u5B9E\u73B0 res_ninit"}),"\n",(0,r.jsxs)(s.li,{children:["\u53EF\u4EE5\u5C1D\u8BD5\u8BE5 patch ",(0,r.jsx)(s.a,{href:"https://github.com/openembedded/openembedded-core/blob/master/meta/recipes-connectivity/connman/connman/0002-resolve-musl-does-not-implement-res_ninit.patch",children:"0002-resolve-musl-does-not-implement-res_ninit.patch"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"alpinelinux-musl-\u95EE\u9898",children:"AlpineLinux musl \u95EE\u9898"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["segfault\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"agi dump html"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"pjsip \u65E0\u6CD5\u83B7\u53D6 nameserver"}),"\n"]})]})}function h(e={}){let{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},17776:function(e,s,n){n.d(s,{R:()=>t,x:()=>c});var i=n(7378);let r={},l=i.createContext(r);function t(e){let s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);