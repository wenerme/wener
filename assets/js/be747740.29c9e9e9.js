"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["78316"],{393531:function(e,i,t){t.r(i),t.d(i,{frontMatter:()=>n,toc:()=>l,default:()=>d,metadata:()=>r,assets:()=>c,contentTitle:()=>o});var r=JSON.parse('{"id":"devops/web/apisix/apisix-faq","title":"APISIX FAQ","description":"failed to process entries unable to get local issuer certificate, context: ngx.timer","source":"@site/../notes/devops/web/apisix/apisix-faq.md","sourceDirName":"devops/web/apisix","slug":"/devops/web/apisix/faq","permalink":"/notes/devops/web/apisix/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/web/apisix/apisix-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1733281920000,"frontMatter":{"tags":["FAQ"]},"sidebar":"docs","previous":{"title":"Apache APISIX","permalink":"/notes/devops/web/apisix/"},"next":{"title":"Caddy","permalink":"/notes/devops/web/caddy/"}}'),s=t(486106),a=t(917776);let n={tags:["FAQ"]},o="APISIX FAQ",c={},l=[{value:"failed to process entries: 20: unable to get local issuer certificate, context: ngx.timer",id:"failed-to-process-entries-20-unable-to-get-local-issuer-certificate-context-ngxtimer",level:2},{value:"removing batch processor stale object",id:"removing-batch-processor-stale-object",level:2},{value:"an upstream response is buffered to a temporary file",id:"an-upstream-response-is-buffered-to-a-temporary-file",level:2},{value:"tls: failed to verify certificate: x509: certificate signed by unknown authority",id:"tls-failed-to-verify-certificate-x509-certificate-signed-by-unknown-authority",level:2}];function p(e){let i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"apisix-faq",children:"APISIX FAQ"})}),"\n",(0,s.jsx)(i.h2,{id:"failed-to-process-entries-20-unable-to-get-local-issuer-certificate-context-ngxtimer",children:"failed to process entries: 20: unable to get local issuer certificate, context: ngx.timer"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"ssl_verify: false\n"})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"\u914D\u7F6E CA"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"apisix:\n  ssl:\n    ssl_trusted_certificate: /path/to/certs/ca-certificates.crt\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"elasticsearch-logger"}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://apisix.apache.org/docs/apisix/FAQ/#how-do-i-fix-the-error-unable-to-get-local-issuer-certificate-in-apache-apisix",children:"https://apisix.apache.org/docs/apisix/FAQ/#how-do-i-fix-the-error-unable-to-get-local-issuer-certificate-in-apache-apisix"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://github.com/apache/apisix/issues/4370",children:"https://github.com/apache/apisix/issues/4370"})}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"removing-batch-processor-stale-object",children:"removing batch processor stale object"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"\u4E0D\u4F1A\u4E22\u5931\u6570\u636E\uFF0C\u53EA\u662F\u6E05\u7406\u8FC7\u671F\u7684 processor"}),"\n",(0,s.jsx)(i.li,{children:"remove stale objects from the memory after timer expires"}),"\n",(0,s.jsx)(i.li,{children:"30min"}),"\n",(0,s.jsxs)(i.li,{children:["ngx.timer.at\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://moonbingbing.gitbooks.io/openresty-best-practices/content/ngx_lua/timer.html",children:"https://moonbingbing.gitbooks.io/openresty-best-practices/content/ngx_lua/timer.html"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://github.com/openresty/lua-nginx-module",children:"https://github.com/openresty/lua-nginx-module"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://github.com/apache/apisix/blob/b024f683ef6f5310a180cdb6f792365e4c78f33a/apisix/utils/batch-processor-manager.lua#L52-L67",children:"https://github.com/apache/apisix/blob/b024f683ef6f5310a180cdb6f792365e4c78f33a/apisix/utils/batch-processor-manager.lua#L52-L67"})}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"an-upstream-response-is-buffered-to-a-temporary-file",children:"an upstream response is buffered to a temporary file"}),"\n",(0,s.jsx)(i.p,{children:"\u8D85\u51FA proxy_buffer_size \u540E\u5199\u5165\u4E34\u65F6\u6587\u4EF6"}),"\n",(0,s.jsx)(i.p,{children:"\u6CA1\u95EE\u9898"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"proxy_buffer_size 4k; # \u9ED8\u8BA4 4k or 8k\n# proxy_buffers number size;\nproxy_buffers 8 4k;  # \u9ED8\u8BA4 4k or 8k\n\nproxy_max_temp_file_size 1024m\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"http://nginx.org/en/docs/http/ngx_http_proxy_module.html",children:"http://nginx.org/en/docs/http/ngx_http_proxy_module.html"})}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"tls-failed-to-verify-certificate-x509-certificate-signed-by-unknown-authority",children:"tls: failed to verify certificate: x509: certificate signed by unknown authority"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:'2023-12-21T18:50:39Z	error	apisix/route.go:90	failed to list routes: Get "https://apisix-control-plane:9180/apisix/admin/routes": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "apisix-ca")\n2023-12-21T18:50:39Z	error	apisix/cluster.go:298	failed to list routes in APISIX: Get "https://apisix-control-plane:9180/apisix/admin/routes": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "apisix-ca")\n2023-12-21T18:50:39Z	error	apisix/plugin.go:46	failed to list plugins\' names: Get "https://apisix-control-plane:9180/apisix/admin/plugins?all=true": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "apisix-ca")\n2023-12-21T18:50:39Z	error	apisix/cluster.go:483	failed to list plugin names in APISIX: Get "https://apisix-control-plane:9180/apisix/admin/plugins?all=true": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "apisix-ca")\n2023-12-21T18:50:39Z	error	apisix/cluster.go:446	failed to sync schema: Get "https://apisix-control-plane:9180/apisix/admin/plugins?all=true": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "apisix-ca")\n2023-12-21T18:50:41Z	error	apisix/route.go:90	failed to list routes: Get "https://apisix-control-plane:9180/apisix/admin/routes": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "apisix-ca")\n'})})]})}function d(e={}){let{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},917776:function(e,i,t){t.d(i,{R:()=>n,x:()=>o});var r=t(7378);let s={},a=r.createContext(s);function n(e){let i=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),r.createElement(a.Provider,{value:i},e.children)}}}]);