"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["761318"],{881164:function(e,n,l){l.r(n),l.d(n,{frontMatter:()=>i,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>c});var s=JSON.parse('{"id":"db/relational/postgresql/postgresql-ops","title":"PostgreSQL \u8FD0\u7EF4","description":"- VACUUM","source":"@site/../notes/db/relational/postgresql/postgresql-ops.md","sourceDirName":"db/relational/postgresql","slug":"/db/relational/postgresql/ops","permalink":"/notes/db/relational/postgresql/ops","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/postgresql/postgresql-ops.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1715155165000,"frontMatter":{"title":"PostgreSQL \u8FD0\u7EF4"},"sidebar":"docs","previous":{"title":"PostgreSQL OLAP","permalink":"/notes/db/relational/postgresql/olap"},"next":{"title":"Table Partitioning","permalink":"/notes/db/relational/postgresql/partition"}}'),r=l(486106),t=l(917776);let i={title:"PostgreSQL \u8FD0\u7EF4"},c="PostgreSQL \u8FD0\u7EF4",o={},d=[{value:"vacuum",id:"vacuum",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"postgresql-\u8FD0\u7EF4",children:"PostgreSQL \u8FD0\u7EF4"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.postgresql.org/docs/current/sql-vacuum.html",children:"VACUUM"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.postgresql.org/docs/current/sql-analyze.html",children:"ANALYZE"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"vacuum",children:"vacuum"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5783\u573E\u6536\u96C6\u548C\u5206\u6790"}),"\n",(0,r.jsxs)(n.li,{children:["VACUUM\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9ED8\u8BA4 \u5E76\u884C"}),"\n",(0,r.jsx)(n.li,{children:"\u4E0D\u4F1A\u9501\u8868"}),"\n",(0,r.jsx)(n.li,{children:"\u4F46\u7A7A\u95F4\u4E0D\u4F1A\u9A6C\u4E0A\u8FD4\u8FD8\u5230\u7CFB\u7EDF"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"-- \u63A8\u8350\u8BED\u6CD5 - 9.0+\nVACUUM [ ( option [, ...] ) ] [ table_and_columns [, ...] ]\nVACUUM [ FULL ] [ FREEZE ] [ VERBOSE ] [ ANALYZE ] [ table_and_columns [, ...] ]\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["FULL\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u91CD\u5199\u8868\u5185\u5BB9\u3001\u91CD\u6784\u7D22\u5F15"}),"\n",(0,r.jsx)(n.li,{children:"\u9501\u8868"}),"\n",(0,r.jsx)(n.li,{children:"\u901A\u5E38\u7528\u4E8E\u4F1A\u56DE\u6536\u975E\u5E38\u591A\u6570\u636E\u7684\u60C5\u51B5"}),"\n",(0,r.jsx)(n.li,{children:"\u9690\u542B REINDEX, FREEZE"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["FREEZE\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"vacuum_freeze_min_age, vacuum_freeze_table_age = 0"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"VERBOSE - \u8868\u8BE6\u7EC6\u4FE1\u606F"}),"\n",(0,r.jsx)(n.li,{children:"ANALYZE - \u540C\u65F6\u6267\u884C ANALYZE"}),"\n",(0,r.jsx)(n.li,{children:"DISABLE_PAGE_SKIPPING"}),"\n",(0,r.jsx)(n.li,{children:"SKIP_LOCKED"}),"\n",(0,r.jsxs)(n.li,{children:["INDEX_CLEANUP\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u79FB\u9664\u6307\u5411\u65E0\u6548\u8BB0\u5F55\u7684\u7D22\u5F15"}),"\n",(0,r.jsx)(n.li,{children:"\u9ED8\u8BA4\u5F00\u542F - vacuum_index_cleanup"}),"\n",(0,r.jsx)(n.li,{children:"\u5982\u679C\u60F3\u5FEB\u901F VACUUM \u53EF\u5173\u95ED"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["TRUNCATE\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9ED8\u8BA4\u5F00\u542F - vacuum_truncate"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"PARALLEL"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- \u5E38\u7528\nVACUUM (VERBOSE, ANALYZE) my_tab\n"})})]})}function h(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},917776:function(e,n,l){l.d(n,{R:()=>i,x:()=>c});var s=l(7378);let r={},t=s.createContext(r);function i(e){let n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);