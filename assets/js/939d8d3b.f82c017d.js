"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["34596"],{83323:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>r,toc:()=>o,default:()=>x,metadata:()=>s,assets:()=>h,contentTitle:()=>d});var s=JSON.parse('{"id":"service/network/proxy/mihomo/README","title":"mihomo","description":"- MetaCubeX/mihomo","source":"@site/../notes/service/network/proxy/mihomo/README.md","sourceDirName":"service/network/proxy/mihomo","slug":"/service/network/proxy/mihomo/","permalink":"/notes/service/network/proxy/mihomo/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/proxy/mihomo/README.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1743657456000,"frontMatter":{"title":"mihomo"},"sidebar":"docs","previous":{"title":"hysteria","permalink":"/notes/service/network/proxy/hysteria"},"next":{"title":"Mihomo \u914D\u7F6E","permalink":"/notes/service/network/proxy/mihomo/conf"}}'),t=i(86106),l=i(17776);let r={title:"mihomo"},d="mihomo",h={},o=[{value:"\u914D\u7F6E",id:"config",level:2},{value:"Notes",id:"notes",level:2},{value:"ASN",id:"asn",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"mihomo",children:"mihomo"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/MetaCubeX/mihomo/tree/Alpha",children:"MetaCubeX/mihomo"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"GPLv3"}),"\n",(0,t.jsxs)(n.li,{children:["fork \u81EA ",(0,t.jsx)(n.a,{href:"/notes/service/network/proxy/clash/",children:"clash"})]}),"\n",(0,t.jsx)(n.li,{children:"Clash.Meta -> mihomo"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/MetaCubeX/metacubexd",children:"MetaCubeX/metacubexd"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u524D\u7AEF"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install mihomo # macOS\n\n# https://github.com/MetaCubeX/mihomo/releases\nVERSION=1.19.2\n# macOS\ncurl -L -o mihomo.gz https://github.com/MetaCubeX/mihomo/releases/download/v${VERSION}/mihomo-darwin-arm64-v${VERSION}.gz\n# Linux\ncurl -L -o mihomo.gz https://github.com/MetaCubeX/mihomo/releases/download/v${VERSION}/mihomo-linux-amd64-compatible-v${VERSION}.gz\n\ngzip -d mihomo.gz\nchmod +x mihomo\n./mihomo -v\n./mihomo --help\n\n# install\nsudo mv mihomo /usr/local/bin/mihomo\n\ncurl -LO https://github.com/wenerme/wener/raw/master/notes/service/network/proxy/clash/mihomo.openrc.sh\nsudo mv mihomo.openrc.sh /etc/init.d/mihomo\nsudo chmod +x /etc/init.d/mihomo\n\n# /etc/mihomo/config.yaml\nmkdir -p /etc/mihomo\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"flag"}),(0,t.jsx)(n.th,{children:"env"}),(0,t.jsx)(n.th,{children:"for"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-config BASE64"})}),(0,t.jsx)(n.td,{children:"CLASH_CONFIG_STRING"}),(0,t.jsx)(n.td,{children:"base64-encoded \u914D\u7F6E\u5185\u5BB9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-d DIR"})}),(0,t.jsx)(n.td,{children:"CLASH_HOME_DIR"}),(0,t.jsx)(n.td,{children:"\u914D\u7F6E\u76EE\u5F55"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-ext-ctl ADDR"})}),(0,t.jsx)(n.td,{children:"CLASH_OVERRIDE_EXTERNAL_CONTROLLER"}),(0,t.jsx)(n.td,{children:"\u5916\u90E8\u63A7\u5236\u5668\u5730\u5740"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-ext-ctl-pipe ADDR"})}),(0,t.jsx)(n.td,{children:"CLASH_OVERRIDE_EXTERNAL_CONTROLLER_PIPE"}),(0,t.jsx)(n.td,{children:"\u5916\u90E8\u63A7\u5236\u5668\u7BA1\u9053\u5730\u5740"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-ext-ctl-unix ADDR"})}),(0,t.jsx)(n.td,{children:"CLASH_OVERRIDE_EXTERNAL_CONTROLLER_UNIX"}),(0,t.jsx)(n.td,{children:"\u5916\u90E8\u63A7\u5236\u5668 Unix \u5730\u5740"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-ext-ui DIR"})}),(0,t.jsx)(n.td,{children:"CLASH_OVERRIDE_EXTERNAL_UI_DIR"}),(0,t.jsx)(n.td,{children:"\u5916\u90E8 UI \u76EE\u5F55"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-f FILE"})}),(0,t.jsx)(n.td,{children:"CLASH_CONFIG_FILE"}),(0,t.jsx)(n.td,{children:"\u914D\u7F6E\u6587\u4EF6"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-m"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"GeoData \u6A21\u5F0F"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-secret SECRET"})}),(0,t.jsx)(n.td,{children:"CLASH_OVERRIDE_SECRET"}),(0,t.jsx)(n.td,{children:"RESTful API \u5BC6\u94A5"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"-t"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"\u6D4B\u8BD5\u914D\u7F6E\u5E76\u9000\u51FA"})]})]})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"QUIC_GO_DISABLE_GSO"}),"\n",(0,t.jsx)(n.li,{children:"QUIC_GO_DISABLE_ECN"}),"\n",(0,t.jsx)(n.li,{children:"DISABLE_SYSTEM_HOSTS"}),"\n",(0,t.jsx)(n.li,{children:"DISABLE_LOOPBACK_DETECTOR"}),"\n",(0,t.jsx)(n.li,{children:"SKIP_SAFE_PATH_CHECK"}),"\n",(0,t.jsx)(n.li,{children:"DISABLE_SYSTEM_CA"}),"\n",(0,t.jsx)(n.li,{children:"DISABLE_EMBED_CA"}),"\n",(0,t.jsxs)(n.li,{children:["LISTEN_NAMEDPIPE_SDDL\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"windows"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"config",children:"\u914D\u7F6E"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/MetaCubeX/mihomo/blob/Alpha/docs/config.yaml",children:"https://github.com/MetaCubeX/mihomo/blob/Alpha/docs/config.yaml"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://wiki.metacubex.one/config/",children:"https://wiki.metacubex.one/config/"})}),"\n",(0,t.jsx)(n.li,{children:"rules"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["tun\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5927\u591A\u6570\u53C2\u6570\u90FD\u53EA\u9488\u5BF9 linux"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/metacubex/sing-tun",children:"https://github.com/metacubex/sing-tun"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["fork ",(0,t.jsx)(n.a,{href:"https://github.com/SagerNet/sing-tun",children:"SagerNet/sing-tun"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["auto-redirect\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u652F\u6301 iptables, nftables"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["mrs - Mihomo Rule Set ?\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["MAGCI ",(0,t.jsx)(n.code,{children:"MRS\\0x1"})," - MSRv1"]}),"\n",(0,t.jsx)(n.li,{children:"\u63D0\u4F9B domain & ipcidr \u5217\u8868"}),"\n",(0,t.jsx)(n.li,{children:"\u4F53\u79EF\u66F4\u5C0F"}),"\n",(0,t.jsx)(n.li,{children:"zstd \u538B\u7F29"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"asn",children:"ASN"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"rules:\n  - IP-ASN,22697,Proxy,no-resolve # Roblox\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"~/.config/mihomo/ASN.mmdb"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb",children:"https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"})}),"\n"]})]})}function x(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},17776:function(e,n,i){i.d(n,{R:()=>r,x:()=>d});var s=i(7378);let t={},l=s.createContext(t);function r(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);