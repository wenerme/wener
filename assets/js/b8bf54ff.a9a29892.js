"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["16943"],{7492:function(n,l,e){e.r(l),e.d(l,{frontMatter:()=>d,toc:()=>h,default:()=>j,metadata:()=>s,assets:()=>c,contentTitle:()=>t});var s=JSON.parse('{"id":"db/relational/sqlite/README","title":"SQLite","description":"- \u6570\u636E\u7C7B\u578B","source":"@site/../notes/db/relational/sqlite/README.md","sourceDirName":"db/relational/sqlite","slug":"/db/relational/sqlite/","permalink":"/notes/db/relational/sqlite/","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/sqlite/README.md","tags":[{"inline":true,"label":"Topic","permalink":"/notes/tags/topic"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1732517778000,"frontMatter":{"title":"SQLite","tags":["Topic"]},"sidebar":"docs","previous":{"title":"sql.js","permalink":"/notes/db/relational/sql.js"},"next":{"title":"libsql","permalink":"/notes/db/relational/sqlite/libsql"}}'),i=e(86106),r=e(17776);let d={title:"SQLite",tags:["Topic"]},t="SQLite",c={},h=[{value:"\u6570\u636E\u64CD\u4F5C",id:"\u6570\u636E\u64CD\u4F5C",level:2},{value:"\u5BFC\u5165 csv",id:"\u5BFC\u5165-csv",level:3},{value:"\u5BFC\u51FA csv",id:"\u5BFC\u51FA-csv",level:3},{value:"csv \u865A\u62DF\u8868",id:"csv-\u865A\u62DF\u8868",level:2},{value:"DateTime",id:"datetime",level:2},{value:"Notes",id:"notes",level:2},{value:".help",id:"help",level:2},{value:"Deeper",id:"deeper",level:2},{value:"Node",id:"node",level:2},{value:"Java",id:"java",level:2},{value:"UDF",id:"udf",level:2},{value:"Build",id:"build",level:2},{value:"DEV",id:"dev",level:2},{value:"pragma",id:"pragma",level:2},{value:"sqlite_stat1",id:"sqlite_stat1",level:2},{value:"WAL",id:"wal",level:2},{value:"syntax",id:"syntax",level:2},{value:"attach",id:"attach",level:3},{value:"json",id:"json",level:3},{value:"upsert",id:"upsert",level:3},{value:"format",id:"format",level:2},{value:"vacuum",id:"vacuum",level:2},{value:"query",id:"query",level:2},{value:"Versions",id:"versions",level:2}];function x(n){let l={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.header,{children:(0,i.jsx)(l.h1,{id:"sqlite",children:"SQLite"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.a,{href:"http://sqlite.org/datatype3.html",children:"\u6570\u636E\u7C7B\u578B"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\u5B58\u50A8\u7C7B\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"NULL"}),"\n",(0,i.jsx)(l.li,{children:"INTEGER - 0, 1, 2, 3, 4, 6, 8 bytes - \u5185\u5B58\u4E2D\u90FD\u4E3A int64"}),"\n",(0,i.jsx)(l.li,{children:"REAL - 8 byte"}),"\n",(0,i.jsx)(l.li,{children:"TEXT - UTF-8, UTF-16BE, UTF-16LE"}),"\n",(0,i.jsx)(l.li,{children:"BLOB"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"BOOLEAN -> 0,1"}),"\n",(0,i.jsx)(l.li,{children:"DATETIME -> TEXT ISO8601, REAL, INTEGER Unix Timestamp"}),"\n",(0,i.jsxs)(l.li,{children:["\u7C7B\u578B\u4EB2\u548C - \u7C7B\u578B\u4E4B\u95F4\u4F1A\u8FDB\u884C\u5185\u90E8\u8F6C\u6362\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"INT,INTEGER,TINYINT,SMALLINT,MEDIUMINT,BIGINT,UNSIGNED BIG INT, INT2, INT8 -> INTEGER"}),"\n",(0,i.jsx)(l.li,{children:"\u5176\u4ED6\u7C7B\u4F3C"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.a,{href:"https://sqlite.org/stricttables.html",children:"STRICT Tables"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.code,{children:"CREATE TABLE t1(a ANY) STRICT;"})}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.code,{children:"PRAGMA strict=ON;"})}),"\n",(0,i.jsx)(l.li,{children:"\u5F3A\u5236\u7C7B\u578B - INT, INTEGER, REAL, TEXT, BLOB, ANY"}),"\n",(0,i.jsx)(l.li,{children:"ANY \u548C\u65E7\u7684\u7C7B\u578B\u7C7B\u4F3C"}),"\n",(0,i.jsx)(l.li,{children:"PRAGMA integrity_check, quick_check \u53EF\u68C0\u6D4B\u7C7B\u578B"}),"\n",(0,i.jsx)(l.li,{children:"\u4E0D\u4F1A\u63D0\u5347\u6027\u80FD - \u8FD0\u884C\u65F6\u68C0\u6D4B\uFF0C\u5BF9\u5B58\u50A8\u65E0\u5F71\u54CD\uFF0C\u6838\u5FC3\u6027\u80FD\u5728\u4E8E IO"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["ROWID - int64\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["rowid, oid, ",(0,i.jsx)(l.code,{children:"_rowid_"})]}),"\n",(0,i.jsx)(l.li,{children:"\u5EFA\u8868\u65F6\u53EF WITHOUT ROWID"}),"\n",(0,i.jsxs)(l.li,{children:["\u5982\u679C\u8868\u4F7F\u7528 INT \u4F5C\u4E3A pkey\uFF0C\u5219\u8BE5\u5217\u4F1A\u88AB\u7528\u4E8E rowid\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.code,{children:"CREATE TABLE t(x INTEGER PRIMARY KEY ASC, y, z);"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"btree \u7684 key"}),"\n",(0,i.jsx)(l.li,{children:"\u901A\u8FC7 rowid \u641C\u7D22\u548C\u6392\u5E8F\u662F\u666E\u901A PRIMARY KEY \u7684\u4E24\u500D\u901F\u5EA6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u8BED\u6CD5\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/lang_expr.html",children:"expr"})}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/pragma.html",children:"pragma"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u9650\u5236\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\u4E0D\u53EF\u4EE5 ALTER COLUMN - \u53EA\u80FD rename table/column \u5F62\u5F0F\u53BB\u53D8\u66F4\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u4E0D\u53EF\u4EE5\u79FB\u9664 UNIQUE - \u63A8\u8350\u4F7F\u7528 UNIQUE INDEX - \u53EF\u4EE5\u88AB drop"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.a,{href:"https://sqlite.org/lang_altertable.html",children:"altertable"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["ALTER TABLE DROP COLUMN \u4E0D\u652F\u6301\u88AB\u5F15\u7528\u7684\u5217\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"PRIMARY KEY, UNIQUE, \u7D22\u5F15\u5217, \u5305\u542B\u5728\u90E8\u5206\u7D22\u5F15, \u5305\u542B\u5728 CHECK, \u5916\u952E, \u88AB\u7528\u4E8E\u751F\u6210\u5217, \u7528\u4E8E trigger \u548C view"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.a,{href:"https://www.sqlite.org/limits.html",children:"Limits In SQLite"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_LENGTH=1,000,000,000 - 1G - text,blob \u6700\u5927\u957F\u5EA6"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_COLUMN=2000 - \u5217"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_SQL_LENGTH=1G - sql \u6700\u5927\u957F\u5EA6 - \u4F7F\u7528 prepare \u907F\u514D\u957F sql"}),"\n",(0,i.jsx)(l.li,{children:"JOIN \u6700\u591A 64 \u4E2A\u8868"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_EXPR_DEPTH=1000"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_FUNCTION_ARG=127"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_COMPOUND_SELECT=500"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_LIKE_PATTERN_LENGTH=50000"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_VARIABLE_NUMBER=999 - v3.32.0 32766"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_TRIGGER_DEPTH=1000"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_ATTACHED=10"}),"\n",(0,i.jsx)(l.li,{children:"SQLITE_MAX_PAGE_COUNT=1073741823 - 1Gi - PRAGMA max_page_count"}),"\n",(0,i.jsx)(l.li,{children:"281TB \u5E93"}),"\n",(0,i.jsx)(l.li,{children:"2^64 \u884C"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/c3ref/c_limit_attached.htm",children:"c_limit_attached"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://sqlite.org/fiddle/",children:"https://sqlite.org/fiddle/"})}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://github.com/jlongster/absurd-sql",children:"https://github.com/jlongster/absurd-sql"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.admonition,{type:"caution",children:(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"SQLite \u7684\u7C7B\u578B\u662F\u52A8\u6001\u7684 - \u4E0D\u5F3A\u5236 - \u65B0\u7248\u672C\u652F\u6301\u4E25\u683C\u7C7B\u578B"}),"\n",(0,i.jsx)(l.li,{children:"SQLite \u7684\u6838\u5FC3\u9650\u5236\u662F\u5E76\u53D1\u5199\u5165\u6027\u80FD - \u5982\u679C\u9700\u8981\u5E76\u53D1\u5199\u5165\uFF0C\u4E0D\u5EFA\u8BAE\u7528 SQLite"}),"\n",(0,i.jsx)(l.li,{children:"DATETIME \u4E0D\u4F1A\u5B58\u50A8\u6BEB\u79D2"}),"\n",(0,i.jsx)(l.li,{children:"\u6CA1\u6709 Base64 \u51FD\u6570"}),"\n",(0,i.jsx)(l.li,{children:"BLOB \u4F5C\u4E3A\u4E8C\u8FDB\u5236\u5B58\u50A8\u90E8\u5206\u8BED\u8A00\u7684 Driver \u652F\u6301\u4E0D\u592A\u597D"}),"\n",(0,i.jsx)(l.li,{children:"\u4E0D\u652F\u6301 INSERT DEFAULT"}),"\n",(0,i.jsxs)(l.li,{children:["column DEFAULT \u8868\u8FBE\u5F0F\u9700\u8981\u5199\u4E3A ",(0,i.jsx)(l.code,{children:"(expr)"})]}),"\n"]})}),"\n",(0,i.jsx)(l.admonition,{type:"tip",children:(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u9ED8\u8BA4\u6700\u591A 999 \u4E2A\u53D8\u91CF"}),"\n",(0,i.jsxs)(l.li,{children:["WAL \u6A21\u5F0F\u53EF\u63D0\u5347 \u5355\u5199\u591A\u8BFB \u6027\u80FD - ",(0,i.jsx)(l.code,{children:"PRAGMA journal_mode=WAL"})]}),"\n",(0,i.jsxs)(l.li,{children:["\u53EF\u4EE5\u914D\u5408 zfs \u8FDB\u884C\u538B\u7F29 - \u6CE8\u610F\u4F7F\u7528\u76F8\u540C\u7684 page size\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"page_size \u4E00\u822C 4096, cache_size \u4E00\u822C -2000 \u5373 2000 kb"}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.code,{children:"PRAGMA schema.page_size"}),", ",(0,i.jsx)(l.code,{children:"PRAGMA schema.cache_size"})]}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.mail-archive.com/sqlite-users@mailinglists.sqlite.org/msg114729.html",children:"compressed sqlite3 database file?"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"vacuum \u662F\u5148\u5199\u5165\u4E34\u65F6\u6587\u4EF6\uFF0C\u7136\u540E\u66FF\u6362 - \u9700\u8981\u5F88\u5927\u7A7A\u95F4"}),"\n"]})}),"\n",(0,i.jsx)(l.admonition,{title:"Why use SQLite",type:"tip",children:(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u96F6\u914D\u7F6E"}),"\n",(0,i.jsx)(l.li,{children:"\u8F7B\u91CF\u7EA7\u9AD8\u6548"}),"\n",(0,i.jsx)(l.li,{children:"\u8BFB\u4E3A\u4E3B"}),"\n",(0,i.jsx)(l.li,{children:"\u9700\u8981\u4F20\u8F93\u5927\u91CF\u5C0F\u6570\u636E - \u628A SQLite \u4F5C\u4E3A\u5BB9\u5668\uFF0C\u4F20\u8F93\u6574\u4E2A\u6587\u4EF6"}),"\n",(0,i.jsxs)(l.li,{children:["\u4E0D\u5E0C\u671B\u6709\u5916\u90E8\u670D\u52A1\u4F9D\u8D56\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5927\u591A\u670D\u52A1\u80FD Embed"}),"\n",(0,i.jsx)(l.li,{children:"\u5927\u591A\u73AF\u5883\u76F4\u63A5\u63D0\u4F9B NodeJS, Bun"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"\u5E0C\u671B\u5728 KV \u4E4B\u4E0A\u6709 SQL - \u6709\u5F88\u591A KV \u7684\u6587\u4EF6\u5B58\u50A8\u65B9\u6848"}),"\n",(0,i.jsx)(l.li,{children:"\u652F\u6301 ACID"}),"\n",(0,i.jsx)(l.li,{children:"\u8DE8\u5E73\u53F0\u517C\u5BB9"}),"\n",(0,i.jsx)(l.li,{children:"\u5B8C\u5584\u7684\u793E\u533A\u548C\u751F\u6001\u7CFB\u7EDF"}),"\n"]})}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-bash",children:'# macOS \u5B89\u88C5\nbrew install sqlite3\n# \u56E0\u4E3A\u7CFB\u7EDF\u81EA\u5E26 - \u6240\u4EE5\u9ED8\u8BA4\u4E0D\u4F1A\u6DFB\u52A0\u5230 PATH\n$(brew --prefix sqlite3)/bin/sqlite3\n# \u6DFB\u52A0\u5B89\u88C5\u7684 sqlite3 \u5230 PATH\nexport PATH="/usr/local/opt/sqlite/bin:$PATH"\n'})}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"-- \u65E5\u671F\u51FD\u6570\n-- https://sqlite.org/lang_datefunc.html\n-- \u8F6C\u6362\u65F6\u95F4\u6233\nselect datetime( 1323648000, 'unixepoch' );\n-- \u83B7\u53D6\u65F6\u95F4\u6233, \u5E26\u6BEB\u79D2\nSELECT CAST((julianday('now') - 2440587.5) * 86400000 AS INTEGER);\n-- \u9ED8\u8BA4\u503C\u5E26\u6BEB\u79D2\nCREATE TABLE IF NOT EXISTS event\n(\n  create_at DATETIME DEFAULT (STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'))\n);\n\n-- \u9644\u52A0\u5176\u4ED6\u6587\u4EF6\u5230\u6570\u636E\u5E93\nATTACH 'cache.db' AS cache;\n"})}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"-- \u6240\u6709\u8868\n.tables\n-- \u663E\u793A create \u8868\n.schema urls\n"})}),"\n",(0,i.jsx)(l.h2,{id:"\u6570\u636E\u64CD\u4F5C",children:"\u6570\u636E\u64CD\u4F5C"}),"\n",(0,i.jsx)(l.h3,{id:"\u5BFC\u5165-csv",children:"\u5BFC\u5165 csv"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"-- \u53EF\u4EE5\u4E0D\u7528\u521B\u5EFA\ncreate table foo(a, b);\n.mode csv\n.import test.csv foo\n"})}),"\n",(0,i.jsx)(l.h3,{id:"\u5BFC\u51FA-csv",children:"\u5BFC\u51FA csv"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:".output data.csv\nselect * from foo;\n"})}),"\n",(0,i.jsx)(l.h2,{id:"csv-\u865A\u62DF\u8868",children:"csv \u865A\u62DF\u8868"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/csv.html",children:"https://www.sqlite.org/csv.html"})}),"\n"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"-- \u52A0\u8F7D\u6269\u5C55\n.load ./csv\n\nCREATE VIRTUAL TABLE temp.t1 USING csv(filename='thefile.csv');\nSELECT * FROM t1;\n"})}),"\n",(0,i.jsx)(l.h2,{id:"datetime",children:"DateTime"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"-- epoch to datetime\nselect datetime(1580000000,'unixepoch');\n-- \u6DFB\u52A0\u65F6\u533A\nselect datetime(1580000000,'unixepoch','localtime');\n-- datetime to epoch\nselect strftime('%s', datetime(1580000000,'unixepoch','localtime'));\n-- \u5F53\u524D epoch\nselect strftime('%s', 'now');\n"})}),"\n",(0,i.jsx)(l.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\u90E8\u5206\u7D22\u5F15\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/partialindex.html",children:"https://www.sqlite.org/partialindex.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/optoverview.html",children:"The SQLite Query Optimizer Overview"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["WHERE \u6761\u4EF6\u5206\u6790\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u7D22\u5F15\u9009\u62E9"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["BETWEEN \u4F18\u5316\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u8F6C\u6362\u4E3A >= <="}),"\n",(0,i.jsx)(l.li,{children:"\u4E0E\u7D22\u5F15\u5224\u65AD"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["OR \u4F18\u5316\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u76F8\u540C\u5217\u8BED\u610F\u4E0A\u53EF\u8F6C\u6362\u4E3A IN"}),"\n",(0,i.jsx)(l.li,{children:"\u4E0D\u540C\u5217 OR \u9700\u8981\u6309 Cost \u9009\u62E9"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["LIKE \u4F18\u5316\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u524D\u7F00\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["Skip-Scan \u4F18\u5316\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u6761\u4EF6\u4E0D\u4EE5\u7D22\u5F15\u6700\u5DE6\u5217\u5F00\u59CB"}),"\n",(0,i.jsx)(l.li,{children:"\u5C1D\u8BD5\u9650\u5B9A\u6700\u5DE6\u5217\u6761\u4EF6\u6765\u5229\u7528\u7D22\u5F15"}),"\n",(0,i.jsx)(l.li,{children:"\u4F8B\u5982\u5F53\u6700\u5DE6\u5217\u53EA\u6709\u56FA\u5B9A\u51E0\u4E2A\u503C\u7684\u65F6\u5019"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["JOIN\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"JOIN \u91CD\u6392\u5E8F"}),"\n",(0,i.jsx)(l.li,{children:"\u57FA\u4E8E SQLITE_STAT \u9009\u62E9\u987A\u5E8F"}),"\n",(0,i.jsx)(l.li,{children:"\u901A\u8FC7 CROSS JOIN \u63A7\u5236\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u591A\u4E2A\u7D22\u5F15\u7684\u9009\u62E9\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u57FA\u4E8E\u7EDF\u8BA1"}),"\n",(0,i.jsxs)(l.li,{children:["\u4F7F\u7528 ",(0,i.jsx)(l.code,{children:"+a = 4"})," \u7684\u65B9\u5F0F\u6765\u6697\u793A\u4E0D\u5B9E\u7528 ",(0,i.jsx)(l.code,{children:"a"})," \u7684\u7D22\u5F15"]}),"\n",(0,i.jsx)(l.li,{children:"\u8303\u56F4\u67E5\u8BE2"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u8986\u76D6\u7D22\u5F15\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5168\u8868\u626B\u63CF\u65F6\u9009\u62E9\u5305\u542B rowid \u7684\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["ORDER BY \u4F18\u5316\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5C1D\u8BD5\u4F7F\u7528\u7B26\u5408 ORDER BY \u8981\u6C42\u7684\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u901A\u8FC7\u7D22\u5F15\u8FDB\u884C\u90E8\u5206 ORDER BY\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5305\u542B\u591A\u4E2A ORDER BY \u65F6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u62C9\u5E73\u5B50\u67E5\u8BE2\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5C06\u5B50\u67E5\u8BE2\u4F18\u5316\u4E3A JOIN"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u534F\u7A0B\u6267\u884C\u5B50\u67E5\u8BE2\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u90E8\u5206\u5B50\u67E5\u8BE2\u53EF\u4EE5\u4E0E\u5F53\u524D\u67E5\u8BE2\u5E76\u884C\u6267\u884C"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["MIN/MAX \u4F18\u5316\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5982\u679C\u5217\u662F\u67D0\u7D22\u5F15\u7684\u6700\u5DE6\u5217\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u81EA\u52A8\u7D22\u5F15\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5F53\u67E5\u8BE2\u6CA1\u6709\u7D22\u5F15\u65F6\uFF0C\u53EF\u80FD\u4F1A\u5728\u8BED\u53E5\u6267\u884C\u671F\u95F4\u81EA\u52A8\u521B\u5EFA\u4E00\u4E2A\u7D22\u5F15\u3002"}),"\n",(0,i.jsx)(l.li,{children:"\u521B\u5EFA\u7D22\u5F15 O(NlogN) \u5168\u8868\u626B\u63CF O(N)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u4E0B\u63A8\u4F18\u5316/Push-Down Optimization\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u4E00\u4E2A\u5B50\u67E5\u8BE2\u65E0\u6CD5\u88AB\u5E73\u6574\u4E3A\u5916\u90E8\u67E5\u8BE2\uFF0C\u53EF\u5C1D\u8BD5\u5C06\u5916\u90E8\u67E5\u8BE2\u7684\u6761\u4EF6\u4E0B\u63A8\u5230\u5B50\u67E5\u8BE2\u4E2D\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["LEFT JOIN Strength Reduction Optimization\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u6709\u65F6\u4E00\u4E2A LEFT JOIN \u53EF\u4EE5\u8F6C\u6362\u4E3A\u4E00\u4E2A\u666E\u901A\u7684 JOIN\uFF0C\u53EA\u8981\u4E24\u8005\u7ED3\u679C\u76F8\u540C\u3002"}),"\n",(0,i.jsx)(l.li,{children:"if any column in the right-hand table of the LEFT JOIN must be non-NULL in order for the WHERE clause to be true, then the LEFT JOIN is demoted to an ordinary JOIN."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u5FFD\u7565 LEFT JOIN\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\u6709\u65F6 LEFT JOIN \u53EF\u4EE5\u5B8C\u5168\u5457\u5FFD\u7565\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u98DE\u805A\u5408\u67E5\u8BE2"}),"\n",(0,i.jsx)(l.li,{children:"DISTINC \u67E5\u8BE2\u6216\u4F7F\u7528 ON/USING \u6765\u9650\u5236 JOIN \u53EA\u5339\u914D\u4E00\u5217"}),"\n",(0,i.jsx)(l.li,{children:"LETF JOIN \u53F3\u8FB9\u8868\u7684\u5217\u672A\u5728\u5916\u90E8\u67E5\u8BE2\u4F7F\u7528"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/queryplanner-ng.html",children:"The Next-Generation Query Planner"})}),"\n",(0,i.jsx)(l.h2,{id:"help",children:".help"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:".mode column\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(l.table,{children:[(0,i.jsx)(l.thead,{children:(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.th,{children:"\u6307\u4EE4"}),(0,i.jsx)(l.th,{children:"\u63CF\u8FF0"}),(0,i.jsx)(l.th,{children:"\u9ED8\u8BA4"})]})}),(0,i.jsxs)(l.tbody,{children:[(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".backup ?DB? FILE"}),(0,i.jsx)(l.td,{children:"\u5907\u4EFD\u6570\u636E\u5E93(\u9ED8\u8BA4\u4E3A main)\u5230 FILE"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".bail ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"\u9519\u8BEF\u65F6\u505C\u6B62"}),(0,i.jsx)(l.td,{children:"OFF"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".binary ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"\u4E8C\u8FDB\u5236\u8F93\u51FA"}),(0,i.jsx)(l.td,{children:"OFF"})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".clone NEWDB"}),(0,i.jsx)(l.td,{children:"\u514B\u9686\u73B0\u6709\u7684\u6570\u636E\u5E93\u5230 NEWDB"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".databases"}),(0,i.jsx)(l.td,{children:"\u4F8B\u4E3E\u6DFB\u52A0\u7684\u6570\u636E\u5E93\u540D\u548C\u6587\u4EF6"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".dbinfo ?DB?"}),(0,i.jsx)(l.td,{children:"\u663E\u793A\u6570\u636E\u5E93\u72B6\u6001\u4FE1\u606F"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".dump ?TABLE? ..."}),(0,i.jsxs)(l.td,{children:["\u4EE5 SQL \u7684\u5F62\u5F0F\u8F6C\u50A8\u6570\u636E\u5E93",(0,i.jsx)(l.br,{}),"\u5982\u679C\u6307\u5B9A\u4E86\u8868,\u5219\u53EA\u8F6C\u50A8\u5339\u914D LIKE \u6A21\u5F0F\u7684\u8868."]}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".echo ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"\u547D\u4EE4\u56DE\u663E"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".eqp ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"\u81EA\u52A8\u6267\u884C EXPLAIN QUERY PLAN"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".exit"}),(0,i.jsx)(l.td,{children:"\u9000\u51FA"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".explain ",(0,i.jsx)(l.code,{children:"?on|off?"})]}),(0,i.jsxs)(l.td,{children:["\u4F7F\u7528\u9002\u5408 EXPLAIN \u7684\u8F93\u51FA\u6A21\u5F0F",(0,i.jsx)(l.br,{}),"\u5982\u679C\u672A\u6307\u5B9A\u53C2\u6570,\u5219\u4E3A\u6253\u5F00"]}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".fullschema"}),(0,i.jsx)(l.td,{children:"\u663E\u793A sqlite_stat \u7684 schema \u548C\u5185\u5BB9"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".headers ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"\u663E\u793A\u5934"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".help"}),(0,i.jsx)(l.td,{children:"\u663E\u793A\u8BE5\u4FE1\u606F"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".import FILE TABLE"}),(0,i.jsx)(l.td,{children:"\u5BFC\u5165 FILE \u5185\u5BB9\u4E3A TABLE"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".indexes ?TABLE?"}),(0,i.jsxs)(l.td,{children:["\u663E\u793A\u6240\u6709\u7D22\u5F15",(0,i.jsx)(l.br,{}),"\u5982\u679C\u6307\u5B9A\u4E86\u8868,\u5219\u53EA\u663E\u793A\u5339\u914D LIKE \u6A21\u5F0F\u7684\u8868."]}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".limit ?LIMIT? ?VAL?"}),(0,i.jsx)(l.td,{children:"\u663E\u793A\u6216\u66F4\u6539 SQLITE_LIMIT \u7684\u503C"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".log ",(0,i.jsx)(l.code,{children:"FILE|off"})]}),(0,i.jsx)(l.td,{children:"\u65E5\u5FD7, FILE \u53EF\u4EE5\u4E3A stderr/stdout"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".mode MODE ?TABLE?"}),(0,i.jsx)(l.td,{children:"\u8BBE\u7F6E\u8F93\u51FA\u6A21\u5F0F"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"ascii \u884C\u5217\u4F7F\u7528 0x1F \u548C 0x1E \u5206\u9694"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"csv \u9017\u53F7\u5206\u9694\u7684\u503C"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"column \u5DE6\u5BF9\u9F50\u5217 (\u53C2\u89C1 .width)"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsxs)(l.td,{children:["html HTML ",(0,i.jsx)(l.code,{children:"<table>"})," \u4EE3\u7801"]}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"insert Insert \u8BED\u53E5 TABLE"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"line \u6BCF\u884C\u53EA\u6709\u503C"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"list \u4F7F\u7528 .separator \u5206\u9694\u7684\u503C"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"tabs \u5236\u8868\u7B26\u5206\u5272\u7684\u503C"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:"-"}),(0,i.jsx)(l.td,{children:"tcl TCL list \u5143\u7D20"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".nullvalue STRING"}),(0,i.jsx)(l.td,{children:"\u4F7F\u7528 STRING \u6765\u66FF\u4EE3 NULL \u503C"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".once FILENAME"}),(0,i.jsx)(l.td,{children:"\u8F93\u51FA\u4E0B\u4E00\u4E2A SQL \u6307\u4EE4\u5230 FILENAME"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".open ?FILENAME?"}),(0,i.jsx)(l.td,{children:"\u4FBF\u4E8E\u73B0\u6709\u6570\u636E\u5E93\u5E76\u6253\u5F00 FILENAME"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".output ?FILENAME?"}),(0,i.jsx)(l.td,{children:"\u53D1\u9001\u8F93\u51FA\u5230 FILENAME \u6216 stdout"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".print STRING..."}),(0,i.jsx)(l.td,{children:"\u663E\u793A STRING"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".prompt MAIN CONTINUE"}),(0,i.jsx)(l.td,{children:"\u4FEE\u6539\u63D0\u793A\u7B26"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".quit"}),(0,i.jsx)(l.td,{children:"\u9000\u51FA"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".read FILENAME"}),(0,i.jsx)(l.td,{children:"\u6267\u884C FILENAME \u4E2D\u7684 SQL"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".restore ?DB? FILE"}),(0,i.jsx)(l.td,{children:'\u6062\u590D DB(\u9ED8\u8BA4 "main") \u7684\u5185\u5BB9\u5230 FILE'}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".save FILE"}),(0,i.jsx)(l.td,{children:"\u5C06\u5185\u5B58\u6570\u636E\u5E93\u5199\u5165\u5230 FILE"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".scanstats ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"\u6253\u5F00\u6216\u5173\u95ED sqlite3_stmt_scanstatus() \u76D1\u6D4B"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".schema ?TABLE?"}),(0,i.jsxs)(l.td,{children:["\u663E\u793A CREATE \u8BED\u53E5",(0,i.jsx)(l.br,{}),"\u5982\u679C\u6307\u5B9A\u4E86\u8868,\u5219\u53EA\u663E\u793A\u5339\u914D LIKE \u6A21\u5F0F\u7684\u8868."]}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".separator COL ?ROW?"}),(0,i.jsx)(l.td,{children:"\u4FEE\u6539\u5217\u548C\u884C\u7684\u5206\u9694\u7B26,\u4F1A\u5F71\u54CD\u8F93\u51FA\u548C .import"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".shell CMD ARGS..."}),(0,i.jsx)(l.td,{children:"\u5728\u7CFB\u7EDF shell \u4E2D\u6267\u884C CMD ARGS..."}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".show"}),(0,i.jsx)(l.td,{children:"\u663E\u793A\u5F53\u524D\u7684\u5404\u79CD\u8BBE\u7F6E"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".stats ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"\u7EDF\u8BA1\u5F00\u5173"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".system CMD ARGS..."}),(0,i.jsx)(l.td,{children:"\u5728\u7CFB\u7EDF shell \u4E2D\u6267\u884C CMD ARGS..."}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".tables ?TABLE?"}),(0,i.jsxs)(l.td,{children:["\u663E\u793A\u8868\u540D",(0,i.jsx)(l.br,{}),"\u5982\u679C\u6307\u5B9A\u4E86\u8868,\u5219\u53EA\u663E\u793A\u5339\u914D LIKE \u6A21\u5F0F\u7684\u8868."]}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".timeout MS"}),(0,i.jsx)(l.td,{children:"\u6253\u5F00\u88AB\u9501\u8868\u7684\u8D85\u65F6\u65F6\u95F4"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".timer ",(0,i.jsx)(l.code,{children:"on|off"})]}),(0,i.jsx)(l.td,{children:"SQL \u8BA1\u65F6\u5668\u5F00\u5173"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsxs)(l.td,{children:[".trace ",(0,i.jsx)(l.code,{children:"FILE|off"})]}),(0,i.jsx)(l.td,{children:"\u8F93\u51FA\u6BCF\u4E2A SQL \u8BED\u53E5"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".vfsname ?AUX?"}),(0,i.jsx)(l.td,{children:"\u8F93\u51FA VFS \u6808"}),(0,i.jsx)(l.td,{})]}),(0,i.jsxs)(l.tr,{children:[(0,i.jsx)(l.td,{children:".width NUM1 NUM2 ..."}),(0,i.jsx)(l.td,{children:'\u8BBE\u7F6E "column" \u6A21\u5F0F\u7684\u5BBD\u5EA6,\u8D1F\u503C\u4E3A\u53F3\u5BF9\u9F50'}),(0,i.jsx)(l.td,{})]})]})]}),"\n",(0,i.jsx)(l.h2,{id:"deeper",children:"Deeper"}),"\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.a,{href:"https://dzone.com/articles/how-sqlite-database-works",children:"https://dzone.com/articles/how-sqlite-database-works"})}),"\n",(0,i.jsx)(l.h2,{id:"node",children:"Node"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-bash",children:"# pre gyp \u9ED8\u8BA4\u4ECE s3 \u4E0B\u8F7D - \u53EF\u6307\u5B9A\u955C\u50CF\nyarn add sqlite3 --sqlite3_binary_host_mirror=https://npm.taobao.org/mirrors/sqlite3/\n"})}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-ts",children:"// \u83B7\u53D6\u7248\u672C\nconst db = new Database(':memory:');\ndb.serialize(() => {\n  db.each('select sqlite_version() as version', (err, row) => {\n    console.log(`sqlite version ${row.version}`);\n  });\n});\ndb.close();\n"})}),"\n",(0,i.jsx)(l.h2,{id:"java",children:"Java"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["xerial sqlite-jdbc ",(0,i.jsx)(l.a,{href:"https://github.com/xerial/sqlite-jdbc/blob/master/Usage.md",children:"Usage"})]}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"udf",children:"UDF"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"http://www.sqlite.org/c3ref/create_function.html",children:"Create Or Redefine SQL Functions"})}),"\n",(0,i.jsxs)(l.li,{children:["PHP \u652F\u6301 ",(0,i.jsx)(l.a,{href:"https://www.php.net/manual/en/sqlite3.createfunction.php",children:"SQLite3::createFunction"})]}),"\n",(0,i.jsxs)(l.li,{children:["Java Xerial \u652F\u6301 ",(0,i.jsx)(l.a,{href:"https://www.javadoc.io/doc/org.xerial/sqlite-jdbc/3.30.1/org/sqlite/Function.html",children:"org.sqlite.Function"})]}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://github.com/mapbox/node-sqlite3/issues/140",children:"mapbox/node-sqlite3#140"})}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"build",children:"Build"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.a,{href:"https://sqlite.org/howtocompile.html",children:"How To Compile SQLite"})}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.a,{href:"https://sqlite.org/amalgamation.html",children:"amalgamation"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5408\u5E76\u540E\u7684 sqlite \u6E90\u7801"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.a,{href:"https://github.com/sqlite/sqlite",children:"sqlite/sqlite"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"mirror"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsx)(l.p,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/chronology.html",children:"chronology"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u7248\u672C\u5386\u53F2"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsx)(l.p,{children:"\u4F9D\u8D56"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["pthread - \u591A\u7EBF\u7A0B\u652F\u6301\uFF0C\u53EF\u5173\u95ED ",(0,i.jsx)(l.code,{children:"SQLITE_THREADSAFE=0"})]}),"\n",(0,i.jsxs)(l.li,{children:["dl - \u6269\u5C55\u6A21\u5757\u652F\u6301\uFF0C\u53EF\u5173\u95ED ",(0,i.jsx)(l.code,{children:"-DSQLITE_OMIT_LOAD_EXTENSION"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-bash",children:"# http://www.sqlite.org/\u5E74/sqlite-amalgamation-\u7248\u672C\u53F7.zip\n# 2013-04-12	3.7.16.2\ncurl -O http://www.sqlite.org/2013/sqlite-amalgamation-3071602.zip\n\n# \u6B63\u5E38\u7F16\u8BD1\ngcc shell.c sqlite3.c -lpthread -ldl -lm\n# \u5355\u7EBF\u7A0B - sqlite shell \u4E0D\u9700\u8981\u7EBF\u7A0B\u652F\u6301\ngcc -DSQLITE_THREADSAFE=0 shell.c sqlite3.c -ldl -lm\n# \u5355\u7EBF\u7A0B \u65E0\u6269\u5C55\ngcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION shell.c sqlite3.c\n# \u5355\u7EBF\u7A0B \u65E0\u6269\u5C55 \u9759\u6001 - \u65B9\u4FBF\u79FB\u690D\ngcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION -static shell.c sqlite3.c\n\n# \u4EA4\u53C9\u7F16\u8BD1\n# arm-none \u65E0\u6CD5\u7F16\u8BD1 - \u7F3A\u5C11 stdlib.h, stdlb.h\narm-none-eabi-gcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION -static shell.c sqlite3.c\n"})}),"\n",(0,i.jsx)(l.h2,{id:"dev",children:"DEV"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://zetcode.com/db/sqlitec/",children:"SQLite C tutorial"})}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"pragma",children:"pragma"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"PRAGMA pragma_list;     -- \u67E5\u770B\u6240\u6709\u5C5E\u6027\nPRAGMA compile_options; -- \u7F16\u8BD1\u9009\u9879 https://www.sqlite.org/compile.html\nPRAGMA module_list;     -- \u6A21\u5757\u5217\u8868\nPRAGMA stats;           -- \u7EDF\u8BA1\u65B0\u79C0\nPRAGMA freelist_count;  --\n\nPRAGMA database_list; -- \u6570\u636E\u5E93\nPRAGMA table_list;    -- \u8868\nPRAGMA function_list;\n\n-- PRAGMA table_info(table-name);\n-- PRAGMA table_xinfo(table-name);\n-- PRAGMA foreign_key_list(table-name);\n-- PRAGMA index_list(table-name);\n-- PRAGMA index_info(index-name);\n-- PRAGMA index_xinfo(index-name);\nPRAGMA table_info(sqlite_schema); -- \u8868\u4FE1\u606F\nPRAGMA table_xinfo(sqlite_schema);\n\nPRAGMA optimize;  -- \u6267\u884C\u4F18\u5316\n"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["synchronous\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["0 | OFF\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u4E0D\u8C03\u7528 fsync"}),"\n",(0,i.jsx)(l.li,{children:"\u5E94\u7528\u5D29\u6E83\u5B89\u5168\uFF0C\u7CFB\u7EDF\u5D29\u6E83\u4E0D\u5B89\u5168"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["1 | NORMAL\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"sync \u5C11\u4E8E FULL"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["2 | FULL\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"VFS xSync"}),"\n",(0,i.jsx)(l.li,{children:"\u975E WAL \u65F6\u4F7F\u7528"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["3 | EXTRA\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u540C\u6B65 rollback journal"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["journal_mode - \u63A7\u5236 ",(0,i.jsx)(l.code,{children:"-journal"})," \u6587\u4EF6\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"DELETE - \u4E8B\u52A1\u7ED3\u675F\u5220\u9664 rollback journal"}),"\n",(0,i.jsx)(l.li,{children:"TRUNCATE - \u4F7F\u7528 truncaate \u800C\u975E \u5220\u9664 - \u6709\u7684 fs \u4F1A\u66F4\u5FEB"}),"\n",(0,i.jsxs)(l.li,{children:["PERSIST - \u4FDD\u7559 - \u518D\u6B21\u5199\u5165\u5C31\u884C\u8986\u76D6\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"journal_size_limit=SQLITE_DEFAULT_JOURNAL_SIZE_LIMIT=32K"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"MEMORY"}),"\n",(0,i.jsxs)(l.li,{children:["WAL - \u4F7F\u7528 WAL \u800C\u975E rollback journal\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\u4EA7\u751F ",(0,i.jsx)(l.code,{children:"-shm"})," \u548C ",(0,i.jsx)(l.code,{children:"-wal"})," \u6587\u4EF6"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["OFF - \u7981\u7528 rollback journal\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u6CA1\u6709 rollback \u80FD\u529B"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["wal_autocheckpoint=1000 - \u81EA\u52A8\u6267\u884C wal_checkpoint(PASSIVE)\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5F53 WAL N \u9875\u540E auto-checkpoint"}),"\n",(0,i.jsx)(l.li,{children:"\u63A7\u5236 -wal \u6587\u4EF6\u5927\u5C0F"}),"\n",(0,i.jsx)(l.li,{children:"\u8BBE\u7F6E\u4E3A <= 0 \u7981\u7528 - \u901A\u8FC7 wal_checkpoint \u624B\u52A8\u89E6\u53D1"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["wal_checkpoint(mode)\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"PASSIVE - \u9ED8\u8BA4 - \u4E0D\u7B49\u5F85 reader"}),"\n",(0,i.jsx)(l.li,{children:"FULL - \u963B\u585E\u8BFB"}),"\n",(0,i.jsx)(l.li,{children:"RESTART - \u540C FULL\uFF0C\u4E14\u786E\u4FDD\u4E4B\u540E\u8BFB\u4F1A RESTART log file"}),"\n",(0,i.jsx)(l.li,{children:"TRUNCATE - \u540C RESTART\uFF0C\u4E14 truncate \u6587\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["locking_mode\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"NORMAL - \u9ED8\u8BA4"}),"\n",(0,i.jsx)(l.li,{children:"EXCLUSIVE"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["auto_vacuum - \u9700\u8981\u5728\u521B\u5EFA\u8868\u4E4B\u524D\u6307\u5B9A\uFF0C\u521B\u5EFA\u8868\u4F1A\u6DFB\u52A0\u989D\u5916\u4FE1\u606F\u7528\u4E8E\u8FFD\u8E2A\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"0 | NONE - \u9ED8\u8BA4 - \u9700\u8981\u6267\u884C VACUUM \u6765\u56DE\u6536\u7A7A\u95F4"}),"\n",(0,i.jsx)(l.li,{children:"1 | FULL - \u6BCF\u6B21 commit \u79FB\u52A8\u7A7A\u9875\u5230\u6587\u4EF6\u5C3E\u90E8\uFF0C\u7136\u540E truncate - \u4F1A\u5BFC\u81F4\u6587\u4EF6\u788E\u7247\u5316"}),"\n",(0,i.jsxs)(l.li,{children:["2 | INCREMENTAL\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"incremental_vacuum=N"}),"\n",(0,i.jsx)(l.li,{children:"\u5F53 freelist \u8FBE\u5230\u7ED9\u5B9A\u7684 page \u540E\u5C31\u884C auto vaccum"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["temp_store - \u5B58\u50A8 temporary indices / tables \u903B\u8F91\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"0 | DEFAULT"}),"\n",(0,i.jsx)(l.li,{children:"1 | FILE"}),"\n",(0,i.jsx)(l.li,{children:"2 | MEMORY;"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"automatic_index=true - SQLite \u4F1A\u57FA\u4E8E\u67E5\u8BE2\u81EA\u52A8\u521B\u5EFA\u7D22\u5F15\u4F18\u5316\u540E\u7EED\u67E5\u8BE2"}),"\n",(0,i.jsxs)(l.li,{children:["page_size=4096 - \u8303\u56F4 512 - 65536\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u4FEE\u6539\u9700\u8981 vacuum \u624D\u80FD\u751F\u6548"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"max_page_count"}),"\n",(0,i.jsx)(l.li,{children:"page_count - \u5F53\u524D\u7684\u9875\u6570"}),"\n",(0,i.jsxs)(l.li,{children:["mmap_size=0 - ",(0,i.jsx)(l.a,{href:"https://sqlite.org/mmap.html",children:"https://sqlite.org/mmap.html"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u4E0D\u4E00\u5B9A\u4F1A\u63D0\u5347\u6027\u80FD"}),"\n",(0,i.jsx)(l.li,{children:"0 \u7981\u7528"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["cache_size=2000\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"2000 -> 2000xpage_size -> 2000x4k=8M"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"foreign_key_check - \u662F\u5426\u6821\u9A8C\u5916\u952E\u7EA6\u675F"}),"\n",(0,i.jsx)(l.li,{children:"ignore_check_constraints"}),"\n",(0,i.jsx)(l.li,{children:"encoding=UTF-8"}),"\n",(0,i.jsx)(l.li,{children:"query_only - \u53EA\u8BFB\u6A21\u5F0F"}),"\n",(0,i.jsxs)(l.li,{children:["quick_check\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u6BD4 integrity_check \u5C11\u68C0\u67E5 unique"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"read_uncommitted"}),"\n",(0,i.jsx)(l.li,{children:"recursive_triggers"}),"\n",(0,i.jsx)(l.li,{children:"reverse_unordered_selects"}),"\n",(0,i.jsxs)(l.li,{children:["secure_delete\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5F00\u542F\u540E\u5220\u9664\u4F1A\u7F6E 0"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"schema_version - int32 at offset 40 - schema cookie"}),"\n",(0,i.jsx)(l.li,{children:"writable_schema"}),"\n",(0,i.jsx)(l.li,{children:"shrink_memory - \u91CA\u653E\u5185\u5B58"}),"\n",(0,i.jsxs)(l.li,{children:["\u989D\u5916\u4FE1\u606F\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"user_version - int32 at offset 60"}),"\n",(0,i.jsxs)(l.li,{children:["application_id - int32 at offset 68\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\u90E8\u5206\u5DF2\u77E5 id - ",(0,i.jsx)(l.a,{href:"https://www.sqlite.org/src/artifact?ci=trunk&filename=magic.txt",children:"https://www.sqlite.org/src/artifact?ci=trunk&filename=magic.txt"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/pragma.html",children:"https://www.sqlite.org/pragma.html"})}),"\n"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"-- \u4FEE\u6539 page_size\npragma page_count;\npragma page_size 65536;\nvacuum;\npragma page_count;\n"})}),"\n",(0,i.jsx)(l.h2,{id:"sqlite_stat1",children:"sqlite_stat1"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.a,{href:"https://www.sqlite.org/lang_analyze.html",children:"https://www.sqlite.org/lang_analyze.html"}),"\nANALYZE \u4F1A\u751F\u6210\u7EDF\u8BA1\u4FE1\u606F\u8868"]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.a,{href:"https://www.sqlite.org/fileformat2.html#stat1tab",children:"stat1tab"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"sqlite_stat1 \u53EF\u66F4\u65B0\u6216\u5220\u9664\uFF0C\u4E0D\u53EF alter \u6216\u521B\u5EFA"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"CREATE TABLE sqlite_stat1(tbl,idx,stat);\n-- v3.6.18 2009-09-11\nCREATE TABLE sqlite_stat2(tbl,idx,sampleno,sample);\n-- v3.7.9 - 2011-11-01\nCREATE TABLE sqlite_stat3(tbl,idx,nEq,nLt,nDLt,sample);\n-- v3.8.1 - 2013-10-17\nCREATE TABLE sqlite_stat4(tbl,idx,nEq,nLt,nDLt,sample);\n"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"tbl - \u8868\u540D"}),"\n",(0,i.jsx)(l.li,{children:"idx - \u7D22\u5F15"}),"\n",(0,i.jsx)(l.li,{children:"sample - \u91C7\u6837\u6570\u636E - BLOB"}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"wal",children:"WAL"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\u4F18\u70B9\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5927\u591A\u60C5\u51B5\u90FD\u4F1A\u66F4\u5FEB"}),"\n",(0,i.jsx)(l.li,{children:"\u8BFB \u4E0D\u963B\u585E \u5199\uFF0C\u5199 \u4E0D\u963B\u585E \u8BFB"}),"\n",(0,i.jsx)(l.li,{children:"\u5927\u591A\u4E3A\u987A\u5E8F IO"}),"\n",(0,i.jsx)(l.li,{children:"\u66F4\u5C11 fsync"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\u7F3A\u70B9\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u57FA\u4E8E\u5171\u4EAB\u5185\u5B58 - \u4E0D\u80FD\u5728 NFS \u8FD9\u79CD\u8DE8\u8282\u70B9 FS \u4F7F\u7528"}),"\n",(0,i.jsx)(l.li,{children:"\u8FDB\u5165 WAL \u540E\u4E0D\u53EF\u4EE5\u4FEE\u6539 page_size"}),"\n",(0,i.jsx)(l.li,{children:"\u4EA7\u751F\u989D\u5916\u7684 -wal, -shm \u6587\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/wal.html",children:"https://www.sqlite.org/wal.html"})}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"syntax",children:"syntax"}),"\n",(0,i.jsx)(l.h3,{id:"attach",children:"attach"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"attach expr as name;\ndetach name;\n"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/lang_attach.html",children:"https://www.sqlite.org/lang_attach.html"})}),"\n"]}),"\n",(0,i.jsx)(l.h3,{id:"json",children:"json"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/json1.html",children:"https://www.sqlite.org/json1.html"})}),"\n"]}),"\n",(0,i.jsx)(l.h3,{id:"upsert",children:"upsert"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/lang_UPSERT.html",children:"https://www.sqlite.org/lang_UPSERT.html"})}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"format",children:"format"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["page\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"lock-byte"}),"\n",(0,i.jsxs)(l.li,{children:["freelist - \u4E0D\u6D3B\u8DC3\u7684\u9875 - linked list \u5F62\u5F0F\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"freelist trunk"}),"\n",(0,i.jsx)(l.li,{children:"freelist leaf"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["b-tree\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"table b-tree interior"}),"\n",(0,i.jsx)(l.li,{children:"table b-tree leaf"}),"\n",(0,i.jsx)(l.li,{children:"tindex b-tree interior"}),"\n",(0,i.jsx)(l.li,{children:"tindex b-tree leaf"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"payload overflow"}),"\n",(0,i.jsx)(l.li,{children:"pointer map"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["-journal - \u56DE\u6EDA\u65E5\u5FD7\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"page number in db"}),"\n",(0,i.jsx)(l.li,{children:"\u539F\u59CB page \u5185\u5BB9"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["-wal\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"checkpoint \u5E8F\u5217\u53F7"}),"\n",(0,i.jsx)(l.li,{children:"frames - 24-byte header+page"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(l.li,{children:"-shm - wal-index"}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/fileformat2.html",children:"https://www.sqlite.org/fileformat2.html"})}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"vacuum",children:"vacuum"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u91CD\u5EFA\u6570\u636E\u5E93\u6587\u4EF6\uFF0C\u91CA\u653E\u4E0D\u9700\u8981\u7684\u78C1\u76D8\u7A7A\u95F4"}),"\n",(0,i.jsx)(l.li,{children:"VACUUM INTO \u7C7B\u4F3C backup\uFF0C\u4E14\u751F\u6210\u7684 db \u662F VACUUM \u540E\u7684"}),"\n"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-sql",children:"-- VACUUM [schema] [INFO filename];\n"})}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/lang_vacuum.html",children:"https://www.sqlite.org/lang_vacuum.html"})}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"query",children:"query"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/queryplanner.html",children:"Query Planning"})}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/lang_explain.html",children:"https://www.sqlite.org/lang_explain.html"})}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/eqp.html",children:"https://www.sqlite.org/eqp.html"})}),"\n",(0,i.jsx)(l.li,{children:(0,i.jsx)(l.a,{href:"https://www.sqlite.org/optoverview.html",children:"Query Optimizer Overview"})}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"versions",children:"Versions"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["SQLite v3.38.0 - 2022-02-22\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u9ED8\u8BA4\u5305\u542B json"}),"\n",(0,i.jsxs)(l.li,{children:["json ",(0,i.jsx)(l.code,{children:"->"}),", ",(0,i.jsx)(l.code,{children:"->>"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.37.2\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"-DSQLITE_ENABLE_JSON1 - json1"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.37.0 - 2021-11-27\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"STRICT Tables"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.23.0 - 2018-04-02\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u8BC6\u522B TRUE, FALSE -> 1, 0"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.12.0 - 2016-03-29\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"page_size 1024 -> 4096"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.8.2 - 2013-12-06\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"WITHOUT ROWID"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.8.0 - 2013-08-26\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u90E8\u5206\u7D22\u5F15"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.7.17 - 2013-05-20\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"mmap"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["SQLite v3.7.0 - 2010-07-21\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"WAL"}),"\n"]}),"\n"]}),"\n"]})]})}function j(n={}){let{wrapper:l}={...(0,r.R)(),...n.components};return l?(0,i.jsx)(l,{...n,children:(0,i.jsx)(x,{...n})}):x(n)}},17776:function(n,l,e){e.d(l,{R:()=>d,x:()=>t});var s=e(7378);let i={},r=s.createContext(i);function d(n){let l=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(l):{...l,...n}},[l,n])}function t(n){let l;return l=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),s.createElement(r.Provider,{value:l},n.children)}}}]);