"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["119785"],{438609:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>i,toc:()=>h,default:()=>d,metadata:()=>l,assets:()=>o,contentTitle:()=>t});var l=JSON.parse('{"id":"service/network/spec/http/http-cache","title":"Cache-Control","description":"- MDN Cache-Control","source":"@site/../notes/service/network/spec/http/http-cache.md","sourceDirName":"service/network/spec/http","slug":"/service/network/spec/http/cache","permalink":"/notes/service/network/spec/http/cache","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/spec/http/http-cache.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1740927882000,"frontMatter":{"title":"Cache-Control"},"sidebar":"docs","previous":{"title":"Auth","permalink":"/notes/service/network/spec/http/auth"},"next":{"title":"HTTP Extension","permalink":"/notes/service/network/spec/http/extensions"}}'),c=r(486106),s=r(917776);let i={title:"Cache-Control"},t="Cache-Control",o={},h=[{value:"\u5E73\u53F0",id:"\u5E73\u53F0",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"cache-control",children:"Cache-Control"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["MDN ",(0,c.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control",children:"Cache-Control"})]}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching",children:"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://support.cloudflare.com/hc/en-us/articles/115003206852-Understanding-Origin-Cache-Control",children:"https://support.cloudflare.com/hc/en-us/articles/115003206852-Understanding-Origin-Cache-Control"})}),"\n",(0,c.jsxs)(n.li,{children:["max-age=0 vs no-cache\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://stackoverflow.com/a/1383359/1870054",children:"https://stackoverflow.com/a/1383359/1870054"})}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match",children:"If-None-Match"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"W/"})," weak validator"]}),"\n",(0,c.jsx)(n.li,{children:"GET, HEAD"}),"\n",(0,c.jsx)(n.li,{children:"\u503C\u4E3A etag, \u5B58\u5728\u5219\u8FD4\u56DE 304 Not Modified"}),"\n",(0,c.jsx)(n.li,{children:"\u4FEE\u6539\u64CD\u4F5C, 412 Precondition Failed"}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:'If-None-Match: "<etag>"[, "<etag>"]'})}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\u53C2\u8003\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["[RFC 9111] HTTP Caching, STD 98\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u66FF\u4EE3 [RFC 7234] - Hypertext Transfer Protocol (HTTP/1.1): Caching"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://github.com/darkweak/souin",children:"darkweak/souin"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"MIT, Go"}),"\n",(0,c.jsx)(n.li,{children:"An HTTP cache system, RFC compliant, compatible"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://github.com/jaredwray/cacheable",children:"jaredwray/cacheable"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"MIT, NodeJS"}),"\n",(0,c.jsx)(n.li,{children:"node http request"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["undici http caching\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://undici.nodejs.org/#/docs/api/CacheStorage.md",children:"https://undici.nodejs.org/#/docs/api/CacheStorage.md"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://github.com/nodejs/undici/pull/3562",children:"nodejs/undici#3562"})}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.a,{href:"https://github.com/natemoo-re/ultrafetch",children:"natemoo-re/ultrafetch"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"MIT, TS"}),"\n",(0,c.jsx)(n.li,{children:"fetch"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.li,{children:"ETag + If-None-Match"}),"\n",(0,c.jsx)(n.li,{children:"Last-Modified + If-Modified-Since"}),"\n",(0,c.jsx)(n.li,{children:"Cache-Control + Expires"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8BF7\u6C42"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Cache-Control: max-age=<seconds>\nCache-Control: max-stale[=<seconds>]\nCache-Control: min-fresh=<seconds>\nCache-Control: no-cache\nCache-Control: no-store\nCache-Control: no-transform\nCache-Control: only-if-cached\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u54CD\u5E94"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Cache-Control: must-revalidate\nCache-Control: no-cache\nCache-Control: no-store\nCache-Control: no-transform\nCache-Control: public\nCache-Control: private\nCache-Control: proxy-revalidate\nCache-Control: max-age=<seconds>\nCache-Control: s-maxage=<seconds>\n\nCache-Control: immutable\nCache-Control: stale-while-revalidate=<seconds>\nCache-Control: stale-if-error=<seconds>\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"private - \u9762\u5411\u5355\u7528\u6237 - Authorization - browser \u7F13\u5B58"}),"\n",(0,c.jsx)(n.li,{children:"public - \u591A\u7528\u6237\u5171\u4EAB\u7F13\u5B58 - proxy cache \u7F13\u5B58"}),"\n",(0,c.jsx)(n.li,{children:"post-check"}),"\n",(0,c.jsx)(n.li,{children:"pre-check"}),"\n",(0,c.jsxs)(n.li,{children:["immutable\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"max-age \u5185\u907F\u514D\u5C1D\u8BD5\u6821\u9A8C\u7F13\u5B58"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"# \u5355\u4F4D\u4E3A\u79D2\nCache-Control: public, max-age=3600\nExpires: Thu, 01 Dec 2014 16:00:00 GMT\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Cache-Control: public, max-age=86400\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"static asset"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: no-store\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u4E0D\u7F13\u5B58"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: private, max-age=3600\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u6D4F\u89C8\u5668\u7F13\u5B58\u4F46 Proxy \u4E0D\u7F13\u5B58"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: public, no-cache\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"prefer revalidation when served"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: public, no-cache, proxy-revalidate or Cache-Control: public, s-maxage=0\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cache assets in proxy caches but REQUIRE revalidation by the proxy when served"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: public, no-cache, must-revalidate\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cache assets in proxy caches, but REQUIRE revalidation by any cache when served"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: public, no-transform\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cache assets, but ensure the proxy does not modify it"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: public, max-age=3600, stale-if-error=60\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cache assets with revalidation, but allow stale responses if origin server is unreachable"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: public, max-age=7200, s-maxage=3600\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cache assets for different amounts of time on Cloudflare and in visitor browsers"}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Cache-Control: max-age=600, stale-while-revalidate=30\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Cache an asset and serve while asset is being revalidated"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://developers.cloudflare.com/cache/about/cache-control",children:"https://developers.cloudflare.com/cache/about/cache-control"})}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u5E73\u53F0",children:"\u5E73\u53F0"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["x-vercel-cache\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"HIT, MISS"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.li,{children:"x-vercel-id"}),"\n",(0,c.jsxs)(n.li,{children:["cf-cache-status\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"HIT, MISS, EXPIRED, DYNAMIC, BYPASS"}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},917776:function(e,n,r){r.d(n,{R:()=>i,x:()=>t});var l=r(7378);let c={},s=l.createContext(c);function i(e){let n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);