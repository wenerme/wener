"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["25907"],{92297:function(n,e,t){t.r(e),t.d(e,{frontMatter:()=>a,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"dev/testing/k6","title":"k6","description":"- grafana/k6","source":"@site/../notes/dev/testing/k6.md","sourceDirName":"dev/testing","slug":"/dev/testing/k6","permalink":"/notes/dev/testing/k6","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/dev/testing/k6.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1757899636000,"frontMatter":{"title":"k6"},"sidebar":"docs","previous":{"title":"jmeter","permalink":"/notes/dev/testing/jmeter"},"next":{"title":"Testing","permalink":"/notes/dev/testing/awesome"}}'),i=t(86106),r=t(17776);let a={title:"k6"},l="k6",c={},d=[{value:"Dashboard",id:"dashboard",level:2},{value:"context",id:"context",level:2},{value:"xk6",id:"xk6",level:2},{value:"timescaledb",id:"timescaledb",level:2},{value:"SQL",id:"sql",level:2},{value:"Setup",id:"setup",level:2},{value:"Target RPS",id:"target-rps",level:2},{value:"gracefulStop",id:"gracefulstop",level:2}];function o(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"k6",children:"k6"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/grafana/k6",children:"grafana/k6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"AGPL-3.0, Golang"}),"\n",(0,i.jsx)(e.li,{children:"\u73B0\u4EE3\u5316\u538B\u6D4B\u5DE5\u5177"}),"\n",(0,i.jsx)(e.li,{children:"\u4F7F\u7528 TS/JS \u7F16\u5199\u538B\u6D4B\u903B\u8F91"}),"\n",(0,i.jsx)(e.li,{children:"\u652F\u6301\u975E\u5E38\u4E30\u5BCC\u7684\u63D2\u4EF6: JS \u6269\u5C55\u3001\u8F93\u51FA\u6269\u5C55"}),"\n",(0,i.jsxs)(e.li,{children:["JS \u5F15\u64CE ",(0,i.jsx)(e.a,{href:"https://github.com/dop251/goja",children:"dop251/goja"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/grafana/k6-studio",children:"https://github.com/grafana/k6-studio"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/grafana/awesome-k6",children:"https://github.com/grafana/awesome-k6"})}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{type:"caution",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4E0D\u652F\u6301 SSE ",(0,i.jsx)(e.a,{href:"https://github.com/grafana/k6/issues/746",children:"https://github.com/grafana/k6/issues/746"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/phymbert/xk6-sse",children:"https://github.com/phymbert/xk6-sse"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4E0D\u80FD\u591A SSE \u5E76\u884C ",(0,i.jsx)(e.a,{href:"https://github.com/phymbert/xk6-sse/issues/16",children:"https://github.com/phymbert/xk6-sse/issues/16"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"brew install k6\n# https://github.com/grafana/k6/releases\ncurl -LO https://github.com/grafana/k6/releases/download/v0.45.0/k6-v0.45.0-linux-amd64.tar.gz\ntar zxvf k6-v0.45.0-linux-amd64.tar.gz --strip-components 1\n./k6\n\nk6 run script.js\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"import { check, sleep } from 'k6';\nimport http from 'k6/http';\n\n// \u9009\u9879\nexport const options = {\n  // \u5355\u4E2A\n  vus: 10, // \u865A\u62DF\u7528\u6237\u6570\n  duration: '30s', // \u57FA\u4E8E\u65F6\u95F4\n  iterations: 100, // \u57FA\u4E8E\u8FED\u4EE3\n  // or \u591A\u4E2A\u573A\u666F\n  // stages: [\n  //   { duration: '30s', target: 20 },\n  //   { duration: '1m30s', target: 10 },\n  //   { duration: '20s', target: 0 },\n  // ],\n  // \u76EE\u6807\uFF0CSLO\n  thresholds: {\n    // Assert that 99% of requests finish within 3000ms.\n    http_req_duration: ['p(99) < 3000'],\n  },\n};\n\n// vu \u6D4B\u8BD5\nexport default function () {\n  const res = http.get('https://wener.me');\n  check(res, { 'status was 200': (r) => r.status == 200 });\n  sleep(1);\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"virtual users (VUs)"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"__ENV"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"__VU"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"__ITER"})}),"\n",(0,i.jsx)(e.li,{children:"warmup \u653E\u5728 scenario"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// 1. init code - \u6BCF\u4E2A UV \u8C03\u7528 1 \u6B21\n\nexport function setup() {\n  // 2. setup code - \u5168\u5C40\u53EA\u4F1A\u8C03\u7528 1 \u6B21\n  return {};\n}\n\n// data \u4E3A setup \u8FD4\u56DE\u7ED3\u679C\nexport default function (data) {\n  // 3. VU code - \u6BCF\u6B21\u8FED\u4EE3\u8C03\u7528 1 \u6B21\n}\n\n// data \u4E3A setup \u8FD4\u56DE\u7ED3\u679C\nexport function teardown(data) {\n  // 4. teardown code - \u5168\u5C40\u8C03\u7528 1 \u6B21\uFF0C\u5982\u679C setup \u5931\u8D25\u5219\u4E0D\u8C03\u7528\n}\n\n// \u901A\u8FC7\u914D\u7F6E scenarios.*.exec \u6765\u6307\u5B9A\u6267\u884C\nexport function webtest() {}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"handleSummary"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"k6 run flags"}),(0,i.jsx)(e.th,{children:"for"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-u,--vus INT"}),(0,i.jsx)(e.td,{children:"\u9ED8\u8BA4 1, \u865A\u62DF\u7528\u6237\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-d,--duration DURATION"}),(0,i.jsx)(e.td,{children:"\u6301\u7EED\u65F6\u95F4"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-i,--iterations INT"}),(0,i.jsx)(e.td,{children:"\u8FED\u4EE3\u6B21\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-s,--stage STAGE"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"[duration]:[target]"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--rps INT"}),(0,i.jsx)(e.td,{children:"\u9650\u5236\u6BCF\u79D2\u8BF7\u6C42\u6570"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--http-debug"}),(0,i.jsx)(e.td,{children:"\u9ED8\u8BA4 headers, dump http request"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--http-debug=full"}),(0,i.jsx)(e.td,{children:"\u5305\u542B body"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"dashboard",children:"Dashboard"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"K6_WEB_DASHBOARD=true K6_WEB_DASHBOARD_EXPORT=summary.html\n\nK6_WEB_DASHBOARD_HOST=localhost\nK6_WEB_DASHBOARD_PORT=5665\nK6_WEB_DASHBOARD_PERIOD=10s\nK6_WEB_DASHBOARD_OPEN=false\n"})}),"\n",(0,i.jsx)(e.h2,{id:"context",children:"context"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"instance"}),"\n",(0,i.jsx)(e.li,{children:"scenario"}),"\n",(0,i.jsx)(e.li,{children:"vu"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"import exec from 'k6/execution';\n\nexport default function () {\n  console.log(`Execution context\n\nInstance info\n-------------\nVus active: ${exec.instance.vusActive}\nIterations completed: ${exec.instance.iterationsCompleted}\nIterations interrupted:  ${exec.instance.iterationsInterrupted}\nIterations completed:  ${exec.instance.iterationsCompleted}\nIterations active:  ${exec.instance.vusActive}\nInitialized vus:  ${exec.instance.vusInitialized}\nTime passed from start of run(ms):  ${exec.instance.currentTestRunDuration}\n\nScenario info\n-------------\nName of the running scenario: ${exec.scenario.name}\nExecutor type: ${exec.scenario.executor}\nScenario start timestamp: ${exec.scenario.startTime}\nPercenatage complete: ${exec.scenario.progress}\nIteration in instance: ${exec.scenario.iterationInInstance}\nIteration in test: ${exec.scenario.iterationInTest}\n\nTest info\n---------\nAll test options: ${exec.test.options}\n\nVU info\n-------\nIteration id: ${exec.vu.iterationInInstance}\nIteration in scenario: ${exec.vu.iterationInScenario}\nVU ID in instance: ${exec.vu.idInInstance}\nVU ID in test: ${exec.vu.idInTest}\nVU tags: ${exec.vu.tags}`);\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://k6.io/docs/using-k6/execution-context-variables/",children:"https://k6.io/docs/using-k6/execution-context-variables/"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"xk6",children:"xk6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["k6 Extensions\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Javascript"}),"\n",(0,i.jsx)(e.li,{children:"Output"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://k6.io/docs/extensions/get-started/explore/",children:"https://k6.io/docs/extensions/get-started/explore/"})}),"\n",(0,i.jsxs)(e.li,{children:["\u53C2\u8003\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/szkiba/xk6-dashboard",children:"szkiba/xk6-dashboard"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"github.com/szkiba/xk6-dashboard@latest"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"http://127.0.0.1:5665",children:"http://127.0.0.1:5665"})}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"--out dashboard=open"})," \u6253\u5F00\u6D4F\u89C8\u5668"]}),"\n",(0,i.jsx)(e.li,{children:"\u5176\u4ED6\u53C2\u6570 host,port=5665,period=20s,config=.dashboard.js"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/szkiba/xk6-top",children:"szkiba/xk6-top"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"--out top"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/szkiba/xk6-dotenv",children:"szkiba/xk6-dotenv"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"github.com/szkiba/xk6-dotenv@latest"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:".env.{development,test,production}.local"})," - $K6_ENV"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:".env.{local,development,test,production}"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:".env"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/grafana/xk6-output-timescaledb",children:"grafana/xk6-output-timescaledb"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"K6_TIMESCALEDB_PUSH_INTERVAL=1s"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/grafana/xk6-sql",children:"grafana/xk6-sql"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u538B\u6D4B SQL"}),"\n",(0,i.jsx)(e.li,{children:"PostgreSQL, MySQL, MS SQL, SQLite3"}),"\n",(0,i.jsxs)(e.li,{children:["SQLite \u9700\u8981 ",(0,i.jsx)(e.code,{children:"CGO_ENABLED=1"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/avitalique/xk6-file",children:"avitalique/xk6-file"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6587\u4EF6\u8BFB\u5199"}),"\n",(0,i.jsx)(e.li,{children:"github.com/avitalique/xk6-file@latest"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"go install go.k6.io/xk6/cmd/xk6@latest\n\nxk6 build --with github.com/grafana/xk6-output-timescaledb --with github.com/szkiba/xk6-dotenv@latest\nxk6 build --with github.com/phymbert/xk6-sse@latest --with github.com/szkiba/xk6-dotenv@latest\n./k6\n\n# -o $K6_OUT\nK6_OUT=timescaledb=postgresql://k6:k6@timescaledb:5432/k6 k6 run script.js\n"})}),"\n",(0,i.jsx)(e.h2,{id:"timescaledb",children:"timescaledb"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"samples"}),"\n",(0,i.jsx)(e.li,{children:"thresholds"}),"\n",(0,i.jsxs)(e.li,{children:["K6_TIMESCALEDB_PUSH_INTERVAL=1s\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"2min \u7EA6 500 \u4E07 \u6761\u8BB0\u5F55\u30012G"}),"\n",(0,i.jsx)(e.li,{children:"\u8D8A\u957F\u4F7F\u7528\u8D8A\u591A\u5185\u5B58"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"k6 run --tag testid=SVR-$(date +%Y%m%d-%H%M)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE IF NOT EXISTS samples (\n  ts timestamptz NOT NULL DEFAULT current_timestamp,\n  metric varchar(128) NOT NULL,\n  tags jsonb,\n  value real\n);\nCREATE TABLE IF NOT EXISTS thresholds (\n  id serial,\n  ts timestamptz NOT NULL DEFAULT current_timestamp,\n  metric varchar(128) NOT NULL,\n  tags jsonb,\n  threshold varchar(128) NOT NULL,\n  abort_on_fail boolean DEFAULT FALSE,\n  delay_abort_eval varchar(128),\n  last_failed boolean DEFAULT FALSE\n);\nSELECT create_hypertable('samples', 'ts');\nCREATE INDEX IF NOT EXISTS idx_samples_ts ON samples (ts DESC);\nCREATE INDEX IF NOT EXISTS idx_thresholds_ts ON thresholds (ts DESC);\n\n-- \u53EF\u4EE5\u8003\u8651\ncreate index samples_ts_tags_testid on samples using btree (ts, ((tags ->> 'testid'::text)));\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/grafana/xk6-output-timescaledb/blob/main/output.go",children:"https://github.com/grafana/xk6-output-timescaledb/blob/main/output.go"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/grafana/xk6-output-timescaledb/",children:"https://github.com/grafana/xk6-output-timescaledb/"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"sql",children:"SQL"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://k6.io/blog/load-testing-sql-databases-with-k6/",children:"https://k6.io/blog/load-testing-sql-databases-with-k6/"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/grafana/xk6-sql",children:"https://github.com/grafana/xk6-sql"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"setup",children:"Setup"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'sudo apk add go\nsudo chown $USER mkdir -p /data\n\nmkdir -p /data/bin\ngo env -w GOPROXY=https://goproxy.cn,direct\n\ngo install go.k6.io/xk6/cmd/xk6@latest\nGOBIN=/data/bin go install go.k6.io/xk6/cmd/xk6@latest\n\nexport PATH="/data/bin:$PATH"\n\n# CGO_ENABLED=1 for SQLite\n# --output /data/bin\nxk6 build \\\n  --with github.com/grafana/xk6-output-timescaledb \\\n  --with github.com/szkiba/xk6-dotenv \\\n  --with github.com/szkiba/xk6-dashboard \\\n  --with github.com/avitalique/xk6-file \\\n  --with github.com/szkiba/xk6-top \\\n  --with github.com/grafana/xk6-sql\n\nmv k6 /data/bin/\nmkdir -p /data/k6\ncd /data/k6\n'})}),"\n",(0,i.jsx)(e.h2,{id:"target-rps",children:"Target RPS"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"export const options = {\n  scenarios: {\n    constant_request_rate: {\n      executor: 'constant-arrival-rate',\n      rate: 1,\n      timeUnit: '1s',\n      duration: '1m',\n      preAllocatedVUs: 20,\n      maxVUs: 100,\n    },\n    stageOne: {\n      executor: 'constant-arrival-rate',\n      duration: '5m',\n      rate: 1000000, // 1mil QPS for 5 min\n      timeUnit: '1s',\n      maxVUs: 12500, // Some number with headroom where I try to judge, given some hypothetical SUT latency, how I can reach 1mil QPS?\n    },\n    stageTwo: {\n      executor: 'constant-arrival-rate',\n      duration: '5m',\n      startTime: '5m',\n      rate: 10000000, // 10mil QPS for 5 min\n      timeUnit: '1s',\n      maxVUs: 125000, // Ditto\n    },\n    // ...\n  },\n};\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"rate+timeUnit"}),"\n",(0,i.jsx)(e.li,{children:"preAllocatedVUs, maxVUs"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://k6.io/blog/how-to-generate-a-constant-request-rate-with-the-new-scenarios-api/",children:"https://k6.io/blog/how-to-generate-a-constant-request-rate-with-the-new-scenarios-api/"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/grafana/k6-operator/issues/120",children:"https://github.com/grafana/k6-operator/issues/120"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"gracefulstop",children:"gracefulStop"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://k6.io/docs/using-k6/scenarios/concepts/graceful-stop/",children:"https://k6.io/docs/using-k6/scenarios/concepts/graceful-stop/"})}),"\n"]})]})}function h(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},17776:function(n,e,t){t.d(e,{R:()=>a,x:()=>l});var s=t(7378);let i={},r=s.createContext(i);function a(n){let e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);