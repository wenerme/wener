"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["790839"],{89606:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>r,toc:()=>h,default:()=>a,metadata:()=>s,assets:()=>d,contentTitle:()=>c});var s=JSON.parse('{"id":"service/network/spec/http/http-faq","title":"FAQ","description":"| Request           | Response         |","source":"@site/../notes/service/network/spec/http/http-faq.md","sourceDirName":"service/network/spec/http","slug":"/service/network/spec/http/faq","permalink":"/notes/service/network/spec/http/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/spec/http/http-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1737304142000,"frontMatter":{"title":"FAQ","tags":["FAQ"]},"sidebar":"docs","previous":{"title":"HTTP Extension","permalink":"/notes/service/network/spec/http/extensions"},"next":{"title":"Headers","permalink":"/notes/service/network/spec/http/headers"}}'),i=t(486106),l=t(917776);let r={title:"FAQ",tags:["FAQ"]},c="FAQ",d={},h=[{value:"Transfer-Encoding vs Content-Encoding",id:"transfer-encoding-vs-content-encoding",level:2},{value:"301 vs 302",id:"301-vs-302",level:2},{value:"HTTP SEARCH/QUERY Method",id:"http-searchquery-method",level:2},{value:"Accept-Encoding",id:"accept-encoding",level:2},{value:"Real IP",id:"real-ip",level:2}];function o(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"faq",children:"FAQ"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Request"}),(0,i.jsx)(n.th,{children:"Response"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding",children:"Accept-Encoding"})}),(0,i.jsx)(n.td,{children:"Content-Encoding"})]})})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Response\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Accept-Ranges: bytes|none - \u662F\u5426\u652F\u6301\u90E8\u5206\u8BF7\u6C42"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Accept-Encoding: br;q=1.0, gzip;q=0.8, *;q=0.1\nRange: bytes=200-1000, 2000-6576, 19000-\n"})}),"\n",(0,i.jsx)(n.h2,{id:"transfer-encoding-vs-content-encoding",children:"Transfer-Encoding vs Content-Encoding"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Transfer-Encoding - \u53EF\u52A8\u6001\u4FEE\u6539 - \u4F20\u8F93\u5C42"}),"\n",(0,i.jsxs)(n.li,{children:["Content-Encoding - \u4E0D\u8981\u52A8\u6001\u4FEE\u6539 - \u4E1A\u52A1\u903B\u8F91\u5C42\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5927\u591A\u5BA2\u6237\u7AEF\u5B9E\u73B0\u90FD\u4F7F\u7528 Content-Encoding \u68C0\u6D4B\u538B\u7F29"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u8FD4\u56DE content-encoding: gzip\ncurl -H 'Accept-encoding: gzip' -I https://s.wener.me\n\ncurl -H 'Accept-encoding: zstd, br, gzip, deflate' -I https://s.wener.me\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://support.cloudflare.com/hc/en-us/articles/200168396",children:"What will Cloudflare compress?"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://stackoverflow.com/a/11664307/1870054",children:"https://stackoverflow.com/a/11664307/1870054"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"301-vs-302",children:"301 vs 302"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["301 Moved Permanently\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6C38\u4E45\uFF0C\u5BA2\u6237\u7AEF\u4E0B\u6B21\u53EF\u80FD\u76F4\u63A5\u6620\u5C04\u91CD\u5B9A\u5411\u540E\u7684\u5730\u5740"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["302 Found / Moved Temporarily\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4E34\u65F6\uFF0C\u8FD8\u4F1A\u518D\u8BF7\u6C42"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["303 See Other\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7279\u5B9A\u8BED\u4E49"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["307 Temporary Redirect\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u8BF7\u6C42\u91CD\u53D1"}),"\n",(0,i.jsx)(n.li,{children:"\u652F\u6301 POST"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["308 Permanent Redirect\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7C7B\u4F3C 301 \u4F46\u4E0D\u5141\u8BB8\u4FEE\u6539 method"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"http-searchquery-method",children:"HTTP SEARCH/QUERY Method"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"GET \u652F\u6301\u7F13\u5B58\uFF0C\u4F46\u4E0D\u80FD\u643A\u5E26 Body \u8BF7\u6C42"}),"\n",(0,i.jsx)(n.li,{children:"POST \u53EF\u4EE5\u7528\u4F5C\u67E5\u8BE2\uFF0C\u4F46\u4E0D\u80FD\u7F13\u5B58"}),"\n",(0,i.jsx)(n.li,{children:"\u76EE\u524D\u5E94\u8BE5\u4F1A\u652F\u6301 QUERY \u65B9\u6CD5"}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"HTTP SEARCH is a new HTTP method, for safe requests that include a request body. It's still early & evolving, but it was recently adopted as an IETF draft standard, and it's going to add some great new tools for HTTP development everywhere."}),"\n",(0,i.jsx)(n.p,{children:"-- httptoolkit"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/draft-ietf-httpbis-safe-method-w-body/",children:"https://datatracker.ietf.org/doc/draft-ietf-httpbis-safe-method-w-body/"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/httpwg/http-extensions/labels/safe-method-w-body",children:"https://github.com/httpwg/http-extensions/labels/safe-method-w-body"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://httptoolkit.com/blog/http-search-method/",children:"https://httptoolkit.com/blog/http-search-method/"})}),"\n",(0,i.jsxs)(n.li,{children:["ecosystem\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/nestjs/nest/pull/10533",children:"https://github.com/nestjs/nest/pull/10533"})," NextJS v10 support SEARCH method"]}),"\n",(0,i.jsxs)(n.li,{children:["Support for new HTTP QUERY method ",(0,i.jsx)(n.a,{href:"https://github.com/akka/akka-http/issues/3936",children:"akka-http#3936"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"accept-encoding",children:"Accept-Encoding"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Chrome 123\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Accept-Encoding: gzip, deflate, br, zstd"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/nodejs/undici/issues/2847",children:"nodejs/undici#2847"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"fetch zstd support"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://caniuse.com/zstd",children:"https://caniuse.com/zstd"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/web-platform-tests/wpt/tree/master/fetch/content-encoding/zstd",children:"https://github.com/web-platform-tests/wpt/tree/master/fetch/content-encoding/zstd"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"real-ip",children:"Real IP"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["X-Forwarded-For\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53CD\u5411\u4EE3\u7406"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"X-Forwarded-For: <client>, <proxy1>, <proxy2>"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Forwarded\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"RFC 7239"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Forwarded: for=<client-ip>, for=<proxy1>;proto=https;by=<proxy2>"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["X-Real-IP\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Nginx"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["CF-Connecting-IP\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cloudflare"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"CF-Connecting-IP: <client-ip>"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["True-Client-Ip\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cloudflare Enterprise"}),"\n",(0,i.jsx)(n.li,{children:"Akamai CDN"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"True-Client-IP: <client-ip>"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["X-Cluster-Client-IP\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"AWS Elastic Load Balancer"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"X-Cluster-Client-IP: <client-ip>"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"cf-ray"}),"\n",(0,i.jsx)(n.li,{children:"cf-visitor"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Proxy\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Via: <protocol> <hostname>"})}),"\n",(0,i.jsx)(n.li,{children:"X-Forwarded-Proto"}),"\n",(0,i.jsx)(n.li,{children:"X-Forwarded-Host"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Request-Start: t=1672531200"}),"\n",(0,i.jsx)(n.li,{children:"X-Request-ID"}),"\n",(0,i.jsx)(n.li,{children:"Request-ID"}),"\n"]})]})}function a(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},917776:function(e,n,t){t.d(n,{R:()=>r,x:()=>c});var s=t(7378);let i={},l=s.createContext(i);function r(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);