"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["339246"],{442800:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>a,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>o,contentTitle:()=>r});var s=JSON.parse('{"id":"hardware/iot/tasmota","title":"Tasmota Open-Source Firmware for ESP8266/ESP32","description":"Tasmota is an alternative firmware for ESP8266 and ESP32-based devices, focusing on local control over MQTT with a web-based configuration UI. It is widely used to \\"de-cloud\\" smart plugs and switches.","source":"@site/../notes/hardware/iot/tasmota.md","sourceDirName":"hardware/iot","slug":"/hardware/iot/tasmota","permalink":"/notes/hardware/iot/tasmota","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/hardware/iot/tasmota.md","tags":[{"inline":true,"label":"Hardware","permalink":"/notes/tags/hardware"},{"inline":true,"label":"IoT","permalink":"/notes/tags/io-t"},{"inline":true,"label":"Tasmota","permalink":"/notes/tags/tasmota"},{"inline":true,"label":"ESP8266","permalink":"/notes/tags/esp-8266"},{"inline":true,"label":"ESP32","permalink":"/notes/tags/esp-32"},{"inline":true,"label":"HomeAssistant","permalink":"/notes/tags/home-assistant"},{"inline":true,"label":"MQTT","permalink":"/notes/tags/mqtt"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1767451770000,"frontMatter":{"title":"Tasmota Open-Source Firmware for ESP8266/ESP32","tags":["Hardware","IoT","Tasmota","ESP8266","ESP32","HomeAssistant","MQTT"]},"sidebar":"docs","previous":{"title":"MQTT (Message Queuing Telemetry Transport) Protocol","permalink":"/notes/hardware/iot/mqtt"},"next":{"title":"Z-Wave Wireless Communication Protocol","permalink":"/notes/hardware/iot/z-wave"}}'),i=t(486106),l=t(917776);let a={title:"Tasmota Open-Source Firmware for ESP8266/ESP32",tags:["Hardware","IoT","Tasmota","ESP8266","ESP32","HomeAssistant","MQTT"]},r="Tasmota Open-Source Firmware",o={},d=[{value:"Initial Setup &amp; Tools",id:"initial-setup--tools",level:2},{value:"Installing esptool",id:"installing-esptool",level:3},{value:"Basic Device Diagnostics",id:"basic-device-diagnostics",level:3},{value:"Flashing Procedure",id:"flashing-procedure",level:2},{value:"1. Backup &amp; Erase",id:"1-backup--erase",level:3},{value:"2. Download &amp; Flash Tasmota",id:"2-download--flash-tasmota",level:3},{value:"3. Initial Configuration",id:"3-initial-configuration",level:3},{value:"Hardware Flashing Pinout (Generic ESP8266)",id:"hardware-flashing-pinout-generic-esp8266",level:2},{value:"Home Assistant Integration",id:"home-assistant-integration",level:2},{value:"Enabling Discovery",id:"enabling-discovery",level:3},{value:"Logging &amp; Debugging",id:"logging--debugging",level:3}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"tasmota-open-source-firmware",children:"Tasmota Open-Source Firmware"})}),"\n",(0,i.jsx)(n.p,{children:'Tasmota is an alternative firmware for ESP8266 and ESP32-based devices, focusing on local control over MQTT with a web-based configuration UI. It is widely used to "de-cloud" smart plugs and switches.'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://tasmota.github.io/docs/",children:"Tasmota Documentation"})}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/arendst/Tasmota",children:"arendst/Tasmota"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"C, GPL-3.0"}),"\n",(0,i.jsx)(n.li,{children:"Core firmware project. Includes extensive support for sensors, displays, and energy monitoring."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"initial-setup--tools",children:"Initial Setup & Tools"}),"\n",(0,i.jsx)(n.h3,{id:"installing-esptool",children:"Installing esptool"}),"\n",(0,i.jsx)(n.p,{children:"The standard CLI tool for flashing ESP devices."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Alpine Linux example\napk add py3-pip py3-wheel\nsudo pip install esptool\n"})}),"\n",(0,i.jsx)(n.h3,{id:"basic-device-diagnostics",children:"Basic Device Diagnostics"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Verify connection and read chip info\nesptool.py read_mac\nesptool.py flash_id\n"})}),"\n",(0,i.jsx)(n.h2,{id:"flashing-procedure",children:"Flashing Procedure"}),"\n",(0,i.jsx)(n.h3,{id:"1-backup--erase",children:"1. Backup & Erase"}),"\n",(0,i.jsx)(n.p,{children:"It is highly recommended to backup the original firmware before erasing."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Backup 1MB flash\nesptool.py read_flash 0x00000 0x100000 fwbackup.bin\n\n# Erase flash completely\nesptool.py erase_flash\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-download--flash-tasmota",children:"2. Download & Flash Tasmota"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Download latest Chinese version\ncurl -LO https://github.com/arendst/Tasmota/releases/latest/download/tasmota-CN.bin\n\n# Flash (typical ESP8266 settings: 1MB flash, DOUT mode)\nesptool.py write_flash -fs 1MB -fm dout 0x0 tasmota-CN.bin\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-initial-configuration",children:"3. Initial Configuration"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["After flashing, the device will broadcast an AP like ",(0,i.jsx)(n.code,{children:"tasmota_XXXXXX-####"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Connect to it and navigate to ",(0,i.jsx)(n.code,{children:"http://192.168.4.1"})," to configure your WiFi."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"hardware-flashing-pinout-generic-esp8266",children:"Hardware Flashing Pinout (Generic ESP8266)"}),"\n",(0,i.jsxs)(n.p,{children:["To enter flashing mode, ",(0,i.jsx)(n.strong,{children:"GPIO0"})," must be pulled to ",(0,i.jsx)(n.strong,{children:"GND"})," during power-up or reset."]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"ESP Pin"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Connection"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Note"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"GND"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"GND"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Common ground with USB adapter."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"GP2"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Open"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Not connected."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"GP0"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"GND"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"CRITICAL: Pull to GND to enter flash mode."})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"RXD"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"TX"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Cross-connected to adapter."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"TXD"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"RX"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Cross-connected to adapter."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"CHPD"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"3.3V"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Enable pin (High)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"RST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Open"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Reset pin."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"VCC"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"3.3V"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"3.3V Power (Do not use 5V)."})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"home-assistant-integration",children:"Home Assistant Integration"}),"\n",(0,i.jsx)(n.p,{children:"Tasmota supports Home Assistant MQTT Discovery for automatic setup."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://tasmota.github.io/docs/Home-Assistant/",children:"Tasmota Home Assistant Integration Guide"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"enabling-discovery",children:"Enabling Discovery"}),"\n",(0,i.jsx)(n.p,{children:"Navigate to the Tasmota console and run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Enable Home Assistant MQTT Discovery\nSetOption19 1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"logging--debugging",children:"Logging & Debugging"}),"\n",(0,i.jsx)(n.p,{children:"Example MQTT state messages observed via syslog:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// STATE message\ntele/tasmota_0A7B40/STATE = {"Time":"2020-10-19T20:35:29","Uptime":"0T00:08:47","UptimeSec":527,"Heap":25,"SleepMode":"Dynamic","Sleep":50,"LoadAvg":19,"MqttCount":1,"POWER":"OFF","Wifi":{"RSSI":96,"Signal":-52}}\n\n// POWER result\nstat/tasmota_0A7B40/RESULT = {"POWER":"OFF"}\nstat/tasmota_0A7B40/POWER = OFF\n'})})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},917776:function(e,n,t){t.d(n,{R:()=>a,x:()=>r});var s=t(7378);let i={},l=s.createContext(i);function a(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);