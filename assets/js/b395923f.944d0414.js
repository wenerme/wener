"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["14455"],{834416:function(n,e,l){l.r(e),l.d(e,{frontMatter:()=>t,toc:()=>o,default:()=>x,metadata:()=>r,assets:()=>c,contentTitle:()=>d});var r=JSON.parse('{"id":"service/network/proxy/proxy-faq","title":"Proxy FAQ","description":"tunnel vs overlay","source":"@site/../notes/service/network/proxy/proxy-faq.md","sourceDirName":"service/network/proxy","slug":"/service/network/proxy/faq","permalink":"/notes/service/network/proxy/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/proxy/proxy-faq.md","tags":[{"inline":true,"label":"FAQ","permalink":"/notes/tags/faq"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1766368312000,"frontMatter":{"tags":["FAQ"]},"sidebar":"docs","previous":{"title":"Proxy Awesome","permalink":"/notes/service/network/proxy/awesome"},"next":{"title":"proxychains-ng","permalink":"/notes/service/network/proxy/proxychain-ng"}}'),s=l(486106),i=l(917776);let t={tags:["FAQ"]},d="Proxy FAQ",c={},o=[{value:"tunnel vs overlay",id:"tunnel-vs-overlay",level:2},{value:"fake-ip",id:"fake-ip",level:2},{value:"fakeip + tun",id:"fakeip--tun",level:2},{value:"proxy env",id:"proxy-env",level:2},{value:"fakedns",id:"fakedns",level:2},{value:"\u83B7\u53D6\u4EE3\u7406\u539F\u59CB IP",id:"\u83B7\u53D6\u4EE3\u7406\u539F\u59CB-ip",level:2},{value:"jdbc url",id:"jdbc-url",level:2},{value:"TProxy vs Redirect",id:"tproxy-vs-redirect",level:2},{value:"VLESS vs VMess vs Trojan",id:"vless-vs-vmess-vs-trojan",level:2},{value:"Reality Domains",id:"reality-domains",level:2},{value:"Reality vs Mieru",id:"reality-vs-mieru",level:2},{value:"XTLS vs Xray vs V2Ray vs V2Fly",id:"xtls-vs-xray-vs-v2ray-vs-v2fly",level:2}];function h(n){let e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"proxy-faq",children:"Proxy FAQ"})}),"\n",(0,s.jsx)(e.h2,{id:"tunnel-vs-overlay",children:"tunnel vs overlay"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["tunnel\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5355\u7AEF\u53E3 - \u7AEF\u53E3\u6309\u9700\u6620\u5C04"}),"\n",(0,s.jsx)(e.li,{children:"\u5355 IP/\u56FA\u5B9A IP - TCP IP \u5C42 - L4"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["overlay\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7F51\u7EDC - CIDR"}),"\n",(0,s.jsx)(e.li,{children:"mac \u5C42 - L2"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"fake-ip",children:"fake-ip"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["DNS \u670D\u52A1\u5668\u4E3A\u57DF\u540D\u5206\u914D\u5047\u7684 IP\uFF0C\u5728\u8BF7\u6C42\u65F6\u5C31\u884C\u6620\u5C04\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5BA2\u6237\u7AEF\u8BF7\u6C42 A google.com"}),"\n",(0,s.jsx)(e.li,{children:"\u670D\u52A1\u7AEF\u8FD4\u56DE 192.168.2.1"}),"\n",(0,s.jsxs)(e.li,{children:["\u4EE3\u7406\u670D\u52A1\u6536\u5230\u8BF7\u6C42 192.168.2.1\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4EE3\u7406\u8BF7\u6C42 google.com"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u4EE3\u7406\u670D\u52A1\u4F5C\u4E3A\u7F51\u5173\u89D2\u8272"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.rfc-editor.org/rfc/rfc3089",children:"https://www.rfc-editor.org/rfc/rfc3089"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://blog.skk.moe/post/what-happend-to-dns-in-proxy/",children:"https://blog.skk.moe/post/what-happend-to-dns-in-proxy/"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"fakeip--tun",children:"fakeip + tun"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5168\u5C40\u900F\u660E"}),"\n",(0,s.jsxs)(e.li,{children:["TEST-NET\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://datatracker.ietf.org/doc/html/rfc5737",children:"RFC 5737"}),": \u201CIPv4 Address Blocks Reserved for Documentation\u201D"]}),"\n",(0,s.jsx)(e.li,{children:"192.0.2.0/24, 198.51.100.0/24, 203.0.113.0/24"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"proxy-env",children:"proxy env"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"[scheme]_proxy"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"http_proxy"}),"\n",(0,s.jsx)(e.li,{children:"https_proxy"}),"\n",(0,s.jsx)(e.li,{children:"ftp_proxy"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"all_proxy, ALL_PROXY"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://everything.curl.dev/usingcurl/proxies",children:"https://everything.curl.dev/usingcurl/proxies"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"fakedns",children:"fakedns"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"fake ip"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://blog.skk.moe/post/what-happend-to-dns-in-proxy/",children:"https://blog.skk.moe/post/what-happend-to-dns-in-proxy/"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"\u83B7\u53D6\u4EE3\u7406\u539F\u59CB-ip",children:"\u83B7\u53D6\u4EE3\u7406\u539F\u59CB IP"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679C\u7528\u6237\u505A\u4E86\u5206\u6D41\uFF0C\u5219\u53EF\u4EE5\u8003\u8651\u8BBF\u95EE\u672A\u5206\u6D41\u7684\u5730\u5740\u8BF7\u6C42 URL"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://vv.video.qq.com/checktime?otype=json&callback=onCheckTime",children:"https://vv.video.qq.com/checktime?otype=json&callback=onCheckTime"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"jdbc-url",children:"jdbc url"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"jdbc:mysql://192.168.99.100:33056/guest?user=guest&\\\npassword=guest&failOverReadOnly=false&maxReconnects=10&\\\nsocksProxyHost=82.204.180.43&socksProxyPort=36819&autoReconnect=true\n"})}),"\n",(0,s.jsx)(e.h2,{id:"tproxy-vs-redirect",children:"TProxy vs Redirect"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["TProxy\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Transparent Proxy"}),"\n",(0,s.jsx)(e.li,{children:"iptables SO_MARK"}),"\n",(0,s.jsx)(e.li,{children:"\u7528\u4E8E\u5904\u7406\u975E\u672C\u5730\u751F\u6210\u7684\u6D41\u91CF\uFF08\u5982\u8DEF\u7531\u5668\u8F6C\u53D1\u7684\u6D41\u91CF\uFF09\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4FDD\u7559\u76EE\u6807\u5730\u5740"}),"\n",(0,s.jsx)(e.li,{children:"\u652F\u6301 UDP \u548C TCP"}),"\n",(0,s.jsx)(e.li,{children:"\u914D\u7F6E\u590D\u6742\uFF0C\u4F9D\u8D56 Linux \u5185\u6838\u6A21\u5757"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["Redirect\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"iptables REDIRECT"}),"\n",(0,s.jsx)(e.li,{children:"\u914D\u7F6E\u7B80\u5355\uFF0C\u65E0\u9700\u590D\u6742\u8DEF\u7531"}),"\n",(0,s.jsx)(e.li,{children:"\u5C06\u5BA2\u6237\u7AEF\u6D41\u91CF\u76F4\u63A5\u91CD\u5B9A\u5411\u5230\u4EE3\u7406\u670D\u52A1\u7684\u6307\u5B9A\u7AEF\u53E3\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4E0D\u4FDD\u7559\u76EE\u6807 IP \u548C\u7AEF\u53E3\uFF0C\u8F6C\u53D1\u7684\u76EE\u6807\u4E3A\u4EE3\u7406\u7684\u76D1\u542C\u5730\u5740\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"sysctl -w net.ipv4.ip_forward=1\n\n# TProxy\niptables -t mangle -A PREROUTING -p tcp -j TPROXY --on-port 12345 --tproxy-mark 1\nip rule add fwmark 1 lookup 100\nip route add local default dev lo table 100\n\n# Redirect\niptables -t nat -A PREROUTING -p tcp -j REDIRECT --to-ports 12345\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"TProxy"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ip rule add fwmark 1 lookup tproxy\nip route add local default dev lo table tproxy\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-nft",children:'table ip mangle {\n    chain PREROUTING {\n        type filter hook prerouting priority -150; policy accept;\n        # \u6807\u8BB0 TCP \u548C UDP \u6D41\u91CF\n        ip daddr != 127.0.0.1 meta l4proto { tcp, udp } mark set 1 comment "Mark packets for TProxy"\n        # \u5C06\u6807\u8BB0\u7684\u6D41\u91CF\u4EA4\u7ED9 TProxy\n        mark 1 tproxy to :12345 comment "Redirect marked packets to TProxy"\n    }\n    chain OUTPUT {\n        type route hook output priority -150; policy accept;\n    }\n}\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-txt",metastring:'title="/etc/iproute2/rt_tables"',children:"100     tproxy\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Redirect"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-nft",children:'table ip nat {\n    chain PREROUTING {\n        type nat hook prerouting priority -100; policy accept;\n        # \u5C06\u6D41\u91CF\u91CD\u5B9A\u5411\u5230 Sing-box \u7684\u76D1\u542C\u7AEF\u53E3\n        ip daddr != 127.0.0.1 meta l4proto { tcp, udp } redirect to :12345 comment "Redirect packets to proxy"\n    }\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"vless-vs-vmess-vs-trojan",children:"VLESS vs VMess vs Trojan"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u9009\u62E9 vless+reality/tls \u6216 trojan"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u7279\u6027"}),(0,s.jsx)(e.th,{children:"VLESS"}),(0,s.jsx)(e.th,{children:"VMess"}),(0,s.jsx)(e.th,{children:"Trojan"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u52A0\u5BC6"}),(0,s.jsx)(e.td,{children:"\u65E0\u5185\u7F6E\u52A0\u5BC6"}),(0,s.jsx)(e.td,{children:"\u81EA\u5E26\u52A0\u5BC6\u5C42"}),(0,s.jsx)(e.td,{children:"TLS"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u6027\u80FD"}),(0,s.jsx)(e.td,{children:"\u8F83\u597D"}),(0,s.jsx)(e.td,{children:"\u4E00\u822C"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"TLS"}),(0,s.jsx)(e.td,{children:"\u63A8\u8350\u914D\u5408\u4F7F\u7528"}),(0,s.jsx)(e.td,{children:"\u53EF\u9009"}),(0,s.jsx)(e.td,{children:"\u5FC5\u987B"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u534F\u8BAE\u590D\u6742\u5EA6"}),(0,s.jsx)(e.td,{children:"\u7B80\u5355"}),(0,s.jsx)(e.td,{children:"\u8F83\u590D\u6742"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u68C0\u6D4B\u96BE\u5EA6"}),(0,s.jsx)(e.td,{children:"\u8F83\u96BE"}),(0,s.jsx)(e.td,{children:"\u8F83\u5BB9\u6613"}),(0,s.jsx)(e.td,{children:"\u8F83\u96BE"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u4F7F\u7528\u573A\u666F"}),(0,s.jsx)(e.td,{children:"\u914D\u5408 TLS \u4F7F\u7528"}),(0,s.jsx)(e.td,{children:"\u901A\u7528\u573A\u666F"}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["VLESS\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u914D\u5408 TLS/Reality \u4F7F\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u672C\u8EAB\u6CA1\u6709\u52A0\u5BC6"}),"\n",(0,s.jsx)(e.li,{children:"\u534F\u8BAE\u66F4\u7B80\u5355"}),"\n",(0,s.jsx)(e.li,{children:"\u6027\u80FD\u66F4\u597D"}),"\n",(0,s.jsx)(e.li,{children:"\u914D\u7F6E\u7B80\u5355"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["Trojan\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5FC5\u987B TLS"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["VMess\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"V2Ray \u539F\u751F\u52A0\u5BC6\u534F\u8BAE"}),"\n",(0,s.jsx)(e.li,{children:"\u4E0D\u65B9\u4FBF\u914D\u7F6E TLS"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u989D\u5916\u52A0\u5BC6\u5C42"}),"\n",(0,s.jsx)(e.li,{children:"\u517C\u5BB9\u6027\u8981\u6C42\u9AD8\u7684\u573A\u666F"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"reality-domains",children:"Reality Domains"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"http://www.microsoft.com",children:"www.microsoft.com"})}),"\n",(0,s.jsx)(e.li,{children:"learn.microsoft.com"}),"\n",(0,s.jsx)(e.li,{children:"itunes.apple.com"}),"\n",(0,s.jsx)(e.li,{children:"swdist.apple.com"}),"\n",(0,s.jsx)(e.li,{children:"gateway.icloud.com"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"http://www.amazon.com",children:"www.amazon.com"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4E5F\u53EF\u4EE5\u6839\u636E\u533A\u57DF\u9009\u62E9\u4E0D\u540C\u7684\u57DF\u540D"}),"\n",(0,s.jsx)(e.h2,{id:"reality-vs-mieru",children:"Reality vs Mieru"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Reality\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4F2A\u88C5"}),"\n",(0,s.jsx)(e.li,{children:"Fake TLS"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["Mieru\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6DF7\u6C8C"}),"\n",(0,s.jsx)(e.li,{children:"\u6297\u5E72\u6270\u5F3A\uFF0C\u80FD\u5F00\u591A\u4E2A\u7AEF\u53E3\uFF0C\u652F\u6301 TCP\u3001UDP"}),"\n",(0,s.jsx)(e.li,{children:"\u4E0D\u9700\u8981 TLS"}),"\n",(0,s.jsx)(e.li,{children:"\u6BD4\u8F83\u65B0\uFF0C\u652F\u6301\u7684\u8F83\u5C11"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"xtls-vs-xray-vs-v2ray-vs-v2fly",children:"XTLS vs Xray vs V2Ray vs V2Fly"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Xray-core \u662F v2ray-core \u7684\u8D85\u96C6"}),"\n"]})]})}function x(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},917776:function(n,e,l){l.d(e,{R:()=>t,x:()=>d});var r=l(7378);let s={},i=r.createContext(s);function t(n){let e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);