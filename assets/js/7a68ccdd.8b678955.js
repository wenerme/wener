"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["865672"],{540560:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>d,toc:()=>o,default:()=>u,metadata:()=>t,assets:()=>c,contentTitle:()=>r});var t=JSON.parse('{"id":"devops/infra/cloud-init","title":"Cloud Init","description":"- cloud-init.io / cloud-init","source":"@site/../notes/devops/infra/cloud-init.md","sourceDirName":"devops/infra","slug":"/devops/infra/cloud-init","permalink":"/notes/devops/infra/cloud-init","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/infra/cloud-init.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1748237590000,"frontMatter":{"title":"Cloud Init"},"sidebar":"docs","previous":{"title":"CFEngine","permalink":"/notes/devops/infra/cfengine"},"next":{"title":"CMDB","permalink":"/notes/devops/infra/cmdb"}}'),l=i(486106),s=i(917776);let d={title:"Cloud Init"},r="cloud-init",c={},o=[];function a(n){let e={a:"a",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"cloud-init",children:"cloud-init"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://cloud-init.io/",children:"cloud-init.io"})," / ",(0,l.jsx)(e.a,{href:"https://launchpad.net/cloud-init/",children:"cloud-init"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Apply user data to your instances automatically"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"http://cloudinit.readthedocs.io/en/latest/index.html",children:"Document"})}),"\n",(0,l.jsxs)(e.li,{children:["GitHub mirror ",(0,l.jsx)(e.a,{href:"https://github.com/cloud-init/cloud-init",children:"cloud-init/cloud-init"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["AlpineLinux\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/packages?name=cloud-init&branch=edge",children:"cloud-init"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://git.alpinelinux.org/cgit/aports/tree/testing/cloud-init/APKBUILD",children:"testing/cloud-init/APKBUILD"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["Ubuntu\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://help.ubuntu.com/community/CloudInit",children:"CloudInit"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["ArchLinux\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://wiki.archlinux.org/index.php/Cloud-init",children:"Cloud-init"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u7279\u6027\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u914D\u7F6E\u81EA\u5B9A\u4E49 locale"}),"\n",(0,l.jsx)(e.li,{children:"\u914D\u7F6E hostname"}),"\n",(0,l.jsx)(e.li,{children:"\u751F\u6210 SSH \u5BC6\u94A5"}),"\n",(0,l.jsx)(e.li,{children:"\u914D\u7F6E\u4E34\u65F6\u6302\u8F7D\u70B9"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u652F\u6301\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["terraform-provider-libvirt ",(0,l.jsx)(e.a,{href:"https://github.com/dmacvicar/terraform-provider-libvirt/blob/master/website/docs/r/cloudinit.html.markdown",children:"libvirt_cloudinit_disk"})]}),"\n",(0,l.jsxs)(e.li,{children:["Ansible ",(0,l.jsx)(e.a,{href:"https://docs.ansible.com/ansible/latest/modules/cloud_init_data_facts_module.html",children:"cloud_init_data_facts_module"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u83B7\u53D6 cloud init \u914D\u7F6E\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"/var/log/cloud-init.log"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# < 3.13\n# ifupdown-ng\napk add ifupdown-ng iproute2-minimal\napk add cloud-init\n\ncloud-init status --wait\n\n# \u963F\u91CC\u4E91\ncurl http://100.100.100.200/\n\n# Linode / Akamai\n# fd00:a9fe:a9fe::1\ncurl 169.254.169.254\n\n# GCE\ncurl http://meta-data.google.internal/computeMetadata/v1/\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://gist.github.com/syntaqx/9dd3ff11fb3d48b032c84f3e31af9163",children:"cloud init to install docker on ubuntu"})}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"user-data"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"#cloud-config\npassword: password\nchpasswd:\n  expire: False\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"meta-data"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"instance-id: someid/somehostname\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Instance Metadata Service (IMDS)"}),"\n",(0,l.jsxs)(e.li,{children:["/\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"meta-data"}),"\n",(0,l.jsx)(e.li,{children:"user-data"}),"\n",(0,l.jsx)(e.li,{children:"vendor-data"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["qemu ",(0,l.jsx)(e.code,{children:"-smbios type=1,serial=ds='nocloud;s=http://10.0.2.2:8000/'"})]}),"\n",(0,l.jsxs)(e.li,{children:["nocloud\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://cloudinit.readthedocs.io/en/latest/reference/datasources/nocloud.html",children:"https://cloudinit.readthedocs.io/en/latest/reference/datasources/nocloud.html"})}),"\n"]}),"\n"]}),"\n"]})]})}function u(n={}){let{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},917776:function(n,e,i){i.d(e,{R:()=>d,x:()=>r});var t=i(7378);let l={},s=t.createContext(l);function d(n){let e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);