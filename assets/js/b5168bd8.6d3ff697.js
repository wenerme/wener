"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["988176"],{15116:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>c,toc:()=>h,default:()=>j,metadata:()=>s,assets:()=>t,contentTitle:()=>d});var s=JSON.parse('{"id":"java/spring/security","title":"Spring Security","description":"Tips","source":"@site/../notes/java/spring/spring-security.md","sourceDirName":"java/spring","slug":"/java/spring/security","permalink":"/notes/java/spring/security","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/java/spring/spring-security.md","tags":[],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1602516815000,"frontMatter":{"id":"security","title":"Spring Security"},"sidebar":"docs","previous":{"title":"Spring Security OAuth2","permalink":"/notes/java/spring/security-oauth2"},"next":{"title":"\u7248\u672C","permalink":"/notes/java/spring/version"}}'),r=i(486106),l=i(917776);let c={id:"security",title:"Spring Security"},d="Spring Security",t={},h=[{value:"Tips",id:"tips",level:2},{value:"Notes",id:"notes",level:2},{value:"Doc Notes",id:"doc-notes",level:2},{value:"ACL",id:"acl",level:3},{value:"\u4E3B\u8981\u5BF9\u8C61",id:"\u4E3B\u8981\u5BF9\u8C61",level:2},{value:"\u57FA\u4E8E\u8868\u8FBE\u5F0F\u7684\u6743\u9650\u63A7\u5236",id:"\u57FA\u4E8E\u8868\u8FBE\u5F0F\u7684\u6743\u9650\u63A7\u5236",level:2},{value:"Filter \u987A\u5E8F",id:"filter-\u987A\u5E8F",level:2},{value:"\u6807\u51C6\u8FC7\u6EE4\u5668\u522B\u540D\u548C\u987A\u5E8F",id:"\u6807\u51C6\u8FC7\u6EE4\u5668\u522B\u540D\u548C\u987A\u5E8F",level:2}];function x(n){let e={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"spring-security",children:"Spring Security"})}),"\n",(0,r.jsx)(e.h2,{id:"tips",children:"Tips"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"http://www.baeldung.com/spring-security-login",children:"http://www.baeldung.com/spring-security-login"})}),"\n",(0,r.jsx)(e.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@EnableGlobalMethodSecurity"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6807\u8BC6\u88AB\u6CE8\u89E3\u7684\u7C7B\u53EF\u4EE5\u7528\u4E8E\u914D\u7F6E ",(0,r.jsx)(e.code,{children:"AuthenticationManagerBuilder"}),", \u5373\u53EF\u4EE5\u6CE8\u5165\u8BE5\u914D\u7F6E\u5BF9\u8C61"]}),"\n",(0,r.jsxs)(e.li,{children:["\u8BE5\u6CE8\u89E3\u53EF\u4EE5\u4F5C\u4E3A\u5143\u6CE8\u89E3\u4F7F\u7528, \u56E0\u6B64 ",(0,r.jsx)(e.code,{children:"@EnableWebSecurity"})," \u548C ",(0,r.jsx)(e.code,{children:"@EnableWebMvcSecurity"})," \u90FD\u6709\u8FD9\u6837\u7684\u529F\u80FD"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"AuthenticationConfiguration"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@EnableWebSecurity"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5982\u679C\u6709 mvc \u73AF\u5883, \u4F1A\u542F\u7528 ",(0,r.jsx)(e.code,{children:"WebMvcSecurityConfiguration"})," \u914D\u7F6E"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"WebMvcSecurityConfiguration"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6DFB\u52A0\u4E86 ",(0,r.jsx)(e.code,{children:"@AuthenticationPrincipal"})," \u65B9\u6CD5\u53C2\u6570\u6CE8\u89E3\u7684\u5904\u7406"]}),"\n",(0,r.jsxs)(e.li,{children:["\u6DFB\u52A0\u4E86 ",(0,r.jsx)(e.code,{children:"CsrfToken"})," \u53C2\u6570\u6CE8\u5165"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"WebSecurityConfiguration"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"WebSecurity"})," \u6765\u6784\u5EFA\u4E00\u4E2A ",(0,r.jsx)(e.code,{children:"Filter"})," (springSecurityFilterChain)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"WebSecurity"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6838\u5FC3\u914D\u7F6E\u4E0A\u4E0B\u6587"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"WebSecurityConfigurer"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4ECE ",(0,r.jsx)(e.code,{children:"AutowiredWebSecurityConfigurersIgnoreParents"})," \u53D6\u5F97"]}),"\n",(0,r.jsxs)(e.li,{children:["\u7EE7\u627F\u81EA ",(0,r.jsx)(e.code,{children:"SecurityConfigurer"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u914D\u7F6E\u7ED3\u679C\u4E3A ",(0,r.jsx)(e.code,{children:"Filter"})]}),"\n",(0,r.jsx)(e.li,{children:"\u672A\u6DFB\u52A0\u4EFB\u4F55\u5176\u4ED6\u7684\u65B9\u6CD5"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@EnableWebMvcSecurity"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5DF2\u5F03\u7528, \u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"@EnableWebSecurity"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@EnableGlobalMethodSecurity"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"GlobalMethodSecuritySelector"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6839\u636E\u6CE8\u89E3\u4E0A\u542F\u7528\u7684\u529F\u80FD\u6765\u5BFC\u5165\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"GlobalMethodSecurityConfiguration"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"MethodInterceptor"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4F7F\u7528\u914D\u7F6E\u9879\u6784\u5EFA\u7684\u65B9\u6CD5\u62E6\u622A (methodSecurityInterceptor)"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AccessDecisionManager"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u4E3A ",(0,r.jsx)(e.code,{children:"AffirmativeBased"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"PreInvocationAuthorizationAdviceVoter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5B9E\u73B0 ",(0,r.jsx)(e.code,{children:"@PreFilter"})," \u548C ",(0,r.jsx)(e.code,{children:"@PreAuthorize"})]}),"\n",(0,r.jsx)(e.li,{children:"\u5B9E\u9645\u4E0A\u8BE5\u7C7B\u578B\u7684\u5224\u65AD\u4E0D\u9700\u8981\u4F5C\u4E3A\u57FA\u4E8E\u6295\u7968\u7684\u5224\u65AD, \u56E0\u4E3A\u5DF2\u7ECF\u80FD\u4ECE\u4FE1\u606F\u4E2D\u62FF\u5230\u7ED3\u679C, \u4E0D\u8FC7\u4E3A\u4E86\u53EF\u8BFB\u6027\u624D\u4EE5\u57FA\u4E8E\u6295\u7968\u7684\u7CFB\u7EDF\u6765\u5B9E\u73B0"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"RoleVoter"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"AuthenticatedVoter"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AfterInvocationManager"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u6CA1\u6709\u5F00\u542F\u524D\u540E\u5904\u7406(prePost), \u90A3\u4E48\u4E0D\u4F1A\u6709\u8BE5\u5B9E\u73B0"}),"\n",(0,r.jsx)(e.li,{children:"\u8BE5\u63A5\u53E3\u4E3B\u8981\u7528\u4E8E\u5B9E\u73B0\u540E\u5904\u7406"}),"\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u4E3A ",(0,r.jsx)(e.code,{children:"AfterInvocationProviderManager"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5B9E\u9645\u51B3\u7B56\u7531 ",(0,r.jsx)(e.code,{children:"AfterInvocationProvider"})," \u5904\u7406"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"PostInvocationAdviceProvider"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"PostInvocationAuthorizationAdvice"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ExpressionBasedPostInvocationAdvice"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"PostInvocationExpressionAttribute"})}),"\n",(0,r.jsxs)(e.li,{children:["\u5B9E\u73B0 ",(0,r.jsx)(e.code,{children:"@PostFilter"})," \u548C ",(0,r.jsx)(e.code,{children:"@PostAuthorize"})," \u7684\u5904\u7406"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"MethodSecurityMetadataSource"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4E00\u4E2A ",(0,r.jsx)(e.code,{children:"SecurityMetadataSource"})," \u7684\u5B9E\u73B0"]}),"\n",(0,r.jsxs)(e.li,{children:["\u7528\u4E8E\u751F\u6210\u4E0D\u540C\u8BBF\u95EE\u51B3\u7B56 ",(0,r.jsx)(e.code,{children:"AccessDecisionManager"})," \u9700\u8981\u7684 ",(0,r.jsx)(e.code,{children:"ConfigAttribute"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"RunAsManager"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5904\u7406 ",(0,r.jsx)(e.code,{children:"@RunAs"})]}),"\n",(0,r.jsx)(e.li,{children:"\u9ED8\u8BA4\u6CA1\u6709\u5B9E\u73B0"}),"\n",(0,r.jsx)(e.li,{children:"\u6267\u884C\u65F6\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u6388\u6743\u5BF9\u8C61"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"Jsr250MetadataSourceConfiguration"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@DenyAll"}),", ",(0,r.jsx)(e.code,{children:"@PermitAll"}),", ",(0,r.jsx)(e.code,{children:"@RolesAllowed"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SecurityConfigurer"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u57FA\u7840\u7684\u5B89\u5168\u914D\u7F6E\u914D\u7F6E\u63A5\u53E3"}),"\n",(0,r.jsx)(e.li,{children:"\u6838\u5FC3\u7684\u914D\u7F6E\u914D\u7F6E\u5185\u5BB9\u5747\u7EE7\u627F\u81EA\u8BE5\u63A5\u53E3"}),"\n",(0,r.jsx)(e.li,{children:"\u5206\u4E3A\u914D\u7F6E\u7ED3\u679C\u548C\u914D\u7F6E\u4E0A\u4E0B\u6587"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SecurityBuilder"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u914D\u7F6E\u4E0A\u4E0B\u6587\u7684\u57FA\u7840\u63A5\u53E3"}),"\n",(0,r.jsx)(e.li,{children:"\u6700\u7EC8\u7531\u8BE5\u63A5\u53E3\u63D0\u4F9B\u7684\u65B9\u6CD5\u914D\u7F6E\u51FA\u7ED3\u679C\u914D\u7F6E\u5BF9\u8C61"}),"\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u8981\u5B9E\u73B0\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"WebSecurity"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"HttpSecurityBuilder"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"HttpSecurity"})}),"\n",(0,r.jsxs)(e.li,{children:["\u7ED3\u679C\u7C7B\u578B\u4E3A ",(0,r.jsx)(e.code,{children:"DefaultSecurityFilterChain"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u7684 Filter \u94FE\u987A\u5E8F\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ChannelProcessingFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u8981\u7528\u4E8E\u5224\u65AD\u662F\u5426\u662F\u4ECE ",(0,r.jsx)(e.code,{children:"https"})," \u7AEF\u53E3\u6765\u7684\u8BF7\u6C42"]}),"\n",(0,r.jsxs)(e.li,{children:["\u6784\u5EFA ",(0,r.jsx)(e.code,{children:"FilterInvocation"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u62FF\u5230\u76F8\u5E94\u7684\u5B89\u5168\u914D\u7F6E\u5C5E\u6027 ",(0,r.jsx)(e.code,{children:"ConfigAttribute"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u6700\u7EC8\u4EA4\u7531 ",(0,r.jsx)(e.code,{children:"ChannelDecisionManager"})," \u5224\u65AD"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ConcurrentSessionFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u7684 Filter \u94FE\u4E2D\u6709\u4E09\u4E2A ",(0,r.jsx)(e.code,{children:"ConcurrentSessionFilter"})]}),"\n",(0,r.jsx)(e.li,{children:"\u4E3B\u8981\u7528\u4E8E\u5904\u7406\u5E76\u53D1\u4F1A\u8BDD"}),"\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u8981\u505A\u4E24\u4EF6\u4E8B\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8C03\u7528 ",(0,r.jsx)(e.code,{children:"SessionRegistry#refreshLastRequest(String)"})]}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4FDD\u8BC1\u4F1A\u8BDD\u7684\u4E0A\u6B21\u66F4\u65B0\u65F6\u95F4\u662F\u6B63\u786E\u7684"}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsxs)(e.li,{children:["\u4ECE ",(0,r.jsx)(e.code,{children:"SessionRegistry"})," \u62FF ",(0,r.jsx)(e.code,{children:"SessionInformation"}),", \u5E76\u5224\u65AD\u662F\u5426\u8FC7\u671F"]}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u8FC7\u671F\u4E86\u5219\u6267\u884C\u9000\u51FA\u767B\u5F55\u903B\u8F91"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SecurityContextPersistenceFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5C06\u4ECE ",(0,r.jsx)(e.code,{children:"SecurityContextRepository"})," \u62FF\u5230\u7684\u5B89\u5168\u4E0A\u4E0B\u6587 ",(0,r.jsx)(e.code,{children:"SecurityContext"})," \u653E\u5230 ",(0,r.jsx)(e.code,{children:"SecurityContextHolder"})]}),"\n",(0,r.jsx)(e.li,{children:"\u5FC5\u987B\u5728\u6240\u6709\u6388\u6743\u673A\u5236\u4E4B\u524D\u6267\u884C"}),"\n",(0,r.jsxs)(e.li,{children:["\u4F7F\u7528\u8BF7\u6C42\u5BF9\u8C61\u7684\u5C5E\u6027(",(0,r.jsx)(e.code,{children:"__spring_security_scpf_applied"}),") \u6765\u4FDD\u8BC1\u53EA\u6267\u884C\u4E00\u6B21"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SecurityContextRepository"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u7528\u4E8E\u5728\u8BF7\u6C42\u4E4B\u95F4\u6301\u4E45\u5316 ",(0,r.jsx)(e.code,{children:"SecurityContext"})," \u4FE1\u606F\u7684\u63A5\u53E3"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5927\u591A\u662F\u60C5\u51B5\u4E0B\u662F\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"HttpSession"})," \u6765\u5B58\u50A8"]}),"\n",(0,r.jsxs)(e.li,{children:["\u52A0\u8F7D\u65F6\u4E0D\u4F1A\u53CD\u56DE ",(0,r.jsx)(e.code,{children:"null"}),", \u5982\u679C\u6CA1\u6709, \u4F1A\u8FD4\u56DE\u4E00\u4E2A\u7A7A\u7684\u4E0A\u4E0B\u6587"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"HttpSessionSecurityContextRepository"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4F1A\u8BDD\u5B58\u50A8\u952E ",(0,r.jsx)(e.code,{children:"SPRING_SECURITY_CONTEXT"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"NullSecurityContextRepository"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u4E0D\u542F\u7528\u4F1A\u8BDD\u5219\u4F1A\u4F7F\u7528\u8BE5\u5B9E\u73B0"}),"\n",(0,r.jsxs)(e.li,{children:["\u52A0\u8F7D\u4E0A\u4E0B\u6587\u65F6\u4F1A\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"SecurityContextHolder#createEmptyContext"})," \u521B\u5EFA\u7A7A\u7684\u4E0A\u4E0B\u6587"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"LogoutFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5904\u7406\u5339\u914D(",(0,r.jsx)(e.code,{children:"RequestMatcher"}),")\u7684\u9000\u51FA\u767B\u5F55\u8BF7\u6C42"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5B9E\u9645\u9000\u51FA\u767B\u5F55\u64CD\u4F5C\u4EA4\u7531 ",(0,r.jsx)(e.code,{children:"LogoutHandler"})," \u5904\u7406"]}),"\n",(0,r.jsxs)(e.li,{children:["\u9000\u51FA\u767B\u5F55\u6210\u529F\u540E\u901A\u77E5 ",(0,r.jsx)(e.code,{children:"LogoutSuccessHandler"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u8981\u5B9E\u73B0\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"CookieClearingLogoutHandler"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6E05\u7406 Cookie"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"CsrfLogoutHandler"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6E05\u7406 csrf"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SecurityContextLogoutHandler"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5931\u6548\u4F1A\u8BDD"}),"\n",(0,r.jsx)(e.li,{children:"\u53BB\u9664\u5B89\u5168\u4E0A\u4E0B\u6587\u4E2D\u7684\u6388\u6743"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AbstractRememberMeServices"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6E05\u9664  RememberMe \u4FE1\u606F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"X509AuthenticationFilter"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AbstractPreAuthenticatedProcessingFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6240\u6709\u8FDB\u884C\u9884\u8BA4\u8BC1\u7684\u5904\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u4E3B\u8981\u5904\u7406\u7531\u5916\u90E8\u7CFB\u7EDF\u8BA4\u8BC1\u7684\u60C5\u51B5"}),"\n",(0,r.jsxs)(e.li,{children:["\u4ECE\u8BF7\u6C42\u4E2D\u63D0\u53D6\u51FA ",(0,r.jsx)(e.code,{children:"principal"}),", \u800C\u4E0D\u662F\u5BF9\u4ED6\u4EEC\u8FDB\u884C\u8BA4\u8BC1"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5F53\u4E00\u4E2A\u8BA4\u8BC1\u5931\u8D25\u540E\u4F1A\u5C1D\u8BD5\u5176\u4ED6\u7684\u8BA4\u8BC1\u673A\u5236\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"continueFilterChainOnUnsuccessfulAuthentication"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u5DF2\u7ECF\u8FDB\u884C\u8FC7\u6388\u6743\u5219\u4E0D\u4F1A\u518D\u6B21\u8FDB\u884C"}),"\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u8981\u5B9E\u73B0\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"X509AuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6700\u5148\u6267\u884C"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"RequestHeaderAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.ca.com/us/products/ca-single-sign-on.html",children:"CA SSO"})}),"\n",(0,r.jsx)(e.li,{children:"CA Siteminder"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SM_USER"})," \u5934"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"RequestAttributeAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://webauth.stanford.edu/manual/mod/mod_webauth.html#java",children:"Stanford WebAuth"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPJavaInstall",children:"Shibboleth"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Shibboleth_(Internet2)",children:"Shibboleth (Internet2)"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"REMOTE_USER"})," \u8BF7\u6C42\u5C5E\u6027"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"CasAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5904\u7406 cas \u8BA4\u8BC1"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"UsernamePasswordAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u7531 ",(0,r.jsx)(e.code,{children:"formLogin"})," \u914D\u7F6E"]}),"\n",(0,r.jsx)(e.li,{children:"\u53D6\u8868\u5355\u4E2D\u7684\u7528\u6237\u540D\u5BC6\u7801\u8FDB\u884C\u8BA4\u8BC1"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"ConcurrentSessionFilter"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"OpenIDAuthenticationFilter"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"DefaultLoginPageGeneratingFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u751F\u6210\u9ED8\u8BA4\u767B\u5F55\u9875"}),"\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u5730\u5740\u4E3A ",(0,r.jsx)(e.code,{children:"/login"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"ConcurrentSessionFilter"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"DigestAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5904\u7406",(0,r.jsx)(e.a,{href:"https://zh.wikipedia.org/wiki/HTTP%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81",children:"HTTP \u6458\u8981\u8BA4\u8BC1"})]}),"\n",(0,r.jsxs)(e.li,{children:["Digest \u7684\u5F31\u70B9\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8981\u6C42\u5BC6\u7801\u53EF\u6062\u590D"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"BasicAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5904\u7406 HTTP \u57FA\u672C\u9A8C\u8BC1"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"RequestCacheAwareFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4ECE ",(0,r.jsx)(e.code,{children:"RequestCache"})," \u6062\u590D\u7F13\u5B58\u7684\u8BF7\u6C42"]}),"\n",(0,r.jsx)(e.li,{children:"\u5141\u8BB8\u91CD\u5B9A\u5411\u5230\u8BA4\u8BC1\u673A\u5236\u540E\u91CD\u65B0\u5F00\u59CB\u5355\u4E2A\u8BF7\u6C42"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SecurityContextHolderAwareRequestFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5305\u88C5\u5F53\u524D\u7684\u8BF7\u6C42, \u4EE5\u5B9E\u73B0 Servlet 3 \u8BF7\u6C42\u4E0A\u5B89\u5168\u76F8\u5173\u7684\u65B9\u6CD5\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"HttpServletRequest#authenticate(HttpServletResponse)"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"HttpServletRequest#login(String, String)"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"HttpServletRequest#logout()"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"AsyncContext#start(Runnable)"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"JaasApiIntegrationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"JAAS \u96C6\u6210"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"RememberMeAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5982\u679C\u672A\u627E\u5230\u5F53\u524D\u7684\u8BA4\u8BC1\u4FE1\u606F, \u5219\u5C1D\u8BD5\u4ECE ",(0,r.jsx)(e.code,{children:"RememberMeServices"})," \u4E2D\u6784\u5EFA\u8BA4\u8BC1"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AnonymousAuthenticationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u6CA1\u6709\u8BA4\u8BC1\u4FE1\u606F, \u5219\u6784\u5EFA\u4E00\u4E2A\u533F\u540D\u8BA4\u8BC1\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SessionManagementFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6839\u636E\u5F53\u524D\u7684\u8BA4\u8BC1\u4FE1\u606F\u6267\u884C\u4F1A\u8BDD\u76F8\u5173\u7684\u7B56\u7565"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ExceptionTranslationFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5904\u7406\u629B\u51FA\u7684 ",(0,r.jsx)(e.code,{children:"AccessDeniedException"})," \u548C ",(0,r.jsx)(e.code,{children:"AuthenticationException"})," \u5F02\u5E38"]}),"\n",(0,r.jsx)(e.li,{children:"\u5C06\u5F02\u5E38\u4FE1\u606F\u8F6C\u6362\u4E3A\u5BF9\u5E94\u7684 HTTP \u54CD\u5E94"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AuthenticationException"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4F1A\u5C1D\u8BD5\u8FD4\u56DE\u8BF7\u6C42\u4ECE\u65B0\u8981\u6C42\u8BA4\u8BC1"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AccessDeniedException"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u5F53\u524D\u8BA4\u8BC1\u662F\u533F\u540D\u7684\u6216\u8005\u662F\u8BB0\u4F4F\u6211, \u5219\u5C1D\u8BD5\u4ECE\u65B0\u5F00\u59CB\u8BA4\u8BC1"}),"\n",(0,r.jsxs)(e.li,{children:["\u5426\u5219\u4EA4\u7531 ",(0,r.jsx)(e.code,{children:"AccessDeniedHandler"})," \u5904\u7406"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"FilterSecurityInterceptor"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6267\u884C ",(0,r.jsx)(e.code,{children:"Filter"})," \u5C42\u7684\u62E6\u622A\u5904\u7406"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SwitchUserFilter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5904\u7406\u7528\u6237\u5207\u6362\u8BF7\u6C42 ",(0,r.jsx)(e.code,{children:"/login/impersonate"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u5904\u7406\u9000\u51FA\u5207\u6362\u7684\u7528\u6237 ",(0,r.jsx)(e.code,{children:"/logout/impersonate"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u4F8B\u5982: \u5C06\u7528\u6237\u4ECE ",(0,r.jsx)(e.code,{children:"ROLE_ADMIN"})," \u5207\u6362\u4E3A ",(0,r.jsx)(e.code,{children:"ROLE_USER"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u8981\u5B9E\u73B0\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SecurityConfigurerAdapter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6DFB\u52A0\u4E86\u5BF9\u8C61\u540E\u5904\u7406\u914D\u7F6E\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"ObjectPostProcessor"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u6DFB\u52A0\u4E86 ",(0,r.jsx)(e.code,{children:"SecurityBuilder"})," \u94FE\u5F0F\u8C03\u7528\u7684\u5904\u7406"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"WebSecurityConfigurerAdapter"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Builder \u7C7B\u578B\u4E3A ",(0,r.jsx)(e.code,{children:"WebSecurity"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ContentNegotiationStrategy"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u914D\u7F6E\u5185\u5BB9\u534F\u5546\u51B3\u7B56"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u8BF7\u6C42\u5BF9\u8C61 -> \u5A92\u4F53\u7C7B\u578B"}),"\n",(0,r.jsx)(e.li,{children:"\u6388\u6743\u914D\u7F6E"}),"\n",(0,r.jsx)(e.li,{children:"\u6388\u6743\u7BA1\u7406\u5668\u914D\u7F6E"}),"\n",(0,r.jsxs)(e.li,{children:["Http \u5B89\u5168\u914D\u7F6E\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u914D\u7F6E\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"csrf"}),"\n",(0,r.jsx)(e.li,{children:"\u5F02\u6B65\u96C6\u6210"}),"\n",(0,r.jsx)(e.li,{children:"\u5F02\u5E38\u5904\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u5934\u5904\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u4F1A\u8BDD\u7BA1\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u5B89\u5168\u4E0A\u4E0B\u6587"}),"\n",(0,r.jsx)(e.li,{children:"\u8BF7\u6C42\u7F13\u5B58"}),"\n",(0,r.jsx)(e.li,{children:"\u533F\u540D\u8BF7\u6C42"}),"\n",(0,r.jsx)(e.li,{children:"servlet \u63A5\u53E3"}),"\n",(0,r.jsx)(e.li,{children:"\u9ED8\u8BA4\u767B\u5F55\u9875"}),"\n",(0,r.jsx)(e.li,{children:"\u9000\u51FA\u767B\u5F55"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AbstractHttpConfigurer"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Builder \u7C7B\u578B\u4E3A ",(0,r.jsx)(e.code,{children:"HttpSecurity"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u914D\u7F6E\u7ED3\u679C\u4E3A ",(0,r.jsx)(e.code,{children:"DefaultSecurityFilterChain"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AuthenticationEventPublisher"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u7528\u4E8E\u53D1\u5E03\u6388\u6743\u6210\u529F\u6216\u5931\u8D25\u7684 Publisher\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"AuthenticationSuccessEvent"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u5931\u8D25\u7684\u6388\u6743\u4F1A\u6839\u636E\u5F02\u5E38\u7C7B\u578B\u4E0D\u540C\u6620\u5C04\u4E3A\u4E0D\u540C\u7684\u4E8B\u4EF6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"UserDetailsService"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5B89\u5168\u7CFB\u7EDF\u4E2D\u7684\u7528\u6237\u6982\u5FF5"}),"\n",(0,r.jsx)(e.li,{children:"\u8BE5\u63A5\u53E3\u63D0\u4F9B\u53EA\u8BFB\u529F\u80FD"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"UserDetails"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7528\u6237\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"UserDetailsManager"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u63D0\u4F9B\u5BF9\u7528\u6237\u4FE1\u606F\u7684\u7BA1\u7406"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"GroupManager"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7528\u6237\u5206\u7EC4\u7BA1\u7406"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AuthenticationUserDetailsService"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4ECE\u8BA4\u8BC1\u4E2D\u62FF\u5230\u7528\u6237\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"AuthenticationTrustResolver"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5224\u65AD\u4E00\u4E2A\u8BA4\u8BC1\u662F\u5426\u4E3A\u533F\u540D\u6216\u8BB0\u4F4F\u6211"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"doc-notes",children:"Doc Notes"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#secure-object-impls",children:"Secure Object Implementations"})}),"\n",(0,r.jsx)(e.li,{children:"PermissionEvaluator \u7528\u4E8E\u5904\u7406 hasPermission"}),"\n",(0,r.jsx)(e.li,{children:"\u65B9\u6CD5\u5B89\u5168\u7684 AOP \u4E3B\u8981\u57FA\u4E8E MethodSecurityInterceptor"}),"\n",(0,r.jsxs)(e.li,{children:["\u65B9\u6CD5\u5B89\u5168\u76F8\u5173\u7684\u6CE8\u89E3\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"PreAuthorize"}),"\n",(0,r.jsx)(e.li,{children:"PostAuthorize"}),"\n",(0,r.jsx)(e.li,{children:"PreFilter"}),"\n",(0,r.jsx)(e.li,{children:"PostFilter"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u53EF\u4EE5\u4F7F\u7528 AuthenticationPrincipal \u6CE8\u5165\u4E0A\u4E0B\u6587\u4E2D\u7684\u6388\u6743\u5BF9\u8C61 Authentication"}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u4F7F\u7528\u4E86\u4EE3\u7406\u670D\u52A1\u5668, \u9700\u8981\u914D\u7F6E\u6B63\u786E\u7684 ForwardedHeaderFilter"}),"\n",(0,r.jsx)(e.li,{children:"\u53EF\u4EE5\u4F7F\u7528 RoleHierarchy \u6765\u5B9E\u73B0\u89D2\u8272\u95F4\u7684\u5C42\u7EA7\u5173\u7CFB"}),"\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u4E0D\u662F\u4F7F\u7528\u7684\u4F20\u7EDF\u7684\u6388\u6743\u65B9\u5F0F, \u53EF\u4EE5\u8003\u8651\u6DFB\u52A0\u81EA\u5DF1\u7684 AuthenticationEntryPoint \u5230 http \u4E0A"}),"\n",(0,r.jsxs)(e.li,{children:["\u6267\u884C\u5B89\u5168\u76F8\u5173\u7684\u4E3B\u4F53\u903B\u8F91\u5728 AbstractSecurityInterceptor \u4E2D\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#secure-objects",children:"AbstractSecurityInterceptor"})}),"\n",(0,r.jsx)(e.li,{children:"\u6388\u6743\u9A8C\u8BC1"}),"\n",(0,r.jsx)(e.li,{children:"\u524D\u540E\u9A8C\u8BC1"}),"\n",(0,r.jsx)(e.li,{children:"\u8BBF\u95EE\u51B3\u7B56"}),"\n",(0,r.jsxs)(e.li,{children:["RunAs\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4F1A\u66FF\u6362\u5F53\u524D\u8BF7\u6C42\u4E0A\u4E0B\u6587\u4E2D\u7684 ",(0,r.jsx)(e.code,{children:"Authentication"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5206\u522B\u5206\u4E3A MethodInvocation \u548C FilterInvocation\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"MethodInvocation \u5BF9 AOP \u5BF9\u65B9\u6CD5\u8C03\u7528\u7684\u62E6\u622A"}),"\n",(0,r.jsxs)(e.li,{children:["FilterInvocation \u5BF9 Servlet \u8BF7\u6C42\u54CD\u5E94\u7684\u62E6\u622A\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4F1A\u6839\u636E Request \u627E\u5230\u54CD\u5E94\u7684\u5904\u7406\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4F8B\u5982: ",(0,r.jsx)(e.code,{children:'.antMatchers("/user/**").access("@webSecurity.check(authentication,request)")'}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4F1A\u751F\u6210\u4E00\u4E2A RequestMatcher \u5B9E\u73B0\u4E3A AntPathRequestMatcher\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"RequestMatcher \u53EF\u80FD\u4F1A\u4ECE request \u4E2D\u62BD\u53D6\u51FA\u53D8\u91CF"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u4F1A\u751F\u6210 SecurityConfig , \u4F1A\u7531 MetadataSource \u8F6C\u6362\u4E3A WebExpressionConfigAttribute"}),"\n",(0,r.jsxs)(e.li,{children:["\u4F1A\u7531 WebExpressionVoter \u5904\u7406\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u662F AccessDecisionVoter \u7684\u5B9E\u73B0\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u57FA\u4E8E\u6295\u7968\u7684\u51B3\u7B56"}),"\n",(0,r.jsx)(e.li,{children:"\u6295\u7968\u7ED3\u679C\u4E3A ACCESS_GRANTED, ACCESS_ABSTAIN, ACCESS_DENIED"}),"\n",(0,r.jsx)(e.li,{children:"\u53EF\u80FD\u4F1A\u7531\u4EE5\u4E0B AccessDecisionManager \u5B9E\u73B0\u5904\u7406"}),"\n",(0,r.jsxs)(e.li,{children:["AffirmativeBased\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4EFB\u610F"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ConsensusBased\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5927\u591A\u6570, \u4E0D\u5305\u62EC\u653E\u5F03\u6295\u7968\u7684"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["UnanimousBased\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6240\u6709\u90FD\u6295\u540C\u610F\u6216\u653E\u5F03"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u6700\u7EC8\u4F1A\u6C47\u805A\u5230 ExpressionBasedFilterInvocationSecurityMetadataSource"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u89D2\u8272\u4E4B\u6240\u4EE5\u4F1A\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"ROLE_"})," \u524D\u7F00, \u662F\u56E0\u4E3A ",(0,r.jsx)(e.code,{children:"RoleVoter"})," \u4F1A\u5C06\u6240\u6709\u6709\u8BE5\u524D\u7F00\u7684\u8BA4\u4E3A\u662F\u6A58\u8272, \u5E76\u4F5C\u51FA\u5224\u65AD"]}),"\n",(0,r.jsxs)(e.li,{children:["ConfigAttribute\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#tech-intro-config-attributes",children:"What are Configuration Attributes"})}),"\n",(0,r.jsx)(e.li,{children:"\u662F\u5C06\u6240\u6709\u6743\u9650\u9A8C\u8BC1\u4E32\u8D77\u6765\u7684\u5173\u952E"}),"\n",(0,r.jsx)(e.li,{children:"\u6BCF\u4E2A\u9A8C\u8BC1\u90FD\u4F1A\u751F\u6210\u76F8\u5E94\u7684\u5C5E\u6027, \u6BCF\u4E2A\u5C5E\u6027\u6709\u5404\u81EA\u7684\u7C7B\u578B, \u6BCF\u4E2A\u7C7B\u578B\u7684\u5C5E\u6027\u4E5F\u5BF9\u5E94\u4E86\u76F8\u5E94\u7684\u51B3\u7B56\u5224\u65AD"}),"\n",(0,r.jsx)(e.li,{children:"\u7531 SecurityMetadataSource \u521B\u5EFA, \u4E3B\u8981\u9488\u5BF9 AOP, \u5206\u4E3A\u65B9\u6CD5\u8C03\u7528\u548C Filter \u8C03\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u7531 AccessDecisionManager \u5904\u7406, \u5904\u7406\u4E4B\u524D\u90FD\u4F1A\u5224\u65AD\u76F8\u5E94\u7684\u5C5E\u6027\u7C7B\u578B"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"AspectJSecurityInterceptor \u4E3B\u8981\u7528\u4E8E DomainObject \u7EA7\u522B\u7684 ACL"}),"\n",(0,r.jsxs)(e.li,{children:["ExceptionTranslationFilter \u4F1A\u5904\u7406\u4E0E\u6388\u6743\u76F8\u5173\u7684\u5F02\u5E38\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"AuthenticationException"}),"\n",(0,r.jsx)(e.li,{children:"AccessDeniedException"}),"\n",(0,r.jsxs)(e.li,{children:["\u5982\u679C\u662F\u6388\u6743\u5931\u8D25 AuthenticationException\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5148  RequestCache#savedRequest\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4F8B\u5982\u7528\u6237\u6388\u6743\u6210\u529F\u540E\u8DF3\u8F6C"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u4F1A\u4F7F\u7528 AuthenticationEntryPoint \u6765\u89E3\u51B3\u5F02\u5E38"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5982\u679C\u662F\u62D2\u7EDD\u8BBF\u95EE AccessDeniedException\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5982\u679C\u662F\u53D1\u73B0\u7531\u4E8E\u662F\u56E0\u4E3A\u672A\u5B8C\u5168\u6388\u6743(\u533F\u540D\u6216\u8BB0\u4F4F\u6211),\u4E5F\u4F1A\u89E6\u53D1\u4E0A\u9762\u6388\u6743\u5931\u8D25\u7684\u5904\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u4F1A\u4F7F\u7528 AccessDeniedHandler \u6765\u89E3\u51B3\u5F02\u5E38"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u5BF9\u4E8E RESTful \u63A5\u53E3\u670D\u52A1\u6765\u8BF4, \u8BE5 Filter \u5B9E\u9645\u4E0A\u662F\u4E0D\u9700\u8981\u7684"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"AuthenticationTrustResolver \u53EF\u4EE5\u7528\u4E8E\u5B9E\u73B0\u5BF9\u533F\u540D\u548C\u8BB0\u4F4F\u6211\u7684\u5224\u65AD"}),"\n",(0,r.jsx)(e.li,{children:"ThrowableAnalyzer \u53EF\u4EE5\u7528\u6765\u8F85\u52A9\u5F02\u5E38\u5904\u7406"}),"\n",(0,r.jsx)(e.li,{children:"AbstractSecurityWebSocketMessageBrokerConfigurer \u53EF\u5BF9 WebSocket \u8FDB\u884C\u5B89\u5168\u5904\u7406"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"http://stackoverflow.com/questions/6556522",children:"Authentication vs Authorization"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Authentication\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Who you are"}),"\n",(0,r.jsx)(e.li,{children:"Login"}),"\n",(0,r.jsx)(e.li,{children:"HTTP 401 Unauthorized"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Authorization\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"What you are allowed to do"}),"\n",(0,r.jsx)(e.li,{children:"Permission"}),"\n",(0,r.jsx)(e.li,{children:"HTTP 403 Forbidden"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Spring Data \u96C6\u6210\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u9700\u8981\u6DFB\u52A0\u4F9D\u8D56 ",(0,r.jsx)(e.code,{children:"spring-security-data"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u81EA\u52A8\u914D\u7F6E ",(0,r.jsx)(e.code,{children:"org.springframework.boot.autoconfigure.security.SecurityDataConfiguration"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u521D\u59CB\u5316 ",(0,r.jsx)(e.code,{children:"org.springframework.security.data.repository.query.SecurityEvaluationContextExtension"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"@Bean\npublic SecurityEvaluationContextExtension securityEvaluationContextExtension() {\n	return new SecurityEvaluationContextExtension();\n}\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@Query"})," \u53EF\u4EE5\u4F7F\u7528 Spring Security \u7684\u8868\u8FBE\u5F0F\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:'@Query("select m from Message m where m.to.id = ?#{ principal?.id }")'})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5E76\u53D1\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u7531\u4E8E\u6388\u6743\u662F\u7EBF\u7A0B\u76F8\u5173\u7684, \u5982\u679C\u8981\u5E76\u53D1\u4F7F\u7528\u53EF\u4EE5\u4F7F\u7528\u6846\u67B6\u63D0\u4F9B\u7684\u5305\u88C5\u7C7B\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"DelegatingSecurityContextRunnable"}),"\n",(0,r.jsx)(e.li,{children:"DelegatingSecurityContextExecutor"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/images/security-interception.png",alt:""})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'// \u57FA\u4E8E\u8868\u8FBE\u5F0F\u7684\u8BBF\u95EE\u63A7\u5236\n// \u5373\u4FBF\u4E0D\u662F\u7528 access, \u5B9E\u9645\u751F\u6210\u7684\u4E5F\u90FD\u662F\u7C7B\u4F3C\u7684\u8868\u8FBE\u5F0F\nhttp\n  .authorizeRequests()\n    // \u53EF\u4EE5\u76F4\u63A5\u8C03\u7528\u4E0A\u4E0B\u6587\u4E2D\u7684 bean \u5BF9\u8C61\u6765\u68C0\u6D4B\n    // \u5176\u4E2D\u7684 request \u53C2\u6570\u662F\u5728 WebSecurityExpressionRoot \u5B9A\u4E49\u7684\n    .antMatchers("/user/**").access("@webSecurity.check(authentication,request)")\n    // \u8BBF\u95EE\u8DEF\u5F84\u53C2\u6570\n    .antMatchers("/user/{userId}/**").access("@webSecurity.checkUserId(authentication,#userId)")\n'})}),"\n",(0,r.jsx)(e.h3,{id:"acl",children:"ACL"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#domain-acls",children:"Domain Object Security"})}),"\n",(0,r.jsx)(e.li,{children:"spring-security-acl"}),"\n",(0,r.jsx)(e.li,{children:"\u4E3B\u8981\u7528\u4E8E\u63A7\u5236\u5BF9\u8C61\u6743\u9650"}),"\n",(0,r.jsxs)(e.li,{children:["\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"ACL_"})," \u6570\u636E\u8868\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["ACL_SID\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"SID -> Security Identifier"}),"\n",(0,r.jsx)(e.li,{children:"\u7CFB\u7EDF\u4E2D principal \u6216 authority \u7684\u552F\u4E00\u6807\u8BC6\u7B26"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ACL_CLASS\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7CFB\u7EDF\u4E2D DO \u7684\u552F\u4E00\u6807\u8BC6\u7B26"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ACL_OBJECT_IDENTITY\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"DO \u5B9E\u4F8B\u7684\u552F\u4E00\u6807\u8BC6\u7B26"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ACL_ENTRY\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5B58\u50A8\u6307\u6D3E\u7ED9 recipient \u7684\u5355\u72EC\u6743\u9650"}),"\n",(0,r.jsx)(e.li,{children:"\u5305\u542B ACL_OBJECT_IDENTITY, ACL_SID \u548C\u6743\u9650\u7684 bit mask"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u4E3B\u8981\u63A5\u53E3\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Acl\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6BCF\u4E2A DO \u5BF9\u5E94\u4E00\u4E2A Acl, \u5305\u542B ",(0,r.jsx)(e.code,{children:"AccessControlEntry"})," \u4FE1\u606F, \u4E0D\u76F4\u63A5\u6307\u5411 DO, \u4F46\u5305\u542B ",(0,r.jsx)(e.code,{children:"ObjectIdentity"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:["\u5B58\u50A8\u4E8E ",(0,r.jsx)(e.code,{children:"ACL_OBJECT_IDENTITY"})," \u8868"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["AccessControlEntry\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5305\u542B\u591A\u4E2A ",(0,r.jsx)(e.code,{children:"AccessControlEntry"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u7F29\u5199\u4E3A ",(0,r.jsx)(e.code,{children:"ACE"})]}),"\n",(0,r.jsx)(e.li,{children:"\u6BCF\u4E2A ACE \u6307\u5411\u4E00\u7EC4 Permission, Sid \u548C Acl."}),"\n",(0,r.jsx)(e.li,{children:"\u5305\u542B\u6388\u6743\u548C\u672A\u88AB\u6388\u6743\u4FE1\u606F"}),"\n",(0,r.jsx)(e.li,{children:"\u5305\u542B\u5BA1\u67E5\u8BBE\u7F6E"}),"\n",(0,r.jsxs)(e.li,{children:["\u5B58\u50A8\u4E8E ",(0,r.jsx)(e.code,{children:"ACL_ENTRY"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Permission\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8868\u793A\u4E00\u4E2A\u4E0D\u53EF\u53D8\u7684 bit mask, \u5E76\u63D0\u4F9B\u76F8\u5E94\u7684\u64CD\u4F5C"}),"\n",(0,r.jsxs)(e.li,{children:["\u57FA\u7840\u7684\u6743\u9650 (0-4) \u5728 ",(0,r.jsx)(e.code,{children:"BasePermission"})," \u7C7B\u4E2D"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Sid\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u62BD\u8C61\u5316\u4E86 principals \u548C ",(0,r.jsx)(e.code,{children:"GrantedAuthority[]"}),", \u4EE5\u4F9B ACL \u6A21\u5757\u5F15\u7528"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5E38\u89C1\u7684\u7C7B\u5305\u542B\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["PrincipalSid: \u8868\u793A ",(0,r.jsx)(e.code,{children:"Authentication"})," \u4E2D\u7684 principals"]}),"\n",(0,r.jsx)(e.li,{children:"GrantedAuthoritySid"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u5B58\u50A8\u4E8E ",(0,r.jsx)(e.code,{children:"ACL_SID"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["ObjectIdentity\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u6BCF\u4E2A DO \u5B9E\u4F8B\u5728 ACL \u6A21\u5757\u4E2D\u90FD\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"ObjectIdentity"})," \u8868\u793A"]}),"\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u5B9E\u73B0\u4E3A ",(0,r.jsx)(e.code,{children:"ObjectIdentityImpl"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8C03\u7528 ",(0,r.jsx)(e.code,{children:"getId"})," \u65B9\u6CD5"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["AclService\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4ECE ",(0,r.jsx)(e.code,{children:"ObjectIdentity"})," \u53D6\u5F97 Acl \u76F8\u5173\u7684\u4FE1\u606F"]}),"\n",(0,r.jsxs)(e.li,{children:["\u9ED8\u8BA4\u5B9E\u73B0\u4E3A ",(0,r.jsx)(e.code,{children:"JdbcAclService"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u8BF7\u6C42\u64CD\u4F5C\u4F1A\u8F6C\u79FB\u5230 ",(0,r.jsx)(e.code,{children:"LookupStrategy"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4F18\u5316\u4E86\u5BF9 ACL \u4FE1\u606F\u7684\u8BF7\u6C42"}),"\n",(0,r.jsx)(e.li,{children:"BasicLookupStrategy"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["MutableAclService\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5FAA\u5E8F\u4FEE\u6539\u7684 Acl \u4FE1\u606F\u88AB\u6301\u4E45\u5316"}),"\n",(0,r.jsx)(e.li,{children:"\u8BE5\u529F\u80FD\u53EF\u9009"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"\u53D6\u4E0D\u5230 DO \u7684 id \u4F1A\u6295\u5F03\u6743"}),"\n",(0,r.jsxs)(e.li,{children:["Permission\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6743\u9650\u4E3A\u4E00\u4E2A bit mask + \u5B57\u7B26"}),"\n",(0,r.jsx)(e.li,{children:"BasePermission \u5B9A\u4E49\u4E86\u57FA\u7840\u6743\u9650"}),"\n",(0,r.jsx)(e.li,{children:"PermissionFactory"}),"\n",(0,r.jsx)(e.li,{children:"CumulativePermission \u53EF\u4FEE\u6539\u7684\u6743\u9650\u5BF9\u8C61, \u7528\u4E8E\u6784\u5EFA\u6743\u9650"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["NOTE\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u81EA\u5DF1\u4F7F\u7528\u65F6\u5EFA\u8BAE\u81EA\u5DF1\u5B9E\u73B0 AclService, \u5982\u679C\u4E0D\u9700\u8981\u63D0\u4F9B\u4FEE\u6539\u63A5\u53E3\u5219\u4E0D\u9700\u8981\u5B9E\u73B0\u4FEE\u6539\u63A5\u53E3"}),"\n",(0,r.jsx)(e.li,{children:"\u76EE\u524D\u6CA1\u6709\u9488\u5BF9 Acl \u7684\u81EA\u52A8\u914D\u7F6E, \u6DFB\u52A0\u626B\u63CF\u8DEF\u5F84\u5E94\u8BE5\u53EF\u4EE5, \u6216\u8005\u624B\u52A8\u6DFB\u52A0 Voter \u548C AfterInvocation \u7684\u5904\u7406."}),"\n",(0,r.jsxs)(e.li,{children:["\u5982\u679C\u662F\u57FA\u4E8E\u73B0\u6709\u5BF9\u8C61\u5B9E\u73B0 Acl\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u5B9E\u73B0\u81EA\u5B9A\u4E49\u7684 ",(0,r.jsx)(e.code,{children:"ObjectIdentityRetrievalStrategy"})," \u548C ",(0,r.jsx)(e.code,{children:"ObjectIdentityRetrievalStrategy"})]}),"\n",(0,r.jsx)(e.li,{children:"\u5B58\u50A8\u771F\u5B9E\u7684 DO \u5BF9\u8C61. AclService \u4ECE\u5B9E\u73B0\u4E0A\u53D6\u5F97\u771F\u5B9E\u5BF9\u8C61\u5173\u8054\u7684\u4FE1\u606F"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"BasePermission"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Char"}),(0,r.jsx)(e.th,{children:"Mask"}),(0,r.jsx)(e.th,{children:"Meaning"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"R"}),(0,r.jsx)(e.td,{children:"'----1'"}),(0,r.jsx)(e.td,{children:"READ"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"W"}),(0,r.jsx)(e.td,{children:"'---1-'"}),(0,r.jsx)(e.td,{children:"WRITE"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"C"}),(0,r.jsx)(e.td,{children:"'--1--'"}),(0,r.jsx)(e.td,{children:"CREATE"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"D"}),(0,r.jsx)(e.td,{children:"'-1---'"}),(0,r.jsx)(e.td,{children:"DELETE"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"A"}),(0,r.jsx)(e.td,{children:"'1----'"}),(0,r.jsx)(e.td,{children:"ADMINISTRATION"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u4E3B\u8981\u5BF9\u8C61",children:"\u4E3B\u8981\u5BF9\u8C61"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5BF9\u8C61\u540D"}),(0,r.jsx)(e.th,{children:"\u4F5C\u7528"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SecurityContextHolder"}),(0,r.jsx)(e.td,{children:"\u63D0\u4F9B\u5BF9 SecurityContext \u7684\u8BBF\u95EE"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SecurityContext"}),(0,r.jsx)(e.td,{children:"\u63D0\u4F9B Authentication \u548C\u53EF\u80FD\u5BF9\u8BF7\u6C42\u76F8\u5173\u7684\u5B89\u5168\u4FE1\u606F"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Authentication"}),(0,r.jsx)(e.td,{children:"\u4EE5 Spring Security \u7684\u5F62\u5F0F\u63D0\u4F9B\u7684 principal"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"GrantedAuthority"}),(0,r.jsx)(e.td,{children:"\u53CD\u5E94\u5E94\u7528\u8303\u56F4\u5185 principal \u6240\u83B7\u53D6\u5230\u7684\u6743\u9650"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"UserDetails"}),(0,r.jsx)(e.td,{children:"\u63D0\u4F9B\u5FC5\u8981\u7684\u4FE1\u606F\u5E76\u901A\u8FC7\u5E94\u7528\u7684 DAO \u6216\u5176\u4ED6\u5B89\u5168\u6570\u636E\u6765\u6E90\u6765\u6784\u5EFA\u4E00\u4E2A Authentication \u5BF9\u8C61"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"UserDetailsService"}),(0,r.jsx)(e.td,{children:"\u901A\u8FC7\u63D0\u4F9B\u7684 username \u6216\u8005 \u6388\u6743 ID \u6765\u6784\u5EFA\u4E00\u4E2A UserDetails \u5BF9\u8C61"})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:"http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#setting-the-securitycontextholder-contents-directly",children:"Setting the SecurityContextHolder Contents Directly"}),"\n\u5B9E\u9645\u4E0A Spring Security \u5E76\u4E0D\u5173\u5FC3 SecurityContextHolder \u4E2D\u7684 Authentication \u5BF9\u8C61\u662F\u5982\u4F55\u653E\u8FDB\u53BB\u7684.\u6700\u91CD\u8981\u7684\u662F SecurityContextHolder \u5728 AbstractSecurityInterceptor \u5904\u7406\u4E4B\u524D\u9700\u8981\u6301\u6709\u4E00\u4E2A Authentication \u6765\u8868\u793A principal."]}),"\n",(0,r.jsx)(e.p,{children:"\u60F3\u8981\u653E\u5165 SecurityContextHolder, \u8981\u4FDD\u8BC1\u4F1A\u8C03\u7528 SecurityContextPersistenceFilter, \u9ED8\u8BA4\u60C5\u51B5\u4E0B\u90FD\u4F1A\u52A0\u8F7D\u8BE5 Filter."}),"\n",(0,r.jsx)(e.h2,{id:"\u57FA\u4E8E\u8868\u8FBE\u5F0F\u7684\u6743\u9650\u63A7\u5236",children:"\u57FA\u4E8E\u8868\u8FBE\u5F0F\u7684\u6743\u9650\u63A7\u5236"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8868\u8FBE\u5F0F\u7684\u6839\u5BF9\u8C61\u4E3A ",(0,r.jsx)(e.code,{children:"SecurityExpressionRoot"})]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u8868\u8FBE\u5F0F"}),(0,r.jsx)(e.th,{children:"\u63CF\u8FF0"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasRole([role])"}),(0,r.jsxs)(e.td,{children:["\u8FD4\u56DE ",(0,r.jsx)(e.code,{children:"true"})," \u5982\u679C\u5F53\u524D principle \u6709\u8BE5\u89D2\u8272.\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u5982\u679C\u7ED9\u7684\u89D2\u8272\u4E0D\u662F ",(0,r.jsx)(e.code,{children:"ROLE_"})," \u5F00\u5934\u7684,\u4F1A\u6DFB\u52A0\u8BE5\u89D2\u8272.\u53EF\u901A\u8FC7 ",(0,r.jsx)(e.code,{children:"DefaultWebSecurityExpressionHandler"})," \u7684 ",(0,r.jsx)(e.code,{children:"defaultRolePrefix"})," \u4FEE\u6539"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasAnyRole([role1,role2])"}),(0,r.jsx)(e.td,{children:"\u540C\u4E0A"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasAuthority([authority])"}),(0,r.jsx)(e.td,{children:"\u5224\u65AD\u662F\u5426\u6709\u8BE5\u6388\u6743"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasAnyAuthority([authority1,authority2])"}),(0,r.jsx)(e.td,{children:"\u540C\u4E0A"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"principal"}),(0,r.jsx)(e.td,{children:"\u53EF\u76F4\u63A5\u8BBF\u95EE\u5F53\u524D\u7684 principle"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"authentication"}),(0,r.jsxs)(e.td,{children:["\u53EF\u76F4\u63A5\u8BBF\u95EE\u5F53\u524D ",(0,r.jsx)(e.code,{children:"SecurityContext"})," \u4E2D\u7684 ",(0,r.jsx)(e.code,{children:"Authentication"})," \u5BF9\u8C61."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"permitAll"}),(0,r.jsxs)(e.td,{children:["\u603B\u662F\u8FD4\u56DE ",(0,r.jsx)(e.code,{children:"true"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"denyAll"}),(0,r.jsxs)(e.td,{children:["\u603B\u662F\u8FD4\u56DE ",(0,r.jsx)(e.code,{children:"false"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"isAnonymous()"}),(0,r.jsxs)(e.td,{children:["\u5224\u65AD\u662F\u5426\u4E3A\u533F\u540D\u7528\u6237,\u4EA4\u7531 ",(0,r.jsx)(e.code,{children:"AuthenticationTrustResolver"})," \u5224\u65AD"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"isRememberMe()"}),(0,r.jsxs)(e.td,{children:["\u5224\u65AD\u662F\u5426\u4E3A\u8BB0\u4F4F\u6211\u7528\u6237,\u4EA4\u7531 ",(0,r.jsx)(e.code,{children:"AuthenticationTrustResolver"})," \u5224\u65AD"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"isAuthenticated()"}),(0,r.jsxs)(e.td,{children:["\u5224\u65AD\u662F\u5426\u6388\u6743, \u5982\u679C\u4E3A\u975E\u533F\u540D\u5219\u8FD4\u56DE ",(0,r.jsx)(e.code,{children:"true"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"isFullyAuthenticated()"}),(0,r.jsx)(e.td,{children:"\u5982\u679C\u7528\u6237\u4E0D\u662F\u533F\u540D\u7528\u6237\u4E14\u4E0D\u662F\u8BB0\u4F4F\u6211\u7528\u6237."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasPermission(Object target, Object permission)"}),(0,r.jsxs)(e.td,{children:["\u5982\u679C\u7528\u6237\u6709\u8BBF\u95EE\u8BE5\u5BF9\u8C61\u7684\u6743\u9650\u8FD4\u56DE ",(0,r.jsx)(e.code,{children:"true"}),(0,r.jsx)(e.br,{}),"\u4EA4\u7531 ",(0,r.jsx)(e.code,{children:"PermissionEvaluator"})," \u5904\u7406"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasPermission(Object targetId, String targetType, Object permission)"}),(0,r.jsx)(e.td,{children:"\u540C\u4E0A"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"filterTarget"}),(0,r.jsx)(e.td,{children:"\u8868\u8FBE\u5F0F\u5185\u5EFA\u5BF9\u8C61"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"returnValue"}),(0,r.jsx)(e.td,{children:"\u8868\u8FBE\u5F0F\u5185\u5EFA\u5BF9\u8C61"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hasIpAddress([IP])"}),(0,r.jsxs)(e.td,{children:["\u7531 ",(0,r.jsx)(e.code,{children:"WebSecurityExpressionRoot"})," \u5B9A\u4E49\u7684\u5185\u5EFA\u8868\u8FBE\u5F0F"]})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u793A\u4F8B"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'@PreAuthorize("#n == authentication.name")\nContact findContactByName(@Param("n") String name);\n@PreAuthorize("#c.name == authentication.name")\npublic void doSomething(@P("c") Contact contact);\n@PreAuthorize("hasRole(\'USER\')")\npublic void create(Contact contact);\n@PreAuthorize("hasPermission(#contact, \'admin\')")\npublic void deletePermission(Contact contact, Sid recipient, Permission permission);\n@PostFilter("hasPermission(filterObject, \'read\') or hasPermission(filterObject, \'admin\')")\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u5982\u679C\u4F7F\u7528 JDK 8 \u7F16\u8BD1, \u7F16\u8BD1\u65F6\u6307\u5B9A\u4E86 ",(0,r.jsx)(e.code,{children:"-parameters"})," \u53C2\u6570,\u5E76\u4E14\u4F7F\u7528\u7684 Spring4+, \u90A3\u4E48\u901A\u8FC7 JDK \u7684\u53CD\u5C04\u63A5\u53E3\u53EF\u83B7\u53D6\u5230\u63A5\u53E3\u548C\u7C7B\u7684\u53C2\u6570\u540D."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["\u5982\u679C\u7F16\u8BD1\u65F6\u542F\u7528\u4E86\u8C03\u8BD5\u7B26\u53F7,\u5219\u53EF\u4EE5\u901A\u8FC7\u8C03\u8BD5\u7B26\u53F7\u83B7\u53D6\u5230\u7C7B\u53C2\u6570\u540D,\u65E0\u6CD5\u83B7\u53D6\u5230\u63A5\u53E3\u53C2\u6570\u540D,\u56E0\u4E3A\u63A5\u53E3\u6CA1\u6709\u8C03\u8BD5\u7B26\u53F7, \u53EF\u662F\u53EF\u4EE5\u4F7F\u7528 ",(0,r.jsx)(e.code,{children:"$P('name')"})," \u7684\u5F62\u5F0F\u6765\u7ED9\u5B9A\u540D\u5B57"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"http://docs.spring.io/spring-security/site/docs/4.0.4.RELEASE/reference/htmlsingle/#el-common-built-in",children:"\u5E38\u7528\u5185\u5EFA\u8868\u8FBE\u5F0F"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"filter-\u987A\u5E8F",children:"Filter \u987A\u5E8F"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u7C7B\u540D"}),(0,r.jsx)(e.th,{children:"\u63CF\u8FF0"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ChannelProcessingFilter"}),(0,r.jsx)(e.td,{children:"\u53EF\u80FD\u4F1A\u91CD\u5B9A\u5411\u5230\u4E0D\u540C\u534F\u8BAE"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SecurityContextPersistenceFilter"}),(0,r.jsx)(e.td,{children:"SecurityContextHolder \u7684 SecurityContext \u53EF\u5728\u8BF7\u6C42\u4E4B\u524D\u8BBE\u7F6E\u597D, \u5728\u8BF7\u6C42\u7ED3\u675F\u65F6\u6240\u6709\u5BF9 SecurityContext \u7684\u4FEE\u6539\u90FD\u53EF\u4EE5\u88AB\u590D\u5236\u5230 HttpSession \u4E2D,\u4EE5\u4FBF\u4E8E\u4E0B\u6B21\u8BF7\u6C42\u65F6\u4F7F\u7528."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ConcurrentSessionFilter"}),(0,r.jsx)(e.td,{children:"\u56E0\u4E3A\u4F7F\u7528\u4E86 SecurityContextHolder \u7684\u529F\u80FD,\u5E76\u4E14\u9700\u8981\u66F4\u65B0 SessionRegistry \u6765\u53CD\u5E94\u6B63\u5728\u5904\u7406\u7684\u8BF7\u6C42"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Authentication \u5904\u7406\u673A\u5236"}),(0,r.jsxs)(e.td,{children:["UsernamePasswordAuthenticationFilter, CasAuthenticationFilter, BasicAuthenticationFilter \u7B49",(0,r.jsx)(e.br,{}),"\u4F7F\u5F97 SecurityContextHolder \u4E2D\u80FD\u5305\u542B\u4E00\u4E2A\u6709\u6548\u7684 Authentication \u8BF7\u6C42\u4EE4\u724C"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SecurityContextHolderAwareRequestFilter"}),(0,r.jsx)(e.td,{children:"\u7528\u4E8E\u6DFB\u52A0\u4E00\u4E2A\u80FD\u611F\u77E5 Spring Security \u4E0A\u4E0B\u6587\u7684 HttpServletRequestWrapper \u5230 servlet \u5BB9\u5668\u4E2D"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"JaasApiIntegrationFilter"}),(0,r.jsx)(e.td,{children:"\u5982\u679C JaasAuthenticationToken \u5728 SecurityContextHolder \u4E2D,\u8BE5 Filter \u4F1A\u5C06 FilterChain \u4F5C\u4E3A JaasAuthenticationToken \u7684 Subject \u6765\u5904\u7406="})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"RememberMeAuthenticationFilter"}),(0,r.jsx)(e.td,{children:"\u5982\u679C\u4E4B\u524D\u7684\u9274\u6743\u5904\u7406\u90FD\u6CA1\u6709\u4E3A SecurityContextHolder \u8BBE\u7F6E\u4E00\u4E2A\u6709\u6548\u7684 Authentication, \u5E76\u4E14\u8BF7\u6C42\u4E2D\u643A\u5E26\u7684 Cookie \u8868\u793A\u542F\u7528\u4E86'\u8BB0\u4F4F\u767B\u9646'\u670D\u52A1, \u90A3\u4E48\u4E00\u4E2A\u76F8\u5E94\u7684 Authentication \u4F1A\u88AB\u653E\u5230 SecurityContextHolder \u4E2D."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"AnonymousAuthenticationFilter"}),(0,r.jsx)(e.td,{children:"\u5982\u679C\u4E4B\u524D\u7684\u5904\u7406\u673A\u5236\u90FD\u6CA1\u66F4\u65B0 SecurityContextHolder,\u4E00\u4E2A\u533F\u540D Authentication \u4F1A\u88AB\u653E\u5230\u90A3\u91CC."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ExceptionTranslationFilter"}),(0,r.jsx)(e.td,{children:"\u7528\u6765\u6355\u83B7\u6240\u6709\u5728 Spring Security \u53D1\u751F\u7684\u5F02\u5E38,\u53EF\u8FD4\u56DE\u4E00\u4E2A HTTP \u9519\u8BEF\u76F8\u5E94\u6216\u76F8\u5E94\u7684 AuthenticationEntryPoint \u4F1A\u88AB\u542F\u52A8."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FilterSecurityInterceptor"}),(0,r.jsx)(e.td,{children:"\u7528\u4E8E\u4FDD\u62A4 URI, \u5F53\u8BBF\u95EE\u88AB\u62D2\u7EDD\u65F6\u629B\u51FA\u5F02\u5E38"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u6807\u51C6\u8FC7\u6EE4\u5668\u522B\u540D\u548C\u987A\u5E8F",children:"\u6807\u51C6\u8FC7\u6EE4\u5668\u522B\u540D\u548C\u987A\u5E8F"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u522B\u540D"}),(0,r.jsx)(e.th,{children:"\u8FC7\u6EE4\u5668\u7C7B"}),(0,r.jsx)(e.th,{children:"\u547D\u540D\u7A7A\u95F4\u548C\u5C5E\u6027"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"CHANNEL_FILTER"}),(0,r.jsx)(e.td,{children:"ChannelProcessingFilter"}),(0,r.jsx)(e.td,{children:"http/intercept-url@requires-channel"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SECURITY_CONTEXT_FILTER"}),(0,r.jsx)(e.td,{children:"SecurityContextPersistenceFilter"}),(0,r.jsx)(e.td,{children:"http"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"CONCURRENT_SESSION_FILTER"}),(0,r.jsx)(e.td,{children:"ConcurrentSessionFilter"}),(0,r.jsx)(e.td,{children:"session-management/concurrency-control"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"HEADERS_FILTER"}),(0,r.jsx)(e.td,{children:"HeaderWriterFilter"}),(0,r.jsx)(e.td,{children:"http/headers"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"CSRF_FILTER"}),(0,r.jsx)(e.td,{children:"CsrfFilter"}),(0,r.jsx)(e.td,{children:"http/csrf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"LOGOUT_FILTER"}),(0,r.jsx)(e.td,{children:"LogoutFilter"}),(0,r.jsx)(e.td,{children:"http/logout"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"X509_FILTER"}),(0,r.jsx)(e.td,{children:"X509AuthenticationFilter"}),(0,r.jsx)(e.td,{children:"http/x509"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"PRE_AUTH_FILTER"}),(0,r.jsx)(e.td,{children:"AbstractPreAuthenticatedProcessingFilter Subclasses"}),(0,r.jsx)(e.td,{children:"N/A"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"CAS_FILTER"}),(0,r.jsx)(e.td,{children:"CasAuthenticationFilter"}),(0,r.jsx)(e.td,{children:"N/A"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FORM_LOGIN_FILTER"}),(0,r.jsx)(e.td,{children:"UsernamePasswordAuthenticationFilter"}),(0,r.jsx)(e.td,{children:"http/form-login"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"BASIC_AUTH_FILTER"}),(0,r.jsx)(e.td,{children:"BasicAuthenticationFilter"}),(0,r.jsx)(e.td,{children:"http/http-basic"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SERVLET_API_SUPPORT_FILTER"}),(0,r.jsx)(e.td,{children:"SecurityContextHolderAwareRequestFilter"}),(0,r.jsx)(e.td,{children:"http/@servlet-api-provision"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"JAAS_API_SUPPORT_FILTER"}),(0,r.jsx)(e.td,{children:"JaasApiIntegrationFilter"}),(0,r.jsx)(e.td,{children:"http/@jaas-api-provision"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"REMEMBER_ME_FILTER"}),(0,r.jsx)(e.td,{children:"RememberMeAuthenticationFilter"}),(0,r.jsx)(e.td,{children:"http/remember-me"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"ANONYMOUS_FILTER"}),(0,r.jsx)(e.td,{children:"AnonymousAuthenticationFilter"}),(0,r.jsx)(e.td,{children:"http/anonymous"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SESSION_MANAGEMENT_FILTER"}),(0,r.jsx)(e.td,{children:"SessionManagementFilter"}),(0,r.jsx)(e.td,{children:"session-management"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"EXCEPTION_TRANSLATION_FILTER"}),(0,r.jsx)(e.td,{children:"ExceptionTranslationFilter"}),(0,r.jsx)(e.td,{children:"http"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"FILTER_SECURITY_INTERCEPTOR"}),(0,r.jsx)(e.td,{children:"FilterSecurityInterceptor"}),(0,r.jsx)(e.td,{children:"http"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"SWITCH_USER_FILTER"}),(0,r.jsx)(e.td,{children:"SwitchUserFilter"}),(0,r.jsx)(e.td,{children:"N/A"})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u53C2\u8003 ",(0,r.jsx)(e.a,{href:"http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#ns-custom-filters",children:"\u81EA\u5B9A\u4E49\u8FC7\u6EE4\u5668"})]}),"\n"]})]})}function j(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(x,{...n})}):x(n)}},917776:function(n,e,i){i.d(e,{R:()=>c,x:()=>d});var s=i(7378);let r={},l=s.createContext(r);function c(n){let e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);