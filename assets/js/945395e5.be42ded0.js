"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([["95565"],{77312:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>o,toc:()=>c,default:()=>p,metadata:()=>s,assets:()=>i,contentTitle:()=>a});var s=JSON.parse('{"id":"db/relational/postgresql/postgrest-hello","title":"PostREST \u5165\u95E8\u90E8\u7F72","description":"1. \u73AF\u5883","source":"@site/../notes/db/relational/postgresql/postgrest-hello.md","sourceDirName":"db/relational/postgresql","slug":"/db/relational/postgresql/postgrest-hello","permalink":"/notes/db/relational/postgresql/postgrest-hello","draft":false,"unlisted":false,"editUrl":"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/postgresql/postgrest-hello.md","tags":[{"inline":true,"label":"Get Started","permalink":"/notes/tags/get-started"}],"version":"current","lastUpdatedBy":"wener","lastUpdatedAt":1679563201000,"frontMatter":{"title":"PostREST \u5165\u95E8\u90E8\u7F72","tags":["Get Started"]},"sidebar":"docs","previous":{"title":"\u89C6\u56FE","permalink":"/notes/db/relational/postgresql/view"},"next":{"title":"PostgREST","permalink":"/notes/db/relational/postgresql/postgrest"}}'),r=n(86106),l=n(17776);let o={title:"PostREST \u5165\u95E8\u90E8\u7F72",tags:["Get Started"]},a="Hello PostgREST",i={},c=[{value:"1. \u73AF\u5883",id:"1-\u73AF\u5883",level:2},{value:"2. \u6570\u636E\u5E93\u51C6\u5907",id:"2-\u6570\u636E\u5E93\u51C6\u5907",level:2},{value:"3. \u6570\u636E\u63A7\u5236\u53F0",id:"3-\u6570\u636E\u63A7\u5236\u53F0",level:2}];function d(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"hello-postgrest",children:"Hello PostgREST"})}),"\n",(0,r.jsx)(t.h2,{id:"1-\u73AF\u5883",children:"1. \u73AF\u5883"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["DataGrip\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.jetbrains.com/datagrip/download",children:"https://www.jetbrains.com/datagrip/download"})}),"\n",(0,r.jsx)(t.li,{children:"\u6570\u636E\u5E93\u7BA1\u7406\u5DE5\u5177"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["Docker for Mac\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.docker.com/docker-mac",children:"https://www.docker.com/docker-mac"})}),"\n",(0,r.jsx)(t.li,{children:"\u5BB9\u5668\u73AF\u5883"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["PostgreSQL\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"brew install postgresql"})}),"\n",(0,r.jsx)(t.li,{children:"\u672C\u5730\u6570\u636E\u5E93"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"2-\u6570\u636E\u5E93\u51C6\u5907",children:"2. \u6570\u636E\u5E93\u51C6\u5907"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# \u5C06\u6570\u636E\u5B58\u50A8\u4E8E\u672C\u5730\u8BE5\u76EE\u5F55\nmkdir -p ~/data/pg\n# \u521D\u6B21\u542F\u52A8\n# \u542F\u52A8\u5B8C\u6210\u540E Ctrl+C \u7EC8\u6B62\ndocker run -it --rm -v $HOME/data/pg:/var/lib/postgresql/data -e POSTGRES_PASSWORD=OP6Ats postgres:alpine\n\n# \u518D\u6B21\u542F\u52A8, \u4F7F\u7528\u5DF2\u7ECF\u521D\u59CB\u5316\u597D\u7684\u6570\u636E\u76EE\u5F55, \u6B64\u65F6\u4E0D\u518D\u9700\u8981\u6307\u5B9A\u5BC6\u7801, \u4EE5\u540E\u542F\u52A8\u5747\u4F7F\u7528\u8BE5\u547D\u4EE4\ndocker run -it --rm -v $HOME/data/pg:/var/lib/postgresql/data -p 5432:5432 postgres:alpine\n\n# \u67E5\u770B\u5F53\u524D\u7248\u672C \u5E76\u786E\u8BA4\u670D\u52A1\u6B63\u5E38\u542F\u52A8\n# \u9700\u8981\u8F93\u5165\u4E4B\u524D\u7684\u5BC6\u7801 OP6Ats\npsql -h 127.0.0.1 -U postgres -c 'show server_version'\n\n# \u521B\u5EFA\u6613\u5F00\u4E1A\u6570\u636E\u5E93\npsql -h 127.0.0.1 -U postgres -c 'create database yky'\n# \u521B\u5EFA\u670D\u52A1\u7CFB\u7EDF schema\npsql -h 127.0.0.1 -U postgres yky -c 'create schema servicer'\n\n# \u5207\u6362\u5230\u5DE5\u4F5C\u76EE\u5F55\ncd ~/data/pg\n\n# PostgREST\n# ---------\n# \u914D\u7F6E\u6587\u4EF6\ncat << CONF > postgrest.conf\ndb-uri = \"postgres://postgres:OP6Ats@docker.for.mac.localhost/yky\"\ndb-schema = \"servicer\"\ndb-anon-role = \"postgres\"\nCONF\n# \u542F\u52A8 PostgREST\n# http://localhost:3000 \u4E3A rest \u670D\u52A1\u63A5\u53E3\ndocker run --rm -p 3000:3000 -v $PWD:/host --name postgrest postgrest/postgrest postgrest /host/postgrest.conf\n# \u542F\u52A8 SwaggerUI\n# http://localhost:8081 \u4E3A swagger ui\ndocker run --rm -p 8081:8080 -e API_URL=http://localhost:3000 swaggerapi/swagger-ui\n"})}),"\n",(0,r.jsx)(t.h2,{id:"3-\u6570\u636E\u63A7\u5236\u53F0",children:"3. \u6570\u636E\u63A7\u5236\u53F0"}),"\n",(0,r.jsx)(t.p,{children:"\u6253\u5F00 DataGrip, \u65B0\u589E PostgreSQL \u6570\u636E\u6E90, \u4E3B\u673A localhost, \u7AEF\u53E3 5432, \u8D26\u53F7 postgres \u5BC6\u7801 OP6Ats \u6570\u636E\u5E93 yky"}),"\n",(0,r.jsx)(t.p,{children:"\u6253\u5F00\u63A7\u5236\u53F0, \u6267\u884C SQL"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"-- \u8BBE\u7F6E\u641C\u7D22\u8DEF\u5F84, \u4E3B\u8981\u4FEE\u6539\u5F53\u524D schema\nset search_path=servicer,public;\n\n\n-- \u5BA2\u6237\ncreate table customer (\n  id       int generated by default as identity,\n\n  -- \u57FA\u7840\u4FE1\u606F\n  name     text not null,\n  type     text not null, -- \u62DF\u8BBE\u7ACB, \u5DF2\u8BBE\u7ACB\n  email    text,\n  wechat   text,\n  qq       text,\n\n  source   text not null,\n  state    text,\n  remark   text,\n\n  addition jsonb,\n  --\n  primary key (id)\n);\n"})}),"\n",(0,r.jsx)(t.p,{children:"\u6267\u884C\u5B8C\u6210\u540E\u8981\u8BA9 PostgREST \u4ECE\u65B0\u626B\u63CF\u6570\u636E\u5E93"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"docker kill -s HUP postgrest\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u5237\u65B0 ",(0,r.jsx)(t.a,{href:"http://localhost:8081",children:"http://localhost:8081"})," \u5373\u53EF\u770B\u5230\u65B0\u7684\u63A5\u53E3, \u5F80\u540E\u7684\u64CD\u4F5C\u4FBF\u662F\u9010\u6E10\u5B8C\u5584\u6570\u636E\u5E93\u548C\u719F\u6089\u4EA7\u54C1\u6570\u636E\u6A21\u578B."]})]})}function p(e={}){let{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},17776:function(e,t,n){n.d(t,{R:()=>o,x:()=>a});var s=n(7378);let r={},l=s.createContext(r);function o(e){let t=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(l.Provider,{value:t},e.children)}}}]);